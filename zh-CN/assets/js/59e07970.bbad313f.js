"use strict";(self.webpackChunkapache_streampark_website=self.webpackChunkapache_streampark_website||[]).push([[539],{17998:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var a=s(86070),t=s(76113);const i={slug:"streampark-usercase-joymaker",title:"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5",tags:["StreamPark","\u751f\u4ea7\u5b9e\u8df5"]},r=void 0,o={permalink:"/zh-CN/blog/streampark-usercase-joymaker",editUrl:"https://github.com/apache/incubator-streampark-website/edit/dev/blog/12-streampark-usercase-joymaker.md",source:"@site/i18n/zh-CN/docusaurus-plugin-content-blog/12-streampark-usercase-joymaker.md",title:"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5",description:"\u5bfc\u8bfb\uff1a\u672c\u6587\u4e3b\u8981\u8be6\u7ec6\u4ecb\u7ecd\u6b22\u4e50\u4e92\u5a31\u5728\u5b9e\u6218\u4e2d\u5bf9\u5927\u6570\u636e\u6280\u672f\u67b6\u6784\u7684\u5e94\u7528\uff0c\u9610\u8ff0\u4e3a\u4f55\u9009\u62e9  \u201cKubernetes + StreamPark\u201d \u6765\u6301\u7eed\u4f18\u5316\u548c\u589e\u5f3a\u73b0\u6709\u7684\u67b6\u6784\u3002\u4e0d\u4ec5\u7cfb\u7edf\u5730\u9610\u8ff0\u4e86\u5982\u4f55\u5728\u5b9e\u9645\u73af\u5883\u4e2d\u90e8\u7f72\u5e76\u8fd0\u7528\u8fd9\u4e9b\u5173\u952e\u6280\u672f\uff0c\u66f4\u662f\u6df1\u5165\u5730\u8bb2\u89e3\u4e86 StreamPark \u7684\u5b9e\u8df5\u4f7f\u7528\uff0c\u5f3a\u8c03\u7406\u8bba\u4e0e\u5b9e\u8df5\u7684\u5b8c\u7f8e\u878d\u5408\uff0c\u76f8\u4fe1\u8bfb\u8005\u901a\u8fc7\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff0c\u5c06\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u638c\u63e1\u76f8\u5173\u6280\u672f\uff0c\u5e76\u80fd\u5728\u5b9e\u8df5\u4e2d\u8fdb\u6b65\uff0c\u4ece\u800c\u53d6\u5f97\u663e\u8457\u7684\u5b66\u4e60\u6548\u679c\u3002",date:"2024-10-18T07:44:07.000Z",tags:[{label:"StreamPark",permalink:"/zh-CN/blog/tags/stream-park"},{label:"\u751f\u4ea7\u5b9e\u8df5",permalink:"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5"}],readingTime:37.65,hasTruncateMarker:!0,authors:[],frontMatter:{slug:"streampark-usercase-joymaker",title:"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5",tags:["StreamPark","\u751f\u4ea7\u5b9e\u8df5"]},unlisted:!1,prevItem:{title:"Apache StreamPark\u2122 \u52a9\u529b\u5929\u773c\u67e5\u5b9e\u65f6\u5e73\u53f0\u5efa\u8bbe\uff5c\u6548\u7387\u6570\u500d\u63d0\u5347",permalink:"/zh-CN/blog/streampark-usercase-tianyancha"},nextItem:{title:"\u8054\u901a Flink \u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5316\u8fd0\u7ef4\u5b9e\u8df5",permalink:"/zh-CN/blog/streampark-usercase-chinaunion"}},c={authorsImageUrls:[]},l=[{value:"<strong>1. \u4e1a\u52a1\u80cc\u666f\u4e0e\u6311\u6218</strong>",id:"1-\u4e1a\u52a1\u80cc\u666f\u4e0e\u6311\u6218",level:2},{value:"<strong>2. \u89e3\u51b3\u65b9\u6848\u9009\u578b</strong>",id:"2-\u89e3\u51b3\u65b9\u6848\u9009\u578b",level:2},{value:"<strong>3. \u843d\u5730\u5b9e\u8df5 - \u73af\u5883\u51c6\u5907\u7bc7</strong>",id:"3-\u843d\u5730\u5b9e\u8df5---\u73af\u5883\u51c6\u5907\u7bc7",level:2},{value:"<strong>3.1. \u51c6\u5907 Kubernetes \u73af\u5883</strong>",id:"31-\u51c6\u5907-kubernetes-\u73af\u5883",level:3},{value:"<strong>3.2. \u5b89\u88c5 StreamPark</strong>",id:"32-\u5b89\u88c5-streampark",level:3},{value:"<strong>3.3. \u5b89\u88c5 Maven</strong>",id:"33-\u5b89\u88c5-maven",level:3},{value:"<strong>3.4 \u5b89\u88c5 Docker</strong>",id:"34-\u5b89\u88c5-docker",level:3},{value:"<strong>3.5. Kubectl \u5de5\u5177\u5b89\u88c5</strong>",id:"35-kubectl-\u5de5\u5177\u5b89\u88c5",level:3},{value:"<strong>3.6. \u5b89\u88c5\u914d\u7f6e Flink</strong>",id:"36-\u5b89\u88c5\u914d\u7f6e-flink",level:3},{value:"<strong>4. \u843d\u5730\u5b9e\u8df5 - StreamPark \u4f7f\u7528\u7bc7</strong>",id:"4-\u843d\u5730\u5b9e\u8df5---streampark-\u4f7f\u7528\u7bc7",level:2},{value:"<strong>4.1. \u914d\u7f6e Flink Home</strong>",id:"41-\u914d\u7f6e-flink-home",level:3},{value:"<strong>4.2. \u521b\u5efa Flink Session</strong>",id:"42-\u521b\u5efa-flink-session",level:3},{value:"<strong>4.3. \u4efb\u52a1\u914d\u7f6e</strong>",id:"43-\u4efb\u52a1\u914d\u7f6e",level:3},{value:"<strong>4.4. \u6784\u5efa\u4efb\u52a1</strong>",id:"44-\u6784\u5efa\u4efb\u52a1",level:3},{value:"<strong>4.5. \u901a\u77e5\u544a\u8b66\u914d\u7f6e\uff08\u975e\u5fc5\u9009\uff09</strong>",id:"45-\u901a\u77e5\u544a\u8b66\u914d\u7f6e\u975e\u5fc5\u9009",level:3},{value:"<strong>5. \u843d\u5730\u5b9e\u8df5 - \u4f5c\u4e1a\u5e94\u7528\u573a\u666f\u7bc7</strong>",id:"5-\u843d\u5730\u5b9e\u8df5---\u4f5c\u4e1a\u5e94\u7528\u573a\u666f\u7bc7",level:2},{value:"<strong>5.1. \u8c03\u4f18\u5efa\u8bae</strong>",id:"51-\u8c03\u4f18\u5efa\u8bae",level:3},{value:"<strong>5.2. \u6570\u636eCDC\u540c\u6b65</strong>",id:"52-\u6570\u636ecdc\u540c\u6b65",level:3},{value:"<strong>6.  \u843d\u5730\u5b9e\u8df5 - \u817e\u8baf\u4e91\u73af\u5883\u7bc7</strong>",id:"6--\u843d\u5730\u5b9e\u8df5---\u817e\u8baf\u4e91\u73af\u5883\u7bc7",level:2},{value:"<strong>7.  \u6536\u76ca\u4e0e\u671f\u671b</strong>",id:"7--\u6536\u76ca\u4e0e\u671f\u671b",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(91097).A+"",width:"1080",height:"460"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5bfc\u8bfb"}),"\uff1a\u672c\u6587\u4e3b\u8981\u8be6\u7ec6\u4ecb\u7ecd\u6b22\u4e50\u4e92\u5a31\u5728\u5b9e\u6218\u4e2d\u5bf9\u5927\u6570\u636e\u6280\u672f\u67b6\u6784\u7684\u5e94\u7528\uff0c\u9610\u8ff0\u4e3a\u4f55\u9009\u62e9  \u201cKubernetes + StreamPark\u201d \u6765\u6301\u7eed\u4f18\u5316\u548c\u589e\u5f3a\u73b0\u6709\u7684\u67b6\u6784\u3002\u4e0d\u4ec5\u7cfb\u7edf\u5730\u9610\u8ff0\u4e86\u5982\u4f55\u5728\u5b9e\u9645\u73af\u5883\u4e2d\u90e8\u7f72\u5e76\u8fd0\u7528\u8fd9\u4e9b\u5173\u952e\u6280\u672f\uff0c\u66f4\u662f\u6df1\u5165\u5730\u8bb2\u89e3\u4e86 StreamPark \u7684\u5b9e\u8df5\u4f7f\u7528\uff0c\u5f3a\u8c03\u7406\u8bba\u4e0e\u5b9e\u8df5\u7684\u5b8c\u7f8e\u878d\u5408\uff0c\u76f8\u4fe1\u8bfb\u8005\u901a\u8fc7\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff0c\u5c06\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u638c\u63e1\u76f8\u5173\u6280\u672f\uff0c\u5e76\u80fd\u5728\u5b9e\u8df5\u4e2d\u8fdb\u6b65\uff0c\u4ece\u800c\u53d6\u5f97\u663e\u8457\u7684\u5b66\u4e60\u6548\u679c\u3002"]}),"\n",(0,a.jsxs)(e.p,{children:["Github: ",(0,a.jsx)(e.a,{href:"https://github.com/apache/streampark",children:"https://github.com/apache/streampark"})]}),"\n",(0,a.jsx)(e.p,{children:"\u6b22\u8fce\u5173\u6ce8\u3001Star\u3001Fork\uff0c\u53c2\u4e0e\u8d21\u732e"}),"\n",(0,a.jsx)(e.p,{children:"\u4f9b\u7a3f\u5355\u4f4d | \u6b22\u4e50\u4e92\u5a31"}),"\n",(0,a.jsx)(e.p,{children:"\u6587\u7ae0\u4f5c\u8005 | \u675c\u9065"}),"\n",(0,a.jsx)(e.p,{children:"\u6587\u7ae0\u6574\u7406 | \u6768\u6797\u4f1f"}),"\n",(0,a.jsx)(e.p,{children:"\u5185\u5bb9\u6821\u5bf9 | \u6f58\u6708\u9e4f"}),"\n",(0,a.jsx)(e.p,{children:"\u6b22\u4e50\u4e92\u5a31\uff0c\u662f\u4e00\u5bb6\u5168\u7403\u6e38\u620f\u7814\u53d1\u548c\u53d1\u884c\u516c\u53f8\uff1b\u516c\u53f8\u4ea7\u54c1\u805a\u7126\u5728 MMORPG \u548c MMOACT \u4e24\u5927\u54c1\u7c7b\uff1b\u6b22\u4e50\u4ea7\u54c1\u7406\u5ff5\uff1a\u201c\u5b81\u505a100\u4eba\u5c16\u53eb\u7684\u4ea7\u54c1\uff0c\u4e0d\u505a1\u4e07\u4eba\u53eb\u597d\u7684\u4ea7\u54c1\u201d\uff1b\u6b22\u4e50\u51fa\u54c1\uff0c\u5fc5\u5c5e\u7cbe\u54c1\u3002\u300aRO\u4ed9\u5883\u4f20\u8bf4\uff1a\u7231\u5982\u521d\u89c1\u300b\u4e0a\u7ebf\u4e1c\u5357\u4e9a\uff0c\u9884\u7ea6\u671f\u95f4\u8fbe\u6210\u4e86 1000 \u4e07\u9884\u7ea6\u7684\u91cc\u7a0b\u7891\uff0c\u4e0a\u7ebf\u9996\u65e5\u53d6\u5f97\u4e94\u56fd\u7545\u9500\u699c\u7b2c\u4e00\uff0c\u5e76\u5728\u65e5\u97e9\u7f8e\u3001\u6e2f\u6fb3\u53f0\u7b49\u5730\u90fd\u6709\u53d1\u884c\uff0c\u53d6\u5f97\u4e86\u4e0d\u9519\u7684\u6210\u7ee9\u3002"}),"\n",(0,a.jsx)(e.h2,{id:"1-\u4e1a\u52a1\u80cc\u666f\u4e0e\u6311\u6218",children:(0,a.jsx)(e.strong,{children:"1. \u4e1a\u52a1\u80cc\u666f\u4e0e\u6311\u6218"})}),"\n",(0,a.jsx)(e.p,{children:"\u6b22\u4e50\u4e92\u5a31\u76ee\u524d\u4f7f\u7528\u7684\u5927\u6570\u636e\u5e95\u5ea7\u662f\u817e\u8baf\u4e91\u7684 EMR\uff0c\u6570\u4ed3\u67b6\u6784\u4e3b\u8981\u5206\u4e3a\u4e86\u5982\u4e0b\u51e0\u7c7b\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u79bb\u7ebf\u6570\u4ed3\u67b6\u6784"}),"\uff1aHadoop + Hive + Dolphinscheduler + Trino"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5b9e\u65f6\u6570\u4ed3\u67b6\u6784"}),"\uff1aKafka + Flink + StreamPark + Doris"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u6d41\u5f0f\u6570\u4ed3\u67b6\u6784\uff08\u89c4\u5212\u4e2d\uff09"}),"\uff1aPaimon + Flink + StreamPark + Doris"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"\u5176\u4e2d\uff0c\u6d41\u5f0f\u6570\u4ed3\u67b6\u6784\u662f\u6211\u4eec 2024 \u5e74\u7684\u91cd\u70b9\u8ba1\u5212\u4e4b\u4e00\uff0c\u76ee\u6807\u662f\u57fa\u4e8e Kubernetes \u7684\u5f39\u6027\u7279\u70b9\u4ee5\u63d0\u9ad8\u5927\u6570\u636e\u5206\u6790\u80fd\u529b\u53ca\u5404\u79cd\u6570\u636e\u4ea7\u54c1\u7684\u4ef7\u503c\u8f93\u51fa\u3002\u7136\u800c\uff0c\u7531\u4e8e\u65e9\u524d\u7684\u67b6\u6784\u539f\u56e0\uff08\u4e3b\u8981\u662f Apache Doris \u548c EMR \u6838\u5fc3\u8282\u70b9\u7684\u6df7\u90e8\u7f72\uff09\uff0c\u8ba9\u6211\u4eec\u9047\u5230\u4e86\u8bb8\u591a\u95ee\u9898\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u8d44\u6e90\u4e89\u593a"}),"\uff1a\u5728 YARN \u8d44\u6e90\u8c03\u5ea6\u5e73\u53f0\u4e0b\uff0cApache Doris\u3001Apache Flink \u5b9e\u65f6\u4efb\u52a1\u3001Hive \u7684\u79bb\u7ebf\u4efb\u52a1\u4ee5\u53ca Spark \u7684 SQL \u4efb\u52a1\u7ecf\u5e38\u4e89\u62a2 CPU \u548c\u5185\u5b58\u8d44\u6e90\uff0c\u5bfc\u81f4 Doris \u67e5\u8be2\u7a33\u5b9a\u6027\u4e0b\u964d\uff0c\u67e5\u8be2\u9519\u8bef\u9891\u7e41\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u8d44\u6e90\u4e0d\u8db3"}),"\uff1aYARN \u7684\u673a\u5668\u8d44\u6e90\u4f7f\u7528\u7387\u5927\u90e8\u5206\u65f6\u95f4\u4f4d\u4e8e 70\uff05 \u81f3 80\uff05 \u4e4b\u95f4\uff0c\u7279\u522b\u662f\u5728\u5927\u91cf\u7684\u8865\u6570\u7684\u573a\u666f\u4e0b\uff0c\u96c6\u7fa4\u8d44\u6e90\u5f80\u5f80\u4e0d\u8db3\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u4eba\u5de5\u5e72\u9884"}),"\uff1a\u5b9e\u65f6 Flink \u7684\u4efb\u52a1\u8d8a\u6765\u8d8a\u591a\uff0c\u5404\u6e38\u620f\u7684\u6570\u636e\u5728\u4e00\u5929\u5185\u6709\u660e\u663e\u7684\u6ce2\u5cf0\u6ce2\u8c37\u53d8\u5316\uff0c\u7279\u522b\u662f\u5728\u5468\u672b\u8fdb\u884c\u7684\u6302\u673a\u6d3b\u52a8\uff0c\u6570\u636e\u91cf\u7ffb\u500d\uff0c\u751a\u81f3\u589e\u52a0\u81f3\u6bcf\u5929\u8d85\u8fc7 100 \u4ebf\u6761\uff0c\u800c\u4e14\u8fd9\u9700\u8981\u9891\u7e41\u5730\u624b\u52a8\u8c03\u6574\u5e76\u884c\u5ea6\u6765\u9002\u5e94\u8ba1\u7b97\u538b\u529b\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u6d88\u8d39\u80fd\u529b\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"2-\u89e3\u51b3\u65b9\u6848\u9009\u578b",children:(0,a.jsx)(e.strong,{children:"2. \u89e3\u51b3\u65b9\u6848\u9009\u578b"})}),"\n",(0,a.jsxs)(e.p,{children:["\u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u95ee\u9898\uff0c\u6211\u4eec\u5bfb\u6c42\u80fd\u591f\u8fdb\u884c \u201c",(0,a.jsx)(e.strong,{children:"\u8d44\u6e90\u5f39\u6027\u4f38\u7f29"}),"\u201d \u548c \u201c",(0,a.jsx)(e.strong,{children:"\u4efb\u52a1\u7ba1\u7406"}),"\u201d \u7684\u76f8\u5173\u7ec4\u4ef6\uff0c\u540c\u65f6\u8003\u8651\u5230\u5927\u6570\u636e\u4e91\u539f\u751f\u7684\u8d8b\u52bf\uff0c\u91c7\u7528\u4e91\u539f\u751f\u7684\u67b6\u6784\u8feb\u5728\u7709\u776b\uff0c Kubernetes \u67b6\u6784\u4e0b\u80fd\u4e3a\u5927\u6570\u636e\u8fd0\u7ef4\u51cf\u8d1f\u3001\u63d0\u4f9b\u9ad8\u53ef\u7528\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u7070\u5ea6\u66f4\u65b0\u7b49\u66f4\u597d\u66f4\u7a33\u5b9a\u7684\u80fd\u529b\u3002"]}),"\n",(0,a.jsxs)(e.p,{children:["\u540c\u65f6\u7b80\u5316 Apache Flink \u5b9e\u65f6\u4efb\u52a1\u7684\u5f00\u53d1\u548c\u8fd0\u7ef4\u4e5f\u662f\u4e0d\u5f97\u4e0d\u9762\u5bf9\u7684\u95ee\u9898\uff0c\u81ea 2022 \u5e74\u4e2d\u65ec\u5f00\u59cb\uff0c\u5c31\u91cd\u70b9\u7814\u7a76 Flink \u76f8\u5173\u7684\u5f00\u6e90\u548c\u5546\u4e1a\u5316\u76f8\u5173\u7684\u9879\u76ee\uff0c\u5728\u8fdb\u884c\u6280\u672f\u9009\u578b\u65f6\uff0c\u516c\u53f8\u4e3b\u8981\u4ece\u51e0\u4e2a\u5173\u952e\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6df1\u5165\u8003\u5bdf\uff0c\u5305\u62ec\uff1a",(0,a.jsx)(e.strong,{children:"Kubernetes \u5bb9\u5668\u5316\u90e8\u7f72\u3001\u8f7b\u91cf\u7a0b\u5ea6\u3001\u591a Flink\u7248\u672c\u7684\u652f\u6301\u3001\u529f\u80fd\u7684\u5b8c\u5907\u6027\u3001\u591a\u79cd\u90e8\u7f72\u6a21\u5f0f\u3001\u5bf9 CI/CD \u7684\u652f\u6301\u4ee5\u53ca\u7a33\u5b9a\u6027\u3001\u6210\u719f\u5ea6\u7b49\uff0c\u6700\u7ec8\u4e0d\u51fa\u610f\u5916\u7684\u9009\u62e9\u4e86 Apache StreamPark\u3002"})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(63689).A+"",width:"1080",height:"496"})}),"\n",(0,a.jsx)(e.p,{children:"\u6211\u4eec\u5728\u4f7f\u7528 StreamPark \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u5176\u8fdb\u884c\u4e86\u6df1\u5165\u7684\u5e94\u7528\u548c\u63a2\u7d22\uff0c\u5df2\u7ecf\u6210\u529f\u5b9e\u73b0\u4e86100+ Flink \u4efb\u52a1\u8f7b\u677e\u90e8\u7f72\u5230 Kubernetes\uff0c\u53ef\u4ee5\u5341\u5206\u65b9\u4fbf\u5730\u8fdb\u884c\u4f5c\u4e1a\u7ba1\u7406\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u63a5\u4e0b\u6765\uff0c\u5c06\u8be6\u8ff0\u6211\u4eec\u662f\u5982\u4f55\u4f7f\u7528 StreamPark \u5b9e\u73b0 Flink on kubernetes \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u5b9e\u8df5\u8fc7\u7a0b\uff0c\u5c3d\u7ba1\u5185\u5bb9\u8f83\u957f\uff0c\u4f46\u662f\u5e72\u8d27\u6ee1\u6ee1\uff0c\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u7684\u51e0\u4e2a\u90e8\u5206\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u73af\u5883\u51c6\u5907\u7bc7"}),"\uff1a\u8fd9\u90e8\u5206\u4ecb\u7ecd Kubernetes\u3001StreamPark\u3001Maven\u3001Docker\u3001kubectl \u5de5\u5177\u548c Flink \u7684\u5b89\u88c5\u4e0e\u914d\u7f6e\u8fc7\u7a0b\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"StreamPark \u4f7f\u7528\u7bc7"}),"\uff1a\u8fd9\u90e8\u5206\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 StreamPark \u542f\u52a8 Session \u96c6\u7fa4\uff0c\u4ee5\u53ca\u90e8\u7f72 SQL\u3001JAR \u4f5c\u4e1a\u7684\u6d41\u7a0b\u7b49\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Flink \u4efb\u52a1\u5e94\u7528\u573a\u666f\u7bc7"}),"\uff1a\u5728\u8fd9\u4e00\u90e8\u5206\uff0c\u5c06\u5206\u4eab\u6b22\u4e50\u4e92\u5a31\u5b9e\u9645\u8fd0\u7528 Flink \u4efb\u52a1\u7684\u5b9e\u8df5\u573a\u666f\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"3-\u843d\u5730\u5b9e\u8df5---\u73af\u5883\u51c6\u5907\u7bc7",children:(0,a.jsx)(e.strong,{children:"3. \u843d\u5730\u5b9e\u8df5 - \u73af\u5883\u51c6\u5907\u7bc7"})}),"\n",(0,a.jsx)(e.p,{children:"\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u4ece\u5b89\u88c5\u5f00\u59cb\u8be6\u7ec6\u4ecb\u7ecd StreamPark \u7684\u843d\u5730\u5b9e\u8df5,\u5173\u4e8e\u817e\u8baf\u4e91\u4ea7\u54c1\u7684\u4e00\u4e9b\u4f7f\u7528\u6b65\u9aa4\uff0c\u5c06\u5728\u6587\u672b\u7b80\u8981\u4ecb\u7ecd\uff0c\u6b64\u5904\u4e3b\u8981\u5206\u4eab\u6838\u5fc3\u7684\u6b65\u9aa4\u3002"}),"\n",(0,a.jsx)(e.h3,{id:"31-\u51c6\u5907-kubernetes-\u73af\u5883",children:(0,a.jsx)(e.strong,{children:"3.1. \u51c6\u5907 Kubernetes \u73af\u5883"})}),"\n",(0,a.jsx)(e.p,{children:"\u6b22\u4e50\u4e92\u5a31\u7684 Kubernetes \u73af\u5883\u4f7f\u7528\u7684\u662f\u817e\u8baf\u4e91\u5bb9\u5668\u670d\u52a1\u4ea7\u54c1\uff0c\u5176\u4e2d Kubernetes \u547d\u540d\u7a7a\u95f4\u4e3b\u8981\u5212\u5206\u5982\u4e0b\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Apache Doris"}),"\uff1aDoris \u96c6\u7fa4 + 3 FE\uff08\u6807\u51c6\u8282\u70b9\uff09 + CN\uff081 \u53f0\u8d85\u7ea7\u8282\u70b9\uff09\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Apache Flink"}),"\uff1aFlink \u96c6\u7fa4\u7531\u4e00\u4e2a\u8d85\u7ea7\u8282\u70b9\u7ec4\u6210\uff0c\u8fd9\u4e2a\u8282\u70b9\u76f8\u5f53\u4e8e\u4e00\u53f0\u8d85\u5927\u8d44\u6e90\u7684\u673a\u5668\uff0c\u4f7f\u7528\u8d77\u6765\u975e\u5e38\u7b80\u5355\uff0c\u5e76\u4e14\u53ef\u4ee5\u8fc5\u901f\u5f39\u6027\u6269\u5c55\u5230\u6570\u4ee5\u4e07\u8ba1\u7684 pod\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"BigData"}),"\uff1a\u5305\u542b\u5404\u79cd\u5927\u6570\u636e\u7ec4\u4ef6\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"\u53e6\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e24\u53f0\u539f\u751f\u8282\u70b9\uff0c\u4e3b\u8981\u7528\u4e8e\u90e8\u7f72 StreamPark\u3001Dolphinscheduler \u4ee5\u53ca Prometheus + Grafana\u3002\u96c6\u7fa4\u4fe1\u606f\u76f8\u5173\u622a\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(82094).A+"",width:"1080",height:"580"})}),"\n",(0,a.jsx)(e.h3,{id:"32-\u5b89\u88c5-streampark",children:(0,a.jsx)(e.strong,{children:"3.2. \u5b89\u88c5 StreamPark"})}),"\n",(0,a.jsx)(e.p,{children:"\u6211\u4eec\u91c7\u7528\u7684\u662f StreamPark 2.1.4 \u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\uff0c\u8be5\u7248\u672c\u4fee\u590d\u4e86\u4e00\u4e9b Bug\uff0c\u5e76\u589e\u52a0\u4e86\u4e00\u4e9b\u65b0\u7684\u7279\u6027\uff0c\u5982\u652f\u6301 Flink 1.18\u3001Jar \u4efb\u52a1\u652f\u6301\u901a\u8fc7 pom \u6216\u8005\u4e0a\u4f20\u4f9d\u8d56\u7b49\u3002"}),"\n",(0,a.jsxs)(e.p,{children:["\u867d\u7136 StreamPark \u652f\u6301 Docker \u548c Kubernetes \u90e8\u7f72\uff0c\u4f46\u662f\u51fa\u4e8e\u8282\u7701\u65f6\u95f4\u548c\u5bf9\u6240\u6709\u5927\u6570\u636e\u7ec4\u4ef6\u9700\u8981\u8fdb\u884c\u9876\u5c42\u8bbe\u8ba1\u5bb9\u5668\u5316\u7684\u8003\u8651\uff0c\u6211\u4eec\u5f53\u524d\u9009\u62e9\u4e86",(0,a.jsx)(e.strong,{children:"\u5728\u4e91\u4e0a\u7684 CVM \u4e0a\u8fdb\u884c StreamPark \u7684\u5feb\u901f\u642d\u5efa"}),"\uff0c\u4ee5\u4e0b\u662f StreamPark \u7684\u5b89\u88c5\u90e8\u7f72\u811a\u672c\uff1a"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"#\u4f7f\u7528 root \u7528\u6237\u8fdb\u5165\u5b89\u88c5\u76ee\u5f55\uff08\u9700\u5148\u6709 java \u73af\u5883\uff09\u548c k8s \u73af\u5883\u540c\u4e00\u4e2a\u7f51\u6bb5\uff01\uff01\uff01\u53ef\u4ee5\u7701\u4e8b\ncd /data     \n\n#\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\nwget https://dlcdn.apache.org/incubator/streampark/2.1.4/apache-streampark_2.12-2.1.4-incubating-bin.tar.gz   \n\n#\u4e0e\u63d0\u4f9b\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u3001\u4fdd\u8bc1\u5305\u7684\u5b8c\u6210\u6027\nsha512sum apache-streampark_2.12-2.1.2-incubating-bin.tar.gz  #\u89e3\u538b\u7f29\ntar -xzvf apache-streampark_2.12-2.1.2-incubating-bin.tar.gz  #\u6539\u540d\nmv apache-streampark_2.12-2.1.2-incubating-bin streampark_2.12-2.1.2 #\u521b\u5efa\u8f6f\u94fe\nln -s streampark_2.12-2.1.2  streampark\n\n#\u4fee\u6539\u6570\u636e\u5e93\u914d\u7f6e\nvim /data/streampark/conf/application-mysql.ymlspring:\n  datasource:\n    username: root\n    password: xxxxx\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://10.16.x.x:3306/streampark_k8s?...\n\n# \u4fee\u6539 streampark \u6838\u5fc3\u914d\u7f6e \u53ef\u4ee5\u4fee\u6539\u4e0b\u7aef\u53e3\uff08\u56e0\u4e3a k8s nodeport \u7aef\u53e3\u8303\u56f4  30000-32767\uff09 \u6545\u53ef\u4ee5\u914d\u7f6e\u8fd9\u4e2a\u8303\u56f4 \u7701\u53bb\u7aef\u53e3\u5bf9\u5916\u5f00\u53d1\u518d\u914d\u7f6e  \u6216\u8005\u8d26\u53f7\u5bc6\u7801  \u6211\u4eec\u5b58\u50a8\u7528 cos \u6545\u4e0d\u914d\u7f6e hdfs\nvim /data/streampark/conf/application.yml      workspace:\n   local: /data/streampark/streampark_workspace #\u521b\u5efa\u9700\u8981\u7684\u76ee\u5f55\n   \n   \nmkdir -p  vim /data/streampark/conf/application.yml\n\n#\u521d\u59cb\u5316 streampark \u7684\u6570\u636e\u5e93\u8868 \u8981\u6c42\u73af\u5883\u6709 mysql \u5ba2\u6237\u7aef  \u6267\u884c\u5b8c\u53ef\u4ee5\u53bb mysql \u4e2d\u770b\u4e0b\u5e93\u8868\u662f\u5426\u5b58\u5728\nmysql -u root -p xxxxx < /data/streampark/script/schema/mysql-schema.sql\n\n#\u6dfb\u52a0\u4f9d\u8d56\u7684 mysql-connector \u5305 \u56e0\u4e3a streampark lib\u4e0b\u9762\u6ca1\u6709  \u5728 /data/streampark/lib\u4e0b\u6267\u884c\nwget https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar \n\n#\u542f\u52a8\u5e76\u767b\u9646 \u53ef\u4ee5\u5148\u9a8c\u8bc1\u4e0b java  \u73af\u5883  java -version \u786e\u4fdd\u6ca1\u95ee\u9898   \u5728 /data/streampark/lib\u4e0b\u6267\u884c\n ./startup.sh \n"})}),"\n",(0,a.jsx)(e.h3,{id:"33-\u5b89\u88c5-maven",children:(0,a.jsx)(e.strong,{children:"3.3. \u5b89\u88c5 Maven"})}),"\n",(0,a.jsx)(e.p,{children:"\u5728 StreamPark \u4e0a\u914d\u7f6e Flink \u4efb\u52a1\u65f6\u53ef\u4ee5\u901a\u8fc7 maven \u4e0b\u8f7d\u76f8\u5173\u4f9d\u8d56\uff0c\u4e0b\u9762\u662f Maven \u7684\u5b89\u88c5\u914d\u7f6e\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"#\u4e0b\u8f7d maven \u540c root \u7528\u6237\u64cd\u4f5c\ncd /data && wget https://dlcdn.apache.org/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.tar.gz\n\n#\u68c0\u9a8c\u5b89\u88c5\u5305\u5b8c\u6574\nsha512sum apache-maven-3.9.6-bin.tar.gz \n\n#\u89e3\u538b  \u8f6f\u8fde\ntar -xzvf apache-maven-3.9.6-bin.tar.gz \nln -s apache-maven-3.9.6 maven\n\n# \u8bbe\u7f6e\u963f\u91cc\u4e91\u4ed3\u5e93 maven mirror\uff0c\u52a0\u901f\u4e0b\u8f7d\nvim /data/maven/conf/settings.xml\n\n<mirror>\n   <id>alimaven</id>\n  <mirrorOf>central</mirrorOf>\n  <name>aliyun maven</name>\n  <url>https://maven.aliyun.com/repository/central</url>\n</mirror>\n\n<mirror>\n  <id>alimaven</id>\n  <name>aliyun maven</name>\n  <url>http://maven.aliyun.com/nexus/content/groups/public/</url>\n  <mirrorOf>central</mirrorOf>\n </mirror>\n\n#\u73af\u5883\u53d8\u91cf \u6700\u540e\u6dfb\u52a0\nvim /etc/profile\nexport MAVEN_HOME=/data/maven\nPATH=$MAVEN_HOME/bin:$PATH\n\n#\u751f\u6548 \u9a8c\u8bc1\nsource /etc/profile  && mvn -version\n"})}),"\n",(0,a.jsx)(e.h3,{id:"34-\u5b89\u88c5-docker",children:(0,a.jsx)(e.strong,{children:"3.4 \u5b89\u88c5 Docker"})}),"\n",(0,a.jsx)(e.p,{children:"\u56e0\u4e3a StreamPark \u4f7f\u7528 Kubernetes \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 Docker \u6765\u6784\u5efa\u548c\u4e0a\u4f20\u955c\u50cf\u5230\u516c\u53f8\u5e38\u7528\u7684 Harbor \u955c\u50cf\u670d\u52a1\u4e2d\uff0c\u4ee5\u4e0b\u662f Docker \u7684\u5b89\u88c5\u811a\u672c"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"#\u5378\u8f7d\u65e7\u7248\u672c \u5982\u679c\u6709\nsudo yum remove docker \\\n          docker-client \\\n          docker-client-latest \\\n          docker-common \\\n          docker-latest \\\n          docker-latest-logrotate \\\n          docker-logrotate \\\n          docker-engine\n\n#\u4e0b\u8f7d\u955c\u50cf\u4ed3\u5e93\nwget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo      #\u963f\u91cc\u4e91docker-ce \u955c\u50cf\n\n#\u66f4\u65b0\u8f6f\u4ef6\u5305\u7d22\u5f15 \nyum makecache     \n\n#\u4e0b\u8f7d\u5b89\u88c5\nyum install docker-ce docker-ce-cli containerd.io -y # docker-ce \u793e\u533a\u7248 ee \u4f01\u4e1a\u7248\n\n#\u542f\u52a8 \u67e5\u770b \nsystemctl start docker && docker version\n\n#\u5f00\u673a\u81ea\u542f\nsystemctl enable docker\n"})}),"\n",(0,a.jsx)(e.h3,{id:"35-kubectl-\u5de5\u5177\u5b89\u88c5",children:(0,a.jsx)(e.strong,{children:"3.5. Kubectl \u5de5\u5177\u5b89\u88c5"})}),"\n",(0,a.jsx)(e.p,{children:"\u4e3a\u4e86\u65b9\u4fbf\u4e0e Kubernetes \u96c6\u7fa4\u8fdb\u884c\u4ea4\u4e92\u3001\u8fdb\u884c\u914d\u7f6e\u67e5\u770b\u3001\u8bbf\u95ee\u65e5\u5fd7\u7b49\uff0c\u6211\u4eec\u8fd8\u5b89\u88c5\u4e86kubectl \u5de5\u5177\u3002\u5b89\u88c5 kubectl \u524d\uff0c\u9996\u5148\u9700\u8981\u5148\u4ece\u8fd9\u91cc\u83b7\u53d6 Kubernetes \u96c6\u7fa4\u7684\u8bbf\u95ee\u51ed\u8bc1\uff0c\u4e0b\u8f7d\u65b9\u5f0f\u5982\u4e0b\u56fe\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(24829).A+"",width:"1080",height:"536"})}),"\n",(0,a.jsx)(e.p,{children:"\u63a5\u7740\u4e0b\u8f7d\u914d\u7f6e\u62f7\u8d1d\u5230 root \u7528\u6237\u76ee\u5f55\uff0c\u6307\u5b9a\u76ee\u5f55\u5e76\u6539\u540d\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"# 1\uff09\u521b\u5efa\u9ed8\u8ba4\u9690\u85cf\u76ee\u5f55\nmkdir -p /root/.kube   \n\n# 2\uff09\u4e0a\u4f20 k8s \u5185\u7f51\u8bbf\u95ee\u51ed\u8bc1             \nrz cls-dtyxxxxl-config\n\n# 3\uff09\u4fee\u6539\u51ed\u8bc1\u9ed8\u8ba4\u540d\u5b57              \nmv cls-dtyxxxxl-config config  \n\n# 4\uff09\u5c06\u51ed\u8bc1\u653e\u5230\u6307\u5b9a\u4f4d\u7f6e\nmv config /root/.kube \n"})}),"\n",(0,a.jsxs)(e.p,{children:["\u5177\u4f53\u5b89\u88c5 kubetcl \u5ba2\u6237\u7aef\u547d\u4ee4\u5982\u4e0b\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u5b89\u88c5 ",(0,a.jsx)(e.strong,{children:"kubectx"})," \uff0c\u66f4\u52a0\u65b9\u4fbf\u5730\u53bb\u8bbf\u95ee\u591a\u4e2a kubernetes \u96c6\u7fa4\u548c\u5207\u6362\u56fa\u5b9a\u7684\u547d\u540d\u7a7a\u95f4\uff09\uff1a"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:'# 1\uff09\u4e0b\u8f7d\u6700\u65b0\u7248\ncurl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"\n\n# 2\uff09\u6dfb\u52a0\u6267\u884c\u6743\u9650\nchmod +x kubectl\n\n# 3\uff09\u79fb\u52a8\u5230\u5e38\u7528\u7684\u5de5\u5177\u547d\u4ee4\u4f4d\u7f6e\nmv ./kubectl /usr/local/bin/kubectl\n\n# 4\uff09\u53ef\u4ee5\u5728 /etc/profile \u6216\u8005 root\u7528\u6237\u5bb6\u76ee\u5f55\u7684  .bashrc \u4e2d\u914d\u7f6e\nvim /root/.bashrc\nexport JAVA_HOME=/usr/local/jdk1.8.0_391\nPATH=/usr/local/bin:$JAVA_HOME/bin:$PATH\n\n# 5\uff09\u9a8c\u8bc1\u5ba2\u6237\u7aef\u548c\u96c6\u7fa4\u5bc6\u94a5\nkubectl cluster-info\n'})}),"\n",(0,a.jsx)(e.p,{children:"\u6700\u540e\uff0c\u8fd8\u9700\u8981\u521b\u5efa\u4e00\u4e2a Flink \u4e13\u7528\u7684\u8d26\u6237\u51ed\u8bc1\uff08\u540e\u9762\u4f1a\u7528\u5230\uff09\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"# 1\uff09\u521b\u5efa\u547d\u540d\u7a7a\u95f4\nkubectl create namespace flink\n\n# 2\uff09\u521b\u5efa flink \u8bbf\u95ee k8s \u7684\u8d26\u53f7  \u8bb0\u5f97\u5e26\u547d\u540d\u7a7a\u95f4\uff01\nkubectl  create serviceaccount flink-service-account -n flink\n\n# 3\uff09\u7ed9\u8be5\u8d26\u53f7\u7ed1\u5b9a\u5bb9\u5668\u64cd\u4f5c\u7684\u4e00\u4e9b\u6743\u9650 \u8bb0\u5f97\u5e26\u547d\u540d\u7a7a\u95f4\uff01\uff01\uff01\nkubectl  create clusterrolebinding flink-role-binding-flink --clusterrole=edit --serviceaccount=flink:flink-service-account -n flink  \n"})}),"\n",(0,a.jsx)(e.h3,{id:"36-\u5b89\u88c5\u914d\u7f6e-flink",children:(0,a.jsx)(e.strong,{children:"3.6. \u5b89\u88c5\u914d\u7f6e Flink"})}),"\n",(0,a.jsx)(e.p,{children:"\u6211\u4eec Kubernetes \u73af\u5883\u9009\u62e9\u4e86 Flink1.17-scala2.12 Java11 \u7684\u955c\u50cf\uff0c\u56e0\u4e3a\u5f53\u65f6 Flink 1.18 \u6709\u4e9b\u4f9d\u8d56\u5305\u4e0d\u597d\u627e\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u4e0b\u8f7d\u5e76\u89e3\u538b flink-1.17.2-bin-scala_2.12.tgz \u5b89\u88c5\u5305\uff0c\u811a\u672c\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"cd /data && wget https://dlcdn.apache.org/flink/flink-1.17.2/flink-1.17.2-bin-scala_2.12.tgz\n\n#\u5b8c\u6574\u6027\u6821\u9a8c\nsha512sum flink-1.17.2-bin-scala_2.12.tgz\n\n#\u89e3\u538b\ntar -xzvf flink-1.17.2-bin-scala_2.12.tgz\n\n#\u6539\u540d\nmv flink-1.17.2-bin-scala_2.12 flink-1.17.2\n\n#\u8f6f\u8fde\nln -s flink-1.17.2 flink\n\n#\u65e7\u4e8c\u8fdb\u5236\u5305\u6536\u7eb3\nmv flink-1.17.2-bin-scala_2.12.tgz /data/softbag   \n"})}),"\n",(0,a.jsx)(e.p,{children:"\u81f3\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u628a\u73af\u5883\u642d\u5efa\u597d\u4e86\uff0c\u4e0b\u9762\u7ee7\u7eed\u6309\u6b65\u9aa4\u8be6\u7ec6\u8bb2\u89e3 StreamPark \u7684\u4f7f\u7528\u3002"}),"\n",(0,a.jsx)(e.h2,{id:"4-\u843d\u5730\u5b9e\u8df5---streampark-\u4f7f\u7528\u7bc7",children:(0,a.jsx)(e.strong,{children:"4. \u843d\u5730\u5b9e\u8df5 - StreamPark \u4f7f\u7528\u7bc7"})}),"\n",(0,a.jsx)(e.p,{children:"\u60f3\u5feb\u901f\u4e86\u89e3 StreamPark \u8fd0\u884c\u4f5c\u4e1a\u81f3 Kubernetes \u7684\u8bfb\u8005\uff0c\u53ef\u4ee5\u89c2\u770b\u4e0b\u9762\u7684\u89c6\u9891\uff1a"}),"\n",(0,a.jsx)(e.p,{children:"//\u89c6\u9891\u94fe\u63a5 (Flink On Kubernetes Application \u4e0a\u624b\u6559\u7a0b)"}),"\n",(0,a.jsx)(e.p,{children:"//\u89c6\u9891\u94fe\u63a5 (Flink On Kubernetes Session \u4e0a\u624b\u6559\u7a0b)"}),"\n",(0,a.jsx)(e.h3,{id:"41-\u914d\u7f6e-flink-home",children:(0,a.jsx)(e.strong,{children:"4.1. \u914d\u7f6e Flink Home"})}),"\n",(0,a.jsx)(e.p,{children:"\u767b\u5f55 StreamPark \u4e4b\u540e\uff0c\u5207\u6362\u81f3 Flink Home \u83dc\u5355\uff0c\u914d\u7f6e\u6211\u4eec\u5728\u524d\u9762\u89e3\u538b\u7684 Flink \u5b89\u88c5\u5305\u76ee\u5f55\uff0c\u622a\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(46843).A+"",width:"1080",height:"386"})}),"\n",(0,a.jsx)(e.h3,{id:"42-\u521b\u5efa-flink-session",children:(0,a.jsx)(e.strong,{children:"4.2. \u521b\u5efa Flink Session"})}),"\n",(0,a.jsx)(e.p,{children:"\u63a5\u7740\u5207\u6362\u5230 FlinkCluster\uff0cAdd New \u65b0\u589e\u4e00\u4e2a Flink \u96c6\u7fa4\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(71130).A+"",width:"1080",height:"508"})}),"\n",(0,a.jsx)(e.p,{children:"\u914d\u7f6e\u8be6\u60c5\u5982\u4e0b\uff0c\u4ee5\u4e0b\u662f\u7b2c\u4e00\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\uff1a"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u914d\u7f6e\u8be6\u89e3"}),"\uff1a\u96c6\u7fa4\u540d\u5b57\u548c Kubernetes \u96c6\u7fa4 ID \u6211\u4eec\u901a\u5e38\u5199\u4e00\u6837\uff0c\u586b\u5199\u6b63\u786e\u7684 Kubernetes \u670d\u52a1\u8d26\u53f7\uff0c\u8fd9\u91cc\u7684\u955c\u50cf\u4f7f\u7528\u817e\u8baf\u4e91 tcr \u4e2d\u7684\u955c\u50cf\uff0c\u5e76\u4f7f\u7528 lb \u4f5c\u4e3a\u5bf9\u5916\u8bbf\u95ee Flink UI \u7684\u65b9\u5f0f\u3002\u8fd9\u91cc\u7684\u69fd\u4e00\u822c\u8bbe\u7f6e\u4e3a 2\uff0c\u4efb\u52a1\u5e76\u884c\u5ea6\u4e00\u822c\u662f 2 \u7684\u500d\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8ba9 Session \u96c6\u7fa4\u6ca1\u6709\u95f2\u7f6e\u7684\u8d44\u6e90\uff09"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(36470).A+"",width:"933",height:"564"})}),"\n",(0,a.jsx)(e.p,{children:"\u7b2c\u4e8c\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\uff1a"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u914d\u7f6e\u8be6\u89e3"}),"\uff1a\u6211\u4eec\u91c7\u53d6\u7684\u662f Session \u6a21\u5f0f\uff0c\u4e00\u4e2a JobManager \u7ba1\u7406\u7740\u5f88\u591a\u4efb\u52a1\uff0c\u6545\u8d44\u6e90\u53ef\u4ee5\u7a0d\u5fae\u5927\u4e00\u4e9b\uff0c\u6211\u4eec\u7ed9 2G\uff0c\u7ecf\u89c2\u5bdf\u53ef\u4ee5\u6ee1\u8db3\uff0c\u4f46\u662f\u7531\u4e8e\u4efb\u52a1\u591a\uff0cJobManager \u7684\u5185\u5b58\u5206\u914d\u4e2d metaspace \u6d88\u8017\u6bd4\u8f83\u5927\uff0c\u6545\u53ef\u4ee5\u5c06\u9ed8\u8ba4\u7684 256M\uff0c\u6539\u5230 500M\uff0c\u7ecf\u8fc7\u89c2\u5bdf\uff0c\u4e00\u4e2a Session \u7ba1\u7406 10 \u4e2a\u4efb\u52a1\u4ee5\u4e0b\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5408\u7406\u3002"]}),"\n",(0,a.jsx)(e.p,{children:"TaskManager \u5185\u5b58\u5728 session \u914d\u7f6e\u7ed9\u51fa\u540e\uff0c\u5728 StreamPark \u7a0b\u5e8f\u914d\u7f6e\u9875\u5c06\u65e0\u6cd5\u4fee\u6539\uff0c\u6545\u53ef\u4ee5\u5bf9 Session \u9879\u76ee\u6570\u636e\u91cf\u8fdb\u884c\u9884\u4f30\uff0c\u6570\u636e\u91cf\u5927\u5c31\u53ef\u4ee5 \u628a \u201cCPU : \u5185\u5b58\u201d \u8c03\u6574\u5230 \u201c1 \u6838 : 2G\u201d\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u66f4\u5927\uff0c\u56e0\u4e3a\u6570\u636e\u5904\u7406\u8fd8\u6709 TaskManager \u6570\u91cf\u6709\u5173\uff0c\u4e5f\u5c31\u662f\u5e76\u884c\u5ea6\u6709\u5173\uff0c\u8fd9\u6837\u57fa\u672c\u5c31\u53ef\u4ee5\u907f\u514d\u4e00\u4e9b OOM \u95ee\u9898\uff0c\u6211\u4eec \u201c1 : 2\u201d Session \u96c6\u7fa4\u9879\u76ee\u4e00\u5929\u5904\u7406\u6570\u636e\u91cf 60 \u4ebf\uff0c18 \u4e2a\u5e76\u884c\u5ea6\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002\u9ed8\u8ba4 cpu: \u5185\u5b58 1 : 1 \u57fa\u672c ok\u3002"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(95720).A+"",width:"1080",height:"468"})}),"\n",(0,a.jsx)(e.p,{children:"\u6700\u540e\u4e00\u90e8\u5206\u7684\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(46343).A+"",width:"1080",height:"486"})}),"\n",(0,a.jsx)(e.p,{children:"\u8fd9\u91cc\u8d34\u51fa\u5177\u4f53\u7684\u6587\u672c\u5185\u5bb9\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"#\u8bbf\u95ee\u65b9\u5f0f  \u590d\u7528lb+port lb\u53ef\u4ee5\u63d0\u524d\u521b\u5efa \u4e0d\u7528k8s\u521b\u5efa  \u8fd9\u6837ip\u56fa\u5b9a\u3002\u590d\u7528\u540e\u66f4\u52a0\u65b9\u4fbf\n-Drest.port=8091\n-Dkubernetes.rest-service.annotations=service.kubernetes.io/qcloud-share-existed-lb:true,service.kubernetes.io/tke-existed-lbid:lb-iv9ixxxxx\n-Dkubernetes.rest-service.exposed.type=LoadBalancer\n\n#cp sp  \u4f7f\u7528s3\u534f\u8bae\u8bbf\u95ee\u817e\u8baf\u4e91cos  \u63d2\u4ef6\u65b9\u5f0f\u4f9d\u8d56\u5305  s3\u7684cos\u8ba4\u8bc1\n-Dcontainerized.master.env.ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar\n-Dcontainerized.taskmanager.env.EANABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar\n-Dstate.checkpoints.dir=s3://k8s-bigdata-xxxxxx/flink-checkpoints\n-Dstate.savepoints.dir=s3://k8s-bigdata-xxxxx/flink-savepoints\n\n#k8s\u4e2d\u7684\u4efb\u52a1\u8c03\u5ea6\u7b56\u7565\u3001\u8282\u70b9\u9009\u62e9\u7b56\u7565\uff0c\u56e0\u4e3aflink\u547d\u540d\u7a7a\u95f4\u662f\u903b\u8f91\u7684\uff0c\u800c\u8282\u70b9\u9009\u62e9\u7b56\u7565\u53ef\u4ee5\u8ba9\u5176\u8dd1\u5728flink\u4e13\u7528\u7684\u7269\u7406\u8d85\u7ea7\u8282\u70b9\u4e0a\u53bb\n-Dkubernetes.jobmanager.node-selector=usefor:flink\n-Dkubernetes.taskmanager.node-selector=usefor:flink\n\n#\u5f00\u542fjobmanager\u9ad8\u53ef\u7528 \u4f7f\u7528 k8s\u5b9e\u73b0\u65b9\u5f0f\u3001 \u4f7f\u7528cos\u7684\u76ee\u5f55\u5b58\u50a8  \u6574\u4f53\u5c31\u4e0d\u7528hdfs\n-Dhigh-availability.type=kubernetes\n-Dhigh-availability.storageDir=s3://k8s-bigdata-xxx/flink-recovery\n-Dkubernetes.cluster-id=streampark-share-session\n-Dkubernetes.jobmanager.replicas=2\n\n#pod\u955c\u50cf\u62c9\u53d6\u7b56\u7565\u548cflink\u53d6\u6d88cp\u7684\u4fdd\u7559 \u65f6\u533a\n-Dkubernetes.container.image.pull-policy=Always\n-Dexecution.checkpointing.externalized-checkpoint-retention=RETAIN_ON_CANCELLATION\n-Dtable.local-time-zone=Asia/Shanghai\n\n#\u955c\u50cf\u62c9\u53d6\u7f13\u5b58\u52a0\u901f  \u8be6\u7ec6\u4e0b\u6587\u6709\u89e3\u91ca\n-Dkubernetes.taskmanager.annotations=eks.tke.cloud.tencent.com/use-image-cache: imc-6iubofdt\n-Dkubernetes.jobmanager.annotations=eks.tke.cloud.tencent.com/use-image-cache: imc-6iubofdt  \n"})}),"\n",(0,a.jsx)(e.p,{children:"\u5907\u6ce8\uff1aFlink \u57fa\u7840\u4fe1\u606f\u7684\u53ef\u4ee5\u914d\u7f6e\u5230 conf \u6587\u4ef6\u4e2d\uff0c\u66f4\u591a\u7a0b\u5e8f\u901a\u7528\u7684\u5efa\u8bae\u5728 session \u4e2d\u5199\u597d\uff0cStreamPark \u4e2d\u586b\u5199 \u5e76\u884c\u5ea6/cp/sp/\u5bb9\u9519/main \u53c2\u6570\u7b49\u6bd4\u8f83\u5408\u9002\u3002"}),"\n",(0,a.jsx)(e.p,{children:"\u6700\u540e\u542f\u52a8 Session \u96c6\u7fa4\u5373\u53ef\uff0c\u53ef\u4ee5\u901a\u8fc7 kubectl \u547d\u4ee4\u6765\u67e5\u770b Flink kubernetes session \u96c6\u7fa4\u662f\u5426\u6210\u529f\u542f\u52a8\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(67532).A+"",width:"653",height:"81"})}),"\n",(0,a.jsx)(e.h3,{id:"43-\u4efb\u52a1\u914d\u7f6e",children:(0,a.jsx)(e.strong,{children:"4.3. \u4efb\u52a1\u914d\u7f6e"})}),"\n",(0,a.jsxs)(e.p,{children:["\u8fd9\u91cc\u5c06\u7ee7\u7eed\u5c55\u793a\u4f7f\u7528 StreamPark \u63d0\u4ea43\u79cd\u7c7b\u578b\u7684\u4efb\u52a1\uff0c\u5206\u522b\u662f ",(0,a.jsx)(e.strong,{children:"SQL\u4efb\u52a1\u3001Jar\u4efb\u52a1 \u4ee5\u53ca Application \u6a21\u5f0f\u4efb\u52a1"}),"\u3002"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.strong,{children:"\u63d0\u4ea4 Flink SQL \u4efb\u52a1"})}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Flink Sql \u4f5c\u4e1a\u7684\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(65944).A+"",width:"1080",height:"556"})}),"\n",(0,a.jsx)(e.p,{children:"\u5176\u4e2d\u7684 kubernetes clusterid \u586b\u5199\u5bf9\u5e94\u7684\u9879\u76ee session \u540d\u5c31\u884c\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(99072).A+"",width:"1080",height:"532"})}),"\n",(0,a.jsx)(e.p,{children:"\u52a8\u6001\u53c2\u6570\u914d\u7f6e\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"-Dstate.checkpoints.dir=s3://k8s-bigdata-12xxxxx/flink-checkpoints/ro-cn-sync\n-Dstate.savepoints.dir=s3://k8s-bigdata-12xxxxxxx/flink-savepoints/ro-cn-sync\n-Dkubernetes.container.image.pull-policy=Always\n-Dkubernetes.service-account=flink-service-account\n-Dexecution.checkpointing.interval=25s\n-Dexecution.checkpointing.mode=EXACTLY_ONCE\n-Dtable.local-time-zone=Asia/Shanghai\n-Drestart-strategy.fixed-delay.attempts=10\n-Drestart-strategy.fixed-delay.delay=3min  \n"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.strong,{children:"\u63d0\u4ea4 Flink JAR \u4efb\u52a1"})}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Jar \u4efb\u52a1\u57fa\u672c\u548c Sql \u4efb\u52a1\u57fa\u672c\u4e00\u6837\uff0c\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(92819).A+"",width:"1080",height:"552"})}),"\n",(0,a.jsx)(e.p,{children:"\u52a8\u6001\u53c2\u6570\u5982\u4e0b\uff08\u5982\u679c\u6709\u914d\u7f6e\u6a21\u7248\uff0c\u8fd9\u91cc\u5c31\u53ef\u4ee5\u66f4\u52a0\u7cbe\u7b80\uff0c\u56e0\u4e3a StreamPark \u652f\u6301\u5f88\u597d\u7684\u4efb\u52a1\u590d\u5236\uff0c\u6545\u53ef\u4ee5\u5199\u4e00\u6807\u51c6\u7684 Jar \u548c SQL \u7684\u4efb\u52a1 demo\uff0c\u5269\u4e0b\u4efb\u52a1\u90fd\u91c7\u7528\u590d\u5236\uff0c\u53ef\u5927\u5927\u63d0\u9ad8\u4efb\u52a1\u5f00\u53d1\u6548\u7387\uff09\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"-Dstate.checkpoints.dir=s3://k8s-bigdata-1xxxx/flink-checkpoints/ro-cn-shushu\n-Dstate.savepoints.dir=s3://k8s-bigdata-1xxxx/flink-savepoints/ro-cn-shushu\n-Dkubernetes.container.image.pull-policy=Always\n-Dkubernetes.service-account=flink-service-account\n-Dexecution.checkpointing.interval=60s\n-Dexecution.checkpointing.mode=EXACTLY_ONCE\n-Dstate.checkpoints.num-retained=2\n-Drestart-strategy.type=failure-rate\n-Drestart-strategy.failure-rate.delay=3min\n-Drestart-strategy.failure-rate.failure-rate-interval=30min\n-Drestart-strategy.failure-rate.max-failures-per-interval=8\n"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.strong,{children:"\u63d0\u4ea4 Flink Application \u4efb\u52a1"})}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"\u5f53\u7136\u4e5f\u53ef\u4ee5\u90e8\u7f72 Application \u6a21\u5f0f\u7684\u4efb\u52a1\u81f3 Kubernetes\uff0c\u8fd9\u91cc\u8d34\u4e0a\u793a\u4f8b\uff0c\u9996\u5148\u662f\u7b2c\u4e00\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(28137).A+"",width:"1012",height:"395"})}),"\n",(0,a.jsx)(e.p,{children:"\u8fd9\u662f\u7b2c\u4e8c\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(22405).A+"",width:"1080",height:"716"})}),"\n",(0,a.jsx)(e.p,{children:"\u7b2c\u4e09\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(14784).A+"",width:"1080",height:"386"})}),"\n",(0,a.jsx)(e.p,{children:"\u52a8\u6001\u53c2\u6570\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(88096).A+"",width:"954",height:"603"})}),"\n",(0,a.jsx)(e.p,{children:"\u8be6\u7ec6\u7684\u914d\u7f6e\u5185\u5bb9\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"-Dcontainerized.master.env.ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar \n-Dcontainerized.taskmanager.env.ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar\n-Dstate.checkpoints.dir=s3://k8s-bigdata-xxx/flink-checkpoints/Kafka2Rocketmq2Kafka\n-Dstate.savepoints.dir=s3://k8s-bigdata-xxx/flink-savepoints/Kafka2Rocketmq2Kafka\n-Dkubernetes.container.image.pull-policy=Always\n-Dkubernetes.service-account=flink-service-account\n-Dexecution.checkpointing.interval=60s\n-Dexecution.checkpointing.mode=EXACTLY_ONCE\n-Dstate.checkpoints.num-retained=2\n-Drest.port=8092\n-Dkubernetes.jobmanager.node-selector=usefor:flink\n-Dkubernetes.taskmanager.node-selector=usefor:flink\n-Dkubernetes.rest-service.annotations=service.kubernetes.io/qcloud-share-existed-lb:true,service.kubernetes.io/tke-existed-lbid:lb-xxx\n-Dkubernetes.rest-service.exposed.type=LoadBalancer\n-Dfs.allowed-fallback-filesystems=s3\n"})}),"\n",(0,a.jsx)(e.h3,{id:"44-\u6784\u5efa\u4efb\u52a1",children:(0,a.jsx)(e.strong,{children:"4.4. \u6784\u5efa\u4efb\u52a1"})}),"\n",(0,a.jsx)(e.p,{children:"\u63a5\u7740\u5bf9\u4efb\u52a1\u8fdb\u884c\u6784\u5efa\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5f88\u6e05\u6670\u7684\u770b\u5230\u4efb\u52a1\u6784\u5efa\u7684\u6bcf\u4e00\u6b65\u9aa4\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(46334).A+"",width:"437",height:"902"})}),"\n",(0,a.jsx)(e.p,{children:"\u6700\u7ec8\u53ef\u4ee5\u8dd1\u8d77\u6765\u89c2\u5bdf\u5230\u4efb\u52a1\u6b63\u5728\u8fd0\u884c\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(43898).A+"",width:"581",height:"235"})}),"\n",(0,a.jsx)(e.h3,{id:"45-\u901a\u77e5\u544a\u8b66\u914d\u7f6e\u975e\u5fc5\u9009",children:(0,a.jsx)(e.strong,{children:"4.5. \u901a\u77e5\u544a\u8b66\u914d\u7f6e\uff08\u975e\u5fc5\u9009\uff09"})}),"\n",(0,a.jsx)(e.p,{children:"\u5f53\u7136 StreamPark \u652f\u6301\u591a\u79cd\u901a\u77e5\u544a\u8b66\u65b9\u5f0f\uff08\u4f8b\u5982\uff1a\u90ae\u7bb1\u548c\u98de\u4e66\u7b49\uff09\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u662f\u90ae\u7bb1\u7684\u65b9\u5f0f\uff0c\u76f4\u63a5\u754c\u9762\u914d\u7f6e\u5373\u53ef\uff1a"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(74803).A+"",width:"1080",height:"622"})}),"\n",(0,a.jsx)(e.p,{children:"\u81f3\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u5206\u4eab\u4e86\u5982\u4f55\u5728 StremPark \u4e2d\u6210\u529f\u5730\u53bb\u90e8\u7f72\u8fd0\u884c\u5728 kubernetes \u4e0d\u540c\u7c7b\u578b\u7684 Flink\u4efb\u52a1\uff0c\u5341\u5206\u7684\u4e1d\u6ed1\uff01"}),"\n",(0,a.jsx)(e.h2,{id:"5-\u843d\u5730\u5b9e\u8df5---\u4f5c\u4e1a\u5e94\u7528\u573a\u666f\u7bc7",children:(0,a.jsx)(e.strong,{children:"5. \u843d\u5730\u5b9e\u8df5 - \u4f5c\u4e1a\u5e94\u7528\u573a\u666f\u7bc7"})}),"\n",(0,a.jsx)(e.p,{children:"\u63a5\u4e0b\u6765\uff0c\u7ee7\u7eed\u9488\u5bf9\u4f5c\u4e1a\u8fdb\u884c\u5256\u6790\uff0c\u4ece\u8c03\u4f18\u3001\u5b9e\u64cd\u7b49\u573a\u666f\u4e2d\u8ba9\u6211\u4eec\u66f4\u8fdb\u4e00\u6b65\u5730\u53bb\u4e86\u89e3 Flink \u4efb\u52a1\u7684\u5e94\u7528\u3002"}),"\n",(0,a.jsx)(e.h3,{id:"51-\u8c03\u4f18\u5efa\u8bae",children:(0,a.jsx)(e.strong,{children:"5.1. \u8c03\u4f18\u5efa\u8bae"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5efa\u8bae\u4e00\uff08\u65f6\u533a\uff09"}),"\uff1a\u5bb9\u5668\u4e2d\u9700\u8981\u4ee5utc+8\u65b9\u4fbf\u770b\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u5728conf\u914d\u7f6e\u4e2d\u6dfb\u52a0\u5982\u4e0b\uff1a"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-shell",children:"env.java.opts.jobmanager: -Duser.timezone=GMT+08\nenv.java.opts.taskmanager: -Duser.timezone=GMT+08\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5efa\u8bae\u4e8c\uff08StreamPark\u53d8\u91cf\u7ba1\u7406\uff09"}),"\uff1aStreamPark \u63d0\u4f9b\u53d8\u91cf\u7ba1\u7406\u3001\u8ba9\u6211\u4eec\u53ef\u4ee5\u7ba1\u7406\u4e00\u4e9b\u914d\u7f6e\uff0c\u63d0\u9ad8\u5b89\u5168\u548c\u4fbf\u6377\u6027\uff1a"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(31853).A+"",width:"1071",height:"197"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5efa\u8bae\u4e09\uff08StreamPark\u4f20\u53c2\uff09"}),"\uff1a\u5728 on YARN \u4e0a\u4f7f\u7528 Flink\u81ea\u5e26\u7684\u5de5\u5177\u7c7b\u4f20\u53c2\u6570\uff0c\u53c2\u6570\u96be\u4f20\u9012\u5230 Flink \u73af\u5883\u53bb\uff0c\u6211\u4eec\u4e5f\u6ca1\u6df1\u7a76\u3002\u6211\u4eec\u9009\u62e9\u901a\u8fc7 StreamPark \u4f20\u5165\u7a0b\u5e8f\u53c2\u6570\uff0c\u8fd9\u6837\u5728 YARN \u548c kubernetes \u90fd\u53ef\u4ee5\u7528\uff0c",(0,a.jsx)(e.strong,{children:"\u540c\u65f6\u5728 kubernetes \u7684 application \u548c session \u65b9\u5f0f\u4e5f\u90fd\u53ef\u4ee5\u7528\uff0c\u53d8\u5f97\u66f4\u52a0\u901a\u7528\u4e14\u6539\u52a8\u65b9\u4fbf\uff0c\u5f3a\u70c8\u63a8\u8350"}),"\uff01"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(77419).A+"",width:"670",height:"290"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5efa\u8bae\u56db\uff08\u4f7f\u7528Session\u6a21\u5f0f\uff09"}),"\uff1a\u5c3d\u7ba1 Yarn-application\u6a21\u5f0f\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u7684\u4efb\u52a1\u9694\u79bb\uff0c\u4f46\u5176\u6bcf\u4e2a\u4efb\u52a1\u90fd\u9700\u8981\u72ec\u7acb\u7684 jobmanager \u8d44\u6e90\uff0c\u8fd9\u5bfc\u81f4\u8d44\u6e90\u6d88\u8017\u8fc7\u9ad8\u3002\u6b64\u5916\uff0c\u5408\u5e76\u4efb\u52a1\u867d\u7136\u53ef\u4ee5\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\uff0c\u4f46\u4f1a\u5e26\u6765\u5de5\u4f5c\u91cf\u5927\u3001\u6570\u636e\u4e0d\u7a33\u5b9a\u7b49\u95ee\u9898\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0csession \u6a21\u5f0f\u5141\u8bb8\u4efb\u52a1\u5728\u4e00\u4e2a session \u4e2d\u5171\u4eab\u4e00\u4e2a jobmanager \u8d44\u6e90\uff0c\u8fd9\u53ef\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u8282\u7ea6\u8ba1\u7b97\u8d44\u6e90\uff0c\u867d\u7136\u5b83\u53ef\u80fd\u5b58\u5728\u5355\u70b9\u95ee\u9898\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4e24\u4e2a jobmanager \u5b9e\u4f8b\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u6765\u89e3\u51b3\u3002\u66f4\u91cd\u8981\u7684\u662f\uff0csession \u6a21\u5f0f\u8fd8\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5730\u67e5\u770b\u56e0\u4efb\u52a1\u5931\u8d25\u800c\u4ea7\u751f\u7684\u65e5\u5fd7\uff0c\u6709\u52a9\u4e8e\u63d0\u9ad8\u6545\u969c\u8bca\u65ad\u7684\u6548\u7387\u3002\u56e0\u6b64\uff0c\u9274\u4e8e\u5176\u5728\u8d44\u6e90\u5229\u7528\u3001\u9ad8\u53ef\u7528\u6027\u548c\u4efb\u52a1\u6545\u969c\u5904\u7406\u65b9\u9762\u7684\u4f18\u52bf\uff0c\u9009\u62e9 session \u6a21\u5f0f\u6210\u4e3a\u4e86\u4e00\u79cd\u66f4\u4e3a\u7406\u60f3\u7684\u9009\u62e9\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"52-\u6570\u636ecdc\u540c\u6b65",children:(0,a.jsx)(e.strong,{children:"5.2. \u6570\u636eCDC\u540c\u6b65"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u3010MySQL \u2192 Doris\u3011"}),"\uff1a\u4e0b\u9762\u4ee3\u7801\u4e3b\u8981\u6f14\u793a\u4e86 ",(0,a.jsx)(e.strong,{children:"MySQL \u6570\u636e\u540c\u6b65\u81f3 Apache Doris"})," \u7684 Flink sql \u6d41\u6c34\u7ebf\uff1a"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE IF NOT EXISTS `login_log_mysql` (\n login_log_id      bigint not null,  \n account_id        bigint ,  \n long_account_id   string , \n short_account_id  string , \n game_code         string , \n package_code      string , \n channel_id        int    ,\n login_at          int    ,  \n login_ip          string ,    \n device_ua         string ,\n device_id         string ,\n device_net        string ,\n device_ratio      string , \n device_os         string ,\n device_carrier    string ,\n ext               string ,        \n created_at        int    ,  \n updated_at        int    ,  \n deleted_at        int ,\n  PRIMARY KEY(`login_log_id`)\n NOT ENFORCED\n) with (\n  'connector' = 'mysql-cdc',\n  'hostname' = '10.xxx.xxx.xxx',\n  'port' = '3306',\n  'username' = 'http_readxxxxx',\n  'password' = 'xxxx@)',\n  'database-name' = 'player_user_center',\n  -- 'scan.startup.mode' = 'latest-offset',\n  'scan.startup.mode' = 'earliest-offset',\n  'table-name' = 'login_log_202[3-9][0-9]{2}',\n  'server-time-zone' = '+07:00'\n);\n\ncreate table if not EXISTS login_log_doris(\n  `date`    date              ,    \n   login_log_id    bigint     ,\n   account_id    bigint       ,\n   long_account_id    string  ,\n   short_account_id    string ,\n   game_code    string        ,\n  `package_code`    string    ,\n  `channel_id`    int         ,\n   login_at     string      ,\n   login_ip    string         ,\n   device_ua    string        ,\n   device_id    string        ,\n   device_net    string       ,\n   device_ratio    string     ,\n   device_os    string        ,\n   device_carrier    string   ,\n   ext        string          ,\n   created_at      string   ,\n   updated_at      string   ,\n   deleted_at      string   ,\n    PRIMARY KEY(`date`,`login_log_id`)\n NOT ENFORCED\n) WITH (\n   'connector' = 'doris',\n    'jdbc-url'='jdbc:mysql://xxx.xx.xx.xx:9030,xxx.xxx.xxx.xxx:9030,xxx.xxx.xxx.xxx:9030',\n    'load-url'='xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030',\n    'database-name' = 'ro_sea_player_user_center',\n    'table-name' = 'ods_login_log',\n    'username' = 'root',\n    'password' = 'root123',\n    'sink.semantic' = 'exactly-once',\n    'sink.max-retries' = '10'\n);\n\ncreate view login_log_flink_trans as \nselect  \n to_date(cast(to_timestamp_ltz(login_at,0) as varchar) )  , \n login_log_id     ,  \n account_id       ,  \n long_account_id  , \n short_account_id , \n game_code        , \n package_code     , \n channel_id,\n cast(to_timestamp_ltz(login_at,0) as varchar) as login_at,\n login_ip         ,    \n device_ua        ,\n device_id        ,\n device_net       ,\n device_ratio     , \n device_os        ,\n device_carrier   ,\n ext              ,\n cast(to_timestamp_ltz(created_at,0) as varchar) as created_at,\n cast(to_timestamp_ltz(updated_at,0) as varchar) as updated_at,\n cast(to_timestamp_ltz(deleted_at,0) as varchar) as deleted_at\nfrom login_log_mysql;\n\ninsert into login_log_doris select * from login_log_flink_trans;\n\nCREATE TABLE IF NOT EXISTS `account_mysql` (\n account_id        bigint ,  \n open_id   string , \n dy_openid  string , \n dy_ios_openid  string , \n ext               string ,        \n last_channel      int    ,  \n last_login_time   int    ,  \n last_login_ip     string ,  \n created_at        int    ,  \n updated_at        int    ,  \n deleted_at        string ,\n  PRIMARY KEY(`account_id`)\n NOT ENFORCED\n) with (\n  'connector' = 'mysql-cdc',\n  'hostname' = 'xxx.xx.xx.xx',\n  'port' = '3306',\n  'username' = 'http_readxxxx',\n  'password' = 'xxxxx@)',\n  'database-name' = 'player_user_center',\n  -- 'scan.startup.mode' = 'latest-offset',\n  'scan.startup.mode' = 'earliest-offset',\n  'table-name' = 'account_[0-9]+',\n  'server-time-zone' = '+07:00'\n);\n\ncreate table if not EXISTS account_doris(\n  `date`    date              ,    \n   account_id    bigint     ,\n   open_id    string  ,\n   dy_openid    string ,\n   dy_ios_openid    string        ,\n   ext        string          ,\n  `last_channel`    int         ,\n   last_login_time     string      ,\n   last_login_ip    string         ,\n   created_at      string   ,\n   updated_at      string   ,\n   deleted_at      string   ,\n   PRIMARY KEY(`date`,`account_id`)\n NOT ENFORCED\n) WITH (\n   'connector' = 'doris',\n    'jdbc-url'='jdbc:mysql://xxx.xx.xx.xx:9030,xxx.xx.xx.xx:9030,xxx.xx.xx.xx:9030',\n    'load-url'='xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030',\n    'database-name' = 'ro_sea_player_user_center',\n    'table-name' = 'ods_account_log',\n    'username' = 'root',\n    'password' = 'root123',\n    'sink.semantic' = 'exactly-once',\n    'sink.max-retries' = '10'\n);\n\ncreate view account_flink_trans as \nselect  \n to_date(cast(to_timestamp_ltz(created_at,0) as varchar) )  , \n account_id     ,  \n open_id  , \n dy_openid , \n dy_ios_openid        , \n ext              ,\n last_channel,\ncast(to_timestamp_ltz(last_login_time,0) as varchar) as last_login_time,\n last_login_ip         ,    \n cast(to_timestamp_ltz(created_at,0) as varchar) as created_at,\n cast(to_timestamp_ltz(updated_at,0) as varchar) as updated_at,\n deleted_at\nfrom account_mysql;\n\ninsert into account_doris select * from account_flink_trans;\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u3010\u6e38\u620f\u6570\u636e\u540c\u6b65\u3011"}),"\uff1a\u5c06\u6d77\u5916 ",(0,a.jsx)(e.strong,{children:"filebeat \u91c7\u96c6\u7684 kafka \u6570\u636e\u62c9\u5230\u56fd\u5185 kafka"}),"\uff0c\u5e76\u8fdb\u884c\u5904\u7406\u5143\u6570\u636e\u52a0\u5de5\uff1a"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"--\u521b\u5efahmt \u7684kafka source \u8868\nCREATE TABLE kafka_in (\n  `env` STRING comment '\u6e38\u620f\u73af\u5883 hdf  /qc/cbt/obt/prod',\n  `host` STRING comment '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\n  `tags` STRING comment '\u65e5\u5fd7\u6807\u7b7e normal | fix',\n  `log`  STRING comment '\u65e5\u5fd7\u6240\u5728\u6587\u4ef6\u53ca\u504f\u79fb\u91cf',\n  `topic` STRING METADATA VIRTUAL comment 'kafka\u7684topic',\n  `partition_id` BIGINT METADATA FROM 'partition' VIRTUAL comment '\u65e5\u5fd7\u6240\u5728\u7684kafka\u5206\u533a', \n  `offset` BIGINT METADATA VIRTUAL comment 'kafka\u5206\u533a\u7684\u504f\u79fb\u91cf', \n   `uuid`  STRING comment 'filebeat\u751f\u6210\u7684uuid',\n  `message` STRING comment 'tlog\u4fe1\u606f',\n  `@timestamp` STRING comment 'filebeat\u91c7\u96c6\u65f6\u95f4',\n  `ts` TIMESTAMP(3) METADATA FROM 'timestamp' comment 'kafka\u5b58\u50a8\u6d88\u606f\u65f6\u95f4'\n) WITH (\n  'connector' = 'kafka',\n  'topic' = 'ro_sea_tlog',\n  'properties.bootstrap.servers' = 'sea-kafka-01:9092,sea-kafka-02:9092,sea-kafka-03:9092',\n  'properties.group.id' = 'streamx-ro-sea-total',\n  'properties.client.id' = 'streamx-ro-sea-total',\n  'properties.session.timeout.ms' = '60000',\n  'properties.request.timeout.ms' = '60000',\n  'scan.startup.mode' = 'group-offsets',\n  --'scan.startup.mode' = 'earliest-offset',\\\n  'properties.fetch.max.bytes' = '123886080',\n  'properties.max.partition.fetch.bytes' = '50388608',\n  'properties.fetch.max.wait.ms' = '2000',\n  'properties.max.poll.records' = '1000',\n  'format' = 'json',\n  'json.ignore-parse-errors' = 'false'\n);\n\n--\u521b\u5efaemr \u7684kafka \u6b63\u5f0f\u8868\nCREATE TABLE kafka_out_sea (\n`env` STRING comment '\u6e38\u620f\u73af\u5883 qc/cbt/obt/prod',\n`hostname` STRING comment '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\n`tags` STRING comment '\u65e5\u5fd7\u6807\u7b7e normal | fix',\n`log_offset`  STRING comment '\u65e5\u5fd7\u6240\u5728\u6587\u4ef6\u53ca\u504f\u79fb\u91cf',\n`uuid`  STRING comment 'filebeat\u751f\u6210\u7684uuid',\n`topic` STRING comment 'kafka\u7684topic',\n`partition_id` BIGINT comment '\u65e5\u5fd7\u6240\u5728\u7684kafka\u5206\u533a', \n`kafka_offset` BIGINT comment 'kafka\u5206\u533a\u7684\u504f\u79fb\u91cf', \n eventname string comment '\u4e8b\u4ef6\u540d',\n`message` STRING comment 'tlog\u4fe1\u606f',\n`filebeat_ts` STRING comment 'filebeat\u91c7\u96c6\u65f6\u95f4',\n`kafka_ts` TIMESTAMP(3) comment 'kafka\u5b58\u50a8\u6d88\u606f\u65f6\u95f4',\n`flink_ts` TIMESTAMP(3)  comment 'flink\u5904\u7406\u7684\u6d88\u606f\u65f6\u95f4'\n) WITH (\n  'connector' = 'kafka',\n  'topic' = 'ro_sea_tlog',\n  --'properties.client.id' = 'flinkx-ro-sea-prod-v2',\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\n  'format' = 'json',\n  --'sink.partitioner'= 'fixed',\n  'sink.delivery-guarantee' = 'exactly-once',\n  'sink.transactional-id-prefix' = 'ro_sea_kafka_sync_v10',\n  'properties.compression.type' = 'zstd',\n  'properties.transaction.timeout.ms' = '600000',\n  'properties.message.max.bytes' = '13000000',\n  'properties.max.request.size' = '13048576',\n  --'properties.buffer.memory' = '83554432',\n  'properties.acks' = '-1'\n);\n\n--etl \u521b\u5efa\u76ee\u6807\u89c6\u56fe\ncreate view kafka_sea_in_view  as \nselect `env`,JSON_VALUE(`host`,'$.name') as hostname,`tags`,`log` as log_offset,`uuid`,\n       `topic`,`partition_id`,`offset` as kafka_offset,\n     lower(SPLIT_INDEX(message,'|',0)) as eventname,`message`, \n     CONVERT_TZ(REPLACE(REPLACE(`@timestamp`,'T',' '),'Z',''), 'UTC', 'Asia/Bangkok') as filebeat_ts, `ts` as kafka_ts ,CURRENT_TIMESTAMP as flink_ts\nfrom kafka_in;\n\n--\u5199\u6570\u636e\u5230emr  sea topic\ninsert into kafka_out_sea\nselect * from kafka_sea_in_view ;\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u3010\u5b9e\u65f6\u6570\u4ed3\u3011"}),"\uff1a\u5206\u6d41 Jar \u7a0b\u5e8f\u548c ods -> dwd sql \u52a0\u5de5\u51fd\u6570\uff0c\u90e8\u5206\u4ee3\u7801\u622a\u56fe\u5982\u4e0b\uff1a"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(61488).A+"",width:"918",height:"660"})}),"\n",(0,a.jsx)(e.p,{children:"\u4ee5\u53ca\u76f8\u5173\u7684 Flink sql\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"--2 dwd_moneyflow_log\nCREATE TABLE kafka_in_money (\n`env` STRING   comment '\u6e38\u620f\u73af\u5883 qc/cbt/obt/prod',\n`hostname` STRING comment '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\n`uuid` STRING comment '\u65e5\u5fd7\u552f\u4e00id',\n`message` STRING comment 'tlog\u4fe1\u606f',\n`filebeat_ts` STRING comment 'filebeat\u91c7\u96c6\u65f6\u95f4'\n) WITH (\n  'connector' = 'kafka',\n  'topic' = 'ro_sea_tlog_split_moneyflow',\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\n  'properties.group.id' = 'flinksql_kafka_in_moneyflow_v2',\n  'scan.startup.mode' = 'group-offsets',\n  --'scan.startup.mode' = 'earliest-offset',\n  'properties.isolation.level' = 'read_committed',\n  'format' = 'json',\n  'json.ignore-parse-errors' = 'false'\n);\n\nCREATE TABLE kafka_out_money(\n  `date` string not NULL  COMMENT '\u65e5\u671f',\n  `vroleid`  int NULL COMMENT '\u89d2\u8272ID',\n  `moneytype` int NULL  COMMENT '\u8d27\u5e01\u7c7b\u578b', \n  `env` string NULL COMMENT '\u6e38\u620f\u73af\u5883 hdf  /qc/cbt/obt/prod',\n  `hostname` string NULL COMMENT '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\n  `uuid`  string NULL COMMENT 'filebeat \u91c7\u96c6\u751f\u6210\u7684uuid',\n  `filebeat_ts` string NULL COMMENT 'filebeat\u91c7\u96c6\u65f6\u95f4',\n   flink_ts string NULL COMMENT 'flink\u5199\u5165\u7684\u6d88\u606f\u65f6\u95f4',  \n  `gamesvrid` int  NULL  COMMENT '\u767b\u5f55\u6e38\u620f\u670d\u52a1\u5668\u7f16\u53f7', \n  `dteventtime` string NULL  COMMENT  '\u6e38\u620f\u4e8b\u4ef6\u7684\u65f6\u95f4, \u683c\u5f0f YYYY-MM-DD HH:MM:SS', \n  `vgameappid` string NULL COMMENT  '\u6e38\u620fAPPID', \n  `platid` int NULL  COMMENT 'ios 0 /android 1', \n  `izoneareaid` int NULL  COMMENT '\u9488\u5bf9\u5206\u533a\u5206\u670d\u7684\u6e38\u620f\u586b\u5199\u5206\u533aid\uff0c\u7528\u6765\u552f\u4e00\u6807\u793a\u4e00\u4e2a\u533a\uff1b\u975e\u5206\u533a\u5206\u670d\u6e38\u620f\u8bf7\u586b\u51990', \n  `vopenid` string NULL COMMENT '\u7528\u6237OPENID\u53f7', \n  `vrolename` string NULL COMMENT '\u89d2\u8272\u59d3\u540d', \n  `jobid` int  NULL  COMMENT '\u89d2\u8272\u804c\u4e1a   0=\u5deb\u5e08 1=\u2026\u2026', \n  `gender` int NULL  COMMENT '\u89d2\u8272\u6027\u522b 0=\u7537  1=\u5973', \n  `ilevel` int NULL  COMMENT '\u89d2\u8272\u57fa\u7840\u7b49\u7ea7', \n  `ijoblevel` int NULL  COMMENT '\u89d2\u8272\u804c\u4e1a\u7b49\u7ea7', \n  `playerfriendsnum` int NULL  COMMENT '\u73a9\u5bb6\u597d\u53cb\u6570\u91cf', \n  `chargegold` int NULL  COMMENT '\u89d2\u8272\u5145\u503c\u7ecf\u5386\uff08\u7d2f\u8ba1\u5145\u503c\uff09',\n  `iviplevel` int NULL  COMMENT '\u89d2\u8272VIP\u7b49\u7ea7', \n  `createtime` string NULL  COMMENT  '\u8d26\u53f7\u521b\u5efa\u65f6\u95f4',\n  `irolece` int NULL  COMMENT '\u6218\u529b/\u8bc4\u5206',\n  `unionid` int NULL  COMMENT '\u516c\u4f1aID',\n  `unionname`  string NULL COMMENT '\u516c\u4f1a\u540d\u79f0', \n  `regchannel` int NULL  COMMENT '\u6ce8\u518c\u6e20\u9053', \n  `loginchannel` int NULL  COMMENT '\u767b\u5f55\u6e20\u9053', \n  `sequence` int NULL  COMMENT '\u7528\u4e8e\u5173\u8054\u4e00\u6b21\u52a8\u4f5c\u4ea7\u751f\u591a\u6761\u4e0d\u540c\u7c7b\u578b\u7684\u8d27\u5e01\u6d41\u52a8\u65e5\u5fd7', \n  `reason` int NULL  COMMENT '\u884c\u4e3a\uff08\u8d27\u5e01\u6d41\u52a8\u4e00\u7ea7\u539f\u56e0\uff09',\n  `subreason` int NULL  COMMENT '\u6d41\u5411\uff08\u7269\u54c1\u6d41\u5411\u5b9a\u4e49\uff09', \n  `imoney` int NULL  COMMENT '\u8d27\u5e01\u53d8\u66f4\u6570\u91cf',\n  `aftermoney` int NULL  COMMENT '\u52a8\u4f5c\u540e\u7684\u91d1\u94b1\u6570',\n  `afterboundmoney` int NULL  COMMENT '\u52a8\u4f5c\u540e\u7684\u7ed1\u5b9a\u91d1\u94b1\u6570',\n  `addorreduce` int NULL  COMMENT '\u589e\u52a0\u6216\u51cf\u5c11: 0\u662f\u589e\u52a0; 1\u662f\u51cf\u5c11', \n  `serialnum` string NULL COMMENT  '\u6d41\u6c34\u53f7', \n  `sourceid` int NULL  COMMENT '\u6e20\u9053\u53f7', \n  `cmd` string NULL COMMENT  '\u547d\u4ee4\u5b57', \n  `orderid` string NULL COMMENT  '\u8ba2\u5355id(\u5305\u542b\u55b5\u679c\u589e\u52a0\u548c\u55b5\u679c\u51cf\u5c11\uff0c\u4e5f\u5305\u542b\u73b0\u91d1\u5145\u503c\u8ba2\u5355id)', \n  `imoneytype` int NULL  COMMENT '\u8d27\u5e01\u7c7b\u578b2', \n  `distincid` string NULL COMMENT  '\u8bbf\u5ba2ID', \n  `deviceuid` string NULL COMMENT  '\u8bbe\u5907ID', \n  `guildjob` int NULL  COMMENT '\u516c\u4f1a\u804c\u4f4d', \n  `regtime` string NULL  COMMENT  '\u8d26\u53f7\u6ce8\u518c\u65f6\u95f4'\n) WITH (\n   'connector' = 'doris',\n    'jdbc-url'='jdbc:mysql://xxx:9030,xxx:9030,xxx:9030',\n    'load-url'='xx:8030;xxx:8030;xxx:8030',\n    'database-name' = 'ro_sea',\n    'table-name' = 'dwd_moneyflow_log',\n    'username' = 'root',\n    'password' = 'root123',\n    'sink.semantic' = 'exactly-once'\n);\n\ncreate view kafka_out_money_view1  as \nselect  IF(to_date(SPLIT_INDEX(message,'|',2)) > CURRENT_DATE + interval '1' day,CURRENT_DATE,to_date(SPLIT_INDEX(message,'|',2))) as `date`,\n        `env`,`hostname` as hostname,`uuid`,\n    try_cast(SPLIT_INDEX(message,'|',1) as int) as gamesvrid               ,                                  \n        SPLIT_INDEX(message,'|',2) as dteventtime             ,                                  \n        SPLIT_INDEX(message,'|',3) as vgameappid              ,                                  \n        try_cast(SPLIT_INDEX(message,'|',4) as int) as platid                  ,                                  \n        try_cast(SPLIT_INDEX(message,'|',5)  as int) as izoneareaid             ,                                  \n        SPLIT_INDEX(message,'|',6) as vopenid                 ,                                  \n        try_cast(SPLIT_INDEX(message,'|',7) as int) as vroleid                 ,                                  \n        SPLIT_INDEX(message,'|',8) as vrolename               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',9)  as int)  as jobid                   ,                                  \n        try_cast(SPLIT_INDEX(message,'|',10) as int) as gender                  ,                                  \n        try_cast(SPLIT_INDEX(message,'|',11) as int) as ilevel                  ,                                  \n        try_cast(SPLIT_INDEX(message,'|',12) as int) as ijoblevel               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',13) as int) as playerfriendsnum        ,                                  \n        try_cast(SPLIT_INDEX(message,'|',14) as int) as chargegold              ,                                  \n        try_cast(SPLIT_INDEX(message,'|',15) as int) as iviplevel               ,                                  \n        SPLIT_INDEX(message,'|',16) as createtime              ,                                  \n        try_cast(SPLIT_INDEX(message,'|',17) as int)  as irolece                 ,                                  \n        try_cast(SPLIT_INDEX(message,'|',18) as int) as unionid                 ,                                  \n        SPLIT_INDEX(message,'|',19) as unionname               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',20) as int) as regchannel              ,                                  \n        try_cast(SPLIT_INDEX(message,'|',21) as int) as loginchannel            ,                                  \n        try_cast(SPLIT_INDEX(message,'|',22) as int) as `sequence`                ,                                  \n        try_cast(SPLIT_INDEX(message,'|',23) as int) as `reason`                 ,                                  \n        try_cast(SPLIT_INDEX(message,'|',24) as int) as subreason               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',25) as int) as moneytype               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',26) as int) as imoney                  ,                                  \n        try_cast(SPLIT_INDEX(message,'|',27) as int) as aftermoney              ,                                  \n        try_cast(SPLIT_INDEX(message,'|',28) as int) as afterboundmoney         ,                                  \n        try_cast(SPLIT_INDEX(message,'|',29) as int) as addorreduce             ,                                  \n        SPLIT_INDEX(message,'|',30) as serialnum               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',31) as int) as sourceid                ,                                  \n        SPLIT_INDEX(message,'|',32) as `cmd`                    ,                                  \n        SPLIT_INDEX(message,'|',33) as orderid                 ,                                  \n        try_cast(SPLIT_INDEX(message,'|',34) as int) as imoneytype              ,                                  \n        SPLIT_INDEX(message,'|',35) as distincid               ,                                  \n        SPLIT_INDEX(message,'|',36) as deviceuid               ,                                  \n        try_cast(SPLIT_INDEX(message,'|',37) as int) as guildjob                ,                                  \n        SPLIT_INDEX(message,'|',38) as regtime ,\n      filebeat_ts,CURRENT_TIMESTAMP  as flink_ts\nfrom kafka_in_money;\n\ninsert into kafka_out_money\nselect \ncast(`date` as varchar) as `date`,\n`vroleid`,\n`moneytype`,\n`env`,\n`hostname`,\n`uuid`,\n`filebeat_ts`,\ncast(`flink_ts` as varchar) as flink_ts,\n`gamesvrid`,\n`dteventtime`,\n`vgameappid`,\n`platid`,\n`izoneareaid`,\n`vopenid`,\n`vrolename`,\n`jobid`,\n`gender`,\n`ilevel`,\n`ijoblevel`,\n`playerfriendsnum`,\n`chargegold`,\n`iviplevel`,\n`createtime`,\n`irolece`,\n`unionid`,\n`unionname`,\n`regchannel`,\n`loginchannel`,\n`sequence`,\n`reason`,\n`subreason`,\n`imoney`,\n`aftermoney`,\n`afterboundmoney`,\n`addorreduce`,\n`serialnum`,\n`sourceid`,\n`cmd`,\n`orderid`,\n`imoneytype`,\n`distincid`,\n`deviceuid`,\n`guildjob`,\n`regtime`\nfrom kafka_out_money_view1;\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u3010\u5e7f\u544a\u7cfb\u7edf\u3011\uff1a\u4f7f\u7528 Flink SQL \u5c06\u4e00\u884c\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5207\u5206\u89e3\u6790\u51fa\u5404\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\u5e76\u5b8c\u6210\u4e1a\u52a1\u8ba1\u7b97:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE IF NOT EXISTS ods_adjust_in (\n  log STRING\n) WITH (\n  'connector' = 'kafka',\n  'topic' = 'ad_adjust_callback',\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\n  'properties.group.id' = 'ods_adjust_etl_20231011',\n  'properties.max.partition.fetch.bytes' = '4048576',\n  'scan.startup.mode' = 'group-offsets',\n  'properties.isolation.level' = 'read_committed',\n  'format' = 'raw'\n);\n\nCREATE TABLE IF NOT EXISTS ods_af_in (\n  log STRING\n) WITH (\n  'connector' = 'kafka',\n  'topic' = 'ad_af_callback',\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\n  'properties.max.partition.fetch.bytes' = '4048576',\n  'properties.group.id' = 'ods_af_etl_20231011',\n  'scan.startup.mode' = 'group-offsets',\n  'properties.isolation.level' = 'read_committed',\n  'format' = 'raw'\n);\n\nCREATE TABLE IF NOT EXISTS ods_mmp_out (\n  `date` DATE,\n  `mmp_type` STRING,\n  `app_id` STRING,\n  `event_name` STRING,\n  `event_time` TIMESTAMP(3),\n  `mmp_id` STRING,\n  `distinct_id` STRING,\n  `open_id` STRING,\n  `account_id` STRING, \n  `os_name` STRING, -- platform\n  `country_code` STRING,\n  `install_time` TIMESTAMP(3),\n  `bundle_id` STRING,\n  `media` STRING,\n  `channel` STRING,\n  `campaign` STRING,\n  `campaign_id` STRING,\n  `adgroup` STRING,\n  `adgroup_id` STRING,\n  `ad` STRING,\n  `ad_id` STRING,\n  `flink_ts` TIMESTAMP(3) comment 'flink\u5904\u7406\u7684\u6d88\u606f\u65f6\u95f4',\n  `device_properties` STRING,\n  `log` STRING\n) WITH (\n    'connector' = 'kafka',\n    'topic' = 'ods_mmp_log',\n    'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\n    'scan.topic-partition-discovery.interval'='60000',\n    'properties.group.id' = 'mmp2etl-out',\n    'format' = 'json'\n);\n\nINSERT INTO ods_mmp_out\nSELECT\n   `date`\n  ,'Adjust' as `mmp_type`\n  ,`app_token` as `app_id`\n  ,`event_name`\n  ,`event_time`\n  ,`adid` as `mmp_id`\n  ,`distinct_id`\n  ,`open_id`\n  ,`account_id`\n  ,`os_name`\n  ,`country_code`\n  ,`install_time`\n  ,'' as `bundle_id`\n  ,'' as `media`\n  ,`network` as `channel`\n  ,`campaign`\n  ,REGEXP_EXTRACT(`campaign`, '([\\\\(=])([a-z0-9]+)', 2) as `campaign_id`\n  ,`adgroup`\n  ,REGEXP_EXTRACT(`adgroup`, '([\\\\(=])([a-z0-9]+)', 2) as `adgroup_id`\n  ,`creative` as `ad`\n  ,REGEXP_EXTRACT(`creative`, '([\\\\(=])([a-z0-9]+)', 2) as `ad_id`\n  ,`flink_ts`\n  ,`device_properties`\n  ,`log`\nFROM (\n  SELECT\n     to_date(FROM_UNIXTIME(cast(JSON_VALUE(log,'$.created_at') as bigint))) as `date`\n    ,JSON_VALUE(log,'$.app_token') as `app_token`\n    ,JSON_VALUE(log,'$.adid') as `adid`\n    ,LOWER(REPLACE( TRIM( COALESCE(JSON_VALUE(log,'$.event_name'), JSON_VALUE(log,'$.activity_kind')) ), ' ', '_')) as `event_name`\n    ,TO_TIMESTAMP(FROM_UNIXTIME(cast(JSON_VALUE(log,'$.created_at') as bigint))) as `event_time`\n    ,TO_TIMESTAMP(FROM_UNIXTIME(cast(JSON_VALUE(log,'$.installed_at') as bigint))) as `install_time`\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN COALESCE(JSON_VALUE(log,'$.fb_install_referrer_publisher_platform'),'facebook') ELSE JSON_VALUE(log,'$.network_name') END) AS `network`\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN (concat(JSON_VALUE(log,'$.fb_install_referrer_campaign_group_name'), '(', JSON_VALUE(log,'$.fb_install_referrer_campaign_group_id'), ')')) ELSE JSON_VALUE(log,'$.campaign_name') END) AS `campaign`\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN (concat(JSON_VALUE(log,'$.fb_install_referrer_campaign_name'), '(', JSON_VALUE(log,'$.fb_install_referrer_campaign_id'), ')')) ELSE JSON_VALUE(log,'$.adgroup_name') END) AS `adgroup`\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN (concat(JSON_VALUE(log,'$.fb_install_referrer_adgroup_name'), '(', JSON_VALUE(log,'$.fb_install_referrer_adgroup_id'), ')')) ELSE JSON_VALUE(log,'$.creative_name') END) AS `creative`\n    ,JSON_VALUE(log,'$.os_name') as `os_name`\n    ,JSON_VALUE(log,'$.country_code') as `country_code`\n    ,JSON_VALUE(JSON_VALUE(log,'$.publisher_parameters'), '$.ta_distinct_id') as `distinct_id`\n    ,JSON_VALUE(JSON_VALUE(log,'$.publisher_parameters'), '$.open_id') as `open_id`\n    ,JSON_VALUE(JSON_VALUE(log,'$.publisher_parameters'), '$.ta_account_id') as `account_id`\n    ,CURRENT_TIMESTAMP as `flink_ts`\n    ,JSON_OBJECT(\n       'ip' VALUE JSON_VALUE(log,'$.ip')\n      ,'ua' VALUE JSON_VALUE(log,'$.ua')\n      ,'idfa' VALUE JSON_VALUE(log,'$.idfa')\n      ,'idfv' VALUE JSON_VALUE(log,'$.idfv')\n      ,'gps_adid' VALUE JSON_VALUE(log,'$.gps_adid')\n      ,'android_id' VALUE JSON_VALUE(log,'$.android_id')\n      ,'mac_md5' VALUE JSON_VALUE(log,'$.mac_md5')\n      ,'oaid' VALUE JSON_VALUE(log,'$.oaid')\n      ,'gclid' VALUE JSON_VALUE(log,'$.gclid')\n      ,'gbraid' VALUE JSON_VALUE(log,'$.gbraid')\n      ,'dcp_wbraid' VALUE JSON_VALUE(log,'$.dcp_wbraid')\n    ) as `device_properties`\n    ,`log`\n  FROM ods_adjust_in \n  WHERE COALESCE(JSON_VALUE(log,'$.activity_kind'), JSON_VALUE(log,'$.event_name')) not in ('impression', 'click')\n)\nUNION ALL \nSELECT\n  to_date(CONVERT_TZ(JSON_VALUE(log,'$.event_time'), 'UTC', 'Asia/Shanghai')) as `date`\n  ,'AppsFlyer' as `mmp_type`\n  ,JSON_VALUE(log,'$.app_id') as `app_id`\n  ,LOWER(REPLACE( TRIM(JSON_VALUE(log,'$.event_name') ), ' ', '-')) as `event_name`\n  ,TO_TIMESTAMP(CONVERT_TZ(JSON_VALUE(log,'$.event_time'), 'UTC', 'Asia/Shanghai')) as `event_time`\n  ,JSON_VALUE(log,'$.appsflyer_id') as `mmp_id`\n  ,JSON_VALUE(JSON_VALUE(log,'$.custom_data'), '$.ta_distinct_id') as `distinct_id`\n  ,JSON_VALUE(JSON_VALUE(log,'$.custom_data'), '$.open_id') as `open_id`\n  ,JSON_VALUE(JSON_VALUE(log,'$.custom_data'), '$.ta_account_id') as `account_id`\n  ,LOWER(JSON_VALUE(log,'$.platform')) AS `os_name`\n  ,LOWER(JSON_VALUE(log,'$.country_code')) as `country_code`\n  ,TO_TIMESTAMP(CONVERT_TZ(JSON_VALUE(log,'$.install_time'), 'UTC', 'Asia/Shanghai')) as `install_time`\n  ,LOWER(JSON_VALUE(log,'$.bundle_id')) AS `bundle_id`\n  ,LOWER(JSON_VALUE(log,'$.media_source')) AS `media`\n  ,LOWER(JSON_VALUE(log,'$.af_channel')) AS `channel`\n  ,CONCAT(LOWER(JSON_VALUE(log,'$.campaign')), ' (', LOWER(JSON_VALUE(log,'$.af_c_id')), ')') AS `campaign`\n  ,LOWER(JSON_VALUE(log,'$.af_c_id')) AS `campaign_id`\n  ,CONCAT(LOWER(JSON_VALUE(log,'$.af_adset')), ' (', LOWER(JSON_VALUE(log,'$.af_adset_id')), ')') AS `adgroup`\n  ,LOWER(JSON_VALUE(log,'$.af_adset_id')) AS `adgroup_id`\n  ,CONCAT(LOWER(JSON_VALUE(log,'$.af_ad')), ' (', LOWER(JSON_VALUE(log,'$.af_ad_id')), ')') AS `ad`\n  ,LOWER(JSON_VALUE(log,'$.af_ad_id')) AS `ad_id`\n  ,CURRENT_TIMESTAMP as `flink_ts`\n  ,JSON_OBJECT(\n     'ip' VALUE JSON_VALUE(log,'$.ip')\n    ,'ua' VALUE JSON_VALUE(log,'$.user_agent')\n    ,'idfa' VALUE JSON_VALUE(log,'$.idfa')\n    ,'idfv' VALUE JSON_VALUE(log,'$.idfv')\n    ,'gps_adid' VALUE JSON_VALUE(log,'$.advertising_id')\n    ,'android_id' VALUE JSON_VALUE(log,'$.android_id')\n    ,'oaid' VALUE JSON_VALUE(log,'$.oaid')\n  ) as `device_properties`\n  ,`log`\nFROM ods_af_in;\n"})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u6570\u636e\u4e0a\u62a5"}),"\uff1a\u7c7b\u4f3c\u4e8e\u795e\u7b56"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(72352).A+"",width:"976",height:"325"})}),"\n",(0,a.jsx)(e.h2,{id:"6--\u843d\u5730\u5b9e\u8df5---\u817e\u8baf\u4e91\u73af\u5883\u7bc7",children:(0,a.jsx)(e.strong,{children:"6.  \u843d\u5730\u5b9e\u8df5 - \u817e\u8baf\u4e91\u73af\u5883\u7bc7"})}),"\n",(0,a.jsx)(e.p,{children:"\u672c\u6587\u7684 Flink \u4efb\u52a1\u662f\u8fd0\u884c\u5728\u817e\u8baf\u7684 kubernetes \u73af\u5883\uff0c\u5176\u4e2d\u5305\u62ec\u4e00\u4e9b\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8be6\u8ff0\u4e86\uff0c\u4f8b\u5982\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u955c\u50cf\u540c\u6b65"}),"\uff1aharbor \u914d\u7f6e\u81ea\u52a8\u540c\u6b65\u955c\u50cf\u5230\u817e\u8baf\u4e91\u955c\u50cf\u670d\u52a1 TCR \u4e2d\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u955c\u50cf\u914d\u7f6e"}),"\uff1a\u5982\u514d\u5bc6\u62c9\u53d6\u3001\u7f13\u5b58\u52a0\u901f\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Flink webui \u5916\u7f51\u8bbf\u95ee"}),"\uff1a\u9700\u8981\u4ece\u5916\u7f51lb\u8d2d\u4e70\u4ee5\u4fbf\u4e8e\u8bbf\u95ee Flink UI\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u73af\u5883\u6253\u901a"}),"\uff1a\u56e0\u4e3a kubernetes \u96c6\u7fa4\u4e3b\u8981\u662f\u4e00\u4e2a\u504f\u5c01\u95ed\u7684\u5185\u7f51\u8ba1\u7b97\u73af\u5883\u3001\u4e0e\u5404\u7cfb\u7edf\u7f51\u7edc\u3001\u5b89\u5168\u7ec4\u3001\u6743\u9650\u3001\u8def\u7531\u7b49\u90fd\u9700\u8981\u5f88\u597d\u7684\u914d\u7f6e\u548c\u6d4b\u8bd5\uff0c\u624d\u80fd\u8ba9\u4efb\u52a1\u771f\u6b63\u6bd4\u8f83\u597d\u7684\u8dd1\u5728\u8be5\u751f\u4ea7\u73af\u5883\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u5b89\u5168\u7ec4\u914d\u7f6e"}),"\uff1a\u4e3a\u4e86\u5b9e\u73b0\u6d77\u5916\u6e38\u620f\u5b9e\u65f6\u6570\u636e\u7684\u62c9\u53d6\u5904\u7406\u548c\u5199\u5165\u56fd\u5185 Kafka \u96c6\u7fa4\uff0c\u786e\u4fdd\u6570\u636e\u6d41\u7a0b\u7684\u5e73\u7a33\uff0c\u6211\u4eec\u4f7f\u7528\u4e13\u7ebf\u5e76\u4e14\u901a\u8fc7\u7ed9 kubernetes Flink\u8d85\u7ea7\u8282\u70b9\u5f00\u901a\u4e13\u7ebf\u5916\u7f51\u8bbf\u95ee\u6743\u6765\u5b9e\u73b0\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u76f8\u5173\u622a\u56fe"}),"\uff1a"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(75538).A+"",width:"1080",height:"315"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:s(91202).A+"",width:"1080",height:"490"})}),"\n",(0,a.jsx)(e.h2,{id:"7--\u6536\u76ca\u4e0e\u671f\u671b",children:(0,a.jsx)(e.strong,{children:"7.  \u6536\u76ca\u4e0e\u671f\u671b"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u4f7f\u7528 Apache StreamPark \u4e4b\u540e\uff0c\u7ed9\u6211\u4eec\u6700\u5927\u7684\u611f\u53d7\u5c31\u662f StreamPark \u7528\u8d77\u6765\u5341\u5206\u5730\u7b80\u5355\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\u5c31\u80fd\u5f88\u5feb\u5730\u628a Flink \u4efb\u52a1\u90e8\u7f72\u5230\u4efb\u610f\u7684\u96c6\u7fa4\uff0c\u4e14\u53ef\u4ee5\u5b9e\u65f6\u7684\u53bb\u76d1\u63a7\u5e76\u7ba1\u7406\u6210\u5343\u4e0a\u4e07\u7684\u4f5c\u4e1a\uff0c\u5341\u5206\u7684 nice\uff01\u6536\u76ca\u5982\u4e0b\uff1a"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsx)(e.p,{children:"\u5927\u91cf\u7684\u5b9e\u65f6\u4efb\u52a1\u901a\u8fc7 StreamPark \u5f88\u5feb\u901f\u5730\u5c31\u8fc1\u79fb\u5230\u4e86 Kubernetes\uff0c\u4e0b\u6389 YARN \u540e\uff0c\u65e9\u671f\u6df7\u90e8\u7684 Apache Doris \u96c6\u7fa4\u6ca1\u6709\u8d44\u6e90\u4e89\u62a2\u540e\uff0c\u53d8\u5f97\u5341\u5206\u7a33\u5b9a\u3002"}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsx)(e.p,{children:"\u8865\u6570\u636e\u65f6\uff0c\u53ef\u5feb\u901f\u501f\u7528 TKE \u4e2d\u8d85\u7ea7\u8282\u70b9\u7684\u80fd\u529b\uff0c\u901a\u8fc7 StreamPark \u5e73\u53f0\uff0c\u5f88\u5bb9\u6613\u8fdb\u884c\u4e0a\u5343\u4e2a pod \u7684\u4e00\u5206\u949f\u5f39\u7f29\uff0c\u8865\u6570\u7279\u522b\u9ad8\u6548\u3002"}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsx)(e.p,{children:"\u6280\u672f\u6808\u53d8\u5f97\u66f4\u52a0\u5148\u8fdb\u548c\u7edf\u4e00\u3002\u5927\u6570\u636e\u65f6\u4ee3\u7684\u4e00\u5806\u7ec4\u4ef6\uff0c\u53d8\u7684\u8d8a\u6765\u8d8a\u9ad8\u6548\u548c\u7edf\u4e00\u3002\u76ee\u524d\u6b22\u4e50\u5927\u6570\u636e\u5df2\u7ecf\u5b8c\u6210\u4e86 Doris\u3001Flink\u3001Spark\u3001Hive\u3001Grafana\u3001Prometheus \u7b49\u4e00\u7cfb\u5217\u7ec4\u4ef6\u7684 Kubernetes \u4e91\u539f\u751f\u5316\uff0c\u8fd0\u7ef4\u8d77\u6765\u66f4\u52a0\u7b80\u5355\u548c\u9ad8\u6548\uff0cStreamPark \u5728 Flink \u5bb9\u5668\u5316\u8fdb\u7a0b\u4e2d\u8d77\u5230\u4e86\u5f88\u5927\u7684\u4f5c\u7528\u3002"}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsx)(e.p,{children:"StreamPark \u5e73\u53f0\u64cd\u4f5c\u7b80\u5355\u3001\u529f\u80fd\u5b8c\u5907\u3001\u6027\u80fd\u7a33\u5b9a\u3001\u793e\u533a\u54cd\u5e94\u79ef\u6781\uff0c\u771f\u6b63\u8ba9\u6d41\u5904\u7406\u4f5c\u4e1a\u5f00\u53d1\u8d8a\u6765\u8d8a\u7b80\u5355\uff0c\u4e3a\u6211\u4eec\u5e26\u6765\u4e86\u5f88\u591a\u4fbf\u5229\uff0c\u8ba9\u6211\u4eec\u66f4\u52a0\u4e13\u6ce8\u4e8e\u4e1a\u52a1\uff0c\u70b9\u8d5e~"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4e5f\u671f\u671b StreamPark \u80fd\u505a\u5f97\u8d8a\u6765\u8d8a\u597d\uff0c\u8fd9\u91cc\u63d0\u51fa\u4e86\u4e00\u4e9b\u4f18\u5316\u7684\u5efa\u8bae\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u652f\u6301 Operator \u90e8\u7f72"}),"\uff1a\u671f\u671b Flink on kubernetes \u652f\u6301 operator \u90e8\u7f72\u65b9\u5f0f\uff0c\u56e0\u4e3a\u5176\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8d44\u6e90\u7c7b\u578b\u3001\u6307\u5b9a\u8c03\u7528\u987a\u5e8f\u3001\u76d1\u63a7\u6307\u6807\u7b49\u7b49\u597d\u5904\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u652f\u6301 autoscaler"}),"\uff1a\u56e0\u4e3a\u5b9e\u65f6\u6d41\u4efb\u52a1\u6709\u4e1a\u52a1\u9ad8\u5cf0\u548c\u6ce2\u8c37\u3001\u7279\u522b\u5468\u4e48\u6d3b\u52a8\u3001\u6570\u636e\u91cf\u7ffb\u500d\u3001\u4eba\u4e3a\u5468\u671f\u6027\u8c03\u6574\u5e76\u884c\u5ea6\u4e0d\u662f\u5f88\u5408\u9002\u3002\u6545\u7ed3\u5408 Kubernetes\u3001\u671f\u5f85 StreamPark \u65e9\u65e5\u5b8c\u6210 operator \u65b9\u5f0f\u521b\u5efa Flink \u96c6\u7fa4\u3001\u5728 Flink 1.17\u4ee5\u4e0a\u3001\u5c31\u53ef\u4ee5\u6bd4\u8f83\u597d\u7684\u8bbe\u7f6e\u9608\u503c\u3001\u5229\u7528\u81ea\u52a8\u5f39\u7f29\u3001\u5b9e\u73b0\u9ad8\u5cf0\u671f\u5f39\u66f4\u591a\u8d44\u6e90\u5904\u7406\u6570\u636e\u3001\u4f4e\u8c37\u671f\u6536\u7f29\u8d44\u6e90\u8282\u7ea6\u6210\u672c\u3001\u975e\u5e38\u671f\u5f85\u3002"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u7a0b\u5e8f\u62a5\u9519\u903b\u8f91"}),"\uff1a\u5f53\u524d Flink \u4efb\u52a1\u8bbe\u7f6e\u4e86\u56fa\u5b9a\u6b21\u6570\u6216\u8005\u6bd4\u7387\u91cd\u8bd5\uff0c\u4f46\u5f53\u524d StreamPark \u90ae\u4ef6\u544a\u8b66\u7279\u522b\u9891\u7e41\u3001\u4e0d\u662f\u671f\u5f85\u7684\u4efb\u52a1\u5931\u8d25\u4e00\u6b21\u8fdb\u884c\u4e00\u6b21\u544a\u8b66\uff0c\u6545\u5e0c\u671b\u5176\u8fdb\u4e00\u6b65\u63d0\u5347\u3002"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["\u6700\u540e\uff0c\u6211\u4eec\u8877\u5fc3\u5730\u611f\u8c22 ",(0,a.jsx)(e.strong,{children:"Apache StreamPark"})," \u793e\u533a\u5728\u6211\u4eec\u4f7f\u7528 StreamPark \u65f6\u63d0\u4f9b\u7684\u65e0\u79c1\u5e2e\u52a9\u3002\u4ed6\u4eec\u4e13\u4e1a\u7684\u670d\u52a1\u7cbe\u795e\u548c\u4ee5\u7528\u6237\u4e3a\u672c\u7684\u6001\u5ea6\uff0c\u4f7f\u6211\u4eec\u5f97\u4ee5\u66f4\u52a0\u9ad8\u6548\u3001\u6d41\u7545\u5730\u8fd0\u7528\u8fd9\u4e00\u5f3a\u5927\u6846\u67b6\u3002\u671f\u671b StreamPark \u8d8a\u6765\u8d8a\u597d\uff0c\u6210\u4e3a\u65b0\u664b Apache \u9879\u76ee\u7684\u5178\u8303\uff01"]})]})}function m(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},24829:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/access_credential-5672963a435919d770ca7eb6210a2375.png"},74803:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/alarm_configuration-3fd492650cb0a7ec81104a9f4fdd8379.png"},28137:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/application_first_configuration-354324b7b32b467a43dbc1d97ec40053.png"},22405:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/application_second_configuration-29d9a7c1e9af25d1c07fdf5cb7e22eb4.png"},14784:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/application_third_configuration-c7983a9c4c7acfe53268d98a44b4237c.png"},75538:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/cloud_environment-b4dd173f9edbb32b1af136e9474bf494.png"},82094:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/clusters-dd6a35ed22d17b2020d7301f273d3c2f.png"},63689:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/cover-14b4d616ef68e17a584a773b097ea107.png"},72352:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/data_reporting-92cd1a36c4317a3bf33835a6df917c6d.png"},88096:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/dynamic_parameter-2d1c54c8137ab01e9437f8b6fbbb13de.png"},36470:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/first_configuration-d41d93c20abd21359a8b24a9b75b7ea4.png"},71130:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/flink_cluster-7ee9edd1b1777a91e7c5225ecebf9550.png"},46843:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/flink_home-35bb262214d42ca4276c3e8152b1f20b.png"},77419:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/incoming_parameter-4fbd6146a85b569ddae19dd005922038.png"},91202:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/instance_management-90be7742bb44cdf79195444a45a79126.png"},61488:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/jar-bf657c3fbc9aebd6022efea71b10c160.png"},92819:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/jar_configuration-fc88df4ae67c670f62de8eb0a51db10d.png"},99072:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/kubernetes_configuration-50a637b897415c1d26f17d1ebb0fd690.png"},91097:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/new_cover-4a6114b4487e3e397951de8ff4abe8f9.png"},43898:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/running-0e6a0f7e492c6d62638f8a255200e8be.png"},95720:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/second_configuration-4dbfe7fdf6dc5297c9763e8847d95461.png"},67532:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/session_cluster-c4d11c15302e9cdbe70786b8ae6177c1.png"},65944:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/sql_configuration-cf75e4e90e78db9a2e05a286fd8cf54c.png"},46334:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/task_construction-1376844f54646571bf10a8dbfd729fac.png"},46343:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/third_configuration-f2cc57a25457ffab62730c1609ef3ec9.png"},31853:(n,e,s)=>{s.d(e,{A:()=>a});const a=s.p+"assets/images/variable_management-1213e43f16736c78f9f8b1c85c537926.png"},76113:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>o});var a=s(30758);const t={},i=a.createContext(t);function r(n){const e=a.useContext(i);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),a.createElement(i.Provider,{value:e},n.children)}}}]);