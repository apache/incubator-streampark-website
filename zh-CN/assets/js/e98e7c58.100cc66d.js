"use strict";(self.webpackChunkapache_streampark_website=self.webpackChunkapache_streampark_website||[]).push([[6785],{50080:n=>{n.exports=JSON.parse("{\"archive\":{\"blogPosts\":[{\"id\":\"streampark-flink-on-k8s\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-flink-on-k8s\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/0-streampark-flink-on-k8s.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/0-streampark-flink-on-k8s.md\",\"title\":\"Apache StreamPark\u2122 Flink on Kubernetes \u5b9e\u8df5\",\"description\":\"\u96fe\u82af\u79d1\u6280\u521b\u7acb\u4e8e2018\u5e741\u6708\u3002\u76ee\u524d\u4e3b\u8425\u4e1a\u52a1\u5305\u62ec RELX \u60a6\u523b\u54c1\u724c\u4ea7\u54c1\u7684\u7814\u53d1\u3001\u8bbe\u8ba1\u3001\u5236\u9020\u53ca\u9500\u552e\u3002\u51ed\u501f\u8986\u76d6\u5168\u4ea7\u4e1a\u94fe\u7684\u6838\u5fc3\u6280\u672f\u4e0e\u80fd\u529b\uff0cRELX \u60a6\u523b\u81f4\u529b\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u517c\u5177\u9ad8\u54c1\u8d28\u548c\u5b89\u5168\u6027\u7684\u4ea7\u54c1\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"},{\"label\":\"Kubernetes\",\"permalink\":\"/zh-CN/blog/tags/kubernetes\"}],\"readingTime\":19.075,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-flink-on-k8s\",\"title\":\"Apache StreamPark\u2122 Flink on Kubernetes \u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"FlinkSQL\",\"Kubernetes\"]},\"unlisted\":false,\"nextItem\":{\"title\":\"Flink \u5f00\u53d1\u5229\u5668 Apache StreamPark\u2122\",\"permalink\":\"/zh-CN/blog/flink-development-framework-streampark\"}},\"content\":\"\u96fe\u82af\u79d1\u6280\u521b\u7acb\u4e8e2018\u5e741\u6708\u3002\u76ee\u524d\u4e3b\u8425\u4e1a\u52a1\u5305\u62ec RELX \u60a6\u523b\u54c1\u724c\u4ea7\u54c1\u7684\u7814\u53d1\u3001\u8bbe\u8ba1\u3001\u5236\u9020\u53ca\u9500\u552e\u3002\u51ed\u501f\u8986\u76d6\u5168\u4ea7\u4e1a\u94fe\u7684\u6838\u5fc3\u6280\u672f\u4e0e\u80fd\u529b\uff0cRELX \u60a6\u523b\u81f4\u529b\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u517c\u5177\u9ad8\u54c1\u8d28\u548c\u5b89\u5168\u6027\u7684\u4ea7\u54c1\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## **\u4e3a\u4ec0\u4e48\u9009\u62e9 Native Kubernetes**\\n\\nNative Kubernetes \u5177\u6709\u4ee5\u4e0b\u4f18\u52bf\uff1a\\n\\n- \u66f4\u77ed\u7684 Failover \u65f6\u95f4\\n- \u53ef\u4ee5\u5b9e\u73b0\u8d44\u6e90\u6258\u7ba1\uff0c\u4e0d\u9700\u8981\u624b\u52a8\u521b\u5efa TaskManager \u7684 Pod\uff0c\u53ef\u4ee5\u81ea\u52a8\u5b8c\u6210\u9500\u6bc1\\n- \u5177\u6709\u66f4\u52a0\u4fbf\u6377\u7684 HA\uff0cFlink 1.12 \u7248\u672c\u4e4b\u540e\u5728 Native Kubernetes \u6a21\u5f0f\u4e0b\uff0c\u53ef\u4ee5\u4f9d\u8d56\u4e8e\u539f\u751f Kubernetes \u7684 Leader\u9009\u4e3e\u673a\u5236\u6765\u5b8c\u6210 JobManager \u7684 HA\\n\\nNative Kubernetes \u548c Standalone Kubernetes \u4e3b\u8981\u533a\u522b\u5728\u4e8e Flink \u4e0e Kubernetes \u4ea4\u4e92\u7684\u65b9\u5f0f\u4e0d\u540c\u4ee5\u53ca\u7531\u6b64\u4ea7\u751f\u7684\u4e00\u7cfb\u5217\u4f18\u52bf\u3002Standalone Kubernetes \u9700\u8981\u7528\u6237\u81ea\u5b9a\u4e49 JobManager \u548c TaskManager \u7684 Kubernetes \u8d44\u6e90\u63cf\u8ff0\u6587\u4ef6\uff0c\u63d0\u4ea4\u4f5c\u4e1a\u65f6\u9700\u8981\u7528 kubectl \u7ed3\u5408\u8d44\u6e90\u63cf\u8ff0\u6587\u4ef6\u542f\u52a8 Flink \u96c6\u7fa4\u3002\u800c Native Kubernetes \u6a21\u5f0f Flink Client \u91cc\u9762\u96c6\u6210\u4e86\u4e00\u4e2a Kubernetes Client\uff0c\u5b83\u53ef\u4ee5\u76f4\u63a5\u548c Kubernetes API Server \u8fdb\u884c\u901a\u8baf\uff0c\u5b8c\u6210 JobManager Deployment \u4ee5\u53ca ConfigMap \u7684\u521b\u5efa\u3002JobManager Development \u521b\u5efa\u5b8c\u6210\u4e4b\u540e\uff0c\u5b83\u91cc\u9762\u7684 Resource Manager \u6a21\u5757\u53ef\u4ee5\u76f4\u63a5\u548c Kubernetes API Server \u8fdb\u884c\u901a\u8baf\uff0c\u5b8c\u6210 TaskManager pod \u7684\u521b\u5efa\u548c\u9500\u6bc1\u5de5\u4f5c\u4ee5\u53ca Taskmanager \u7684\u5f39\u6027\u4f38\u7f29\u3002\u56e0\u6b64\u751f\u4ea7\u73af\u5883\u4e2d\u63a8\u8350\u4f7f\u7528 Flink on Native Kubernetes \u6a21\u5f0f\u90e8\u7f72 Flink \u4efb\u52a1\u3002\\n\\n![](/blog/relx/nativekubernetes_architecture.png)\\n\\n## **\u5f53 Flink On Kubernetes \u9047\u89c1 Apache StreamPark\u2122**\\n\\nFlink on Native Kubernetes \u76ee\u524d\u652f\u6301 Application \u6a21\u5f0f\u548c Session \u6a21\u5f0f\uff0c\u4e24\u8005\u5bf9\u6bd4 Application \u6a21\u5f0f\u90e8\u7f72\u89c4\u907f\u4e86 Session \u6a21\u5f0f\u7684\u8d44\u6e90\u9694\u79bb\u95ee\u9898\u3001\u4ee5\u53ca\u5ba2\u6237\u7aef\u8d44\u6e90\u6d88\u8017\u95ee\u9898\uff0c\u56e0\u6b64**\u751f\u4ea7\u73af\u5883\u66f4\u63a8\u8350\u91c7\u7528 Application Mode \u90e8\u7f72 Flink \u4efb\u52a1\u3002**\u4e0b\u9762\u6211\u4eec\u5206\u522b\u770b\u770b\u4f7f\u7528\u539f\u59cb\u811a\u672c\u7684\u65b9\u5f0f\u548c\u4f7f\u7528 StreamPark \u5f00\u53d1\u90e8\u7f72\u4e00\u4e2a Flink on Native Kubernetes \u4f5c\u4e1a\u7684\u6d41\u7a0b\u3002\\n\\n### ***\u4f7f\u7528\u811a\u672c\u65b9\u5f0f\u90e8\u7f72Kubernetes***\\n\\n\u5728\u6ca1\u6709\u4e00\u4e2a\u652f\u6301 Flink on Kubernetes \u4efb\u52a1\u5f00\u53d1\u90e8\u7f72\u7684\u5e73\u53f0\u7684\u60c5\u51b5\u4e0b\uff0c\u9700\u8981\u4f7f\u7528\u811a\u672c\u7684\u65b9\u5f0f\u8fdb\u884c\u4efb\u52a1\u7684\u63d0\u4ea4\u548c\u505c\u6b62\uff0c\u8fd9\u4e5f\u662f Flink \u63d0\u4f9b\u7684\u9ed8\u8ba4\u7684\u65b9\u5f0f\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b:\\n\\n1. \u5728 Flink \u5ba2\u6237\u7aef\u8282\u70b9\u51c6\u5907 kubectl \u548c Docker \u547d\u4ee4\u8fd0\u884c\u73af\u5883\uff0c\u521b\u5efa\u90e8\u7f72 Flink \u4f5c\u4e1a\u4f7f\u7528\u7684 Kubernetes Namespace \u548c Service Account \u4ee5\u53ca\u8fdb\u884c RBAC\\n2. \u7f16\u5199 Dockerfile \u6587\u4ef6\uff0c\u5c06 Flink \u57fa\u7840\u955c\u50cf\u548c\u7528\u6237\u7684\u4f5c\u4e1a Jar \u6253\u5305\u5230\u4e00\u8d77\\n\\n```dockerfile\\n\\nFROM flink:1.13.6-scala_2.11\\nRUN mkdir -p $FLINK_HOME/usrlib\\nCOPY my-flink-job.jar $FLINK_HOME/usrlib/my-flink-job.jar\\n```\\n\\n3. \u4f7f\u7528 Flink \u5ba2\u6237\u7aef\u811a\u672c\u542f\u52a8 Flink \u4efb\u52a1\\n\\n```shell\\n\\n./bin/flink run-application \\\\\\n    --target kubernetes-application \\\\\\n    -Dkubernetes.namespace=flink-cluster \\\\\\n    -Dkubernetes.jobmanager.service-account=default \\\\\\n    -Dkubernetes.cluster-id=my-first-application-cluster \\\\\\n    -Dkubernetes.container.image=relx_docker_url/streamx/relx_flink_1.13.6-scala_2.11:latest \\\\\\n    -Dkubernetes.rest-service.exposed.type=NodePort \\\\\\n    local:///opt/flink/usrlib/my-flink-job.jar\\n```\\n\\n4. \u4f7f\u7528 Kubectl \u547d\u4ee4\u83b7\u53d6\u5230 Flink \u4f5c\u4e1a\u7684 WebUI \u8bbf\u95ee\u5730\u5740\u548c JobId\\n\\n```shell\\nkubectl -n flink-cluster get svc\\n```\\n\\n5. \u4f7f\u7528Flink\u547d\u4ee4\u505c\u6b62\u4f5c\u4e1a\\n\\n```shell\\n./bin/flink cancel\\n    --target kubernetes-application\\n    -Dkubernetes.cluster-id=my-first-application-cluster\\n    -Dkubernetes.namespace=flink-cluster <jobId>\\n```\\n\\n\u4ee5\u4e0a\u5c31\u662f\u4f7f\u7528 Flink \u63d0\u4f9b\u7684\u6700\u539f\u59cb\u7684\u811a\u672c\u65b9\u5f0f\u628a\u4e00\u4e2a Flink \u4efb\u52a1\u90e8\u7f72\u5230 Kubernetes \u4e0a\u7684\u8fc7\u7a0b\uff0c\u53ea\u505a\u5230\u4e86\u6700\u57fa\u672c\u7684\u4efb\u52a1\u63d0\u4ea4\uff0c\u5982\u679c\u8981\u8fbe\u5230\u751f\u4ea7\u4f7f\u7528\u7ea7\u522b\uff0c\u8fd8\u6709\u4e00\u7cfb\u5217\u7684\u95ee\u9898\u9700\u8981\u89e3\u51b3\uff0c\u5982\uff1a\u65b9\u5f0f\u8fc7\u4e8e\u539f\u59cb\u65e0\u6cd5\u9002\u914d\u5927\u6279\u91cf\u4efb\u52a1\u3001\u65e0\u6cd5\u8bb0\u5f55\u4efb\u52a1checkpoint \u548c\u5b9e\u65f6\u72b6\u6001\u8ddf\u8e2a\u3001\u4efb\u52a1\u8fd0\u7ef4\u548c\u76d1\u63a7\u56f0\u96be\u3001\u65e0\u544a\u8b66\u673a\u5236\u3001 \u65e0\u6cd5\u96c6\u4e2d\u5316\u7ba1\u7406\u7b49\u7b49\u3002\\n\\n## **\u4f7f\u7528 Apache StreamPark\u2122 \u90e8\u7f72 Flink on Kubernetes**\\n\\n------\\n\\n\u5bf9\u4e8e\u4f01\u4e1a\u7ea7\u751f\u4ea7\u73af\u5883\u4f7f\u7528 Flink on Kubernetes \u4f1a\u6709\u7740\u66f4\u9ad8\u7684\u8981\u6c42\uff0c\u4e00\u822c\u4f1a\u9009\u62e9\u81ea\u5efa\u5e73\u53f0\u6216\u8005\u8d2d\u4e70\u76f8\u5173\u5546\u4e1a\u4ea7\u54c1\uff0c\u4e0d\u8bba\u54ea\u79cd\u65b9\u6848\u5728\u4ea7\u54c1\u80fd\u529b\u4e0a\u6ee1\u8db3: **\u5927\u6279\u91cf\u4efb\u52a1\u5f00\u53d1\u90e8\u7f72\u3001\u72b6\u6001\u8ddf\u8e2a\u3001\u8fd0\u7ef4\u76d1\u63a7\u3001\u5931\u8d25\u544a\u8b66\u3001\u4efb\u52a1\u7edf\u4e00\u7ba1\u7406\u3001\u9ad8\u53ef\u7528\u6027** \u7b49\u8fd9\u4e9b\u662f\u666e\u904d\u7684\u8bc9\u6c42\u3002\\n\\n\u9488\u5bf9\u4ee5\u4e0a\u95ee\u9898\u6211\u4eec\u8c03\u7814\u4e86\u5f00\u6e90\u9886\u57df\u652f\u6301\u5f00\u53d1\u90e8\u7f72 Flink on Kubernetes \u4efb\u52a1\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u8c03\u7814\u7684\u8fc7\u7a0b\u4e2d\u4e5f\u4e0d\u4e4f\u9047\u5230\u4e86\u5176\u4ed6\u4f18\u79c0\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u5728\u7efc\u5408\u5bf9\u6bd4\u4e86\u591a\u4e2a\u5f00\u6e90\u9879\u76ee\u540e\u5f97\u51fa\u7ed3\u8bba: **StreamPark \u4e0d\u8bba\u662f\u5b8c\u6210\u5ea6\u8fd8\u662f\u4f7f\u7528\u4f53\u9a8c\u3001\u7a33\u5b9a\u6027\u7b49\u6574\u4f53\u8868\u73b0\u90fd\u975e\u5e38\u51fa\u8272\uff0c\u56e0\u6b64\u6700\u7ec8\u9009\u62e9\u4e86 StreamPark \u4f5c\u4e3a\u6211\u4eec\u7684\u4e00\u7ad9\u5f0f\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u3002**\u4e0b\u9762\u6211\u4eec\u770b\u770b StreamPark \u662f\u5982\u4f55\u652f\u6301 Flink on Kubernetes :\\n\\n### **\u57fa\u7840\u73af\u5883\u914d\u7f6e**\\n\\n\u57fa\u7840\u73af\u5883\u914d\u7f6e\u5305\u62ec Kubernetes \u548c Docker \u4ed3\u5e93\u4fe1\u606f\u4ee5\u53ca Flink \u5ba2\u6237\u7aef\u7684\u4fe1\u606f\u914d\u7f6e\u3002\u5bf9\u4e8e Kubernetes \u57fa\u7840\u73af\u5883\u6700\u4e3a\u7b80\u5355\u7684\u65b9\u5f0f\u662f\u76f4\u63a5\u62f7\u8d1d Kubernetes \u8282\u70b9\u7684 .kube/config \u5230 StreamPark \u8282\u70b9\u7528\u6237\u76ee\u5f55\uff0c\u4e4b\u540e\u4f7f\u7528 kubectl \u547d\u4ee4\u521b\u5efa Flink \u4e13\u7528\u7684 Kubernetes Namespace \u4ee5\u53ca\u8fdb\u884c RBAC \u914d\u7f6e\u3002\\n\\n```shell\\n# \u521b\u5efaFlink\u4f5c\u4e1a\u4f7f\u7528\u7684k8s namespace\\nkubectl create ns flink-cluster\\n# \u5bf9default\u7528\u6237\u8fdb\u884cRBAC\u8d44\u6e90\u7ed1\u5b9a\\nkubectl create clusterrolebinding flink-role-binding-default --clusterrole=edit --serviceaccount=flink-cluster:default\\n```\\n\\nDocker \u8d26\u6237\u4fe1\u606f\u76f4\u63a5\u5728 Docker Setting \u754c\u9762\u914d\u7f6e\u5373\u53ef\uff1a\\n\\n![](/blog/relx/docker_setting.png)\\n\\nStreamPark \u53ef\u9002\u914d\u591a\u7248\u672c Flink \u4f5c\u4e1a\u5f00\u53d1\uff0cFlink \u5ba2\u6237\u7aef\u76f4\u63a5\u5728 StreamPark Setting \u754c\u9762\u914d\u7f6e\u5373\u53ef\uff1a\\n\\n![](/blog/relx/flinkversion_setting.png)\\n\\n### **\u4f5c\u4e1a\u5f00\u53d1**\\n\\nStreamPark \u505a\u597d\u57fa\u7840\u73af\u5883\u914d\u7f6e\u4e4b\u540e\u53ea\u9700\u8981\u4e09\u6b65\u5373\u53ef\u5f00\u53d1\u90e8\u7f72\u4e00\u4e2a Flink \u4f5c\u4e1a:\\n\\n![](/blog/relx/development_process.png)\\n\\nStreamPark \u65e2\u652f\u6301 Upload Jar \u4e5f\u652f\u6301\u76f4\u63a5\u7f16\u5199 Flink SQL \u4f5c\u4e1a, **Flink SQL \u4f5c\u4e1a\u53ea\u9700\u8981\u8f93\u5165SQL \u548c \u4f9d\u8d56\u9879\u5373\u53ef, \u8be5\u65b9\u5f0f\u5927\u5927\u63d0\u5347\u4e86\u5f00\u53d1\u4f53\u9a8c,** **\u5e76\u4e14\u89c4\u907f\u4e86\u4f9d\u8d56\u51b2\u7a81\u7b49\u95ee\u9898\uff0c**\u5bf9\u6b64\u90e8\u5206\u672c\u6587\u4e0d\u91cd\u70b9\u4ecb\u7ecd\u3002\\n\\n\u8fd9\u91cc\u9700\u8981\u9009\u62e9\u90e8\u7f72\u6a21\u5f0f\u4e3a kubernetes application, \u5e76\u4e14\u9700\u8981\u5728\u4f5c\u4e1a\u5f00\u53d1\u9875\u9762\u8fdb\u884c\u4ee5\u4e0b\u53c2\u6570\u7684\u914d\u7f6e\uff1a\u7ea2\u6846\u4e2d\u53c2\u6570\u4e3a Flink on Kubernetes \u57fa\u7840\u53c2\u6570\u3002\\n\\n![](/blog/relx/kubernetes_base_parameters.png)\\n\\n\u4e0b\u9762\u53c2\u6570\u4e3a Flink \u4f5c\u4e1a\u548c\u8d44\u6e90\u76f8\u5173\u7684\u53c2\u6570\uff0cResolve Order \u7684\u9009\u62e9\u4e0e\u4ee3\u7801\u52a0\u8f7d\u6a21\u5f0f\u6709\u5173\uff0c\u5bf9\u4e8e DataStream API \u5f00\u53d1\u7684 Upload Jar\u4e0a\u4f20\u7684\u4f5c\u4e1a\u9009\u62e9\u4f7f\u7528 Child-first\uff0cFlink SQL \u4f5c\u4e1a\u9009\u62e9\u4f7f\u7528 Parent-first \u52a0\u8f7d\u3002\\n\\n![](/blog/relx/flink_parameters.png)\\n\\n\u6700\u540e\u5c31\u662f\u4e0b\u9762\u8fd9\u4e24\u4e2a\u91cd\u91cf\u7ea7\u53c2\u6570\u4e86\uff0c\u5bf9\u4e8e Native Kubernetes \u800c\u8a00\uff0ck8s-pod-template \u4e00\u822c\u53ea\u9700\u8981\u8fdb\u884c pod-template \u914d\u7f6e\u5373\u53ef\uff0cDynamic Option \u662f pod-template \u53c2\u6570\u7684\u8865\u5145\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u4e2a\u6027\u5316\u914d\u7f6e\u53ef\u4ee5\u5728 Dynamic Option \u4e2d\u914d\u7f6e\u3002\u66f4\u591a Dynamic Option \u76f4\u63a5\u53c2\u8003 Flink \u5b98\u7f51\u5373\u53ef\u3002\\n\\n![](/blog/relx/pod_template.png)\\n\\n### **\u4f5c\u4e1a\u4e0a\u7ebf**\\n\\n\u4f5c\u4e1a\u5f00\u53d1\u5b8c\u6210\u4e4b\u540e\u662f\u4f5c\u4e1a\u4e0a\u7ebf\u73af\u8282\uff0c\u5728\u8fd9\u4e00\u73af\u8282\u4e2d StreamPark \u505a\u4e86\u5927\u91cf\u7684\u5de5\u4f5c\uff0c\u5177\u4f53\u5982\u4e0b:\\n\\n- \u51c6\u5907\u73af\u5883\\n- \u4f5c\u4e1a\u4e2d\u7684\u4f9d\u8d56\u4e0b\u8f7d\\n- \u6784\u5efa\u4f5c\u4e1a(\u6253JAR\u5305)\\n- \u6784\u5efa\u955c\u50cf\\n- \u63a8\u9001\u955c\u50cf\u5230\u8fdc\u7a0b\u4ed3\u5e93\\n\\n**\u5bf9\u4e8e\u7528\u6237\u6765\u8bf4: \u53ea\u9700\u8981\u70b9\u51fb\u4efb\u52a1\u5217\u8868\u4e2d\u7684\u4e91\u72b6\u7684\u4e0a\u7ebf\u6309\u94ae\u5373\u53ef\u3002**\\n\\n![](/blog/relx/operation.png)\\n\\n\u5728\u955c\u50cf\u6784\u5efa\u548c\u63a8\u9001\u7684\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u770b\u5230 StreamPark \u505a\u7684\u4e00\u7cfb\u5217\u5de5\u4f5c: **\u8bfb\u53d6\u914d\u7f6e\u3001\u6784\u5efa\u955c\u50cf\u3001\u63a8\u9001\u955c\u50cf\u5230\u8fdc\u7a0b\u4ed3\u5e93...** \u8fd9\u91cc\u8981\u7ed9StreamPark \u4e00\u4e2a\u5927\u5927\u7684\u8d5e\uff01\\n\\n![](/blog/relx/step_details.png)\\n\\n### **\u4f5c\u4e1a\u63d0\u4ea4**\\n\\n\u6700\u540e\u53ea\u9700\u8981\u70b9\u51fb Operation \u91cc start Application \u6309\u94ae\u4fbf\u53ef\u542f\u52a8\u4e00\u4e2a Flink on Kubernetes \u4f5c\u4e1a\uff0c\u4f5c\u4e1a\u542f\u52a8\u6210\u529f\u4e4b\u540e\u70b9\u51fb\u4f5c\u4e1a\u540d\u4fbf\u53ef\u8df3\u8f6c\u5230 Jobmanager WebUI \u9875\u9762\u3001\u6574\u4e2a\u8fc7\u7a0b\u975e\u5e38\u7b80\u5355\u4e1d\u6ed1\u3002\\n\\n![](/blog/relx/homework_submit.png)\\n\\n\u6574\u4e2a\u8fc7\u7a0b\u4ec5\u9700\u4e0a\u8ff0\u4e09\u6b65\uff0c\u5373\u53ef\u5b8c\u6210\u5728 StreamPark \u4e0a\u5f00\u53d1\u548c\u90e8\u7f72\u4e00\u4e2aFlink on Kubernetes \u4f5c\u4e1a\u3002\u800c StreamPark \u5bf9\u4e8e Flink on Kubernetes \u7684\u652f\u6301\u8fdc\u8fdc\u4e0d\u6b62\u63d0\u4ea4\u4e2a\u4efb\u52a1\u8fd9\u4e48\u7b80\u5355\u3002\\n\\n### **\u4f5c\u4e1a\u7ba1\u7406**\\n\\n**\u5728\u4f5c\u4e1a\u63d0\u4ea4\u4e4b\u540e\uff0cStreamPark \u80fd\u5b9e\u65f6\u83b7\u53d6\u5230\u4efb\u52a1\u7684\u6700\u65b0 checkpoint \u5730\u5740\u3001\u4efb\u52a1\u7684\u8fd0\u884c\u72b6\u6001\u3001\u96c6\u7fa4\u5b9e\u65f6\u7684\u8d44\u6e90\u6d88\u8017\u4fe1\u606f\uff0c\u9488\u5bf9\u8fd0\u884c\u7684\u4efb\u52a1\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u7684\u4e00\u952e\u542f\u505c, \u5728\u505c\u6b62\u4f5c\u4e1a\u65f6\u652f\u6301\u8bb0\u5f55 savepoint \u7684\u4f4d\u7f6e, \u4ee5\u53ca\u518d\u6b21\u542f\u52a8\u65f6\u4ece savepoint \u6062\u590d\u72b6\u6001\u7b49\u529f\u80fd\uff0c\u4ece\u800c\u4fdd\u8bc1\u4e86\u751f\u4ea7\u73af\u5883\u7684\u6570\u636e\u4e00\u81f4\u6027\uff0c\u771f\u6b63\u5177\u5907 Flink on Kubernetes \u7684 \u4e00\u7ad9\u5f0f\u5f00\u53d1\u3001\u90e8\u7f72\u3001\u8fd0\u7ef4\u76d1\u63a7\u7684\u80fd\u529b\u3002**\\n\\n\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b\u770b\u8fd9\u4e00\u5757\u7684\u80fd\u529b StreamPark \u662f\u5982\u4f55\u8fdb\u884c\u652f\u6301\u7684:\\n\\n- **\u5b9e\u65f6\u8bb0\u5f55checkpoint**\\n\\n------\\n\\n\u5728\u4f5c\u4e1a\u63d0\u4ea4\u4e4b\u540e\uff0c\u6709\u65f6\u5019\u9700\u8981\u66f4\u6539\u4f5c\u4e1a\u903b\u8f91\u4f46\u662f\u8981\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u5e73\u53f0\u5177\u6709\u5b9e\u65f6\u8bb0\u5f55\u6bcf\u4e00\u6b21 checkpoint \u4f4d\u7f6e\u7684\u80fd\u529b, \u4ee5\u53ca\u505c\u6b62\u65f6\u8bb0\u5f55\u6700\u540e\u7684 savepoint \u4f4d\u7f6e\u7684\u80fd\u529b\uff0cStreamPark \u5728 Flink on Kubernetes \u4e0a\u5f88\u597d\u7684\u5b9e\u73b0\u4e86\u8be5\u529f\u80fd\u3002\u9ed8\u8ba4\u4f1a\u6bcf\u96945\u79d2\u83b7\u53d6\u4e00\u6b21 checkpoint \u4fe1\u606f\u8bb0\u5f55\u5230\u5bf9\u5e94\u7684\u8868\u4e2d\uff0c\u5e76\u4e14\u4f1a\u6309\u7167 Flink \u4e2d\u4fdd\u7559 checkpoint \u6570\u91cf\u7684\u7b56\u7565\uff0c\u53ea\u4fdd\u7559 state.checkpoints.num-retained \u4e2a\uff0c\u8d85\u8fc7\u7684\u90e8\u5206\u5219\u5220\u9664\u3002\u5728\u4efb\u52a1\u505c\u6b62\u65f6\u6709\u52fe\u9009 savepoint \u7684\u9009\u9879\uff0c\u5982\u52fe\u9009\u4e86savepoint \u9009\u9879\uff0c\u5728\u4efb\u52a1\u505c\u6b62\u65f6\u4f1a\u505a savepoint \u64cd\u4f5c\uff0c\u540c\u6837\u4f1a\u8bb0\u5f55 savepoint \u5177\u4f53\u4f4d\u7f6e\u5230\u8868\u4e2d\u3002\\n\\n\u9ed8\u8ba4 savepoint \u7684\u6839\u8def\u5f84\u53ea\u9700\u8981\u5728 Flink Home flink-conf.yaml \u6587\u4ef6\u4e2d\u914d\u7f6e\u5373\u53ef\u81ea\u52a8\u8bc6\u522b\uff0c\u9664\u4e86\u9ed8\u8ba4\u5730\u5740\uff0c\u5728\u505c\u6b62\u65f6\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6307\u5b9a savepoint \u7684\u6839\u8def\u5f84\u3002\\n\\n![](/blog/relx/savepoint.png)\\n\\n![](/blog/relx/checkpoint.png)\\n\\n- **\u5b9e\u65f6\u8ddf\u8e2a\u8fd0\u884c\u72b6\u6001**\\n\\n------\\n\\n\u5bf9\u4e8e\u751f\u4ea7\u73af\u5883\u7684\u6311\u6218\uff0c\u5f88\u91cd\u8981\u7684\u4e00\u70b9\u5c31\u662f\u76d1\u63a7\u662f\u5426\u5230\u4f4d\uff0cFlink on Kubernetes \u66f4\u662f\u5982\u6b64\u3002\u8fd9\u70b9\u5f88\u91cd\u8981, \u4e5f\u662f\u6700\u57fa\u672c\u9700\u8981\u5177\u5907\u7684\u80fd\u529b\uff0cStreamPark \u53ef\u5b9e\u65f6\u76d1\u63a7 Flink on Kubernetes \u4f5c\u4e1a\u7684\u8fd0\u884c\u72b6\u6001\u5e76\u5728\u5e73\u53f0\u4e0a\u5c55\u793a\u7ed9\u7528\u6237\uff0c\u5728\u9875\u9762\u4e0a\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u6839\u636e\u5404\u79cd\u8fd0\u884c\u72b6\u6001\u6765\u68c0\u7d22\u4efb\u52a1\u3002\\n\\n![](/blog/relx/run_status.png)\\n\\n- **\u5b8c\u5584\u7684\u544a\u8b66\u673a\u5236**\\n\\n------\\n\\n\u9664\u6b64\u4e4b\u5916 StreamPark \u8fd8\u5177\u5907\u5b8c\u5584\u7684\u62a5\u8b66\u529f\u80fd: \u652f\u6301\u90ae\u4ef6\u3001\u9489\u9489\u3001\u5fae\u4fe1\u548c\u77ed\u4fe1 \u7b49\u3002\u8fd9\u4e5f\u662f\u5f53\u521d\u516c\u53f8\u8c03\u7814\u4e4b\u540e\u9009\u62e9 StreamPark \u4f5c\u4e3a Flink on Kubernetes \u4e00\u7ad9\u5f0f\u5e73\u53f0\u7684\u91cd\u8981\u539f\u56e0\u3002\\n\\n![](/blog/relx/alarm.png)\\n\\n\u901a\u8fc7\u4ee5\u4e0a\u6211\u4eec\u770b\u5230 StreamPark \u5728\u652f\u6301 Flink on Kubernetes \u5f00\u53d1\u90e8\u7f72\u8fc7\u7a0b\u4e2d\u5177\u5907\u7684\u80fd\u529b, \u5305\u62ec\uff1a**\u4f5c\u4e1a\u7684\u5f00\u53d1\u80fd\u529b\u3001\u90e8\u7f72\u80fd\u529b\u3001\u76d1\u63a7\u80fd\u529b\u3001\u8fd0\u7ef4\u80fd\u529b\u3001\u5f02\u5e38\u5904\u7406\u80fd\u529b\u7b49\uff0cStreamPark \u63d0\u4f9b\u7684\u662f\u4e00\u5957\u76f8\u5bf9\u5b8c\u6574\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u4e14\u5df2\u7ecf\u5177\u5907\u4e86\u4e00\u4e9b CICD/DevOps \u7684\u80fd\u529b\uff0c\u6574\u4f53\u7684\u5b8c\u6210\u5ea6\u8fd8\u5728\u6301\u7eed\u63d0\u5347\u3002\u662f\u5728\u6574\u4e2a\u5f00\u6e90\u9886\u57df\u4e2d\u5bf9\u4e8e Flink on Kubernetes \u4e00\u7ad9\u5f0f\u5f00\u53d1\u90e8\u7f72\u8fd0\u7ef4\u5de5\u4f5c\u5168\u94fe\u8def\u90fd\u652f\u6301\u7684\u4ea7\u54c1\uff0cStreamPark \u662f\u503c\u5f97\u88ab\u79f0\u8d5e\u7684\u3002**\\n\\n## **Apache StreamPark\u2122 \u5728\u96fe\u82af\u79d1\u6280\u7684\u843d\u5730\u5b9e\u8df5**\\n\\nStreamPark \u5728\u96fe\u82af\u79d1\u6280\u843d\u5730\u8f83\u665a\uff0c\u76ee\u524d\u4e3b\u8981\u7528\u4e8e\u5b9e\u65f6\u6570\u636e\u96c6\u6210\u4f5c\u4e1a\u548c\u5b9e\u65f6\u6307\u6807\u8ba1\u7b97\u4f5c\u4e1a\u7684\u5f00\u53d1\u90e8\u7f72\uff0c\u6709 Jar \u4efb\u52a1\u4e5f\u6709 Flink SQL \u4efb\u52a1\uff0c\u5168\u90e8\u4f7f\u7528 Native Kubernetes \u90e8\u7f72\uff1b\u6570\u636e\u6e90\u6709CDC\u3001Kafka \u7b49\uff0cSink \u7aef\u6709 Maxcompute\u3001kafka\u3001Hive \u7b49\uff0c\u4ee5\u4e0b\u662f\u516c\u53f8\u5f00\u53d1\u73af\u5883StreamPark \u5e73\u53f0\u622a\u56fe\uff1a\\n\\n![](/blog/relx/screenshot.png)\\n\\n## \u9047\u5230\u7684\u95ee\u9898\\n\\n\u4efb\u4f55\u65b0\u6280\u672f\u90fd\u6709\u63a2\u7d22\u4e0e\u8e29\u5751\u7684\u8fc7\u7a0b\uff0c\u5931\u8d25\u7684\u7ecf\u9a8c\u662f\u5b9d\u8d35\u7684\uff0c\u8fd9\u91cc\u4ecb\u7ecd\u4e0b StreamPark \u5728\u96fe\u82af\u79d1\u6280\u843d\u5730\u8fc7\u7a0b\u4e2d\u8e29\u7684\u4e00\u4e9b\u5751\u548c\u7ecf\u9a8c\uff0c**\u8fd9\u5757\u7684\u5185\u5bb9\u4e0d\u4ec5\u4ec5\u5173\u4e8e StreamPark \u7684\u90e8\u5206, \u76f8\u4fe1\u4f1a\u5e26\u7ed9\u6240\u6709\u4f7f\u7528 Flink on Kubernetes \u7684\u5c0f\u4f19\u4f34\u4e00\u4e9b\u53c2\u8003**\u3002\\n\\n### **\u5e38\u89c1\u95ee\u9898\u603b\u7ed3\u5982\u4e0b**\\n\\n- **kubernetes pod \u62c9\u53d6\u955c\u50cf\u5931\u8d25**\\n\\n\u8fd9\u4e2a\u95ee\u9898\u4e3b\u8981\u5728\u4e8e Kubernetes pod-template \u7f3a\u5c11 docker\u7684 imagePullSecrets\\n\\n- **scala \u7248\u672c\u4e0d\u4e00\u81f4**\\n\\n\u7531\u4e8e StreamPark \u90e8\u7f72\u9700\u8981 Scala \u73af\u5883\uff0c\u800c\u4e14 Flink SQL \u8fd0\u884c\u9700\u8981\u7528\u5230 StreamPark \u63d0\u4f9b\u7684 Flink SQL Client\uff0c\u56e0\u6b64\u4e00\u5b9a\u8981\u4fdd\u8bc1 Flink \u4f5c\u4e1a\u7684 Scala \u7248\u672c\u548c StreamPark \u7684 Scala \u7248\u672c\u4fdd\u6301\u4e00\u81f4\u3002\\n\\n- **\u6ce8\u610f\u7c7b\u51b2\u7a81**\\n\\n\u8fdb\u884c Flink SQL \u4f5c\u4e1a\u5f00\u53d1\u7684\u65f6\u5019\u9700\u8981\u6ce8\u610f Flink \u955c\u50cf\u548c Flink connector \u53ca UDF \u4e2d\u6709\u6ca1\u6709\u7c7b\u51b2\u7a81\uff0c\u6700\u597d\u7684\u907f\u514d\u7c7b\u51b2\u7a81\u7684\u529e\u6cd5\u662f\u5c06 Flink \u955c\u50cf\u548c\u5e38\u7528\u7684 Flink connector \u53ca\u7528\u6237 UDF \u6253\u6210\u4e00\u4e2a\u53ef\u7528\u7684\u57fa\u7840\u955c\u50cf\uff0c\u4e4b\u540e\u5176\u4ed6 Flink SQL \u4f5c\u4e1a\u76f4\u63a5\u590d\u7528\u5373\u53ef\u3002\\n\\n- **\u6ca1\u6709 Hadoop \u73af\u5883\u600e\u4e48\u5b58\u50a8 checkpoint?**\\n\\nHDFS \u963f\u91cc\u4e91 OSS/AWS S3 \u90fd\u53ef\u4ee5\u8fdb\u884c checkpoint \u548c savepoint \u5b58\u50a8\uff0cFlink \u57fa\u7840\u955c\u50cf\u5df2\u7ecf\u6709\u4e86\u5bf9\u4e8e OSS \u548c S3 \u7684\u652f\u6301\uff0c\u5982\u679c\u6ca1\u6709 HDFS \u53ef\u4ee5\u4f7f\u7528\u963f\u91cc\u4e91 OSS \u6216\u8005 S3\u5b58\u50a8\u72b6\u6001\u548c checkpoint \u548c savepoint \u6570\u636e\uff0c\u53ea\u9700\u8981\u5728 Flink \u52a8\u6001\u53c2\u6570\u4e2d\u7b80\u5355\u914d\u7f6e\u4e00\u4e0b\u5373\u53ef\u3002\\n\\n```shell\\n\\n-Dstate.backend=rocksdb\\n-Dcontainerized.master.env.ENABLE_BUILT_IN_PLUGINS=flink-oss-fs-hadoop-1.13.6.jar\\n-Dcontainerized.taskmanager.env.ENABLE_BUILT_IN_PLUGINS=flink-oss-fs-hadoop-1.13.6.jar\\n-Dfs.oss.endpoint=xxyy.aliyuncs.com\\n-Dfs.oss.accessKeyId=xxxxxxxxxx\\n-Dfs.oss.accessKeySecret=xxxxxxxxxx\\n-Dstate.checkpoints.dir=oss://realtime-xxx/streamx/dev/checkpoints/\\n-Dstate.savepoints.dir=oss://realtime-xxx/streamx/dev/savepoints/\\n```\\n\\n- **\u6539\u4e86\u4ee3\u7801\u91cd\u65b0\u53d1\u5e03\u540e\u5e76\u672a\u751f\u6548**\\n\\n\u8be5\u95ee\u9898\u4e0e Kubernetes pod \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u6709\u5173\uff0c\u5efa\u8bae\u5c06 Pod \u955c\u50cf\u62c9\u53d6\u7b56\u7565\u8bbe\u7f6e\u4e3a Always\uff1a\\n\\n```shell\\n\u200d-Dkubernetes.container.image.pull-policy=Always\\n```\\n\\n- **\u4efb\u52a1\u6bcf\u6b21\u91cd\u542f\u90fd\u4f1a\u5bfc\u81f4\u591a\u51fa\u4e00\u4e2a Job \u5b9e\u4f8b**\\n\\n\u5728\u914d\u7f6e\u4e86\u57fa\u4e8e kubernetes \u7684HA\u7684\u524d\u63d0\u6761\u4ef6\u4e0b\uff0c\u5f53\u9700\u8981\u505c\u6b62 Flink \u4efb\u52a1\u65f6\uff0c\u9700\u8981\u901a\u8fc7 StreamPark \u7684 cancel \u6765\u8fdb\u884c\uff0c\u4e0d\u8981\u76f4\u63a5\u901a\u8fc7 kubernetes \u96c6\u7fa4\u5220\u9664 Flink \u4efb\u52a1\u7684 Deployment\u3002\u56e0\u4e3a Flink \u7684\u5173\u95ed\u6709\u5176\u81ea\u6709\u7684\u5173\u95ed\u6d41\u7a0b\uff0c\u5728\u5220\u9664 pod \u540c\u65f6 Configmap \u4e2d\u7684\u76f8\u5e94\u914d\u7f6e\u6587\u4ef6\u4e5f\u4f1a\u88ab\u4e00\u5e76\u5220\u9664\uff0c\u800c\u76f4\u63a5\u5220\u9664 pod \u4f1a\u5bfc\u81f4 Configmap \u7684\u6b8b\u7559\u3002\u5f53\u76f8\u540c\u540d\u79f0\u7684\u4efb\u52a1\u91cd\u542f\u65f6\uff0c\u4f1a\u51fa\u73b0\u4e24\u4e2a\u76f8\u540c Job \u73b0\u8c61\uff0c\u56e0\u4e3a\u5728\u542f\u52a8\u65f6\uff0c\u4efb\u52a1\u4f1a\u52a0\u8f7d\u4e4b\u524d\u6b8b\u7559\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5c1d\u8bd5\u5c06\u5df2\u7ecf\u5173\u95ed\u7684\u4efb\u52a1\u6062\u590d\u3002\\n\\n- **kubernetes pod \u57df\u540d\u8bbf\u95ee\u600e\u4e48\u5b9e\u73b0**\\n\\n\u57df\u540d\u914d\u7f6e\u53ea\u9700\u8981\u6309\u7167 Kubernetes \u8d44\u6e90\u5728 pod-template \u4e2d\u914d\u7f6e\u5373\uff0c\u53ef\u9488\u5bf9\u4ee5\u4e0a\u95ee\u9898\u7ed9\u5927\u5bb6\u5206\u4eab\u4e00\u4e2a\u672c\u4eba\u603b\u7ed3\u7684\u4e00\u4e2a pod-template.yaml \u6a21\u677f\uff1a\\n\\n```yaml\\n\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: pod-template\\nspec:\\n  serviceAccount: default\\n  containers:\\n  - name: flink-main-container\\n    image:\\n  imagePullSecrets:\\n  - name: regsecret\\n  hostAliases:\\n    - ip: \\\"192.168.0.1\\\"\\n      hostnames:\\n      - \\\"node1\\\"\\n    - ip: \\\"192.168.0.2\\\"\\n      hostnames:\\n      - \\\"node2\\\"\\n    - ip: \\\"192.168.0.3\\\"\\n      hostnames:\\n      - \\\"node3\\\"\\n\\n```\\n\\n### **\u6700\u4f73\u5b9e\u8df5**\\n\\n\u60a6\u523b\u7684\u5927\u6570\u636e\u7ec4\u4ef6\u5f88\u591a\u57fa\u4e8e\u963f\u91cc\u4e91\uff0c\u6bd4\u5982 Maxcompute\u3001\u963f\u91cc\u4e91 Redis\uff0c\u540c\u65f6\u6211\u4eec\u8fd9\u8fb9 Flink SQL \u4f5c\u4e1a\u9700\u8981\u7528\u5230\u4e00\u4e9b UDF\u3002\u6700\u5f00\u59cb\u6211\u4eec\u662f\u91c7\u7528\u4f7f\u7528 Flink Base image + maven dependency + upload udf jar \u7684\u65b9\u5f0f\uff0c\u4f46\u662f\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u4e00\u4e9b\u6bd4\u5982\u7248\u672c\u51b2\u7a81\u3001\u7c7b\u51b2\u7a81\u7684\u95ee\u9898\uff0c\u540c\u65f6\u5982\u679c\u662f\u5927\u6279\u91cf\u4f5c\u4e1a\u7684\u8bdd\u8fd9\u79cd\u65b9\u5f0f\u5f00\u53d1\u6548\u7387\u6bd4\u8f83\u4f4e\uff0c\u6700\u540e\u6211\u4eec\u91c7\u53d6\u5c06\u516c\u53f8\u7ea7\u522b\u7684\u5e38\u7528\u7684 Flink connector \u548c udf \u548c Flink base image \u6253\u5305\u6210\u516c\u53f8\u7ea7\u522b\u7684\u57fa\u7840\u955c\u50cf\uff0c\u65b0 Flink SQL \u4f5c\u4e1a\u4f7f\u7528\u8be5\u57fa\u7840\u955c\u50cf\u4e4b\u540e\u76f4\u63a5\u5199 Flink SQL \u5373\u53ef\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\u3002\\n\\n**\u4e0b\u9762\u5206\u4eab\u4e00\u4e2a\u5236\u4f5c\u57fa\u7840\u955c\u50cf\u7684\u7b80\u5355\u6b65\u9aa4\uff1a**\\n\\n**1. \u51c6\u5907\u9700\u8981\u7684 JAR**\\n\\n\u5c06\u5e38\u7528 Flink Connector Jar \u548c\u7528\u6237 Udf Jar \u653e\u7f6e\u5728\u540c\u4e00\u6587\u4ef6\u5939 lib \u4e0b\uff0c\u4ee5\u4e0b\u90fd\u662fFlink 1.13.6 \u5e38\u7528\u7684\u4e00\u4e9b connector \u5305\\n\\n```jar\\nbigdata-udxf-1.0.0-shaded.jar\\nflink-connector-jdbc_2.11-1.13.6.jar\\nflink-sql-connector-kafka_2.11-1.13.6.jar\\nflink-sql-connector-mysql-cdc-2.0.2.jar\\nhudi-flink-bundle_2.11-0.10.0.jar\\nververica-connector-odps-1.13-vvr-4.0.7.jar\\nververica-connector-redis-1.13-vvr-4.0.7.jar\\n```\\n\\n**2. \u51c6\u5907 Dockerfile**\\n\\n\u521b\u5efa Dockerfile \u6587\u4ef6\uff0c\u5e76\u5c06 Dockerfile \u6587\u4ef6\u8ddf\u4e0a\u9762\u6587\u4ef6\u5939\u653e\u7f6e\u5728\u540c\u4e00\u6587\u4ef6\u5939\u4e0b\\n\\n```shell\\nFROM flink:1.13.6-scala_2.11COPY lib $FLINK_HOME/lib/\\n```\\n\\n**3. \u57fa\u7840\u955c\u50cf\u5236\u4f5c\u5e76\u63a8\u9001\u79c1\u6709\u4ed3\u5e93**\\n\\n```shell\\ndocker login --username=xxxdocker \\\\\\nbuild -t udf_flink_1.13.6-scala_2.11:latest \\\\\\n.docker tag udf_flink_1.13.6-scala_2.11:latest \\\\\\nk8s-harbor.xxx.com/streamx/udf_flink_1.13.6-scala_2.11:latestdocker \\\\\\npush k8s-harbor.xxx.com/streamx/udf_flink_1.13.6-scala_2.11:latest\\n```\\n\\n##  **\u672a\u6765\u671f\u5f85**\\n\\n- **StreamPark \u5bf9\u4e8e Flink \u4f5c\u4e1a Metric \u76d1\u63a7\u7684\u652f\u6301**\\n\\nStreamPark \u5982\u679c\u53ef\u4ee5\u5bf9\u63a5 Flink Metric \u6570\u636e\u800c\u4e14\u53ef\u4ee5\u5728 StreamPark \u5e73\u53f0\u4e0a\u5c55\u793a\u6bcf\u65f6\u6bcf\u523b Flink \u7684\u5b9e\u65f6\u6d88\u8d39\u6570\u636e\u60c5\u51b5\u5c31\u592a\u68d2\u4e86\\n\\n- **StreamPark \u5bf9\u4e8eFlink \u4f5c\u4e1a\u65e5\u5fd7\u6301\u4e45\u5316\u7684\u652f\u6301**\\n\\n\u5bf9\u4e8e\u90e8\u7f72\u5230 YARN \u7684 Flink \u6765\u8bf4\uff0c\u5982\u679c Flink \u7a0b\u5e8f\u6302\u4e86\uff0c\u6211\u4eec\u53ef\u4ee5\u53bb YARN \u4e0a\u770b\u5386\u53f2\u65e5\u5fd7\uff0c\u4f46\u662f\u5bf9\u4e8e Kubernetes \u6765\u8bf4\uff0c\u5982\u679c\u7a0b\u5e8f\u6302\u4e86\uff0c\u90a3\u4e48 Kubernetes \u7684 pod \u5c31\u6d88\u5931\u4e86\uff0c\u5c31\u6ca1\u6cd5\u67e5\u65e5\u5fd7\u4e86\u3002\u6240\u4ee5\u7528\u6237\u9700\u8981\u501f\u52a9 Kubernetes \u4e0a\u7684\u5de5\u5177\u8fdb\u884c\u65e5\u5fd7\u6301\u4e45\u5316\uff0c\u5982\u679c StreamPark \u652f\u6301 Kubernetes \u65e5\u5fd7\u6301\u4e45\u5316\u63a5\u53e3\u5c31\u66f4\u597d\u4e86\u3002\\n\\n- **\u955c\u50cf\u8fc7\u5927\u7684\u95ee\u9898\u6539\u8fdb**\\n\\nStreamPark \u76ee\u524d\u5bf9\u4e8e Flink on Kubernetes \u4f5c\u4e1a\u7684\u955c\u50cf\u652f\u6301\u662f\u5c06\u57fa\u7840\u955c\u50cf\u548c\u7528\u6237\u4ee3\u7801\u6253\u6210\u4e00\u4e2a Fat \u955c\u50cf\u63a8\u9001\u5230 Docker \u4ed3\u5e93\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5b58\u5728\u7684\u95ee\u9898\u5c31\u662f\u955c\u50cf\u8fc7\u5927\u7684\u65f6\u5019\u8017\u65f6\u6bd4\u8f83\u4e45\uff0c\u5e0c\u671b\u672a\u6765\u57fa\u7840\u955c\u50cf\u53ef\u4ee5\u590d\u7528\u4e0d\u9700\u8981\u6bcf\u6b21\u90fd\u4e0e\u4e1a\u52a1\u4ee3\u7801\u6253\u5230\u4e00\u8d77\uff0c\u8fd9\u6837\u53ef\u4ee5\u6781\u5927\u5730\u63d0\u5347\u5f00\u53d1\u6548\u7387\u548c\u8282\u7ea6\u6210\u672c\u3002\"},{\"id\":\"flink-development-framework-streampark\",\"metadata\":{\"permalink\":\"/zh-CN/blog/flink-development-framework-streampark\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/1-flink-framework-streampark.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/1-flink-framework-streampark.md\",\"title\":\"Flink \u5f00\u53d1\u5229\u5668 Apache StreamPark\u2122\",\"description\":\"Hadoop \u4f53\u7cfb\u867d\u7136\u5728\u76ee\u524d\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u4f46\u67b6\u6784\u7e41\u7410\u3001\u8fd0\u7ef4\u590d\u6742\u5ea6\u8fc7\u9ad8\u3001\u7248\u672c\u5347\u7ea7\u56f0\u96be\uff0c\u4e14\u7531\u4e8e\u90e8\u95e8\u539f\u56e0\uff0c\u6570\u636e\u4e2d\u53f0\u9700\u6c42\u6392\u671f\u8f83\u957f\uff0c\u6211\u4eec\u6025\u9700\u63a2\u7d22\u654f\u6377\u6027\u5f00\u53d1\u7684\u6570\u636e\u5e73\u53f0\u6a21\u5f0f\u3002\u5728\u76ee\u524d\u4e91\u539f\u751f\u67b6\u6784\u7684\u666e\u53ca\u548c\u6e56\u4ed3\u4e00\u4f53\u5316\u7684\u5927\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u5c06 Doris \u4f5c\u4e3a\u79bb\u7ebf\u6570\u636e\u4ed3\u5e93\uff0c\u5c06 TiDB\uff08\u76ee\u524d\u5df2\u7ecf\u5e94\u7528\u4e8e\u751f\u4ea7\uff09\u4f5c\u4e3a\u5b9e\u65f6\u6570\u636e\u5e73\u53f0\uff0c\u540c\u65f6\u56e0\u4e3a Doris \u5177\u6709 on MySQL \u7684 ODBC \u80fd\u529b\uff0c\u6240\u4ee5\u53c8\u53ef\u4ee5\u5bf9\u5916\u90e8\u6570\u636e\u5e93\u8d44\u6e90\u8fdb\u884c\u6574\u5408\uff0c\u7edf\u4e00\u5bf9\u5916\u8f93\u51fa\u62a5\u8868\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"DataStream\",\"permalink\":\"/zh-CN/blog/tags/data-stream\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"}],\"readingTime\":15.375,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"flink-development-framework-streampark\",\"title\":\"Flink \u5f00\u53d1\u5229\u5668 Apache StreamPark\u2122\",\"tags\":[\"StreamPark\",\"DataStream\",\"FlinkSQL\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 Flink on Kubernetes \u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-flink-on-k8s\"},\"nextItem\":{\"title\":\"\u81ea\u5982\u57fa\u4e8e Apache StreamPark\u2122 + Paimon \u5b9e\u73b0\u6570\u636e\u4e00\u952e\u5165\u6e56\u6700\u4f73\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-flink-with-paimon-in-ziru\"}},\"content\":\"<br/>\\n\\nHadoop \u4f53\u7cfb\u867d\u7136\u5728\u76ee\u524d\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u4f46\u67b6\u6784\u7e41\u7410\u3001\u8fd0\u7ef4\u590d\u6742\u5ea6\u8fc7\u9ad8\u3001\u7248\u672c\u5347\u7ea7\u56f0\u96be\uff0c\u4e14\u7531\u4e8e\u90e8\u95e8\u539f\u56e0\uff0c\u6570\u636e\u4e2d\u53f0\u9700\u6c42\u6392\u671f\u8f83\u957f\uff0c\u6211\u4eec\u6025\u9700\u63a2\u7d22\u654f\u6377\u6027\u5f00\u53d1\u7684\u6570\u636e\u5e73\u53f0\u6a21\u5f0f\u3002\u5728\u76ee\u524d\u4e91\u539f\u751f\u67b6\u6784\u7684\u666e\u53ca\u548c\u6e56\u4ed3\u4e00\u4f53\u5316\u7684\u5927\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u5c06 Doris \u4f5c\u4e3a\u79bb\u7ebf\u6570\u636e\u4ed3\u5e93\uff0c\u5c06 TiDB\uff08\u76ee\u524d\u5df2\u7ecf\u5e94\u7528\u4e8e\u751f\u4ea7\uff09\u4f5c\u4e3a\u5b9e\u65f6\u6570\u636e\u5e73\u53f0\uff0c\u540c\u65f6\u56e0\u4e3a Doris \u5177\u6709 on MySQL \u7684 ODBC \u80fd\u529b\uff0c\u6240\u4ee5\u53c8\u53ef\u4ee5\u5bf9\u5916\u90e8\u6570\u636e\u5e93\u8d44\u6e90\u8fdb\u884c\u6574\u5408\uff0c\u7edf\u4e00\u5bf9\u5916\u8f93\u51fa\u62a5\u8868\\n\\n![](/blog/belle/doris.png)\\n\\n\x3c!-- truncate --\x3e\\n\\n# 1. \u80cc\u666f\\n\\nHadoop \u4f53\u7cfb\u867d\u7136\u5728\u76ee\u524d\u5e94\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u4f46\u67b6\u6784\u7e41\u7410\u3001\u8fd0\u7ef4\u590d\u6742\u5ea6\u8fc7\u9ad8\u3001\u7248\u672c\u5347\u7ea7\u56f0\u96be\uff0c\u4e14\u7531\u4e8e\u90e8\u95e8\u539f\u56e0\uff0c\u6570\u636e\u4e2d\u53f0\u9700\u6c42\u6392\u671f\u8f83\u957f\uff0c\u6211\u4eec\u6025\u9700\u63a2\u7d22\u654f\u6377\u6027\u5f00\u53d1\u7684\u6570\u636e\u5e73\u53f0\u6a21\u5f0f\u3002\u5728\u76ee\u524d\u4e91\u539f\u751f\u67b6\u6784\u7684\u666e\u53ca\u548c\u6e56\u4ed3\u4e00\u4f53\u5316\u7684\u5927\u80cc\u666f\u4e0b\uff0c\u6211\u4eec\u5df2\u7ecf\u786e\u5b9a\u4e86\u5c06 Doris \u4f5c\u4e3a\u79bb\u7ebf\u6570\u636e\u4ed3\u5e93\uff0c\u5c06 TiDB\uff08\u76ee\u524d\u5df2\u7ecf\u5e94\u7528\u4e8e\u751f\u4ea7\uff09\u4f5c\u4e3a\u5b9e\u65f6\u6570\u636e\u5e73\u53f0\uff0c\u540c\u65f6\u56e0\u4e3a Doris \u5177\u6709 on MySQL \u7684 ODBC \u80fd\u529b\uff0c\u6240\u4ee5\u53c8\u53ef\u4ee5\u5bf9\u5916\u90e8\u6570\u636e\u5e93\u8d44\u6e90\u8fdb\u884c\u6574\u5408\uff0c\u7edf\u4e00\u5bf9\u5916\u8f93\u51fa\u62a5\u8868\\n\\n![](/blog/belle/doris.png)\\n\\n<center style={{\\\"color\\\": \\\"gray\\\"}}>(\u8fd9\u91cc\u501f\u7528\u4e00\u4e0b Doris \u5b98\u65b9\u7684\u67b6\u6784\u56fe)</center>\\n\\n<br/><br/>\\n\\n# 2. \u9047\u5230\u7684\u95ee\u9898\\n\\n\u5728\u6570\u636e\u5f15\u64ce\u4e0a\uff0c\u6211\u4eec\u786e\u5b9a\u4f7f\u7528 Spark \u548c Flink\\n\\n* \u4f7f\u7528 Spark on K8s client \u5ba2\u6237\u7aef\u6a21\u5f0f\u505a\u79bb\u7ebf\u6570\u636e\u5904\u7406\\n* \u4f7f\u7528 Flink on K8s Native-Application/Session \u6a21\u5f0f\u505a\u5b9e\u65f6\u4efb\u52a1\u6d41\u7ba1\u7406\\n\\n\u5728\u8fd9\u91cc\uff0c\u5b9e\u9645\u4e0a\u6709\u4e00\u4e9b\u95ee\u9898\u6211\u4eec\u4e00\u76f4\u6ca1\u6709\u5f7b\u5e95\u89e3\u51b3\uff1a\\n\\n\u7528\u8fc7 Native-Application \u6a21\u5f0f\u7684\u670b\u53cb\u90fd\u77e5\u9053\uff0c\u6bcf\u63d0\u4ea4\u4e00\u4e2a\u4efb\u52a1\uff0c\u90fd\u9700\u8981\u6253\u5305\u65b0\u7684\u955c\u50cf\uff0c\u63d0\u4ea4\u5230\u79c1\u6709\u4ed3\u5e93\uff0c\u7136\u540e\u518d\u8c03\u7528 Flink Run \u6307\u4ee4\u6c9f\u901a K8s\uff0c\u53bb\u62c9\u53d6\u955c\u50cf\u8fd0\u884c Pod\u3002\u4efb\u52a1\u63d0\u4ea4\u4e4b\u540e\uff0c\u8fd8\u9700\u8981\u53bb K8s \u67e5\u770b log\uff0c\u4f46\u662f\uff1a\\n\\n1. \u4efb\u52a1\u8fd0\u884c\u76d1\u63a7\u600e\u4e48\u5904\u7406\uff1f\\n2. \u4f7f\u7528 Cluster \u6a21\u5f0f\u8fd8\u662f NodePort \u66b4\u9732\u7aef\u53e3\u8bbf\u95ee Web UI\uff1f\\n3. \u63d0\u4ea4\u4efb\u52a1\u80fd\u5426\u7b80\u5316\u6253\u5305\u955c\u50cf\u7684\u6d41\u7a0b?\\n4. \u5982\u4f55\u51cf\u5c11\u5f00\u53d1\u538b\u529b\uff1f\\n\\n<br/><br/>\\n\\n# 3. \u89e3\u51b3\u95ee\u9898\u7684\u8fc7\u7a0b\\n\\n\u4ee5\u4e0a\u7684\u8fd9\u4e9b\u5176\u5b9e\u90fd\u662f\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u5982\u679c\u5355\u7eaf\u5730\u4f7f\u7528\u547d\u4ee4\u884c\u53bb\u63d0\u4ea4\u6bcf\u4e2a\u4efb\u52a1\uff0c\u662f\u4e0d\u73b0\u5b9e\u7684\uff0c\u4efb\u52a1\u91cf\u5927\u4e86\uff0c\u4f1a\u53d8\u5f97\u4e0d\u53ef\u7ef4\u62a4\u3002\u5982\u4f55\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u53d8\u6210\u4e00\u4e2a\u4e0d\u5f97\u4e0d\u9762\u5bf9\u7684\u95ee\u9898\u3002\\n\\n<br/>\\n\\n## \u7b80\u5316\u955c\u50cf\u6784\u5efa\\n\\n\u9996\u5148\uff0c\u9488\u5bf9 Flink \u539f\u751f\u955c\u50cf\u9700\u8981\u4e8c\u6b21 build \u7684\u95ee\u9898\uff1a\u6211\u4eec\u5229\u7528\u4e86 MinIO \u4f5c\u4e3a\u5916\u90e8\u5b58\u50a8\uff0c\u5e76\u4f7f\u7528 s3-fuse \u901a\u8fc7 DaemonSet \u7684\u65b9\u5f0f\u76f4\u63a5\u6302\u8f7d\u5728\u4e86\u6bcf\u4e2a\u5bbf\u4e3b\u8282\u70b9\u4e0a\uff0c\u6211\u4eec\u6240\u9700\u8981\u63d0\u4ea4\u7684 jar \u5305\u90fd\u53ef\u4ee5\u653e\u5230\u4e0a\u9762\u7edf\u4e00\u7ba1\u7406\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u5373\u4f7f\u6269\u7f29\u5bb9 Flink \u8282\u70b9\uff0c\u4e5f\u80fd\u5b9e\u73b0 S3 \u6302\u8f7d\u81ea\u52a8\u4f38\u7f29\u3002\\n\\n![](/blog/belle/k8s.png)\\n\\nFlink \u4ece 1.13 \u7248\u672c\u5f00\u59cb\uff0c\u5c31\u652f\u6301 Pod Template\uff0c\u6211\u4eec\u53ef\u4ee5\u5728 Pod Template \u4e2d\u5229\u7528\u6570\u636e\u5377\u6302\u8f7d\u7684\u65b9\u5f0f\u518d\u5c06\u5bbf\u4e3b\u673a\u76ee\u5f55\u6302\u8f7d\u5230\u6bcf\u4e2a pod \u4e2d\uff0c\u4ece\u800c\u65e0\u9700\u955c\u50cf\u6253\u5305\u800c\u76f4\u63a5\u5728 K8s \u4e0a\u8fd0\u884c Flink \u7a0b\u5e8f\u3002\u5982\u4e0a\u56fe\uff0c\u6211\u4eec\u5c06 S3 \u5148\u901a\u8fc7 s3-fuse Pod \u6302\u8f7d\u5728 Node 1\u3001Node 2 \u7684 `/mnt/data-s3fs` \u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u518d\u5c06 `/mnt/data-s3fs` \u6302\u8f7d\u5230 Pod A \u4e2d\u3002\\n\\n\u4f46\u662f\uff0c\u56e0\u4e3a\u5bf9\u8c61\u5b58\u50a8\u968f\u673a\u5199\u5165\u6216\u8ffd\u52a0\u6587\u4ef6\u9700\u8981\u91cd\u5199\u6574\u4e2a\u5bf9\u8c61\uff0c\u5bfc\u81f4\u8fd9\u79cd\u65b9\u5f0f\u4ec5\u9002\u5408\u4e8e\u9891\u7e41\u8bfb\u3002\u800c\u8fd9\u521a\u597d\u6ee1\u8db3\u6211\u4eec\u73b0\u5728\u7684\u573a\u666f\u3002\\n\\n<br/>\\n\\n## \u5f15\u5165 Apache StreamPark\u2122\\n\\n\u4e4b\u524d\u6211\u4eec\u5199 Flink SQL \u57fa\u672c\u4e0a\u90fd\u662f\u4f7f\u7528 Java \u5305\u88c5 SQL\uff0c\u6253 jar \u5305\uff0c\u63d0\u4ea4\u5230 S3 \u5e73\u53f0\u4e0a\u3002\u901a\u8fc7\u547d\u4ee4\u884c\u65b9\u5f0f\u63d0\u4ea4\u4ee3\u7801\uff0c\u4f46\u8fd9\u79cd\u65b9\u5f0f\u59cb\u7ec8\u4e0d\u53cb\u597d\uff0c\u6d41\u7a0b\u7e41\u7410\uff0c\u5f00\u53d1\u548c\u8fd0\u7ef4\u6210\u672c\u592a\u5927\u3002\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u8fdb\u4e00\u6b65\u7b80\u5316\u6d41\u7a0b\uff0c\u5c06 Flink TableEnvironment \u62bd\u8c61\u51fa\u6765\uff0c\u6709\u5e73\u53f0\u8d1f\u8d23\u521d\u59cb\u5316\u3001\u6253\u5305\u8fd0\u884c Flink \u4efb\u52a1\uff0c\u5b9e\u73b0 Flink \u5e94\u7528\u7a0b\u5e8f\u7684\u6784\u5efa\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\u81ea\u52a8\u5316\u3002\\n\\n\u8fd9\u662f\u4e2a\u5f00\u6e90\u5174\u8d77\u7684\u65f6\u4ee3\uff0c\u6211\u4eec\u81ea\u7136\u800c\u7136\u7684\u5c06\u76ee\u5149\u6295\u5411\u5f00\u6e90\u9886\u57df\u4e2d\uff1a\u5728\u4e00\u4f17\u5f00\u6e90\u9879\u76ee\u4e2d\uff0c\u7ecf\u8fc7\u5bf9\u6bd4\u5404\u4e2a\u9879\u76ee\u7efc\u5408\u8bc4\u4f30\u53d1\u73b0 <span style={{color:'red'}}> Zeppelin </span> \u548c <span style={{color:'red'}}> StreamPark </span> \u8fd9\u4e24\u4e2a\u9879\u76ee\u5bf9 Flink \u7684\u652f\u6301\u8f83\u4e3a\u5b8c\u5584\uff0c\u90fd\u5ba3\u79f0\u652f\u6301 <span style={{color:'red'}}> Flink on K8s </span>\uff0c\u6700\u7ec8\u8fdb\u5165\u5230\u6211\u4eec\u7684\u76ee\u6807\u9009\u62e9\u8303\u56f4\u4e2d\uff0c\u4ee5\u4e0b\u662f\u4e24\u8005\u5728 K8s \u76f8\u5173\u652f\u6301\u7684\u7b80\u5355\u6bd4\u8f83\uff08\u76ee\u524d\u5982\u679c\u6709\u66f4\u65b0\uff0c\u9ebb\u70e6\u6279\u8bc4\u6307\u6b63\uff09\u3002\\n\\n<table>\\n    <thead>\\n        <tr>\\n            <td>\u529f\u80fd</td>\\n            <td>Zeppelin</td>\\n            <td>StreamPark</td>\\n        </tr>\\n    </thead>\\n    <tbody>\\n        <tr>\\n            <td>\u4efb\u52a1\u72b6\u6001\u76d1\u63a7</td>\\n            <td><span style={{color:'red'}}> \u7a0d\u4f4e </span>\uff0c\u4e0d\u80fd\u4f5c\u4e3a\u4efb\u52a1\u72b6\u6001\u76d1\u63a7\u5de5\u5177</td>\\n            <td><span style={{color:'red'}}> \u8f83\u9ad8 </span></td>\\n        </tr>\\n        <tr>\\n            <td>\u4efb\u52a1\u8d44\u6e90\u7ba1\u7406</td>\\n            <td><span style={{color:'red'}}> \u65e0 </span></td>\\n            <td><span style={{color:'red'}}> \u6709 </span>\uff0c\u4f46\u76ee\u524d\u7248\u672c\u8fd8\u4e0d\u662f\u5f88\u5065\u5168</td>\\n        </tr>\\n        <tr>\\n            <td>\u672c\u5730\u5316\u90e8\u7f72</td>\\n            <td><span style={{color:'red'}}> \u7a0d\u4f4e </span>\uff0con K8s \u6a21\u5f0f\u53ea\u80fd\u5c06 Zeppelin \u90e8\u7f72\u5728 K8s \u4e2d\uff0c\u5426\u5219\u5c31\u9700\u8981\u6253\u901a Pod \u548c\u5916\u90e8\u7f51\u7edc\uff0c\u4f46\u662f\u8fd9\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5f88\u5c11\u8fd9\u6837\u505a\u7684</td>\\n            <td><span style={{color:'red'}}> \u53ef\u4ee5\u672c\u5730\u5316\u90e8\u7f72 </span></td>\\n        </tr>\\n        <tr>\\n            <td>\u591a\u8bed\u8a00\u652f\u6301</td>\\n            <td><span style={{color:'red'}}> \u8f83\u9ad8 </span>\uff0c\u652f\u6301 Python/Scala/Java \u591a\u8bed\u8a00</td>\\n            <td><span style={{color:'red'}}> \u4e00\u822c </span>\uff0c\u76ee\u524d K8s \u6a21\u5f0f\u548c YARN \u6a21\u5f0f\u540c\u65f6\u652f\u6301 FlinkSQL\uff0c\u5e76\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u9700\u6c42\uff0c\u4f7f\u7528 Java/Scala \u5f00\u53d1 DataStream</td>\\n        </tr>\\n        <tr>\\n            <td>Flink WebUI \u4ee3\u7406</td>\\n            <td><span style={{color:'red'}}> \u76ee\u524d\u8fd8\u652f\u6301\u7684\u4e0d\u662f\u5f88\u5b8c\u6574 </span>\uff0c\u4e3b\u5f00\u53d1\u5927\u4f6c\u76ee\u524d\u662f\u8003\u8651\u6574\u5408 Ingress</td>\\n            <td><span style={{color:'red'}}> \u8f83\u597d </span>\uff0c\u76ee\u524d\u652f\u6301 ClusterIp/NodePort/LoadBalance \u6a21\u5f0f</td>\\n        </tr>\\n        <tr>\\n            <td>\u5b66\u4e60\u6210\u672c</td>\\n            <td><span style={{color:'red'}}> \u6210\u672c\u8f83\u4f4e </span>\uff0c\u9700\u8981\u589e\u52a0\u989d\u5916\u7684\u53c2\u6570\u5b66\u4e60\uff0c\u8fd9\u4e2a\u548c\u539f\u751f\u7684 FlinkSQL \u5728\u53c2\u6570\u4e0a\u6709\u70b9\u533a\u522b</td>\\n            <td><span style={{color:'red'}}> \u65e0\u6210\u672c </span>\uff0cK8s \u6a21\u5f0f\u4e0b FlinkSQL \u4e3a\u539f\u751f\u652f\u6301\u7684 SQL \u683c\u5f0f\uff1b\u540c\u65f6\u652f\u6301 Custome-Code\uff08\u7528\u6237\u7f16\u5199\u4ee3\u7801\u5f00\u53d1Datastream/FlinkSQL \u4efb\u52a1\uff09</td>\\n        </tr>\\n        <tr>\\n            <td>Flink \u591a\u7248\u672c\u652f\u6301</td>\\n            <td><span style={{color:'red'}}> \u652f\u6301 </span></td>\\n            <td><span style={{color:'red'}}> \u652f\u6301 </span></td>\\n        </tr>\\n        <tr>\\n            <td>Flink \u539f\u751f\u955c\u50cf\u4fb5\u5165</td>\\n            <td><span style={{color:'red'}}> \u6709\u4fb5\u5165 </span>\uff0c\u9700\u8981\u5728 Flink \u955c\u50cf\u4e2d\u63d0\u524d\u90e8\u7f72 jar \u5305\uff0c\u4f1a\u540c JobManager \u542f\u52a8\u5728\u540c\u4e00\u4e2a Pod \u4e2d\uff0c\u548c zeppelin-server \u901a\u4fe1</td>\\n            <td><span style={{color:'red'}}> \u65e0\u4fb5\u5165 </span>\uff0c\u4f46\u662f\u4f1a\u4ea7\u751f\u8f83\u591a\u955c\u50cf\uff0c\u9700\u8981\u5b9a\u65f6\u6e05\u7406</td>\\n        </tr>\\n        <tr>\\n            <td>\u4ee3\u7801\u591a\u7248\u672c\u7ba1\u7406</td>\\n            <td><span style={{color:'red'}}> \u652f\u6301 </span></td>\\n            <td><span style={{color:'red'}}> \u652f\u6301 </span></td>\\n        </tr>\\n    </tbody>\\n</table>\\n\\n<center style={{\\\"color\\\": \\\"gray\\\"}}>\uff08PS: \u6b64\u5904\u4ec5\u4ece\u8c03\u7814\u7528\u6237\u89d2\u5ea6\u51fa\u53d1\uff0c\u6211\u4eec\u5bf9\u53cc\u65b9\u5f00\u53d1\u90fd\u4fdd\u6301\u6781\u5927\u7684\u5c0a\u91cd\uff09</center>\\n\\n<br/>\\n\\n\u8c03\u7814\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e0e\u4e24\u8005\u7684\u4e3b\u5f00\u53d1\u4eba\u5458\u90fd\u8fdb\u884c\u4e86\u591a\u6b21\u6c9f\u901a\u3002\u7ecf\u8fc7\u6211\u4eec\u53cd\u590d\u7814\u7a76\u4e4b\u540e\uff0c\u8fd8\u662f\u51b3\u5b9a\u5c06 StreamPark \u4f5c\u4e3a\u6211\u4eec\u76ee\u524d\u7684 Flink \u5f00\u53d1\u5de5\u5177\u6765\u4f7f\u7528\u3002\\n\\n<video src=\\\"http://assets.streamxhub.com/streamx-video.mp4\\\" controls=\\\"controls\\\" width=\\\"100%\\\" height=\\\"100%\\\"></video>\\n\\n<center style={{\\\"color\\\": \\\"gray\\\"}}>(StreamPark \u5b98\u7f51\u7684\u95ea\u5c4f)</center>\\n\\n<br/>\\n\\n\u7ecf\u8fc7\u5f00\u53d1\u540c\u5b66\u957f\u65f6\u95f4\u5f00\u53d1\u6d4b\u8bd5\uff0cStreamPark \u76ee\u524d\u5df2\u7ecf\u5177\u5907\uff1a\\n\\n* \u5b8c\u5584\u7684<span style={{\\\"color\\\": \\\"red\\\"}}>SQL \u6821\u9a8c\u529f\u80fd</span>\\n* \u5b9e\u73b0\u4e86<span style={{\\\"color\\\": \\\"red\\\"}}>\u81ea\u52a8 build/push \u955c\u50cf</span>\\n* \u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\uff0c\u901a\u8fc7 Child-first \u52a0\u8f7d\u65b9\u5f0f <span style={{\\\"color\\\": \\\"red\\\"}}>\u89e3\u51b3\u4e86 YARN \u548c K8s \u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f</span>\u3001<span style={{\\\"color\\\": \\\"red\\\"}}>\u652f\u6301\u4e86\u81ea\u7531\u5207\u6362 Flink \u591a\u7248\u672c</span>\\n* \u4e0e Flink-Kubernetes \u8fdb\u884c\u6df1\u5ea6\u6574\u5408\uff0c\u63d0\u4ea4\u4efb\u52a1\u540e\u8fd4\u56de WebUI\uff0c\u901a\u8fc7 remote rest api + remote K8s\uff0c<span style={{\\\"color\\\": \\\"red\\\"}}>\u8ffd\u8e2a\u4efb\u52a1\u6267\u884c\u72b6\u6001</span>\\n* \u540c\u65f6\u652f\u6301\u4e86 <span style={{\\\"color\\\": \\\"red\\\"}}>Flink 1.12\u30011.13\u30011.14 \u7b49\u7248\u672c</span>\\n\\n\u4ee5\u4e0a\u57fa\u672c\u89e3\u51b3\u4e86\u6211\u4eec\u76ee\u524d\u5f00\u53d1\u548c\u8fd0\u7ef4\u4e2d\u5b58\u5728\u7684\u5927\u90e8\u5206\u95ee\u9898\u3002\\n\\n<video src=\\\"http://assets.streamxhub.com/streamx-1.2.0.mp4\\\" controls=\\\"controls\\\" width=\\\"100%\\\" height=\\\"100%\\\"></video>\\n\\n<center style={{\\\"color\\\": \\\"gray\\\"}}>(StreamPark \u5bf9 Flink \u591a\u7248\u672c\u7684\u652f\u6301\u6f14\u793a\u89c6\u9891)</center>\\n\\n<br/>\\n\\n\u5728\u76ee\u524d\u6700\u65b0\u53d1\u5e03\u7684 1.2.0 \u7248\u672c\u4e2d\uff0cStreamPark \u8f83\u4e3a\u5b8c\u5584\u5730\u652f\u6301\u4e86 K8s-Native-Application \u548c K8s-Session-Application \u6a21\u5f0f\u3002\\n\\n<video src=\\\"http://assets.streamxhub.com/streamx-k8s.mp4\\\" controls=\\\"controls\\\" width=\\\"100%\\\" height=\\\"100%\\\"></video>\\n\\n<center style={{\\\"color\\\": \\\"gray\\\"}}>(StreamPark K8s \u90e8\u7f72\u6f14\u793a\u89c6\u9891)</center>\\n\\n<br/>\\n\\n### K8s Native Application \u6a21\u5f0f\\n\\n\u5728 StreamPark \u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u914d\u7f6e\u76f8\u5e94\u7684\u53c2\u6570\uff0c\u5e76\u5728 Maven POM \u4e2d\u586b\u5199\u76f8\u5e94\u7684\u4f9d\u8d56\uff0c\u6216\u8005\u4e0a\u4f20\u4f9d\u8d56 jar \u5305\uff0c\u70b9\u51fb Apply\uff0c\u76f8\u5e94\u7684\u4f9d\u8d56\u5c31\u4f1a\u751f\u6210\u3002\u8fd9\u5c31\u610f\u5473\u7740\u6211\u4eec\u4e5f\u53ef\u4ee5\u5c06\u6240\u6709\u4f7f\u7528\u7684 UDF \u6253\u6210 jar \u5305\uff0c\u4ee5\u53ca\u5404\u79cd connector.jar\uff0c\u76f4\u63a5\u5728 SQL \u4e2d\u4f7f\u7528\u3002\u5982\u4e0b\u56fe:\\n\\n![](/blog/belle/dependency.png)\\n\\nSQL \u6821\u9a8c\u80fd\u529b\u548c Zeppelin \u57fa\u672c\u4e00\u81f4:\\n\\n![](/blog/belle/sqlverify.png)\\n\\n\u6211\u4eec\u4e5f\u53ef\u4ee5\u6307\u5b9a\u8d44\u6e90\uff0c\u6307\u5b9a Flink Run \u4e2d\u7684\u52a8\u6001\u53c2\u6570 Dynamic Option\uff0c\u751a\u81f3\u53c2\u6570\u53ef\u4ee5\u6574\u5408 Pod Template\\n\\n![](/blog/belle/pod.png)\\n\\n\u7a0b\u5e8f\u4fdd\u5b58\u540e\uff0c\u70b9\u51fb\u8fd0\u884c\u65f6\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a savepoint\u3002\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\u540e\uff0cStreamPark \u4f1a\u6839\u636e FlinkPod \u7f51\u7edc Exposed Type\uff08loadBalancer/NodePort/ClusterIp\uff09\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 WebURL\uff0c\u4ece\u800c\u81ea\u7136\u7684\u5b9e\u73b0 WebUI \u8df3\u8f6c\u3002\u4f46\u662f\uff0c\u76ee\u524d\u56e0\u4e3a\u7ebf\u4e0a\u79c1\u6709 K8s \u96c6\u7fa4\u51fa\u4e8e\u5b89\u5168\u6027\u8003\u8651\uff0c\u5c1a\u672a\u6253\u901a Pod \u4e0e\u5ba2\u6237\u7aef\u8282\u70b9\u7f51\u7edc\uff08\u76ee\u524d\u4e5f\u6ca1\u6709\u8fd9\u4e2a\u89c4\u5212\uff09\u3002\u6240\u4ee5\u4e48\uff0c\u6211\u4eec\u53ea\u4f7f\u7528 NodePort\u3002\u5982\u679c\u540e\u7eed\u4efb\u52a1\u6570\u8fc7\u591a\uff0c\u6709\u4f7f\u7528 ClusterIP \u7684\u9700\u6c42\u7684\u8bdd\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u5c06 StreamPark \u90e8\u7f72\u5728 K8s\uff0c\u6216\u8005\u540c Ingress \u505a\u8fdb\u4e00\u6b65\u6574\u5408\u3002\\n\\n![](/blog/belle/start.png)\\n\\n\u6ce8\u610f\uff1aK8s master \u5982\u679c\u4f7f\u7528 vip \u505a\u5747\u8861\u4ee3\u7406\u7684\u60c5\u51b5\u4e0b\uff0cFlink 1.13 \u7248\u672c\u4f1a\u8fd4\u56de vip \u7684 ip \u5730\u5740\uff0c\u5728 1.14 \u7248\u672c\u4e2d\u5df2\u7ecf\u4fee\u590d\u8be5\u95ee\u9898\u3002\\n\\n\u4e0b\u9762\u662f K8s Application \u6a21\u5f0f\u4e0b\u5177\u4f53\u63d0\u4ea4\u6d41\u7a0b\\n\\n![](/blog/belle/flow.png)\\n\\n<center style={{\\\"color\\\": \\\"gray\\\"}}>\uff08\u4ee5\u4e0a\u662f\u4f9d\u636e\u4e2a\u4eba\u7406\u89e3\u7ed8\u5236\u7684\u4efb\u52a1\u63d0\u4ea4\u6d41\u7a0b\u56fe\uff0c\u5982\u6709\u9519\u8bef\uff0c\u656c\u8bf7\u8c05\u89e3\uff09</center>\\n\\n<br/>\\n\\n### K8s Native Session \u6a21\u5f0f\\n\\nStreamPark \u8fd8\u8f83\u597d\u5730\u652f\u6301\u4e86 <span style={{\\\"color\\\": \\\"red\\\"}}> K8s Native-Sesson \u6a21\u5f0f</span>\uff0c\u8fd9\u4e3a\u6211\u4eec\u540e\u7eed\u505a\u79bb\u7ebf FlinkSQL \u5f00\u53d1\u6216\u90e8\u5206\u8d44\u6e90\u9694\u79bb\u505a\u4e86\u8f83\u597d\u7684\u6280\u672f\u652f\u6301\u3002\\n\\nNative-Session \u6a21\u5f0f\u9700\u8981\u4e8b\u5148\u4f7f\u7528 Flink \u547d\u4ee4\u521b\u5efa\u4e00\u4e2a\u8fd0\u884c\u5728 K8s \u4e2d\u7684 Flink \u96c6\u7fa4\u3002\u5982\u4e0b\uff1a\\n\\n```shell\\n./kubernetes-session.sh \\\\\\n-Dkubernetes.cluster-id=flink-on-k8s-flinkSql-test \\\\\\n-Dkubernetes.context=XXX \\\\\\n-Dkubernetes.namespace=XXXX \\\\\\n-Dkubernetes.service-account=XXXX \\\\\\n-Dkubernetes.container.image=XXXX \\\\\\n-Dkubernetes.container.image.pull-policy=Always \\\\\\n-Dkubernetes.taskmanager.node-selector=XXXX \\\\\\n-Dkubernetes.rest-service.exposed.type=Nodeport\\n```\\n\\n![](/blog/belle/flinksql.png)\\n\\n\u5982\u4e0a\u56fe\uff0c\u4f7f\u7528\u8be5 ClusterId \u4f5c\u4e3a StreamPark \u7684\u4efb\u52a1\u53c2\u6570 Kubernetes ClusterId\u3002\u4fdd\u5b58\u63d0\u4ea4\u4efb\u52a1\u540e\uff0c\u4efb\u52a1\u4f1a\u5f88\u5feb\u5904\u4e8e Running \u72b6\u6001\uff1a\\n\\n![](/blog/belle/detail.png)\\n\\n\u6211\u4eec\u987a\u7740 application info \u7684 WebUI \u70b9\u51fb\u8df3\u8f6c\uff1a\\n\\n![](/blog/belle/dashboard.png)\\n\\n\u53ef\u4ee5\u770b\u5230\uff0c\u5176\u5b9e StreamPark \u662f\u5c06 jar \u5305\u901a\u8fc7 REST API \u4e0a\u4f20\u5230 Flink \u96c6\u7fa4\u4e0a\uff0c\u5e76\u8c03\u5ea6\u6267\u884c\u4efb\u52a1\u7684\u3002\\n\\n<br/>\\n\\n### Custom Code \u6a21\u5f0f\\n\\n\u53e6\u6211\u4eec\u60ca\u559c\u7684\u662f\uff0cStreamPark \u8fd8\u652f\u6301\u4ee3\u7801\u7f16\u5199 DataStream/FlinkSQL \u4efb\u52a1\u3002\u5bf9\u4e8e\u7279\u6b8a\u9700\u6c42\uff0c\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u5199 Java/Scala \u5b9e\u73b0\u3002\u53ef\u4ee5\u6839\u636e StreamPark \u63a8\u8350\u7684\u811a\u624b\u67b6\u65b9\u5f0f\u7f16\u5199\u4efb\u52a1\uff0c\u4e5f\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2a\u6807\u51c6\u666e\u901a\u7684 Flink \u4efb\u52a1\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u53ef\u4ee5\u5c06\u4ee3\u7801\u7ba1\u7406\u4ea4\u7531 git \u5b9e\u73b0\uff0c\u5e73\u53f0\u53ef\u4ee5\u7528\u6765\u81ea\u52a8\u5316\u7f16\u8bd1\u6253\u5305\u4e0e\u90e8\u7f72\u3002\u5f53\u7136\uff0c\u5982\u679c\u80fd\u7528 SQL \u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u6211\u4eec\u4f1a\u5c3d\u91cf\u907f\u514d\u81ea\u5b9a\u4e49 DataStream\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8fd0\u7ef4\u9ebb\u70e6\u3002\\n\\n<br/><br/>\\n\\n# 4. \u610f\u89c1\u548c\u89c4\u5212\\n\\n## \u6539\u8fdb\u610f\u89c1\\n\\n\u5f53\u7136 StreamPark \u8fd8\u6709\u5f88\u591a\u9700\u8981\u6539\u8fdb\u7684\u5730\u65b9\uff0c\u5c31\u76ee\u524d\u6d4b\u8bd5\u6765\u770b\uff1a\\n\\n* **\u8d44\u6e90\u7ba1\u7406\u8fd8\u6709\u5f85\u52a0\u5f3a**\uff1a\u591a\u6587\u4ef6\u7cfb\u7edfjar\u5305\u7b49\u8d44\u6e90\u7ba1\u7406\u529f\u80fd\u5c1a\u672a\u6dfb\u52a0\uff0c\u4efb\u52a1\u7248\u672c\u529f\u80fd\u6709\u5f85\u52a0\u5f3a\u3002\\n* **\u524d\u7aef button \u529f\u80fd\u8fd8\u4e0d\u591f\u4e30\u5bcc**\uff1a\u6bd4\u5982\u4efb\u52a1\u6dfb\u52a0\u540e\u7eed\u53ef\u4ee5\u589e\u52a0\u590d\u5236\u7b49\u529f\u80fd\u6309\u94ae\u3002\\n* **\u4efb\u52a1\u63d0\u4ea4\u65e5\u5fd7\u4e5f\u9700\u8981\u53ef\u89c6\u5316\u5c55\u793a**\uff1a\u4efb\u52a1\u63d0\u4ea4\u4f34\u968f\u7740\u52a0\u8f7d class \u6587\u4ef6\uff0c\u6253 jar \u5305\uff0cbuild \u955c\u50cf\uff0c\u63d0\u4ea4\u955c\u50cf\uff0c\u63d0\u4ea4\u4efb\u52a1\u7b49\u8fc7\u7a0b\uff0c\u6bcf\u4e00\u4e2a\u73af\u8282\u51fa\u9519\uff0c\u90fd\u4f1a\u5bfc\u81f4\u4efb\u52a1\u7684\u5931\u8d25\uff0c\u4f46\u662f\u5931\u8d25\u65e5\u5fd7\u5f80\u5f80\u4e0d\u660e\u786e\uff0c\u6216\u8005\u56e0\u4e3a\u67d0\u79cd\u539f\u56e0\u5bfc\u81f4\u5f02\u5e38\u672a\u6b63\u5e38\u629b\u51fa\uff0c\u6ca1\u6709\u8f6c\u6362\u4efb\u52a1\u72b6\u6001\uff0c\u7528\u6237\u4f1a\u65e0\u4ece\u4e0b\u624b\u6539\u8fdb\u3002\\n\\n\u4f17\u6240\u5468\u77e5\uff0c\u4e00\u4e2a\u65b0\u4e8b\u7269\u7684\u51fa\u73b0\u4e00\u5f00\u59cb\u603b\u4f1a\u4e0d\u662f\u90a3\u4e48\u5b8c\u7f8e\u3002\u5c3d\u7ba1\u6709\u4e9b\u8bb8\u95ee\u9898\u548c\u9700\u8981\u6539\u8fdb\u7684 point\uff0c\u4f46\u662f\u7455\u4e0d\u63a9\u745c\uff0c\u6211\u4eec\u4ecd\u7136\u9009\u62e9 StreamPark \u4f5c\u4e3a\u6211\u4eec\u7684 Flink DevOps\uff0c\u6211\u4eec\u4e5f\u5c06\u4f1a\u548c\u4e3b\u5f00\u53d1\u4eba\u5458\u4e00\u9053\u5171\u540c\u5b8c\u5584 StreamPark\uff0c\u4e5f\u6b22\u8fce\u66f4\u591a\u7684\u4eba\u6765\u4f7f\u7528\uff0c\u4e3a StreamPark \u5e26\u6765\u66f4\u591a\u8fdb\u6b65\u3002\\n\\n<br/>\\n\\n## \u672a\u6765\u89c4\u5212\\n\\n* \u6211\u4eec\u4f1a\u7ee7\u7eed\u8ddf\u8fdb Doris\uff0c\u5e76\u5c06\u4e1a\u52a1\u6570\u636e + \u65e5\u5fd7\u6570\u636e\u7edf\u4e00\u5165 Doris\uff0c\u901a\u8fc7 Flink \u5b9e\u73b0\u6e56\u4ed3\u4e00\u4f53\uff1b\\n* \u6211\u4eec\u4e5f\u4f1a\u9010\u6b65\u5c06\u63a2\u7d22 StreamPark \u540c DolphinScheduler 2.x \u8fdb\u884c\u6574\u5408\uff0c\u5b8c\u5584DolphinScheduler \u79bb\u7ebf\u4efb\u52a1\uff0c\u9010\u6b65\u7528 Flink \u66ff\u6362\u6389 Spark\uff0c\u5b9e\u73b0\u771f\u6b63\u7684\u6d41\u6279\u4e00\u4f53\uff1b\\n* \u57fa\u4e8e\u6211\u4eec\u81ea\u8eab\u5728 S3 \u4e0a\u7684\u63a2\u7d22\u79ef\u7d2f\uff0cfat-jar \u5305 build \u5b8c\u6210\u4e4b\u540e\u4e0d\u518d\u6784\u5efa\u955c\u50cf\uff0c\u76f4\u63a5\u5229\u7528 Pod Tempelet \u6302\u8f7d PVC \u5230 Flink Pod \u4e2d\u7684\u76ee\u5f55\uff0c\u8fdb\u4e00\u6b65\u4f18\u5316\u4ee3\u7801\u63d0\u4ea4\u6d41\u7a0b\uff1b\\n* \u5c06 StreamPark \u6301\u7eed\u5e94\u7528\u5230\u6211\u4eec\u751f\u4ea7\u4e2d\uff0c\u5e76\u6c47\u540c\u793e\u533a\u5f00\u53d1\u4eba\u5458\uff0c\u5171\u540c\u52aa\u529b\uff0c\u589e\u5f3a StreamPark \u5728 Flink \u6d41\u4e0a\u7684\u5f00\u53d1\u90e8\u7f72\u80fd\u529b\u4e0e\u8fd0\u884c\u76d1\u63a7\u80fd\u529b\uff0c\u52aa\u529b\u628a StreamPark \u6253\u9020\u6210\u4e00\u4e2a\u529f\u80fd\u5b8c\u5584\u7684\u6d41\u6570\u636e  DevOps\u3002\\n\\n\u9644\uff1a\\n\\nStreamPark GitHub\uff1a[https://github.com/apache/incubator-streampark](https://github.com/apache/incubator-streampark) <br/>\\nDoris GitHub\uff1a[https://github.com/apache/doris](https://github.com/apache/doris)\\n\\n![](/blog/belle/author.png)\"},{\"id\":\"streampark-flink-with-paimon-in-ziru\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-flink-with-paimon-in-ziru\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/10-streampark-flink-with-paimon-in-ziru.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/10-streampark-flink-with-paimon-in-ziru.md\",\"title\":\"\u81ea\u5982\u57fa\u4e8e Apache StreamPark\u2122 + Paimon \u5b9e\u73b0\u6570\u636e\u4e00\u952e\u5165\u6e56\u6700\u4f73\u5b9e\u8df5\",\"description\":\"\u5bfc\u8bfb\uff1a\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u81ea\u5982 MySQL \u6570\u636e\u8fc1\u79fb\u81f3 Hive \u7684\u67b6\u6784\u5347\u7ea7\u6f14\u8fdb\uff0c\u539f\u6709\u67b6\u6784\u6d89\u53ca\u5230\u7684\u7ec4\u4ef6\u4f17\u591a\uff0c\u94fe\u8def\u590d\u6742\uff0c\u9047\u5230\u5f88\u591a\u6311\u6218\uff0c\u5728\u4f7f\u7528 StreamPark + Paimon \u8fd9\u5957\u7ec4\u5408\u65b9\u6848\u540e\u6709\u6548\u5730\u89e3\u51b3\u4e86\u6570\u636e\u96c6\u6210\u4e2d\u9047\u5230\u7684\u56f0\u5883\u548c\u6311\u6218\uff0c\u5206\u4eab\u4e86 StreamPark + Paimon \u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5177\u4f53\u7684\u5b9e\u8df5\u65b9\u6848\uff0c\u4ee5\u53ca\u8fd9\u5957\u65b0\u79c0\u7ec4\u5408\u65b9\u6848\u5e26\u6765\u7684\u4f18\u52bf\u548c\u6536\u76ca\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"}],\"readingTime\":19.405,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-flink-with-paimon-in-ziru\",\"title\":\"\u81ea\u5982\u57fa\u4e8e Apache StreamPark\u2122 + Paimon \u5b9e\u73b0\u6570\u636e\u4e00\u952e\u5165\u6e56\u6700\u4f73\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Flink \u5f00\u53d1\u5229\u5668 Apache StreamPark\u2122\",\"permalink\":\"/zh-CN/blog/flink-development-framework-streampark\"},\"nextItem\":{\"title\":\"Apache StreamPark\u2122 \u52a9\u529b\u5929\u773c\u67e5\u5b9e\u65f6\u5e73\u53f0\u5efa\u8bbe\uff5c\u6548\u7387\u6570\u500d\u63d0\u5347\",\"permalink\":\"/zh-CN/blog/streampark-usercase-tianyancha\"}},\"content\":\"![](/blog/ziru/new_cover.png)\\n\\n**\u5bfc\u8bfb**\uff1a\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4e86\u81ea\u5982 MySQL \u6570\u636e\u8fc1\u79fb\u81f3 Hive \u7684\u67b6\u6784\u5347\u7ea7\u6f14\u8fdb\uff0c\u539f\u6709\u67b6\u6784\u6d89\u53ca\u5230\u7684\u7ec4\u4ef6\u4f17\u591a\uff0c\u94fe\u8def\u590d\u6742\uff0c\u9047\u5230\u5f88\u591a\u6311\u6218\uff0c\u5728\u4f7f\u7528 StreamPark + Paimon \u8fd9\u5957\u7ec4\u5408\u65b9\u6848\u540e\u6709\u6548\u5730\u89e3\u51b3\u4e86\u6570\u636e\u96c6\u6210\u4e2d\u9047\u5230\u7684\u56f0\u5883\u548c\u6311\u6218\uff0c\u5206\u4eab\u4e86 StreamPark + Paimon \u5728\u5b9e\u9645\u5e94\u7528\u4e2d\u5177\u4f53\u7684\u5b9e\u8df5\u65b9\u6848\uff0c\u4ee5\u53ca\u8fd9\u5957\u65b0\u79c0\u7ec4\u5408\u65b9\u6848\u5e26\u6765\u7684\u4f18\u52bf\u548c\u6536\u76ca\u3002\\n\\nStreamPark: https://github.com/apache/streampark\\n\\nPaimon: https://github.com/apache/paimon\\n\\n\u6b22\u8fce\u5173\u6ce8\u3001Star\u3001Fork\uff0c\u53c2\u4e0e\u8d21\u732e \\n\\n\u4f9b\u7a3f\u5355\u4f4d\uff5c\u5317\u4eac\u81ea\u5982\u4fe1\u606f\u79d1\u6280\u6709\u9650\u516c\u53f8\\n\\n\u6587\u7ae0\u4f5c\u8005\uff5c\u5218\u6d9b\u3001\u6881\u7814\u751f\u3001\u9b4f\u6797\u5b50\\n\\n\u6587\u7ae0\u6574\u7406\uff5c\u6768\u6797\u4f1f\\n\\n\u5185\u5bb9\u6821\u5bf9\uff5c\u6f58\u6708\u9e4f\\n\\n\x3c!-- truncate --\x3e\\n\\n## **1.\u6570\u636e\u96c6\u6210\u4e1a\u52a1\u80cc\u666f**  \\n\\n\u81ea\u5982\u79df\u623f\u4e1a\u52a1\u7684\u6570\u636e\u96c6\u6210\u573a\u666f\u4e3b\u8981\u6765\u6e90\u4e8e\u5404\u4e1a\u52a1\u7ebf\u7684 MySQL \u8868\u540c\u6b65\u5230 Hive \u8868\u7684\u9700\u6c42\u3002\u8fd9\u4e00\u9700\u6c42\u5305\u542b\u4e86\u6bcf\u5929\u540c\u6b65\u7684 MySQL \u4e1a\u52a1\u8868\u6570\u91cf\u8d85\u8fc7 4400 \u4e2a\uff0c\u4ee5\u53ca\u8d85\u8fc7 8000 \u591a\u4e2a\u7684 Hive ETL \u52a0\u5de5\u4efb\u52a1\uff0c\u6bcf\u5929\u65b0\u4ea7\u751f\u6570\u636e\u91cf\u6709 50T\uff0c\u800c\u4e14\u8fd9\u4e9b\u6570\u5b57\u8fd8\u5728\u4e0d\u65ad\u589e\u957f\u3002\u6839\u636e\u6570\u636e\u7684\u65b0\u9c9c\u5ea6\u9700\u6c42\u5206\u4e3a\u4f4e\u65b0\u9c9c\u5ea6\uff08T+1 day\uff09\u548c\u9ad8\u65b0\u9c9c\u5ea6\uff08T+10 minutes\uff09\u4e24\u79cd\uff0c\u6bcf\u5929\u540c\u6b65\u8c03\u5ea6 4000 \u591a\u4e2a\u4f4e\u65b0\u9c9c\u5ea6\u6570\u636e\u8868\uff0c\u4ee5\u53ca\u6bcf\u5929\u540c\u6b65\u8c03\u5ea6 400 \u591a\u4e2a\u9ad8\u65b0\u9c9c\u5ea6\u6570\u636e\u8868\uff0c\u7528\u4ee5\u786e\u4fdd\u6570\u636e\u7684\u53ca\u65f6\u6027\u548c\u51c6\u786e\u6027\u3002\\n\\n\u81ea\u5982\u7684\u6570\u636e\u96c6\u6210\u65b9\u6848\u6839\u636e\u4e1a\u52a1\u4f7f\u7528\u573a\u666f\u4e3b\u8981\u53ef\u5206\u4e3a\u4e24\u79cd\uff1a\\n\\n- **\u4f4e\u65b0\u9c9c\u5ea6**\uff1a\u4f4e\u65b0\u9c9c\u5ea6\u5bf9\u6570\u636e\u7684\u65f6\u6548\u6027\u8981\u6c42\u662f **T+1day**\uff0c\u6bcf\u65e5\u5b9a\u65f6\u51cc\u6668 00:00 \u91c7\u7528 Hive jdbc handler \u8fdb\u884c MySQL \u6570\u636e\u7684\u5168\u91cf\u62c9\u53d6\u81f3 Hive\uff0c\u5176\u57fa\u672c\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a\\n\\n  ![](/blog/ziru/low_freshness.png)\\n\\n- **\u9ad8\u65b0\u9c9c\u5ea6**\uff1a\u6b64\u573a\u666f\u4e2d\u8981\u6c42\u6570\u636e\u5b9e\u6548\u6027\u662f **T+10minutes**\uff0c\u6211\u4eec\u590d\u7528\u4e86\u4f4e\u65b0\u9c9c\u5ea6\u573a\u666f\u7684\u5feb\u7167\u62c9\u53d6\u65b9\u6cd5\u6765\u5b9e\u73b0\u5168\u91cf\u6570\u636e\u7684\u83b7\u53d6\uff0c\u5e76\u4e14\u521d\u59cb\u5316\u81f3 MySQL\uff0c\u540c\u6b65\u5229\u7528 Canal \u89e3\u6790\u65e5\u5fd7\u6536\u96c6\u5230 Kafka\uff0c\u7136\u540e\u4f7f\u7528 Flink \u8bfb\u53d6 kafka \u4e2d\u7684\u6570\u636e\u5e76\u5199\u5165\u5230 HDFS\uff0c\u6700\u540e\u7528 Airflow \u8fdb\u884c\u8c03\u5ea6\u4ee5\u5408\u5e76\u589e\u91cf\u6570\u636e\u81f3 Hive\uff0c\u5176\u57fa\u672c\u903b\u8f91\u5982\u4e0b\u6240\u793a\uff1a\\n\\n  ![](/blog/ziru/high_freshness.png)\\n\\n\u7136\u800c\uff0c\u5f53\u524d\u67b6\u6784\u5b58\u5728\u7740\u591a\u65b9\u9762\u7684\u6311\u6218\u548c\u538b\u529b\u3002\u9996\u5148\u662f\u8fd0\u7ef4\u6210\u672c\u9ad8\u6602\uff0c\u5176\u6b21\u662f\u8ba1\u7b97\u538b\u529b\u3001\u5b58\u50a8\u538b\u529b\u548c\u7f51\u7edc\u538b\u529b\u90fd\u975e\u5e38\u5927\u3002\u53e6\u5916\uff0c\u867d\u7136\u7cfb\u7edf\u8fd0\u884c\u65f6\u95f4\u4ece 0:00 \u5230 1:00 \u671f\u95f4\u8d44\u6e90\u5229\u7528\u4e0d\u5145\u5206\uff0c\u4f46\u5176\u4ed6\u65f6\u95f4\u6bb5\u5374\u9762\u4e34\u7740\u8d44\u6e90\u4e0d\u8db3\u7684\u60c5\u51b5\u3002\u5bf9\u6b64\u81ea\u5982\u51b3\u5b9a\u66f4\u65b0\u6570\u636e\u96c6\u6210\u67b6\u6784\u4ee5\u63d0\u9ad8\u7cfb\u7edf\u7684\u6548\u7387\u548c\u7a33\u5b9a\u6027\u3002\\n\\n## **2.\u9047\u5230\u7684\u6311\u6218**\\n\\n\u5728\u4e0a\u8ff0\u7684\u4e24\u79cd\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u5728\u6570\u636e\u96c6\u6210\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u4ee5\u4e0b\u6311\u6218\uff1a\\n\\n- **\u7f51\u7edc\u5e26\u5bbd\u8d85\u8d1f\u8377\u95ee\u9898**\uff1a\u7531\u4e8e\u62c9\u53d6\u4efb\u52a1\u8fbe\u5230 **4000+**\uff0c\u8fc7\u591a\u7684\u955c\u50cf\u5168\u91cf\u6570\u636e\u62c9\u53d6\u5bf9\u6570\u636e\u5e93\u7f51\u7edc\u5e26\u5bbd\u4ea7\u751f\u4e86\u5de8\u5927\u538b\u529b\u3002\\n\\n- **\u8d44\u6e90\u5229\u7528\u7387\u4f4e\u6548**\uff1a\u4e0a\u6e38\u6570\u636e\u4ece MySQL \u540c\u6b65\u5230 ODS \u5c42\u8868\u540e\uff0c\u4e0b\u6e38\u7684\u52a0\u5de5\u8868\u624d\u80fd\u542f\u52a8\uff0c\u5bfc\u81f4\u5728 0:00 \u5230 1:00 \u4e4b\u95f4\uff0cHadoop \u96c6\u7fa4\u7684 CPU \u548c\u5185\u5b58\u8d44\u6e90\u5e76\u672a\u5f97\u5230\u5145\u5206\u5229\u7528\u3002\\n\\n- **\u7ef4\u62a4\u6210\u672c\u9ad8\u6602**\uff1a\u5f53\u6570\u636e\u5e93\u8868\u7ed3\u6784\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u9700\u8981\u540c\u6b65\u4fee\u6539 Airflow \u811a\u672c\u3002\u5426\u5219\uff0c\u4f1a\u51fa\u73b0\u4e0d\u5b8c\u6574\u7684\u5b57\u6bb5\uff0c\u5f15\u8d77\u7ebf\u4e0a\u6570\u636e\u5f02\u5e38\u95ee\u9898\u3002\\n\\n- **\u95ee\u9898\u6392\u67e5\u56f0\u96be**\uff1a\u6570\u636e\u94fe\u8def\u8f83\u957f\uff0c\u5f53\u51fa\u73b0\u6570\u636e\u5f02\u5e38\u65f6\uff0c\u95ee\u9898\u6392\u67e5\u6210\u672c\u8f83\u9ad8\uff0c\u95ee\u9898\u53ef\u80fd\u51fa\u73b0\u5728 Canal\u3001Kafka\u3001Flink\u3001Airflow \u8c03\u5ea6\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u73af\u8282\uff0c\u5bfc\u81f4\u95ee\u9898\u6062\u590d\u65f6\u95f4\u957f\u3002\\n\\n- **Flink \u4f5c\u4e1a\u96be\u4ee5\u7edf\u4e00\u7ba1\u7406**\uff1aFlink \u672c\u8eab\u6ca1\u6709\u63d0\u4f9b\u5f88\u597d\u7684\u90e8\u7f72\u548c\u5f00\u53d1\u80fd\u529b\uff0c\u5728 Flink \u4efb\u52a1\u6570\u91cf\u589e\u591a\u540e\uff0c\u7ba1\u7406\u548c\u7ef4\u62a4\u7684\u65f6\u95f4\u6210\u672c\u4e5f\u968f\u4e4b\u4e0a\u5347\u3002\\n\\n\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u6211\u4eec\u7ecf\u8fc7\u4e00\u7cfb\u5217\u8c03\u7814\u540e\uff0c\u51b3\u5b9a\u91c7\u7528 \u201c**StreamPark+Paimon**\u201d \u7684\u7b56\u7565\uff0c\u90a3\u4e48\u9009\u62e9\u5b83\u4eec\u7684\u539f\u56e0\u662f\u4ec0\u4e48\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u5148\u770b\u770b\u5b83\u4eec\u7684\u7279\u6027\u3002\\n\\n### **Paimon \u7684\u6838\u5fc3\u7279\u6027**\\n\\n**\u5728\u7ecf\u8fc7\u5bf9 Apache Hudi / Iceberg / Paimon \u51e0\u4e2a\u6570\u636e\u6e56\u6846\u67b6\u7684\u8c03\u7814\u548c\u7efc\u5408\u8bc4\u4f30\u4e4b\u540e\uff0c\u6211\u4eec\u51b3\u5b9a\u4f7f\u7528 Apache Paimon**\uff0cApache Paimon \u662f\u4e00\u9879\u6d41\u5f0f\u6570\u636e\u6e56\u5b58\u50a8\u6280\u672f\uff0c\u53ef\u4ee5\u4e3a\u7528\u6237\u63d0\u4f9b\u9ad8\u541e\u5410\u4f4e\u5ef6\u65f6\u7684\u6570\u636e\u6444\u5165\uff0c\u6d41\u5f0f\u8ba2\u9605\u548c\u5b9e\u65f6\u67e5\u8be2\u80fd\u529b\uff0c\u652f\u6301\u4f7f\u7528 Flink \u548c Spark \u6784\u5efa\u5b9e\u65f6 Lakehouse \u67b6\u6784\uff0c\u652f\u6301\u6279/\u6d41\u6570\u636e\u5904\u7406\u64cd\u4f5c\uff0c\u521b\u65b0\u6027\u5730\u5c06 Lake \u683c\u5f0f\u4e0e LSM \u7ed3\u6784\u76f8\u7ed3\u5408\uff0c\u5c06\u5b9e\u65f6\u6d41\u5f0f\u66f4\u65b0\u5f15\u5165 Lake \u67b6\u6784\u4e2d\uff0c\u5177\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a\\n\\n- **\u7edf\u4e00\u7684\u6279\u5904\u7406\u548c\u6d41\u5904\u7406**\uff1aPaimon \u652f\u6301\u6279\u91cf\u5199\u5165\u3001\u6279\u91cf\u8bfb\u53d6\u548c\u6d41\u5f0f\u64cd\u4f5c\uff0c\u63d0\u4f9b\u4e86\u7075\u6d3b\u7684\u6570\u636e\u5904\u7406\u65b9\u5f0f\u3002\\n\\n- **\u6570\u636e\u6e56\u529f\u80fd**\uff1a\u4f5c\u4e3a\u6570\u636e\u6e56\u5b58\u50a8\u7cfb\u7edf\uff0cPaimon \u5177\u6709\u4f4e\u6210\u672c\u3001\u9ad8\u53ef\u9760\u6027\u548c\u53ef\u6269\u5c55\u7684\u5143\u6570\u636e\u7b49\u7279\u6027\u3002\\n\\n- **\u4e30\u5bcc\u7684\u5408\u5e76\u5f15\u64ce**\uff1aPaimon \u63d0\u4f9b\u4e86\u591a\u79cd\u5408\u5e76\u5f15\u64ce\uff0c\u53ef\u4ee5\u6839\u636e\u9700\u6c42\u9009\u62e9\u4fdd\u7559\u6700\u65b0\u6570\u636e\u3001\u8fdb\u884c\u5c40\u90e8\u66f4\u65b0\u6216\u8fdb\u884c\u805a\u5408\u64cd\u4f5c\u3002\\n\\n- **\u81ea\u52a8\u751f\u6210\u53d8\u66f4\u65e5\u5fd7**\uff1aPaimon \u652f\u6301\u591a\u79cd Changelog \u751f\u4ea7\u8005\uff0c\u80fd\u591f\u81ea\u52a8\u751f\u6210\u6b63\u786e\u5b8c\u6574\u7684\u53d8\u66f4\u65e5\u5fd7\uff0c\u7b80\u5316\u6d41\u5f0f\u4efb\u52a1\u5206\u6790\u3002\\n\\n- **\u4e30\u5bcc\u7684\u8868\u7c7b\u578b**\uff1aPaimon \u652f\u6301\u4e3b\u952e\u8868\u548c\u4ec5\u8ffd\u52a0\u8868\uff0c\u4ee5\u53ca\u591a\u79cd\u8868\u7c7b\u578b\uff0c\u5982\u5185\u90e8\u8868\u3001\u5916\u90e8\u8868\u3001\u5206\u533a\u8868\u548c\u4e34\u65f6\u8868\u3002\\n\\n- **\u652f\u6301\u8868\u7ed3\u6784\u53d8\u66f4\u540c\u6b65**\uff1a\u5f53\u6570\u636e\u6e90\u8868\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u65f6\uff0cPaimon \u80fd\u81ea\u52a8\u8bc6\u522b\u5e76\u540c\u6b65\u8fd9\u4e9b\u53d8\u5316\u3002\\n\\nPaimon \u53ef\u4ee5\u7ed3\u5408 Apache Spark\u2122 \u6765\u4f7f\u7528\uff0c\u6211\u4eec\u573a\u666f\u662f Paimon \u7ed3\u5408 Flink \u7684\u65b9\u5f0f\uff0c\u8fd9\u6837\u4e00\u6765 \u201c**\u5982\u4f55\u7ba1\u7406 4000+\u4e2a Flink \u6570\u636e\u540c\u6b65\u4f5c\u4e1a**\u201d \u5c06\u4f1a\u662f\u6211\u4eec\u9762\u4e34\u7684\u65b0\u95ee\u9898\u3002\u5728\u5168\u9762\u8c03\u7814\u4e86\u76f8\u5173\u9879\u76ee\uff0c\u7ecf\u8fc7\u5404\u9879\u7ef4\u5ea6\u7efc\u5408\u8bc4\u4f30\u540e\uff0c**\u6211\u4eec\u51b3\u5b9a\u91c7\u7528 StreamPark**\uff0c\u90a3\u4e48\u4e3a\u4ec0\u4e48\u9009\u62e9 StremaPark \u5462\uff1f\\n\\n### **StreamPark \u7684\u6838\u5fc3\u7279\u6027**\\n\\nApache StreamPark \u662f\u4e00\u4e2a\u6d41\u5904\u7406\u5f00\u53d1\u7ba1\u7406\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u4e00\u5957\u5feb\u6377\u7684API \u7528\u6765\u5f00\u53d1 Flink/Spark \u4f5c\u4e1a\uff0c\u6b64\u5916\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e00\u7ad9\u5f0f\u7684\u6d41\u5904\u7406\u4f5c\u4e1a\u5f00\u53d1\u7ba1\u7406\u5e73\u53f0\uff0c\u4ece\u6d41\u5904\u7406\u4f5c\u4e1a\u5f00\u53d1\u5230\u4e0a\u7ebf\u5168\u751f\u547d\u5468\u671f\u90fd\u505a\u4e86\u652f\u6301\uff0cStreamPark \u4e3b\u8981\u5305\u542b\u4e0b\u9762\u8fd9\u4e9b\u6838\u5fc3\u7279\u70b9\uff1a\\n\\n- **\u6d41\u5904\u7406\u5e94\u7528\u5f00\u53d1\u6846\u67b6**\uff1a\u57fa\u4e8e StreamPark\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u8f7b\u677e\u6784\u5efa\u548c\u7ba1\u7406\u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\uff0c\u66f4\u597d\u5730\u5229\u7528  Apache Flink\xae \u53bb\u7f16\u5199\u6d41\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u3002\\n\\n- **\u5b8c\u5584\u7684\u4f5c\u4e3a\u7ba1\u7406\u80fd\u529b**\uff1aStreamPark \u63d0\u4f9b\u4e00\u7ad9\u5f0f\u6d41\u4efb\u52a1\u5f00\u53d1\u7ba1\u7406\u5e73\u53f0\uff0c\u652f\u6301\u4e86 Flink / Spark \u4ece\u5e94\u7528\u5f00\u53d1\u5230\u8c03\u8bd5\u3001\u90e8\u7f72\u3001\u8fd0\u7ef4\u7b49\u5168\u751f\u547d\u5468\u671f\u7684\u80fd\u529b\u652f\u6301\uff0c\u8ba9 Flink / Spark \u4f5c\u4e1a\u53d8\u5f97\u7b80\u5355\u3002\\n\\n- **\u5b8c\u6210\u5ea6\u9ad8**\uff1aStreamPark \u652f\u6301\u4e86 Flink \u591a\u7248\u672c\uff0c\u53ef\u4ee5\u505a\u5230\u4e00\u4e2a\u5e73\u53f0\u7075\u6d3b\u5207\u6362\uff0c\u540c\u65f6\u652f\u6301 Flink \u6240\u7684\u90e8\u7f72\u6a21\u5f0f\uff0c\u6709\u6548\u89e3\u51b3\u4e86 Flink on YARN / K8s \u90e8\u7f72\u8fc7\u4e8e\u7e41\u7410\u7684\u95ee\u9898\uff0c\u901a\u8fc7\u81ea\u52a8\u5316\u6d41\u7a0b\uff0c\u7b80\u5316\u4e86\u4efb\u52a1\u7684\u6784\u5efa\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\u6d41\u7a0b\uff0c\u5e76\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\u3002\\n\\n- **\u4e30\u5bcc\u7684\u7ba1\u7406 API**\uff1aStreamPark \u63d0\u4f9b\u4e86\u4f5c\u4e1a\u64cd\u4f5c\u7684 API\uff0c\u5305\u62ec\u4f5c\u4e1a\u521b\u5efa\u3001\u62f7\u8d1d\u3001\u6784\u5efa\u3001\u90e8\u7f72\u3001\u57fa\u4e8e checkpoint/savepoint \u7684\u505c\u6b62\u548c\u542f\u52a8\u7b49\u529f\u80fd\uff0c\u4f7f\u5916\u90e8\u7cfb\u7edf\u8c03\u7528 Apache Flink\xae \u4efb\u52a1\u53d8\u5f97\u6613\u4e8e\u5b9e\u73b0\u3002\\n\\n## **3. StreamPark + Paimon \u5b9e\u8df5**\\n\\n\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u7ee7\u7eed\u5206\u4eab\u81ea\u5982\u662f\u5982\u4f55\u57fa\u4e8e **StreamPark + Paimon** \u8fdb\u884c\u67b6\u6784\u4f18\u5316\u6539\u9020\u7684\uff0c\u6211\u4eec\u5148\u770b\u67b6\u6784\u5347\u7ea7\u524d\u540e\u7684\u5bf9\u6bd4\u3002\\n\\n### **3.1 \u67b6\u6784\u5347\u7ea7\u524d**\\n\\n\u6570\u636e\u96c6\u6210\u6a21\u5757\u5728\u6539\u9020\u4e4b\u524d\u7684\u7cfb\u7edf\u4ea4\u4e92\u6d41\u7a0b\u5982\u4e0b\uff1a\\n\\n![](/blog/ziru/system_interaction_process.png)\\n\\n**Step1**\uff08\u7528\u6237\u53d1\u8d77\u63a5\u5165\u7533\u8bf7\uff09\uff1a\u9996\u5148\u7528\u6237\u5728\u6570\u636e\u63a5\u5165\u5e73\u53f0\u9009\u62e9\u4e00\u4e2a\u8868\uff0c\u7136\u540e\u70b9\u51fb\u7533\u8bf7\u63a5\u5165\u6309\u94ae\uff1a\\n\\n![](/blog/ziru/data_access_platform.png)\\n\\n**Step2**\uff08\u53d1\u8d77OA\u7cfb\u7edf\u5ba1\u6279\u6d41\u7a0b\uff09\uff1aOA \u7cfb\u7edf\u63a5\u6536\u5230\u63a5\u5165\u7533\u8bf7\uff0c\u4f1a\u53d1\u8d77\u5de5\u4f5c\u6d41\u5ba1\u6279\uff0c\u5982\u5ba1\u6279\u5931\u8d25\u4f1a\u9a73\u56de\u7533\u8bf7\uff0c\u5ba1\u6279\u901a\u8fc7\u624d\u4f1a\u7ee7\u7eed\u4e0b\u4e00\u6b65\u3002\\n\\n**Step3**\uff08\u6570\u636e\u63a5\u5165\u5e73\u53f0\u5904\u7406\u5ba1\u6279\u901a\u8fc7\u4e8b\u4ef6\uff09\uff1a\u6570\u636e\u63a5\u5165\u5e73\u53f0\u8c03\u7528 Canal \u63a5\u53e3\u90e8\u7f72 Canal \u4efb\u52a1\uff0c\u5c06\u8868\u4e2d\u7684 Binlog \u6570\u636e\u4f20\u5165 Kafka \uff1a\\n\\n![](/blog/ziru/canal_job.png)\\n\\n**Step4**\uff08Flink \u4efb\u52a1\u90e8\u7f72\uff09\uff1a\u4eba\u5de5\u4f7f\u7528 Flink Session Submit UI \u90e8\u7f72 Flink \u6a21\u677f\u4f5c\u4e1a\uff0c\u8d1f\u8d23\u89e3\u6790 Kafka \u4e2d\u7684 Binlog \u53d8\u5316\u6570\u636e\uff0c\u5e76\u5c06\u6570\u636e\u5199\u5165 HDFS\uff0c\u540c\u65f6\u6620\u5c04\u6210 Hive \u5916\u90e8\u589e\u91cf\u8868\uff1a\\n\\n![](/blog/ziru/flink_job.png)\\n\\n**Step5**\uff08Airflow\u8c03\u5ea6\u521d\u59cb\u5316\u8868\uff09\uff1a\u521b\u5efa Hive \u6620\u5c04\u589e\u91cf\u8868\u548c\u5168\u91cf\u8868\u5e76\u7528 Airflow \u8c03\u5ea6\u5b8c\u6210\u9996\u6b21\u521d\u59cb\u5316:\\n\\n![](/blog/ziru/first_initialization.png)\\n\\n**Step6**\uff08\u6570\u636e\u5408\u5e76\u5230 Hive \u5168\u91cf\u8868\uff09\uff1a\u914d\u7f6e\u8c03\u5ea6\u901a\u8fc7 Hive Merge \u65b9\u5f0f\u5c06 Hive \u5916\u90e8\u589e\u91cf\u8868\u7684\u6570\u636e\u5408\u5e76\u5230 Hive \u5168\u91cf\u8868\u4e2d\\n\\n![](/blog/ziru/data_merging.png)\\n\\n### **3.2 \u67b6\u6784\u5347\u7ea7\u540e**\\n\\n\u6539\u9020\u540e\u7684\u7cfb\u7edf\u4ea4\u4e92\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/ziru/after_the_transformation.png)\\n\\n\u5bf9\u6bd4\u6539\u9020\u524d\u548c\u6539\u9020\u540e\u7684\u4ea4\u4e92\u6d41\u7a0b\u56fe\uff0c\u53ef\u4ee5\u770b\u51fa\u524d\u4e24\u4e2a\u6b65\u9aa4\u7684\u6d41\u7a0b\uff08\u8868\u63a5\u5165\u7533\u8bf7\u4e0e\u5ba1\u6279\uff09\u662f\u4e00\u6837\u7684\uff0c\u53ea\u662f\u5ba1\u6279\u901a\u8fc7\u4e4b\u540e\u7684\u4e8b\u4ef6**\u76d1\u542c\u5904\u7406\u65b9\u5f0f**\u7684\u5dee\u5f02\u3002\\n\\n- **\u6539\u9020\u524d**\uff1a\u8c03\u7528 Canal \u63a5\u53e3\u53bb\u90e8\u7f72Canal \u4efb\u52a1\uff08\u65e7\u7684\u903b\u8f91\uff09\uff1b\\n\\n- **\u6539\u9020\u540e**\uff1a\u8c03\u7528 StreamPark \u7684 API \u63a5\u53e3\u5b8c\u6210 Flink Paimon \u7684\u4efb\u52a1\u90e8\u7f72\u3002\\n\\n\u63a5\u4e0b\u6765\u770b\u770b\u4f7f\u7528 Paimon \u6765\u5b8c\u6210\u6570\u636e\u7684\u96c6\u6210\u7684\u3002\\n\\n### **3.3 Paimon \u5b9e\u73b0\u4e00\u952e\u5165 Hive**\\n\\n\u5728 Apache Paimon 0.5 \u7248\u672c\u540e\uff0c\u63d0\u4f9b\u4e86 CDC \u6570\u636e\u96c6\u6210\u80fd\u529b\uff0c\u901a\u8fc7\u5b98\u65b9\u63d0\u4f9b\u7684 paimon-action jar \u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u5c06 MySQL\u3001Kafka\u3001Mongo \u7b49\u4e2d\u7684\u6570\u636e\u5b9e\u65f6\u6444\u5165\u5230 Paimon \u4e2d\uff0c\u6211\u4eec\u6b63\u5728\u4f7f\u7528\u7684\u662f paimon-flink-action \uff0c\u91c7\u7528\u4e86 **mysql-sync-database\uff08\u6574\u5e93\u540c\u6b65\uff09**\uff0c\u5e76\u901a\u8fc7\u201c**\u2014including_tables**\u201d \u53c2\u6570\u9009\u62e9\u8981\u540c\u6b65\u7684\u8868\u3002\u8fd9\u79cd\u540c\u6b65\u6a21\u5f0f\u6709\u6548\u5730\u8282\u7701\u4e86\u5927\u91cf\u8d44\u6e90\u5f00\u9500\uff0c\u76f8\u6bd4\u6bcf\u4e2a\u8868\u542f\u52a8\u4e00\u4e2a Flink \u4efb\u52a1\u800c\u8a00\uff0c\u907f\u514d\u4e86\u8d44\u6e90\u7684\u5927\u91cf\u6d6a\u8d39\u3002\\n\\npaimon-flink-action \u63d0\u4f9b\u4e86\u81ea\u52a8\u521b\u5efa Paimon \u8868\u7684\u529f\u80fd\uff0c\u5e76\u652f\u6301 Schema Evolution\uff08\u4f8b\u5982\uff0c\u5f53 MySQL \u8868\u5b57\u6bb5\u53d1\u751f\u53d8\u5316\u65f6\uff0cPaimon \u8868\u4f1a\u76f8\u5e94\u53d8\u5316\uff0c\u65e0\u9700\u989d\u5916\u64cd\u4f5c\uff09\u3002\u6574\u4e2a\u64cd\u4f5c\u6d41\u7a0b\u9ad8\u6548\u800c\u987a\u7545\uff0c\u89e3\u51b3\u4e86\u539f\u59cb\u67b6\u6784\u56e0\u6dfb\u52a0\u5b57\u6bb5\u800c\u4ea7\u751f\u7684\u4e0d\u5fc5\u8981\u8fd0\u7ef4\u6210\u672c\uff0cpaimon-action \u5177\u4f53\u4f7f\u7528\u5982\u4e0b\uff0c\u66f4\u591a\u8bf7\u53c2\u8003Paimon \u5b98\u7f51\u6587\u6863\u3002\\n\\n```shell\\n<FLINK_HOME>/bin/flink run \\\\\\n    /path/to/paimon-flink-action-0.8-SNAPSHOT.jar \\\\\\n    mysql_sync_table\\n    --warehouse <warehouse-path> \\\\\\n    --database <database-name> \\\\\\n    --table <table-name> \\\\\\n    [--partition_keys <partition_keys>] \\\\\\n    [--primary_keys <primary-keys>] \\\\\\n    [--type_mapping <option1,option2...>] \\\\\\n    [--computed_column <'column-name=expr-name(args[, ...])'> [--computed_column ...]] \\\\\\n    [--metadata_column <metadata-column>] \\\\\\n    [--mysql_conf <mysql-cdc-source-conf> [--mysql_conf <mysql-cdc-source-conf> ...]] \\\\\\n    [--catalog_conf <paimon-catalog-conf> [--catalog_conf <paimon-catalog-conf> ...]] \\\\\\n    [--table_conf <paimon-table-sink-conf> [--table_conf <paimon-table-sink-conf> ...]]\\n```\\n\\n\u5f15\u5165 Paimon \u540e\u7f29\u77ed\u4e86\u6574\u4e2a\u6570\u636e\u63a5\u5165\u94fe\u8def\uff0c\u6d88\u9664\u4e86\u5bf9 Canal\u3001Kafka\u3001Airflow \u7684\u4f9d\u8d56\uff0c\u4f7f\u5f97 MySQL \u76f4\u63a5\u4ee5\u5206\u949f\u7ea7\u901f\u5ea6\u4e0e Hive \u5bf9\u63a5\uff0c\u6574\u4f53\u73af\u5883\u6e05\u723d\u9ad8\u6548\u3002\u6b64\u5916\uff0cPaimon \u5b8c\u5168\u517c\u5bb9 Hive \u7aef\u6570\u636e\u8bfb\u53d6\uff0c\u8f6c\u6362\u6210\u672c\u6781\u4f4e\uff0c\u5bf9\u539f\u59cb\u67b6\u6784\u811a\u672c\u7684\u4f7f\u7528\u4e5f\u5177\u5907\u826f\u597d\u7684\u517c\u5bb9\u6027\uff0cPaimon \u8fd8\u652f\u6301 Tag \u529f\u80fd\uff0c\u53ef\u4ee5\u89c6\u4e3a\u8f7b\u91cf\u7ea7\u7684\u5feb\u7167\uff0c\u5927\u5e45\u964d\u4f4e\u4e86\u5b58\u50a8\u6210\u672c\u3002\\n\\n### **3.4 StreamPark + Paimon \u843d\u5730\u5b9e\u8df5**\\n\\nStreamPark \u5728 2.1.2 \u7248\u672c\u4e2d\u66f4\u597d\u7684\u652f\u6301\u4e86 JAR \u7c7b\u578b\u7684\u4f5c\u4e1a\uff0c\u4f7f\u5f97 Paimon \u7c7b\u578b\u7684\u6570\u636e\u96c6\u6210\u4f5c\u4e1a\u66f4\u7b80\u5355\u4e86\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u6f14\u793a\u4e86\u5982\u4f55\u4f7f\u7528 StreamPark \u5feb\u901f\u5f00\u53d1 Paimon \u6570\u636e\u8fc1\u79fb\u7c7b\u578b\u7684\u4f5c\u4e1a\uff1a\\n\\n//\u89c6\u9891\u94fe\u63a5 (StreamPark \u90e8\u7f72 Paimon \u6570\u636e\u96c6\u6210\u4f5c\u4e1a\u793a\u4f8b )\\n\\n\u8bda\u7136 StreamPark \u5728 2.1.2 \u7248\u672c\u4e4b\u540e\u5df2\u7ecf\u7279\u522b\u9488\u5bf9 Paimon \u6570\u636e\u96c6\u6210\u7c7b\u4f5c\u4e1a\u505a\u4e86\u652f\u6301\uff0c\u4f46\u662f\u8fd9\u79cd\u624b\u52a8\u521b\u5efa\u4f5c\u4e1a\uff0c\u8f93\u5165\u4f5c\u4e1a\u53c2\u6570\u7684\u65b9\u5f0f\u8fd8\u662f\u4e0d\u6ee1\u8db3\u6211\u4eec\u7684\u5b9e\u9645\u9700\u6c42\uff0c\u6211\u4eec\u9700\u8981\u66f4\u7075\u6d3b\u7684\u4f5c\u4e1a\u521b\u5efa\uff0c\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 API \u7684\u65b9\u5f0f\u5feb\u901f\u5b8c\u6210\u4f5c\u4e1a\u521b\u5efa\u3001\u542f\u52a8... \u7ecf\u8fc7\u6211\u4eec\u7684\u8c03\u7814\u53d1\u73b0 StreamPark \u5df2\u7ecf\u5b8c\u6574\u7684\u5f00\u653e\u4e86\u4f5c\u4e1a\u7684\u5404\u9879\u64cd\u4f5c API\uff0c\u5982\u4f5c\u4e1a\u7684\u590d\u5236\u3001\u521b\u5efa\u3001\u90e8\u7f72\u3001\u542f\u52a8\u3001\u505c\u6b62\u7b49\uff0c\u8fd9\u6837\u4e00\u6765\uff0c\u6211\u4eec\u901a\u8fc7\u5b9a\u65f6\u8c03\u5ea6\u5c31\u53ef\u4ee5\u975e\u5e38\u65b9\u4fbf\u548c StreamPark \u7ec4\u5408\uff0c\u6765\u5feb\u901f\u5b8c\u6210\u4f5c\u4e1a\u7684\u5f00\u53d1\u548c\u8fd0\u884c\uff0c\u5177\u4f53\u65b9\u5f0f\u5982\u4e0b\uff1a\\n\\n**Step1**\uff1a\u9996\u5148\uff0c\u4f1a\u8c03\u7528api copy \u6a21\u7248\u63a5\u53e3\uff0c\u5e76\u4f20\u5165\u53c2\u6570\uff0c\u76f8\u5173\u622a\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/ziru/api_copy.png)\\n\\n\u8fd9\u6837\u8be5\u4f5c\u4e1a\u5c31\u5feb\u901f\u521b\u5efa\u5b8c\u6210\uff0c\u53c2\u6570\u4f1a\u901a\u8fc7 copy \u63a5\u53e3\u4f20\u5165\uff0c\u5177\u4f53\u53c2\u6570\u5982\u4e0b\uff1a\\n\\n![](/blog/ziru/parameter.png)\\n\\n**Step2**\uff1a\u63a5\u7740\uff0c\u8c03\u7528api\u6784\u5efa\u4f5c\u4e1a\u955c\u50cf\uff1a\\n\\n![](/blog/ziru/job_mirroring.png)\\n\\n**Step3**\uff1a\u7ee7\u7eed\u8c03\u7528api\u542f\u52a8\u4f5c\u4e1a\uff1a\\n\\n![](/blog/ziru/start_the_job.png)\\n\\n\u6700\u540e\uff0c\u4efb\u52a1\u542f\u52a8\u6210\u529f\u540e\uff0c\u53ef\u4ee5\u5728 StreamPark \u5e73\u53f0\u770b\u5230\u4efb\u52a1\u7684\u76f8\u5173\u72b6\u6001\u4fe1\u606f\u4ee5\u53ca\u6574\u4f53\u4efb\u52a1\u7684\u8d44\u6e90\u6982\u51b5\uff1a\\n\\n![](/blog/ziru/resource_overview.png)\\n\\n\u5e76\u53ef\u4ee5\u70b9\u51fbApplication Name \u8c03\u5ea6Flink Web UI\uff1a\\n\\n![](/blog/ziru/flink_ui.png)\\n\\n\u6700\u540e\u53ef\u4ee5\u76f4\u63a5\u5728 Hive \u7aef\u67e5\u8be2 Paimon \u8868\uff0c\u83b7\u53d6\u6240\u9700\u7684\u6570\u636e\uff0c\u5176\u4e2d Paimon \u8868\u662f\u7ecf\u8fc7 Flink \u5904\u7406\u7684\u3001\u5ef6\u65f6\u8f83\u4f4e\u7684\u6570\u636e\u540c\u6b65\u76ee\u6807\u8868\u3002Hue \u4e2d Hive \u67e5\u8be2 Paimon \u8868\u622a\u56fe\u5982\u4e0b\\n\\n![](/blog/ziru/hive_query_paimon.png)\\n\\n\u901a\u8fc7\u4ee5\u4e0a\u6b65\u9aa4\uff0c\u4e1a\u52a1\u65b9\u53ef\u4ee5\u65b9\u4fbf\u5730\u53d1\u8d77\u63a5\u5165\u7533\u8bf7\uff0c\u7ecf\u8fc7\u5ba1\u6279\u6d41\u7a0b\u540e\uff0c\u901a\u8fc7 StreamPark \u521b\u5efa\u90e8\u7f72 Flink \u4f5c\u4e1a\uff0c\u6570\u636e\u901a\u8fc7 Flink \u4f5c\u4e1a\u5165  Paimon \u8868\uff0c\u4f7f\u7528\u6237\u80fd\u591f\u8f7b\u677e\u5730\u5728 Hive \u7aef\u8fdb\u884c\u67e5\u8be2\u64cd\u4f5c\uff0c\u6574\u4e2a\u6d41\u7a0b\u7b80\u5316\u4e86\u7528\u6237\u64cd\u4f5c\uff0c\u63d0\u9ad8\u4e86\u6570\u636e\u63a5\u5165\u7684\u6548\u7387\u548c\u53ef\u7ef4\u62a4\u6027\u3002\\n\\n## **4. \u5e26\u6765\u7684\u6536\u76ca**\\n\\n\u81ea\u5982\u901a\u8fc7\u4f7f\u7528 Paimon \u548c StreamPark \uff0c\u5e26\u6765\u4e86\u5982\u4e0b\u4f18\u52bf\u548c\u6548\u76ca\uff1a\\n\\n- **\u7f51\u7edc\u8d44\u6e90\u548c\u6570\u636e\u5e93\u538b\u529b\u4f18\u5316**\uff1a\u901a\u8fc7\u76f4\u63a5\u4ece Paimon \u8868\u83b7\u53d6\u6570\u636e\u5feb\u7167\uff0c\u89e3\u51b3\u4e86\u51cc\u6668\u4ece\u4e1a\u52a1\u6570\u636e\u5e93\u62c9\u53d6\u6570\u636e\u5bfc\u81f4\u7684\u7f51\u7edc\u8d44\u6e90\u7d27\u5f20\u548c\u6570\u636e\u5e93\u538b\u529b\u8fc7\u5927\u95ee\u9898\uff0c\u540c\u65f6\u964d\u4f4e\u4e86\u6570\u636e\u5b58\u50a8\u6210\u672c\u3002\\n\\n- **\u4f5c\u4e1a\u7ba1\u7406\u63a5\u53e3\u63d0\u5347\u6548\u7387**\uff1a\u4f7f\u7528 StreamPark \u7684\u4f5c\u4e1a\u7ba1\u7406\u63a5\u53e3\u8f7b\u677e\u89e3\u51b3\u4e86\u624b\u52a8\u90e8\u7f72 Flink \u4efb\u52a1\u7684\u95ee\u9898\uff0c\u6d88\u9664\u4e86\u4eba\u5458\u4f9d\u8d56\u65f6\u95f4\u5bfc\u81f4\u4efb\u52a1\u4e0d\u53ca\u65f6\u90e8\u7f72\u7684\u60c5\u51b5\uff0c\u63d0\u9ad8\u4e86\u6548\u7387\uff0c\u540c\u65f6\u51cf\u5c11\u4e86\u6c9f\u901a\u6210\u672c\uff0c\u63d0\u5347\u4e86 Flink \u4f5c\u4e1a\u7684\u7ba1\u7406\u6548\u7387\u3002\\n\\n- **\u964d\u4f4e\u5f00\u53d1\u3001\u7ef4\u62a4\u6210\u672c**\uff1a\u89e3\u51b3\u4e86\u4e4b\u524d\u65b9\u6848\u94fe\u8def\u957f\u5bfc\u81f4\u7684\u7ef4\u62a4\u6210\u672c\u9ad8\u548c\u95ee\u9898\u5b9a\u4f4d\u6162\u7684\u95ee\u9898\uff0c\u540c\u65f6\u89e3\u51b3\u4e86\u5b57\u6bb5\u53d8\u5316\u5bfc\u81f4\u7684\u5b57\u6bb5\u4e0d\u4e00\u81f4\u95ee\u9898\uff0c\u5b9e\u73b0\u4e86\u6570\u636e\u63a5\u5165\u7684\u6d41\u6279\u7edf\u4e00\uff0c\u964d\u4f4e\u4e86\u5f00\u53d1\u548c\u7ef4\u62a4\u7684\u6210\u672c\u3002\\n\\n- **\u964d\u4f4e\u4e86\u6570\u636e\u96c6\u6210\u8c03\u5ea6\u8d44\u6e90\u548c\u8ba1\u7b97\u8d44\u6e90\u7684\u4f7f\u7528\u6210\u672c**\uff1a\u4e0d\u518d\u4f9d\u8d56\u5916\u90e8\u8c03\u5ea6\u7cfb\u7edf\u8fdb\u884c\u589e\u91cf\u6570\u636e\u7684\u5408\u5e76\uff0c\u51cf\u5c11\u4e86\u8c03\u5ea6\u8d44\u6e90\u7684\u4f7f\u7528\u3002\u4e5f\u4e0d\u518d\u4f9d\u8d56 Hive \u8d44\u6e90\u8fdb\u884c\u5408\u5e76\u64cd\u4f5c\uff0c\u964d\u4f4e\u4e86\u5408\u5e76\u589e\u91cf\u6570\u636e\u5bf9 Hive \u8ba1\u7b97\u8d44\u6e90\u7684\u82b1\u9500\u6210\u672c\u3002\\n\\n## **5. \u7ed3\u8bed\u4e0e\u671f\u671b**\\n\\n\u6211\u4eec\u8877\u5fc3\u5730\u611f\u8c22 **Apache StreamPark** \u793e\u533a\u5728\u6211\u4eec\u4f7f\u7528 StreamPark API \u65f6\u63d0\u4f9b\u7684\u65e0\u79c1\u5e2e\u52a9\u3002\u4ed6\u4eec\u4e13\u4e1a\u7684\u670d\u52a1\u7cbe\u795e\u548c\u4ee5\u7528\u6237\u4e3a\u672c\u7684\u6001\u5ea6\uff0c\u4f7f\u6211\u4eec\u5f97\u4ee5\u66f4\u52a0\u9ad8\u6548\u3001\u6d41\u7545\u5730\u8fd0\u7528\u8fd9\u4e00\u5f3a\u5927\u6846\u67b6\u3002\u4f5c\u4e3a\u4e00\u5957\u5353\u8d8a\u7684\u6846\u67b6\uff0cStreamPark \u4e0d\u4f46\u62e5\u6709\u51fa\u8272\u7684\u529f\u80fd\uff0c\u800c\u4e14\u80fd\u652f\u6301\u4e00\u7cfb\u5217\u5982\u4efb\u52a1\u590d\u5236\u3001\u521b\u5efa\u3001\u90e8\u7f72\u3001\u542f\u52a8\u3001\u505c\u6b62\u4ee5\u53ca\u72b6\u6001\u76d1\u63a7\u7684\u64cd\u4f5c\uff0c\u5e76\u5728\u7b80\u5316 Flink \u4efb\u52a1\u7684\u7ba1\u7406\u4e0e\u7ef4\u62a4\u65b9\u9762\u663e\u8457\u5730\u53d1\u6325\u4e86\u5176\u4ef7\u503c\u3002\\n\\n\u540c\u65f6\uff0c\u5bf9 **Apache Paimon** \u793e\u533a\u5728\u81ea\u5982 MySQL \u5165 Paimon \u6d4b\u8bd5\u9636\u6bb5\u7ed9\u4e88\u6211\u4eec\u7684\u8010\u5fc3\u4e0e\u4e13\u4e1a\u6307\u5bfc\u8868\u793a\u611f\u8c22\uff0c\u8fd9\u662f\u6211\u4eec\u80fd\u591f\u987a\u5229\u5b8c\u6210\u6d4b\u8bd5\u7684\u91cd\u8981\u652f\u6301\u3002Paimon \u4f5c\u4e3a\u4e00\u9879\u5bcc\u6709\u6f5c\u529b\u7684\u9879\u76ee\uff0c\u65e0\u8bba\u662f\u5728\u529f\u80fd\u5b9e\u73b0\u8fd8\u662f\u56e2\u961f\u534f\u4f5c\u65b9\u9762\uff0c\u90fd\u5c55\u73b0\u4e86\u975e\u51e1\u7684\u7d20\u8d28\u3002\\n\\n\u6700\u540e\uff0c\u6211\u4eec\u5bf9 Apache StreamPark \u548c Apache Paimon \u7684\u672a\u6765\u4e4b\u8def\u6ee1\u6000\u671f\u5f85\u548c\u4fe1\u5fc3\uff0c\u575a\u4fe1\u5b83\u4eec\u80fd\u5728\u672a\u6765\u4f1a\u6210\u4e3a Apache \u7684\u4f18\u79c0\u9879\u76ee\u3002\u5b83\u4eec\u5353\u8d8a\u7684\u529f\u80fd\u548c\u548c\u7766\u7684\u793e\u533a\u5408\u4f5c\u6a21\u5f0f\uff0c\u90fd\u4e3a\u5176\u5728\u5f00\u6e90\u793e\u533a\u7684\u6210\u719f\u4e4b\u8def\u6253\u4e0b\u4e86\u575a\u5b9e\u7684\u57fa\u7840\u3002\u6211\u4eec\u671f\u5f85 StreamPark \u548c Paimon \u793e\u533a\u80fd\u4e00\u5982\u65e2\u5f80\u5730\u4fdd\u6301\u4e13\u4e1a\u6001\u5ea6\u548c\u826f\u597d\u7684\u56e2\u961f\u534f\u4f5c\u7cbe\u795e\uff0c\u4e0d\u65ad\u63a8\u8fdb\u9879\u76ee\u53d1\u5c55\uff0c\u6210\u4e3a\u8fd1\u5e74\u6765\u65b0\u664b Apache \u9879\u76ee\u7684\u5178\u8303\uff0c\u4ee5\u4fbf\u5bf9\u66f4\u5e7f\u5927\u7684\u5f00\u53d1\u8005\u793e\u533a\u4ea7\u751f\u66f4\u5927\u7684\u5f71\u54cd\u3002\"},{\"id\":\"streampark-usercase-tianyancha\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-tianyancha\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/11-streampark-usercase-tianyancha.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/11-streampark-usercase-tianyancha.md\",\"title\":\"Apache StreamPark\u2122 \u52a9\u529b\u5929\u773c\u67e5\u5b9e\u65f6\u5e73\u53f0\u5efa\u8bbe\uff5c\u6548\u7387\u6570\u500d\u63d0\u5347\",\"description\":\"\u5bfc\u8bfb\uff1a\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5929\u773c\u67e5\u5728\u5b9e\u65f6\u8ba1\u7b97\u4e1a\u52a1\u8fd1\u5343\u4e2a Flink \u4f5c\u4e1a\u8fd0\u7ef4\u65f6\u9762\u4e34\u4f5c\u4e1a\u5f00\u53d1\u548c\u7ba1\u7406\u4e0a\u7684\u6311\u6218\uff0c\u901a\u8fc7\u5f15\u5165 Apache StreamPark \u6765\u89e3\u51b3\u8fd9\u4e9b\u6311\u6218\uff0c\u4ecb\u7ecd\u4e86\u5728\u5f15\u5165 StreamPark \u843d\u5730\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\u4ee5\u53ca\u5982\u4f55\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5e76\u6210\u529f\u843d\u5730\uff0c\u6700\u540e\u6781\u5927\u5730\u964d\u4f4e\u8fd0\u7ef4\u6210\u672c\uff0c\u663e\u8457\u5730\u63d0\u5347\u4eba\u6548\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"}],\"readingTime\":14.51,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-tianyancha\",\"title\":\"Apache StreamPark\u2122 \u52a9\u529b\u5929\u773c\u67e5\u5b9e\u65f6\u5e73\u53f0\u5efa\u8bbe\uff5c\u6548\u7387\u6570\u500d\u63d0\u5347\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"\u81ea\u5982\u57fa\u4e8e Apache StreamPark\u2122 + Paimon \u5b9e\u73b0\u6570\u636e\u4e00\u952e\u5165\u6e56\u6700\u4f73\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-flink-with-paimon-in-ziru\"},\"nextItem\":{\"title\":\"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-joymaker\"}},\"content\":\"![](/blog/tianyancha/new_cover.png)\\n\\n**\u5bfc\u8bfb**\uff1a\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5929\u773c\u67e5\u5728\u5b9e\u65f6\u8ba1\u7b97\u4e1a\u52a1\u8fd1\u5343\u4e2a Flink \u4f5c\u4e1a\u8fd0\u7ef4\u65f6\u9762\u4e34\u4f5c\u4e1a\u5f00\u53d1\u548c\u7ba1\u7406\u4e0a\u7684\u6311\u6218\uff0c\u901a\u8fc7\u5f15\u5165 Apache StreamPark \u6765\u89e3\u51b3\u8fd9\u4e9b\u6311\u6218\uff0c\u4ecb\u7ecd\u4e86\u5728\u5f15\u5165 StreamPark \u843d\u5730\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u4e00\u4e9b\u95ee\u9898\u4ee5\u53ca\u5982\u4f55\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\u5e76\u6210\u529f\u843d\u5730\uff0c\u6700\u540e\u6781\u5927\u5730\u964d\u4f4e\u8fd0\u7ef4\u6210\u672c\uff0c\u663e\u8457\u5730\u63d0\u5347\u4eba\u6548\u3002\\n\\nGithub: https://github.com/apache/streampark\\n\\n\u6b22\u8fce\u5173\u6ce8\u3001Star\u3001Fork\uff0c\u53c2\u4e0e\u8d21\u732e\\n\\n\u4f9b\u7a3f\u5355\u4f4d | \u5317\u4eac\u5929\u773c\u67e5\\n\\n\u6587\u7ae0\u4f5c\u8005 | \u674e\u6cbb\u9716\\n\\n\u6587\u7ae0\u6574\u7406 | \u6768\u6797\u4f1f\\n\\n\u5185\u5bb9\u6821\u5bf9 | \u6f58\u6708\u9e4f\\n\\n\x3c!-- truncate --\x3e\\n\\n\u5929\u773c\u67e5\u662f\u4e2d\u56fd\u9886\u5148\u7684\u5546\u4e1a\u67e5\u8be2\u5e73\u53f0\u3002\u81ea 2014 \u5e74\u521b\u7acb\u4ee5\u6765\uff0c\u5929\u773c\u67e5\u6301\u7eed\u4fdd\u6301\u9ad8\u901f\u589e\u957f\uff0c\u884c\u4e1a\u6e17\u900f\u7387\u8d85\u8fc7 77%\uff0c\u6708\u6d3b\u8dc3\u7528\u6237\u6570\u9ad8\u8fbe 3500 \u4e07\uff0c\u7d2f\u8ba1\u7528\u6237\u6570 6 \u4ebf+\uff0c\u201c\u5929\u773c\u4e00\u4e0b\u201d\u5df2\u6210\u4e3a\u5546\u4e1a\u9886\u57df\u7684\u8d85\u7ea7\u7b26\u53f7\uff0c\u662f\u9996\u6279\u83b7\u5f97\u592e\u884c\u5907\u6848\u4f01\u4e1a\u5f81\u4fe1\u8d44\u8d28\u7684\u516c\u53f8\u4e4b\u4e00\u3002\u7ecf\u8fc7\u516c\u53f8\u591a\u5e74\u6df1\u8015\uff0c\u5e73\u53f0\u5171\u6536\u5f55\u5168\u56fd 3.4 \u4ebf\u3001\u5168\u7403 6.4 \u4ebf\u793e\u4f1a\u5b9e\u4f53\uff0c1000 \u591a\u79cd\u5546\u67e5\u4fe1\u606f\u7ef4\u5ea6\u5b9e\u65f6\u66f4\u65b0\uff0c\u6210\u4e3a\u4f01\u4e1a\u5ba2\u6237\u548c\u4e2a\u4eba\u7528\u6237\u5546\u4e1a\u67e5\u8be2\u7684\u9996\u9009\u54c1\u724c\u3002\\n\\n![](/blog/tianyancha/enterprise.png)\\n\\n\u672c\u6587\u5c06\u4ecb\u7ecd\u5929\u773c\u67e5\u5b9e\u65f6\u8ba1\u7b97\u4e1a\u52a1\u9762\u4e34\u7684\u6311\u6218\uff0c\u5982\u4f55\u901a\u8fc7 Apache StreamPark \u5e73\u53f0\u6765\u89e3\u51b3\u8fd9\u4e9b\u6311\u6218\uff0c\u4ee5\u53ca\u5e26\u6765\u7684\u663e\u8457\u6548\u76ca\u548c\u672a\u6765\u89c4\u5212\u3002\\n\\n## **\u4e1a\u52a1\u80cc\u666f\u4e0e\u6311\u6218**  \\n\\n\u5929\u773c\u67e5\u6709\u7740\u5e9e\u5927\u7684\u7528\u6237\u57fa\u7840\u548c\u591a\u6837\u7684\u4e1a\u52a1\u7ef4\u5ea6\uff0c\u6211\u4eec\u901a\u8fc7 Apache Flink\xae \u8fd9\u4e00\u5f3a\u5927\u7684\u5b9e\u65f6\u8ba1\u7b97\u5f15\u64ce\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u66f4\u4f18\u8d28\u7684\u4ea7\u54c1\u548c\u670d\u52a1\u4f53\u9a8c\uff0c\u6211\u4eec\u7684\u5b9e\u65f6\u8ba1\u7b97\u4e1a\u52a1\u4e3b\u8981\u6db5\u76d6\u4ee5\u4e0b\u51e0\u4e2a\u573a\u666f\uff1a\\n\\n- \u5b9e\u65f6\u6570\u636e ETL \u5904\u7406\u548c\u6570\u636e\u4f20\u8f93\u3002\\n\\n- C \u7aef\u7ef4\u5ea6\u6570\u636e\u7edf\u8ba1\uff0c\u5305\u62ec\u7528\u6237\u884c\u4e3a\u3001PV/UV \u5206\u6790\u3002\\n\\n- C \u7aef\u4e1a\u52a1\u6570\u636e\u4e0e\u5de5\u5546\u4fe1\u606f\u3001\u98ce\u9669\u4fe1\u606f\u3001\u4ea7\u6743\u3001\u80a1\u6743\u3001\u80a1\u4e1c\u3001\u6848\u4ef6\u7b49\u4fe1\u606f\u7684\u5b9e\u65f6\u5173\u8054\u5206\u6790\u3002\\n\\n\u968f\u7740\u5929\u773c\u67e5\u4e1a\u52a1\u7684\u5feb\u901f\u53d1\u5c55\uff0c\u5b9e\u65f6\u4f5c\u4e1a\u76ee\u524d\u5df2\u589e\u81f3 800 +\uff0c\u672a\u6765\u5f88\u5feb\u4f1a\u4e0a\u5343\uff0c\u9762\u5bf9\u8fd9\u4e48\u5927\u4f53\u91cf\u7684\u4f5c\u4e1a\u3001\u5728\u5f00\u53d1\u548c\u7ba1\u7406\u4e0a\u90fd\u9047\u5230\u4e86\u6311\u6218\uff0c\u5927\u81f4\u5982\u4e0b\uff1a\\n\\n- **\u4f5c\u4e1a\u8fd0\u7ef4\u56f0\u96be**\uff1a\u4f5c\u4e1a\u8986\u76d6\u591a\u4e2a Flink \u7248\u672c\uff0c\u591a\u7248\u672c Flink \u4f5c\u4e1a\u7684\u8fd0\u884c\u548c\u5347\u7ea7\u56e0 API \u53d8\u52a8\u800c\u6210\u672c\u9ad8\u6602\uff0c\u4e14\u4f5c\u4e1a\u63d0\u4ea4\u548c\u53c2\u6570\u8c03\u4f18\u4f9d\u8d56\u4e8e\u590d\u6742\u811a\u672c\uff0c\u6781\u5927\u589e\u52a0\u4e86\u7ef4\u62a4\u96be\u5ea6\u548c\u6210\u672c\u3002\\n\\n- **\u4f5c\u4e1a\u5f00\u53d1\u4f4e\u6548**\uff1a\u4ece\u672c\u5730 IDE \u8c03\u8bd5\u5230\u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\uff0c\u9700\u7ecf\u8fc7\u7f16\u8bd1\u3001\u6587\u4ef6\u4f20\u8f93\u548c\u547d\u4ee4\u6267\u884c\u7b49\u7e41\u7410\u6b65\u9aa4\uff0c\u8017\u65f6\u4e14\u5f71\u54cd\u6548\u7387\u3002\\n\\n- **\u7f3a\u4e4f\u81ea\u52a8\u91cd\u8bd5\u673a\u5236**\uff1a\u5b9e\u65f6\u4e1a\u52a1\u7684\u591a\u8868\u5173\u8054\u64cd\u4f5c\u6613\u53d7\u7f51\u7edc\u548c IO \u6ce2\u52a8\u5f71\u54cd\uff0c\u5bfc\u81f4 Flink \u7a0b\u5e8f\u6545\u969c\uff0c\u9700\u624b\u52a8\u6216\u989d\u5916\u7a0b\u5e8f\u4ecb\u5165\u6062\u590d\uff0c\u589e\u52a0\u4e86\u5f00\u53d1\u548c\u7ef4\u62a4\u6210\u672c\u3002\\n\\n- **\u7ef4\u62a4\u6210\u672c\u9ad8\u6602**\uff1a\u7f3a\u5c11\u96c6\u4e2d\u5316\u7684\u65e5\u5fd7\u3001\u7248\u672c\u63a7\u5236\u548c\u914d\u7f6e\u7ba1\u7406\u5de5\u5177\uff0c\u968f\u7740\u4efb\u52a1\u91cf\u4e0a\u5347\uff0c\u7ef4\u62a4\u5927\u91cf JAR \u5305\u3001\u63d0\u4ea4\u811a\u672c\u548c Flink \u5ba2\u6237\u7aef\u914d\u7f6e\u53d8\u5f97\u65e5\u76ca\u590d\u6742\u3002\\n\\n![](/blog/tianyancha/challenges.png)\\n\\n## **StreamPark \u843d\u5730\u5b9e\u8df5**  \\n\\n\u4e3a\u4e86\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\uff0c\u6211\u53f8\u51b3\u5b9a\u5f15\u5165 StreamPark\u3002\u6211\u4eec\u5728 StreamPark \u9879\u76ee\u521a\u5f00\u6e90\u7684\u65f6\u5019\u5c31\u5f00\u59cb\u5173\u6ce8\uff0c\u5f53\u65f6\u9879\u76ee\u540d\u8fd8\u662f StreamX\uff0c\u6b64\u540e\u4e5f\u5728\u4e00\u76f4\u5bc6\u5207\u5173\u6ce8\u7740\u9879\u76ee\u7684\u53d1\u5c55\uff0c\u89c1\u8bc1\u4e86\u5176\u4ece\u5f00\u6e90\u5230\u52a0\u5165 Apache \u8f6f\u4ef6\u57fa\u91d1\u4f1a\u5b75\u5316\u7684\u8fc7\u7a0b\uff0c\u5176\u793e\u533a\u6d3b\u8dc3\u5ea6\u3001\u7528\u6237\u53e3\u7891\u3001\u53d1\u7248\u6b21\u6570\u7b49\u5404\u9879\u8868\u73b0\u90fd\u5f88\u4e0d\u9519\uff0c\u6709\u5927\u91cf\u4f01\u4e1a\u7684\u771f\u5b9e\u4f7f\u7528\u6848\u4f8b\uff0c\u8fd9\u589e\u5f3a\u4e86\u6211\u4eec\u5bf9 StreamPark \u4fe1\u5fc3\uff0c\u56e0\u6b64\u5f15\u5165 StreamPark \u662f\u81ea\u7136\u800c\u7136\u7684\u4e8b\u60c5\uff0c\u6211\u4eec\u5c24\u5176\u5173\u6ce8\u4ee5\u4e0b\u53ef\u4ee5\u89e3\u51b3\u6211\u4eec\u75db\u70b9\u7684\u80fd\u529b\uff1a\\n\\n- **Git \u5f0f\u9879\u76ee\u7ba1\u7406**\uff1a\u4e3a\u4f5c\u4e1a\u63d0\u4f9b\u4e86\u4fbf\u6377\u7684\u7248\u672c\u63a7\u5236\u548c\u90e8\u7f72\u6d41\u7a0b\u3002\\n\\n- **\u5f3a\u5927\u7684\u4f5c\u4e1a\u8fd0\u7ef4\u80fd\u529b**\uff1a\u663e\u8457\u63d0\u5347\u4e86\u4f5c\u4e1a\u7684\u7ba1\u7406\u548c\u7ef4\u62a4\u6548\u7387\u3002\\n\\n- **\u7cbe\u786e\u7684\u79d2\u7ea7\u544a\u8b66\u7cfb\u7edf**\uff1a\u63d0\u4f9b\u4e86\u5b9e\u65f6\u76d1\u63a7\u548c\u5feb\u901f\u54cd\u5e94\u80fd\u529b\u3002\\n\\n- **\u4e00\u7ad9\u5f0f\u4efb\u52a1\u5f00\u53d1\u5e73\u53f0**\uff1a\u4e3a\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u90e8\u7f72\u63d0\u4f9b\u6709\u529b\u4fdd\u969c\\n\\n### **1. Git \u5f0f\u9879\u76ee\u7ba1\u7406**\\n\\n\u5929\u773c\u67e5 90% \u4ee5\u4e0a\u90fd\u662f JAR \u4f5c\u4e1a\uff0c\u7ba1\u7406\u51e0\u767e\u4e2aJAR \u4f5c\u4e1a\u662f\u5f88\u5934\u75bc\u7684\u95ee\u9898\uff0c\u4e3a\u4e86\u65b9\u4fbf\u7ef4\u62a4\u548c\u7ba1\u7406\u5148\u524d\u6211\u4eec\u901a\u8fc7 \u201c\u5f00\u53d1\u4eba\u5458\u540d\u79f0-\u9879\u76ee\u540d\u79f0-\u6a21\u5757-\u73af\u5883\u201d \u8fdb\u884c\u547d\u540d JAR \u6587\u4ef6\u540d\uff0c\u8fd9\u6837\u5e26\u6765\u4e86\u53e6\u4e00\u4e2a\u95ee\u9898\uff0c\u6ca1\u529e\u6cd5\u76f4\u89c2\u533a\u5206\u8981\u7ef4\u62a4\u7684\u4f5c\u4e1a\u5728\u90a3\u4e2a\u6a21\u5757\uff0c\u5982\u679c\u975e owner \u7ef4\u62a4\u6b64\u4f5c\u4e1a\u5f97\u901a\u8fc7\u9879\u76ee\u6587\u6863\u548c\u4ee3\u7801\u6765\u67e5\u770b\u903b\u8f91\uff0c\u9700\u8981\u627e\u5230\u9879\u76ee\u4ee3\u7801\u4e0e\u5bf9\u5e94\u5206\u652f\u3001\u4f5c\u4e1a\u7684\u542f\u52a8\u811a\u672c\u7b49\uff0c\u8fd9\u6837\u5927\u5e45\u5ea6\u589e\u52a0\u5f00\u53d1\u4eba\u5458\u5de5\u4f5c\u91cf\u3002\\n\\n\u5728 StreamPark \u4e2d\u6211\u4eec\u60ca\u559c\u5730\u53d1\u73b0\u6709\u9879\u76ee\u7ba1\u7406\u529f\u80fd\uff0c\u7c7b\u4f3c\u4e8e Git \u96c6\u6210\uff0c\u53ef\u4ee5\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u6211\u4eec\u7684\u75db\u70b9\uff0c\u6211\u4eec\u901a\u8fc7\u7b80\u5316\u7684\u547d\u540d\u89c4\u8303\uff0c\u5b9e\u73b0\u4e86\u9879\u76ee\u3001\u4eba\u5458\u3001\u5206\u652f\u548c\u73af\u5883\u7684\u9694\u79bb\u3002\u73b0\u5728\uff0c\u6211\u4eec\u80fd\u591f\u77ac\u95f4\u5b9a\u4f4d\u5230\u4efb\u610f\u4f5c\u4e1a\u7684\u4ee3\u7801\u548c\u6587\u6863\uff0c\u6781\u5927\u63d0\u9ad8\u4e86\u4f5c\u4e1a\u7684\u53ef\u7ef4\u62a4\u6027\u548c\u5f00\u53d1\u6548\u7387\uff0c\u663e\u8457\u63d0\u5347\u4e86\u6211\u4eec\u7684\u8fd0\u7ef4\u6548\u7387\u3002\\n\\n![](/blog/tianyancha/git.png)\\n\\n### **2. \u79d2\u7ea7\u7cbe\u786e\u544a\u8b66\u548c\u81ea\u52a8\u8fd0\u7ef4**\\n\\n\u4e0b\u9762\u662f\u6211\u4eec\u4e00\u4e2a Flink \u7ebf\u4e0a\u7684\u4efb\u52a1\uff0c\u5728\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u8bbf\u95ee\u7b2c\u4e09\u65b9\u7aef\u65f6\uff0c\u53d1\u751f Connection Time out \u7b49\u9519\u8bef\uff08\u5907\u6ce8\uff1a\u672c\u8eab Flink \u8bbe\u7f6e\u91cd\u542f\u7b56\u7565\u95f4\u9694\u91cd\u542f\u4e09\u6b21\uff0c\u4f46\u6700\u7ec8\u8fd8\u662f\u5931\u8d25\uff09\\n\\n![](/blog/tianyancha/alarm.png)\\n\\n\u5982\u4e0a\u56fe\uff0c\u5f53\u6536\u5230\u4efb\u52a1\u544a\u8b66\u65f6\uff0c\u6211\u4eec\u5f00\u53d1\u540c\u5b66\u5728\u7fa4\u91cc\u56de\u590d 1 \u7684\u65f6\u5019\uff0c\u6211\u4eec\u53d1\u73b0**\u4f5c\u4e1a\u5df2\u7ecf\u6210\u529f\u88ab StreamPark \u62c9\u8d77\uff0c\u53ea\u7528\u4e0d\u5230 15 \u79d2\u5c31\u5b8c\u6210\u4e86\u4f5c\u4e1a\u7684\u91cd\u65b0\u63d0\u4ea4\u548c\u8fd0\u884c**\uff01\\n\\n### **3. \u5e73\u53f0\u7528\u6237\u6743\u9650\u7ba1\u63a7**\\n\\nStreamPark \u63d0\u4f9b\u4e86\u4e00\u5957\u5b8c\u5584\u7684\u6743\u9650\u7ba1\u7406\u673a\u5236\uff0c\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u5728 StreamPark \u5e73\u53f0\u4e0a\u5bf9\u4f5c\u4e1a\u548c\u7528\u6237\u8fdb\u884c\u7cbe\u7ec6\u7684\u6743\u9650\u7ba1\u7406\uff0c\u6709\u6548\u907f\u514d\u4e86\u56e0\u7528\u6237\u6743\u9650\u8fc7\u5927\u800c\u53ef\u80fd\u53d1\u751f\u7684\u8bef\u64cd\u4f5c\uff0c\u51cf\u5c11\u4e86\u5bf9\u4f5c\u4e1a\u8fd0\u884c\u7a33\u5b9a\u6027\u548c\u73af\u5883\u914d\u7f6e\u51c6\u786e\u6027\u7684\u5f71\u54cd\uff0c\u5bf9\u4e8e\u4f01\u4e1a\u7ea7\u7528\u6237\u6765\u8bf4\uff0c\u8fd9\u6837\u7684\u7ba1\u7406\u673a\u5236\u662f\u975e\u5e38\u5fc5\u8981\u7684\u3002\\n\\n![](/blog/tianyancha/permissions.png)\\n\\n### **4. Flink SQL \u5728\u7ebf\u5f00\u53d1**\\n\\n\u5bf9\u4e8e\u8bb8\u591a\u5f00\u53d1\u573a\u666f\u4e2d\u9700\u8981\u63d0\u4ea4 Flink SQL \u4f5c\u4e1a\u7684\u60c5\u51b5\uff0c\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u5b8c\u5168\u6446\u8131\u5728 IDEA \u4e2d\u7f16\u5199\u4ee3\u7801\u7684\u7e41\u7410\u6b65\u9aa4\u3002\u53ea\u9700\u4f7f\u7528 StreamPark \u5e73\u53f0\uff0c**\u5c31\u80fd\u8f7b\u677e\u5b9e\u73b0  Flink SQL \u4f5c\u4e1a\u7684\u5f00\u53d1**\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6848\u4f8b\u3002\\n\\n![](/blog/tianyancha/sql_job.png)\\n\\n### **5. \u5b8c\u5584\u7684\u4f5c\u4e1a\u7ba1\u7406\u80fd\u529b**\\n\\nStreamPark \u8fd8\u6709\u66f4\u52a0\u5b8c\u5584\u7684\u4f5c\u4e1a\u64cd\u4f5c\u8bb0\u5f55\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u63d0\u4ea4\u65f6\u5f02\u5e38\u7684\u4f5c\u4e1a\uff0c\u73b0\u53ef\u5b8c\u5168\u901a\u8fc7\u5e73\u53f0\u5316\u67e5\u770b\u5931\u8d25\u65e5\u5fd7\uff0c\u5305\u62ec\u5386\u53f2\u65e5\u5fd7\u4fe1\u606f\u7b49\u3002\\n\\n![](/blog/tianyancha/historical_logs.png)\\n\\n\u5f53\u7136\uff0cStreamPark \u8fd8\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u66f4\u52a0\u5b8c\u5584\u4e14\u53cb\u597d\u7684\u4efb\u52a1\u7ba1\u7406\u754c\u9762\uff0c\u53ef\u4ee5\u76f4\u89c2\u5730\u770b\u5230\u4efb\u52a1\u7684\u8fd0\u884c\u60c5\u51b5\u3002\\n\\n![](/blog/tianyancha/task_management.png)\\n\\n\u6211\u4eec\u4f01\u4e1a\u5185\u90e8\u5b9e\u65f6\u9879\u76ee\u662f\u9ad8\u5ea6\u62bd\u8c61\u5316\u4ee3\u7801\u5f00\u53d1\u7684\u4f5c\u4e1a\uff0c\u6bcf\u6b21\u5f00\u53d1\u65b0\u4f5c\u4e1a\u53ea\u9700\u8981\u4fee\u6539\u4e00\u4e9b\u5916\u90e8\u4f20\u5165\u7684\u53c2\u6570\u5373\u53ef\uff0c\u901a\u8fc7 StreamPark \u590d\u5236\u4f5c\u4e1a\u529f\u80fd\u8ba9\u6211\u4eec\u544a\u522b\u4e86\u5f88\u591a\u91cd\u590d\u6027\u5de5\u4f5c\uff0c\u53ea\u9700\u8981\u5728\u5e73\u53f0\u4e0a\u590d\u5236\u5df2\u6709\u4f5c\u4e1a\uff0c\u7565\u5fae\u4fee\u6539\u7a0b\u5e8f\u8fd0\u884c\u53c2\u6570\u5c31\u53ef\u4ee5\u63d0\u4ea4\u4e00\u4e2a\u65b0\u7684\u4f5c\u4e1a\uff01\\n\\n![](/blog/tianyancha/successful.png)\\n\\n\u5f53\u7136\u8fd8\u6709\u66f4\u591a\uff0c\u8fd9\u91cc\u5c31\u4e0d\u4e00\u4e00\u5217\u4e3e\u4e86\uff0cStreamPark \u5728\u4f7f\u7528\u4e0a\u8db3\u591f\u7684\u7b80\u5355\u6613\u7528\uff0c\u5206\u949f\u5185\u5373\u53ef\u4e0a\u624b\u4f7f\u7528\uff0c\u529f\u80fd\u4e0a\u8db3\u591f\u7684\u4e13\u6ce8\u53ef\u9760\uff0c\u5f15\u5165 StreamPark \u4ee5\u6765\u89e3\u51b3\u4e86\u6211\u4eec\u7ba1\u7406 Flink \u4f5c\u4e1a\u9762\u4e34\u7684\u96be\u9898\uff0c\u5e26\u6765\u4e86\u5b9e\u5b9e\u5728\u5728\u7684\u65b9\u4fbf\uff0c\u663e\u8457\u5730\u63d0\u9ad8\u4e86\u4eba\u6548\uff0c\u7ed9\u4e3b\u521b\u56e2\u961f\u4e00\u4e2a\u5927\u5927\u7684\u8d5e\uff01\\n\\n## **\u9047\u5230\u7684\u95ee\u9898**\\n\\n\u5728 StreamPark \u843d\u5730\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u4e5f\u9047\u5230\u4e86\u4e00\u4e9b\u95ee\u9898\uff0c\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u6765\uff0c\u671f\u671b\u7ed9\u793e\u533a\u7684\u7528\u6237\u5e26\u6765\u4e00\u4e9b\u8f93\u5165\u548c\u53c2\u8003\u3002\\n\\n### **\u534e\u4e3a\u4e91\u4e0e\u5f00\u6e90 Hadoop \u5b58\u5728\u517c\u5bb9\u95ee\u9898**\\n\\n\u6211\u4eec\u7684\u4f5c\u4e1a\u90fd\u662f Flink on Yarn \u6a21\u5f0f\uff0c\u90e8\u7f72\u5728\u534e\u4e3a\u4e91\u3002\u5728\u4f7f\u7528 StreamPark \u90e8\u7f72\u4f5c\u4e1a\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u4f5c\u4e1a\u53ef\u4ee5\u6210\u529f\u90e8\u7f72\u5230\u534e\u4e3a Hadoop \u96c6\u7fa4\uff0c\u4f46\u662f\u83b7\u53d6\u4f5c\u4e1a\u72b6\u6001\u4fe1\u606f\u65f6\u8bf7\u6c42 Yarn ResourceManager \u88ab\u62d2\u7edd\uff0c\u6211\u4eec\u53ca\u65f6\u548c\u793e\u533a\u6c9f\u901a\uff0c\u5bfb\u6c42\u89e3\u51b3\u65b9\u6848\uff0c\u5e76\u4e14\u8bb0\u5f55\u4e86 issue:\\nhttps://github.com/apache/incubator-streampark/issues/3566\\n\\n\u6700\u540e\u5728\u793e\u533a PMC \u6210\u5458\u534e\u6770\u8001\u5e08\u548c\u534e\u4e3a\u4e91\u540c\u5b66\u7684\u534f\u52a9\u4e0b\uff0c\u6210\u529f\u89e3\u51b3\u4e86\u95ee\u9898\uff1a\u7531\u4e8e\u4e91\u4ea7\u54c1\u672c\u8eab\u5185\u90e8\u7684\u5b89\u5168\u8ba4\u8bc1\u673a\u5236\u5bfc\u81f4 StreamPark \u65e0\u6cd5\u6b63\u5e38\u8bbf\u95ee\u4e91 ResourceManager\u3002\\n\\n\u89e3\u51b3\u65b9\u6848 (\u4ec5\u4f9b\u53c2\u8003 - \u6839\u636e\u4e0d\u540c\u73af\u5883\u6dfb\u52a0\u4e0d\u540c\u4f9d\u8d56)\\n\\n\u5c06 STREAMPARK_HOME/lib \u76ee\u5f55\u4e2d HADOOP \u76f8\u5173\u4e24\u4e2a\u5305\u5220\u9664\uff1a\\n\\n```shell\\nhadoop-client-api-3.3.4.jar\\nhadoop-client-runtime-3.3.4.jar\\n```\\n\\n\u66ff\u6362\u4ee5\u4e0b\u534e\u4e3a\u4e91 HADOOP \u4f9d\u8d56:\\n\\n```shell\\ncommons-configuration2-2.1.1.jar\\ncommons-lang-2.6.0.wso2v1.jar\\nhadoop-auth-3.1.1-hw-ei-xxx.jar\\nhadoop-common-3.1.1-hw-ei-xxx.jar\\nhadoop-hdfs-client-3.1.1-hw-ei-xxx.jar\\nhadoop-plugins-8.1.2-xxx.jar\\nhadoop-yarn-api-3.1.1-hw-ei-xxx.jar\\nhadoop-yarn-client-3.1.1-hw-ei-xxx.jar\\nhadoop-yarn-common-3.1.1-hw-ei-xxx.jar\\nhttpcore5-h2-5.1.5.jar\\njaeger-core-1.6.0.jar\\nmysql-connector-java-8.0.28.jar\\nopentracing-api-0.33.0.jar\\nopentracing-noop-0.33.0.jar\\nopentracing-util-0.33.0.jar\\nprotobuf-java-2.5.0.jar\\nre2j-1.7.jar\\nstax2-api-4.2.1.jar\\nwoodstox-core-5.0.3.jar\\n```\\n\\n### **\u5176\u4ed6 BUG**\\n\\n\u5728\u6df1\u5165\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e5f\u53d1\u73b0\u4e86\u4e00\u4e9b\u95ee\u9898\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u6539\u5584\u4e0e\u4f18\u5316 StreamPark \u7684\u529f\u80fd\uff0c\u6211\u4eec\u63d0\u51fa\u4e86\u4e00\u4e9b\u5177\u4f53\u7684\u5efa\u8bae\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u4f8b\u5982\uff1a\\n\\n- **\u4f9d\u8d56\u51b2\u7a81**\uff1a\u52a0\u8f7d Flink \u4f9d\u8d56\u65f6\u51fa\u73b0\u51b2\u7a81\u7684\u89e3\u51b3\uff08\u8be6\u89c1\uff1aPull Request #3568\uff09\u3002\\n\\n- **\u670d\u52a1\u7a33\u5b9a\u6027**\uff1a\u62e6\u622a\u7528\u6237\u7a0b\u5e8f JVM \u9000\u51fa\uff0c\u9632\u6b62 StreamPark \u5e73\u53f0\u56e0\u7528\u6237\u7a0b\u5e8f\u5f02\u5e38\u9000\u51fa\uff08\u8be6\u89c1\uff1aPull Request #3659\uff09\u3002\\n\\n- **\u8d44\u6e90\u4f18\u5316**\uff1a\u4e3a\u51cf\u8f7b\u8d44\u6e90\u8d1f\u62c5\uff0c\u9650\u5236 StremaPark \u6784\u5efa\u9879\u76ee\u7684\u5e76\u53d1\u6570\uff0c\u901a\u8fc7\u914d\u7f6e\u53c2\u6570\u6765\u63a7\u5236\u9879\u76ee\u6700\u5927\u6784\u5efa\u6570\u91cf\uff08\u8be6\u89c1\uff1aPull Request #3696\uff09\u3002\\n\\n## **\u5e26\u6765\u7684\u6536\u76ca**\\n\\nApache StreamPark \u4e3a\u6211\u4eec\u5e26\u6765\u4e86\u663e\u8457\u7684\u6536\u76ca\uff0c**\u4e3b\u8981\u4f53\u73b0\u5728\u5176\u4e00\u7ad9\u5f0f\u670d\u52a1\u80fd\u529b\uff0c\u4f7f\u5f97\u4e1a\u52a1\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u5728\u4e00\u4e2a\u7edf\u4e00\u7684\u5e73\u53f0\u4e0a\u5b8c\u6210 Flink \u4f5c\u4e1a\u7684\u5f00\u53d1\u3001\u7f16\u8bd1\u3001\u63d0\u4ea4\u548c\u7ba1\u7406**\u3002\u6781\u5927\u5730\u8282\u7701\u4e86\u6211\u4eec\u5728 Flink \u4f5c\u4e1a\u5f00\u53d1\u548c\u90e8\u7f72\u4e0a\u7684\u65f6\u95f4\uff0c\u663e\u8457\u5730\u63d0\u5347\u4e86\u5f00\u53d1\u6548\u7387\uff0c\u5e76\u5b9e\u73b0\u4e86\u4ece\u7528\u6237\u6743\u9650\u7ba1\u7406\u5230 Git \u90e8\u7f72\u3001\u4efb\u52a1\u63d0\u4ea4\u3001\u544a\u8b66\u3001\u81ea\u52a8\u6062\u590d\u7684\u5168\u6d41\u7a0b\u81ea\u52a8\u5316\uff0c\u6709\u6548\u89e3\u51b3\u4e86 Apache Flink\xae \u8fd0\u7ef4\u7684\u590d\u6742\u6027\u3002\\n\\n![](/blog/tianyancha/earnings.png)\\n\\n\u76ee\u524d\u5728\u5929\u773c\u67e5\u5e73\u53f0\uff0cStreamPark \u5e26\u6765\u7684\u5177\u4f53\u6210\u6548\u5305\u62ec\uff1a\\n\\n- \u5b9e\u65f6\u4f5c\u4e1a\u4e0a\u7ebf\u548c\u6d4b\u8bd5\u90e8\u7f72\u6d41\u7a0b\u7b80\u5316\u4e86 **70%** \u3002\\n\\n- \u5b9e\u65f6\u4f5c\u4e1a\u7684\u8fd0\u7ef4\u6210\u672c\u964d\u4f4e\u4e86 **80%**\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u66f4\u4e13\u6ce8\u4e8e\u4ee3\u7801\u903b\u8f91 \u3002\\n\\n- \u544a\u8b66\u65f6\u6548\u6027\u63d0\u9ad8\u4e86 **5\u500d** \u4ee5\u4e0a\uff0c\u4ece\u5206\u949f\u7ea7\u964d\u4f4e\u5230\u79d2\u7ea7\uff0c\u5b9e\u73b0\u4e86 **5\u79d2\u5185** \u611f\u77e5\u5e76\u5904\u7406\u4efb\u52a1\u5f02\u5e38\u3002\\n\\n- \u5bf9\u4e8e\u4efb\u52a1\u5931\u8d25\uff0cStreamPark \u80fd\u591f\u81ea\u52a8\u6062\u590d\uff0c\u65e0\u9700\u4eba\u5de5\u5e72\u9884\u3002\\n\\n- \u901a\u8fc7 GitLab \u4e0e StreamPark \u7684\u96c6\u6210\uff0c\u7b80\u5316\u4e86\u7f16\u8bd1\u9879\u76ee\u548c\u4f5c\u4e1a\u63d0\u4ea4\u6d41\u7a0b\uff0c\u5927\u5e45\u964d\u4f4e\u4e86\u5f00\u53d1\u548c\u7ef4\u62a4\u6210\u672c\u3002\\n\\n## **\u672a\u6765\u89c4\u5212**\\n\\n\u672a\u6765\u6211\u4eec\u8ba1\u5212\u5c06\u5185\u90e8\u81ea\u7814\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u4e0a\u90e8\u7f72\u7684 300+ Flink \u4f5c\u4e1a\u548c\u5176\u4ed6\u65b9\u5f0f\u7ef4\u62a4\u7684 500+ Flink \u4f5c\u4e1a\u5168\u90e8\u8fc1\u79fb\u81f3 StreamPark \u8fdb\u884c\u7edf\u4e00\u7ba1\u7406\u7ef4\u62a4\uff0c\u540e\u7eed\u9047\u5230\u4e00\u4e9b\u53ef\u4f18\u5316\u6216\u53ef\u589e\u5f3a\u529f\u80fd\u70b9\uff0c\u6211\u4eec\u4f1a\u53ca\u65f6\u4e0e\u793e\u533a\u5f00\u53d1\u4eba\u5458\u6c9f\u901a\u5e76\u56de\u9988\u8d21\u732e\u793e\u533a\uff0c\u8ba9 StreamPark \u53d8\u5f97\u66f4\u6613\u7528\u3001\u66f4\u597d\u7528\u3002\\n\\n\u5728\u672c\u6587\u7684\u6700\u540e\uff0c\u6211\u4eec\u8877\u5fc3\u611f\u8c22 Apache Streampark \u793e\u533a\uff0c\u7279\u522b\u662f PMC \u6210\u5458\u534e\u6770\u8001\u5e08\uff0c\u5728\u6211\u4eec\u4f7f\u7528 StreamPark \u8fc7\u7a0b\u4e2d\u6301\u7eed\u5730\u8ddf\u8fdb\uff0c\u63d0\u4f9b\u4e86\u5b9d\u8d35\u7684\u6280\u672f\u652f\u6301\uff0c\u6211\u4eec\u6df1\u523b\u611f\u53d7\u5230 Apache StreamPark \u793e\u533a\u8ba4\u771f\u7684\u6001\u5ea6\u548c\u70ed\u60c5\u3002\u540c\u65f6\u4e5f\u975e\u5e38\u611f\u8c22\u534e\u4e3a\u4e91\u540c\u5b66\u5728\u4e91\u90e8\u7f72\u4e0a\u652f\u6301\u4e0e\u95ee\u9898\u6392\u67e5\u3002\\n\\n\u6211\u4eec\u671f\u5f85\u672a\u6765\u4e0e StreamPark \u793e\u533a\u7ee7\u7eed\u5408\u4f5c\uff0c\u5171\u540c\u63a8\u52a8\u5b9e\u65f6\u8ba1\u7b97\u6280\u672f\u7684\u53d1\u5c55\uff0c\u671f\u671b StreamPark \u5728\u672a\u6765\u505a\u5f97\u8d8a\u6765\u8d8a\u597d\uff0c\u65e9\u65e5\u6bd5\u4e1a\u6210\u4e3a\u65b0\u664b Apache \u9879\u76ee\u7684\u4ee3\u8868\uff01\"},{\"id\":\"streampark-usercase-joymaker\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-joymaker\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/12-streampark-usercase-joymaker.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/12-streampark-usercase-joymaker.md\",\"title\":\"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5\",\"description\":\"\u5bfc\u8bfb\uff1a\u672c\u6587\u4e3b\u8981\u8be6\u7ec6\u4ecb\u7ecd\u6b22\u4e50\u4e92\u5a31\u5728\u5b9e\u6218\u4e2d\u5bf9\u5927\u6570\u636e\u6280\u672f\u67b6\u6784\u7684\u5e94\u7528\uff0c\u9610\u8ff0\u4e3a\u4f55\u9009\u62e9  \u201cKubernetes + StreamPark\u201d \u6765\u6301\u7eed\u4f18\u5316\u548c\u589e\u5f3a\u73b0\u6709\u7684\u67b6\u6784\u3002\u4e0d\u4ec5\u7cfb\u7edf\u5730\u9610\u8ff0\u4e86\u5982\u4f55\u5728\u5b9e\u9645\u73af\u5883\u4e2d\u90e8\u7f72\u5e76\u8fd0\u7528\u8fd9\u4e9b\u5173\u952e\u6280\u672f\uff0c\u66f4\u662f\u6df1\u5165\u5730\u8bb2\u89e3\u4e86 StreamPark \u7684\u5b9e\u8df5\u4f7f\u7528\uff0c\u5f3a\u8c03\u7406\u8bba\u4e0e\u5b9e\u8df5\u7684\u5b8c\u7f8e\u878d\u5408\uff0c\u76f8\u4fe1\u8bfb\u8005\u901a\u8fc7\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff0c\u5c06\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u638c\u63e1\u76f8\u5173\u6280\u672f\uff0c\u5e76\u80fd\u5728\u5b9e\u8df5\u4e2d\u8fdb\u6b65\uff0c\u4ece\u800c\u53d6\u5f97\u663e\u8457\u7684\u5b66\u4e60\u6548\u679c\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"}],\"readingTime\":37.65,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-joymaker\",\"title\":\"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 \u52a9\u529b\u5929\u773c\u67e5\u5b9e\u65f6\u5e73\u53f0\u5efa\u8bbe\uff5c\u6548\u7387\u6570\u500d\u63d0\u5347\",\"permalink\":\"/zh-CN/blog/streampark-usercase-tianyancha\"},\"nextItem\":{\"title\":\"\u8054\u901a Flink \u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5316\u8fd0\u7ef4\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-chinaunion\"}},\"content\":\"![](/blog/joymaker/new_cover.png)\\n\\n**\u5bfc\u8bfb**\uff1a\u672c\u6587\u4e3b\u8981\u8be6\u7ec6\u4ecb\u7ecd\u6b22\u4e50\u4e92\u5a31\u5728\u5b9e\u6218\u4e2d\u5bf9\u5927\u6570\u636e\u6280\u672f\u67b6\u6784\u7684\u5e94\u7528\uff0c\u9610\u8ff0\u4e3a\u4f55\u9009\u62e9  \u201cKubernetes + StreamPark\u201d \u6765\u6301\u7eed\u4f18\u5316\u548c\u589e\u5f3a\u73b0\u6709\u7684\u67b6\u6784\u3002\u4e0d\u4ec5\u7cfb\u7edf\u5730\u9610\u8ff0\u4e86\u5982\u4f55\u5728\u5b9e\u9645\u73af\u5883\u4e2d\u90e8\u7f72\u5e76\u8fd0\u7528\u8fd9\u4e9b\u5173\u952e\u6280\u672f\uff0c\u66f4\u662f\u6df1\u5165\u5730\u8bb2\u89e3\u4e86 StreamPark \u7684\u5b9e\u8df5\u4f7f\u7528\uff0c\u5f3a\u8c03\u7406\u8bba\u4e0e\u5b9e\u8df5\u7684\u5b8c\u7f8e\u878d\u5408\uff0c\u76f8\u4fe1\u8bfb\u8005\u901a\u8fc7\u9605\u8bfb\u8fd9\u7bc7\u6587\u7ae0\uff0c\u5c06\u6709\u52a9\u4e8e\u7406\u89e3\u548c\u638c\u63e1\u76f8\u5173\u6280\u672f\uff0c\u5e76\u80fd\u5728\u5b9e\u8df5\u4e2d\u8fdb\u6b65\uff0c\u4ece\u800c\u53d6\u5f97\u663e\u8457\u7684\u5b66\u4e60\u6548\u679c\u3002\\n\\nGithub: https://github.com/apache/streampark\\n\\n\u6b22\u8fce\u5173\u6ce8\u3001Star\u3001Fork\uff0c\u53c2\u4e0e\u8d21\u732e\\n\\n\u4f9b\u7a3f\u5355\u4f4d | \u6b22\u4e50\u4e92\u5a31\\n\\n\u6587\u7ae0\u4f5c\u8005 | \u675c\u9065\\n\\n\u6587\u7ae0\u6574\u7406 | \u6768\u6797\u4f1f\\n\\n\u5185\u5bb9\u6821\u5bf9 | \u6f58\u6708\u9e4f\\n\\n\x3c!-- truncate --\x3e\\n\\n\u6b22\u4e50\u4e92\u5a31\uff0c\u662f\u4e00\u5bb6\u5168\u7403\u6e38\u620f\u7814\u53d1\u548c\u53d1\u884c\u516c\u53f8\uff1b\u516c\u53f8\u4ea7\u54c1\u805a\u7126\u5728 MMORPG \u548c MMOACT \u4e24\u5927\u54c1\u7c7b\uff1b\u6b22\u4e50\u4ea7\u54c1\u7406\u5ff5\uff1a\u201c\u5b81\u505a100\u4eba\u5c16\u53eb\u7684\u4ea7\u54c1\uff0c\u4e0d\u505a1\u4e07\u4eba\u53eb\u597d\u7684\u4ea7\u54c1\u201d\uff1b\u6b22\u4e50\u51fa\u54c1\uff0c\u5fc5\u5c5e\u7cbe\u54c1\u3002\u300aRO\u4ed9\u5883\u4f20\u8bf4\uff1a\u7231\u5982\u521d\u89c1\u300b\u4e0a\u7ebf\u4e1c\u5357\u4e9a\uff0c\u9884\u7ea6\u671f\u95f4\u8fbe\u6210\u4e86 1000 \u4e07\u9884\u7ea6\u7684\u91cc\u7a0b\u7891\uff0c\u4e0a\u7ebf\u9996\u65e5\u53d6\u5f97\u4e94\u56fd\u7545\u9500\u699c\u7b2c\u4e00\uff0c\u5e76\u5728\u65e5\u97e9\u7f8e\u3001\u6e2f\u6fb3\u53f0\u7b49\u5730\u90fd\u6709\u53d1\u884c\uff0c\u53d6\u5f97\u4e86\u4e0d\u9519\u7684\u6210\u7ee9\u3002\\n\\n## **1. \u4e1a\u52a1\u80cc\u666f\u4e0e\u6311\u6218** \\n\\n\u6b22\u4e50\u4e92\u5a31\u76ee\u524d\u4f7f\u7528\u7684\u5927\u6570\u636e\u5e95\u5ea7\u662f\u817e\u8baf\u4e91\u7684 EMR\uff0c\u6570\u4ed3\u67b6\u6784\u4e3b\u8981\u5206\u4e3a\u4e86\u5982\u4e0b\u51e0\u7c7b\uff1a\\n\\n- **\u79bb\u7ebf\u6570\u4ed3\u67b6\u6784**\uff1aHadoop + Hive + Dolphinscheduler + Trino\\n\\n- **\u5b9e\u65f6\u6570\u4ed3\u67b6\u6784**\uff1aKafka + Flink + StreamPark + Doris\\n\\n- **\u6d41\u5f0f\u6570\u4ed3\u67b6\u6784\uff08\u89c4\u5212\u4e2d\uff09**\uff1aPaimon + Flink + StreamPark + Doris\\n\\n\u5176\u4e2d\uff0c\u6d41\u5f0f\u6570\u4ed3\u67b6\u6784\u662f\u6211\u4eec 2024 \u5e74\u7684\u91cd\u70b9\u8ba1\u5212\u4e4b\u4e00\uff0c\u76ee\u6807\u662f\u57fa\u4e8e Kubernetes \u7684\u5f39\u6027\u7279\u70b9\u4ee5\u63d0\u9ad8\u5927\u6570\u636e\u5206\u6790\u80fd\u529b\u53ca\u5404\u79cd\u6570\u636e\u4ea7\u54c1\u7684\u4ef7\u503c\u8f93\u51fa\u3002\u7136\u800c\uff0c\u7531\u4e8e\u65e9\u524d\u7684\u67b6\u6784\u539f\u56e0\uff08\u4e3b\u8981\u662f Apache Doris \u548c EMR \u6838\u5fc3\u8282\u70b9\u7684\u6df7\u90e8\u7f72\uff09\uff0c\u8ba9\u6211\u4eec\u9047\u5230\u4e86\u8bb8\u591a\u95ee\u9898\uff0c\u4f8b\u5982\uff1a\\n- **\u8d44\u6e90\u4e89\u593a**\uff1a\u5728 YARN \u8d44\u6e90\u8c03\u5ea6\u5e73\u53f0\u4e0b\uff0cApache Doris\u3001Apache Flink \u5b9e\u65f6\u4efb\u52a1\u3001Hive \u7684\u79bb\u7ebf\u4efb\u52a1\u4ee5\u53ca Spark \u7684 SQL \u4efb\u52a1\u7ecf\u5e38\u4e89\u62a2 CPU \u548c\u5185\u5b58\u8d44\u6e90\uff0c\u5bfc\u81f4 Doris \u67e5\u8be2\u7a33\u5b9a\u6027\u4e0b\u964d\uff0c\u67e5\u8be2\u9519\u8bef\u9891\u7e41\u3002\\n\\n- **\u8d44\u6e90\u4e0d\u8db3**\uff1aYARN \u7684\u673a\u5668\u8d44\u6e90\u4f7f\u7528\u7387\u5927\u90e8\u5206\u65f6\u95f4\u4f4d\u4e8e 70\uff05 \u81f3 80\uff05 \u4e4b\u95f4\uff0c\u7279\u522b\u662f\u5728\u5927\u91cf\u7684\u8865\u6570\u7684\u573a\u666f\u4e0b\uff0c\u96c6\u7fa4\u8d44\u6e90\u5f80\u5f80\u4e0d\u8db3\u3002\\n\\n- **\u4eba\u5de5\u5e72\u9884**\uff1a\u5b9e\u65f6 Flink \u7684\u4efb\u52a1\u8d8a\u6765\u8d8a\u591a\uff0c\u5404\u6e38\u620f\u7684\u6570\u636e\u5728\u4e00\u5929\u5185\u6709\u660e\u663e\u7684\u6ce2\u5cf0\u6ce2\u8c37\u53d8\u5316\uff0c\u7279\u522b\u662f\u5728\u5468\u672b\u8fdb\u884c\u7684\u6302\u673a\u6d3b\u52a8\uff0c\u6570\u636e\u91cf\u7ffb\u500d\uff0c\u751a\u81f3\u589e\u52a0\u81f3\u6bcf\u5929\u8d85\u8fc7 100 \u4ebf\u6761\uff0c\u800c\u4e14\u8fd9\u9700\u8981\u9891\u7e41\u5730\u624b\u52a8\u8c03\u6574\u5e76\u884c\u5ea6\u6765\u9002\u5e94\u8ba1\u7b97\u538b\u529b\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u6d88\u8d39\u80fd\u529b\u3002\\n\\n## **2. \u89e3\u51b3\u65b9\u6848\u9009\u578b** \\n\\n\u4e3a\u4e86\u89e3\u51b3\u4ee5\u4e0a\u95ee\u9898\uff0c\u6211\u4eec\u5bfb\u6c42\u80fd\u591f\u8fdb\u884c \u201c**\u8d44\u6e90\u5f39\u6027\u4f38\u7f29**\u201d \u548c \u201c**\u4efb\u52a1\u7ba1\u7406**\u201d \u7684\u76f8\u5173\u7ec4\u4ef6\uff0c\u540c\u65f6\u8003\u8651\u5230\u5927\u6570\u636e\u4e91\u539f\u751f\u7684\u8d8b\u52bf\uff0c\u91c7\u7528\u4e91\u539f\u751f\u7684\u67b6\u6784\u8feb\u5728\u7709\u776b\uff0c Kubernetes \u67b6\u6784\u4e0b\u80fd\u4e3a\u5927\u6570\u636e\u8fd0\u7ef4\u51cf\u8d1f\u3001\u63d0\u4f9b\u9ad8\u53ef\u7528\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u7070\u5ea6\u66f4\u65b0\u7b49\u66f4\u597d\u66f4\u7a33\u5b9a\u7684\u80fd\u529b\u3002\\n\\n\u540c\u65f6\u7b80\u5316 Apache Flink \u5b9e\u65f6\u4efb\u52a1\u7684\u5f00\u53d1\u548c\u8fd0\u7ef4\u4e5f\u662f\u4e0d\u5f97\u4e0d\u9762\u5bf9\u7684\u95ee\u9898\uff0c\u81ea 2022 \u5e74\u4e2d\u65ec\u5f00\u59cb\uff0c\u5c31\u91cd\u70b9\u7814\u7a76 Flink \u76f8\u5173\u7684\u5f00\u6e90\u548c\u5546\u4e1a\u5316\u76f8\u5173\u7684\u9879\u76ee\uff0c\u5728\u8fdb\u884c\u6280\u672f\u9009\u578b\u65f6\uff0c\u516c\u53f8\u4e3b\u8981\u4ece\u51e0\u4e2a\u5173\u952e\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6df1\u5165\u8003\u5bdf\uff0c\u5305\u62ec\uff1a**Kubernetes \u5bb9\u5668\u5316\u90e8\u7f72\u3001\u8f7b\u91cf\u7a0b\u5ea6\u3001\u591a Flink\u7248\u672c\u7684\u652f\u6301\u3001\u529f\u80fd\u7684\u5b8c\u5907\u6027\u3001\u591a\u79cd\u90e8\u7f72\u6a21\u5f0f\u3001\u5bf9 CI/CD \u7684\u652f\u6301\u4ee5\u53ca\u7a33\u5b9a\u6027\u3001\u6210\u719f\u5ea6\u7b49\uff0c\u6700\u7ec8\u4e0d\u51fa\u610f\u5916\u7684\u9009\u62e9\u4e86 Apache StreamPark\u3002**\\n\\n![](/blog/joymaker/cover.png)\\n\\n\u6211\u4eec\u5728\u4f7f\u7528 StreamPark \u7684\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u5176\u8fdb\u884c\u4e86\u6df1\u5165\u7684\u5e94\u7528\u548c\u63a2\u7d22\uff0c\u5df2\u7ecf\u6210\u529f\u5b9e\u73b0\u4e86100+ Flink \u4efb\u52a1\u8f7b\u677e\u90e8\u7f72\u5230 Kubernetes\uff0c\u53ef\u4ee5\u5341\u5206\u65b9\u4fbf\u5730\u8fdb\u884c\u4f5c\u4e1a\u7ba1\u7406\u3002\\n\\n\u63a5\u4e0b\u6765\uff0c\u5c06\u8be6\u8ff0\u6211\u4eec\u662f\u5982\u4f55\u4f7f\u7528 StreamPark \u5b9e\u73b0 Flink on kubernetes \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u5b9e\u8df5\u8fc7\u7a0b\uff0c\u5c3d\u7ba1\u5185\u5bb9\u8f83\u957f\uff0c\u4f46\u662f\u5e72\u8d27\u6ee1\u6ee1\uff0c\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u4ee5\u4e0b\u7684\u51e0\u4e2a\u90e8\u5206\uff1a\\n\\n- **\u73af\u5883\u51c6\u5907\u7bc7**\uff1a\u8fd9\u90e8\u5206\u4ecb\u7ecd Kubernetes\u3001StreamPark\u3001Maven\u3001Docker\u3001kubectl \u5de5\u5177\u548c Flink \u7684\u5b89\u88c5\u4e0e\u914d\u7f6e\u8fc7\u7a0b\u3002\\n\\n- **StreamPark \u4f7f\u7528\u7bc7**\uff1a\u8fd9\u90e8\u5206\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 StreamPark \u542f\u52a8 Session \u96c6\u7fa4\uff0c\u4ee5\u53ca\u90e8\u7f72 SQL\u3001JAR \u4f5c\u4e1a\u7684\u6d41\u7a0b\u7b49\u3002\\n\\n- **Flink \u4efb\u52a1\u5e94\u7528\u573a\u666f\u7bc7**\uff1a\u5728\u8fd9\u4e00\u90e8\u5206\uff0c\u5c06\u5206\u4eab\u6b22\u4e50\u4e92\u5a31\u5b9e\u9645\u8fd0\u7528 Flink \u4efb\u52a1\u7684\u5b9e\u8df5\u573a\u666f\u3002\\n\\n## **3. \u843d\u5730\u5b9e\u8df5 - \u73af\u5883\u51c6\u5907\u7bc7** \\n\\n\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u4ece\u5b89\u88c5\u5f00\u59cb\u8be6\u7ec6\u4ecb\u7ecd StreamPark \u7684\u843d\u5730\u5b9e\u8df5,\u5173\u4e8e\u817e\u8baf\u4e91\u4ea7\u54c1\u7684\u4e00\u4e9b\u4f7f\u7528\u6b65\u9aa4\uff0c\u5c06\u5728\u6587\u672b\u7b80\u8981\u4ecb\u7ecd\uff0c\u6b64\u5904\u4e3b\u8981\u5206\u4eab\u6838\u5fc3\u7684\u6b65\u9aa4\u3002\\n\\n### **3.1. \u51c6\u5907 Kubernetes \u73af\u5883**\\n\\n\u6b22\u4e50\u4e92\u5a31\u7684 Kubernetes \u73af\u5883\u4f7f\u7528\u7684\u662f\u817e\u8baf\u4e91\u5bb9\u5668\u670d\u52a1\u4ea7\u54c1\uff0c\u5176\u4e2d Kubernetes \u547d\u540d\u7a7a\u95f4\u4e3b\u8981\u5212\u5206\u5982\u4e0b\uff1a\\n\\n- **Apache Doris**\uff1aDoris \u96c6\u7fa4 + 3 FE\uff08\u6807\u51c6\u8282\u70b9\uff09 + CN\uff081 \u53f0\u8d85\u7ea7\u8282\u70b9\uff09\u3002\\n\\n- **Apache Flink**\uff1aFlink \u96c6\u7fa4\u7531\u4e00\u4e2a\u8d85\u7ea7\u8282\u70b9\u7ec4\u6210\uff0c\u8fd9\u4e2a\u8282\u70b9\u76f8\u5f53\u4e8e\u4e00\u53f0\u8d85\u5927\u8d44\u6e90\u7684\u673a\u5668\uff0c\u4f7f\u7528\u8d77\u6765\u975e\u5e38\u7b80\u5355\uff0c\u5e76\u4e14\u53ef\u4ee5\u8fc5\u901f\u5f39\u6027\u6269\u5c55\u5230\u6570\u4ee5\u4e07\u8ba1\u7684 pod\u3002\\n\\n- **BigData**\uff1a\u5305\u542b\u5404\u79cd\u5927\u6570\u636e\u7ec4\u4ef6\u3002\\n\\n\u53e6\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e24\u53f0\u539f\u751f\u8282\u70b9\uff0c\u4e3b\u8981\u7528\u4e8e\u90e8\u7f72 StreamPark\u3001Dolphinscheduler \u4ee5\u53ca Prometheus + Grafana\u3002\u96c6\u7fa4\u4fe1\u606f\u76f8\u5173\u622a\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/clusters.png)\\n\\n### **3.2. \u5b89\u88c5 StreamPark**\\n\\n\u6211\u4eec\u91c7\u7528\u7684\u662f StreamPark 2.1.4 \u6700\u65b0\u7684\u7a33\u5b9a\u7248\u672c\uff0c\u8be5\u7248\u672c\u4fee\u590d\u4e86\u4e00\u4e9b Bug\uff0c\u5e76\u589e\u52a0\u4e86\u4e00\u4e9b\u65b0\u7684\u7279\u6027\uff0c\u5982\u652f\u6301 Flink 1.18\u3001Jar \u4efb\u52a1\u652f\u6301\u901a\u8fc7 pom \u6216\u8005\u4e0a\u4f20\u4f9d\u8d56\u7b49\u3002\\n\\n\u867d\u7136 StreamPark \u652f\u6301 Docker \u548c Kubernetes \u90e8\u7f72\uff0c\u4f46\u662f\u51fa\u4e8e\u8282\u7701\u65f6\u95f4\u548c\u5bf9\u6240\u6709\u5927\u6570\u636e\u7ec4\u4ef6\u9700\u8981\u8fdb\u884c\u9876\u5c42\u8bbe\u8ba1\u5bb9\u5668\u5316\u7684\u8003\u8651\uff0c\u6211\u4eec\u5f53\u524d\u9009\u62e9\u4e86**\u5728\u4e91\u4e0a\u7684 CVM \u4e0a\u8fdb\u884c StreamPark \u7684\u5feb\u901f\u642d\u5efa**\uff0c\u4ee5\u4e0b\u662f StreamPark \u7684\u5b89\u88c5\u90e8\u7f72\u811a\u672c\uff1a\\n\\n```shell\\n#\u4f7f\u7528 root \u7528\u6237\u8fdb\u5165\u5b89\u88c5\u76ee\u5f55\uff08\u9700\u5148\u6709 java \u73af\u5883\uff09\u548c k8s \u73af\u5883\u540c\u4e00\u4e2a\u7f51\u6bb5\uff01\uff01\uff01\u53ef\u4ee5\u7701\u4e8b\\ncd /data     \\n\\n#\u4e0b\u8f7d\u4e8c\u8fdb\u5236\u5b89\u88c5\u5305\\nwget https://dlcdn.apache.org/incubator/streampark/2.1.4/apache-streampark_2.12-2.1.4-incubating-bin.tar.gz   \\n\\n#\u4e0e\u63d0\u4f9b\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u3001\u4fdd\u8bc1\u5305\u7684\u5b8c\u6210\u6027\\nsha512sum apache-streampark_2.12-2.1.2-incubating-bin.tar.gz  #\u89e3\u538b\u7f29\\ntar -xzvf apache-streampark_2.12-2.1.2-incubating-bin.tar.gz  #\u6539\u540d\\nmv apache-streampark_2.12-2.1.2-incubating-bin streampark_2.12-2.1.2 #\u521b\u5efa\u8f6f\u94fe\\nln -s streampark_2.12-2.1.2  streampark\\n\\n#\u4fee\u6539\u6570\u636e\u5e93\u914d\u7f6e\\nvim /data/streampark/conf/application-mysql.ymlspring:\\n  datasource:\\n    username: root\\n    password: xxxxx\\n    driver-class-name: com.mysql.cj.jdbc.Driver\\n    url: jdbc:mysql://10.16.x.x:3306/streampark_k8s?...\\n\\n# \u4fee\u6539 streampark \u6838\u5fc3\u914d\u7f6e \u53ef\u4ee5\u4fee\u6539\u4e0b\u7aef\u53e3\uff08\u56e0\u4e3a k8s nodeport \u7aef\u53e3\u8303\u56f4  30000-32767\uff09 \u6545\u53ef\u4ee5\u914d\u7f6e\u8fd9\u4e2a\u8303\u56f4 \u7701\u53bb\u7aef\u53e3\u5bf9\u5916\u5f00\u53d1\u518d\u914d\u7f6e  \u6216\u8005\u8d26\u53f7\u5bc6\u7801  \u6211\u4eec\u5b58\u50a8\u7528 cos \u6545\u4e0d\u914d\u7f6e hdfs\\nvim /data/streampark/conf/application.yml      workspace:\\n   local: /data/streampark/streampark_workspace #\u521b\u5efa\u9700\u8981\u7684\u76ee\u5f55\\n   \\n   \\nmkdir -p  vim /data/streampark/conf/application.yml\\n\\n#\u521d\u59cb\u5316 streampark \u7684\u6570\u636e\u5e93\u8868 \u8981\u6c42\u73af\u5883\u6709 mysql \u5ba2\u6237\u7aef  \u6267\u884c\u5b8c\u53ef\u4ee5\u53bb mysql \u4e2d\u770b\u4e0b\u5e93\u8868\u662f\u5426\u5b58\u5728\\nmysql -u root -p xxxxx < /data/streampark/script/schema/mysql-schema.sql\\n\\n#\u6dfb\u52a0\u4f9d\u8d56\u7684 mysql-connector \u5305 \u56e0\u4e3a streampark lib\u4e0b\u9762\u6ca1\u6709  \u5728 /data/streampark/lib\u4e0b\u6267\u884c\\nwget https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.0.33/mysql-connector-j-8.0.33.jar \\n\\n#\u542f\u52a8\u5e76\u767b\u9646 \u53ef\u4ee5\u5148\u9a8c\u8bc1\u4e0b java  \u73af\u5883  java -version \u786e\u4fdd\u6ca1\u95ee\u9898   \u5728 /data/streampark/lib\u4e0b\u6267\u884c\\n ./startup.sh \\n```\\n\\n### **3.3. \u5b89\u88c5 Maven**\\n\\n\u5728 StreamPark \u4e0a\u914d\u7f6e Flink \u4efb\u52a1\u65f6\u53ef\u4ee5\u901a\u8fc7 maven \u4e0b\u8f7d\u76f8\u5173\u4f9d\u8d56\uff0c\u4e0b\u9762\u662f Maven \u7684\u5b89\u88c5\u914d\u7f6e\uff1a\\n\\n```shell\\n#\u4e0b\u8f7d maven \u540c root \u7528\u6237\u64cd\u4f5c\\ncd /data && wget https://dlcdn.apache.org/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.tar.gz\\n\\n#\u68c0\u9a8c\u5b89\u88c5\u5305\u5b8c\u6574\\nsha512sum apache-maven-3.9.6-bin.tar.gz \\n\\n#\u89e3\u538b  \u8f6f\u8fde\\ntar -xzvf apache-maven-3.9.6-bin.tar.gz \\nln -s apache-maven-3.9.6 maven\\n\\n# \u8bbe\u7f6e\u963f\u91cc\u4e91\u4ed3\u5e93 maven mirror\uff0c\u52a0\u901f\u4e0b\u8f7d\\nvim /data/maven/conf/settings.xml\\n\\n<mirror>\\n   <id>alimaven</id>\\n  <mirrorOf>central</mirrorOf>\\n  <name>aliyun maven</name>\\n  <url>https://maven.aliyun.com/repository/central</url>\\n</mirror>\\n\\n<mirror>\\n  <id>alimaven</id>\\n  <name>aliyun maven</name>\\n  <url>http://maven.aliyun.com/nexus/content/groups/public/</url>\\n  <mirrorOf>central</mirrorOf>\\n </mirror>\\n\\n#\u73af\u5883\u53d8\u91cf \u6700\u540e\u6dfb\u52a0\\nvim /etc/profile\\nexport MAVEN_HOME=/data/maven\\nPATH=$MAVEN_HOME/bin:$PATH\\n\\n#\u751f\u6548 \u9a8c\u8bc1\\nsource /etc/profile  && mvn -version\\n```\\n\\n### **3.4 \u5b89\u88c5 Docker**\\n\\n\u56e0\u4e3a StreamPark \u4f7f\u7528 Kubernetes \u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 Docker \u6765\u6784\u5efa\u548c\u4e0a\u4f20\u955c\u50cf\u5230\u516c\u53f8\u5e38\u7528\u7684 Harbor \u955c\u50cf\u670d\u52a1\u4e2d\uff0c\u4ee5\u4e0b\u662f Docker \u7684\u5b89\u88c5\u811a\u672c\\n\\n```shell\\n#\u5378\u8f7d\u65e7\u7248\u672c \u5982\u679c\u6709\\nsudo yum remove docker \\\\\\n          docker-client \\\\\\n          docker-client-latest \\\\\\n          docker-common \\\\\\n          docker-latest \\\\\\n          docker-latest-logrotate \\\\\\n          docker-logrotate \\\\\\n          docker-engine\\n\\n#\u4e0b\u8f7d\u955c\u50cf\u4ed3\u5e93\\nwget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo      #\u963f\u91cc\u4e91docker-ce \u955c\u50cf\\n\\n#\u66f4\u65b0\u8f6f\u4ef6\u5305\u7d22\u5f15 \\nyum makecache     \\n\\n#\u4e0b\u8f7d\u5b89\u88c5\\nyum install docker-ce docker-ce-cli containerd.io -y # docker-ce \u793e\u533a\u7248 ee \u4f01\u4e1a\u7248\\n\\n#\u542f\u52a8 \u67e5\u770b \\nsystemctl start docker && docker version\\n\\n#\u5f00\u673a\u81ea\u542f\\nsystemctl enable docker\\n```\\n\\n### **3.5. Kubectl \u5de5\u5177\u5b89\u88c5**\\n\\n\u4e3a\u4e86\u65b9\u4fbf\u4e0e Kubernetes \u96c6\u7fa4\u8fdb\u884c\u4ea4\u4e92\u3001\u8fdb\u884c\u914d\u7f6e\u67e5\u770b\u3001\u8bbf\u95ee\u65e5\u5fd7\u7b49\uff0c\u6211\u4eec\u8fd8\u5b89\u88c5\u4e86kubectl \u5de5\u5177\u3002\u5b89\u88c5 kubectl \u524d\uff0c\u9996\u5148\u9700\u8981\u5148\u4ece\u8fd9\u91cc\u83b7\u53d6 Kubernetes \u96c6\u7fa4\u7684\u8bbf\u95ee\u51ed\u8bc1\uff0c\u4e0b\u8f7d\u65b9\u5f0f\u5982\u4e0b\u56fe\uff1a\\n\\n![](/blog/joymaker/access_credential.png)\\n\\n\u63a5\u7740\u4e0b\u8f7d\u914d\u7f6e\u62f7\u8d1d\u5230 root \u7528\u6237\u76ee\u5f55\uff0c\u6307\u5b9a\u76ee\u5f55\u5e76\u6539\u540d\uff1a\\n\\n```shell\\n# 1\uff09\u521b\u5efa\u9ed8\u8ba4\u9690\u85cf\u76ee\u5f55\\nmkdir -p /root/.kube   \\n\\n# 2\uff09\u4e0a\u4f20 k8s \u5185\u7f51\u8bbf\u95ee\u51ed\u8bc1             \\nrz cls-dtyxxxxl-config\\n\\n# 3\uff09\u4fee\u6539\u51ed\u8bc1\u9ed8\u8ba4\u540d\u5b57              \\nmv cls-dtyxxxxl-config config  \\n\\n# 4\uff09\u5c06\u51ed\u8bc1\u653e\u5230\u6307\u5b9a\u4f4d\u7f6e\\nmv config /root/.kube \\n```\\n\\n\u5177\u4f53\u5b89\u88c5 kubetcl \u5ba2\u6237\u7aef\u547d\u4ee4\u5982\u4e0b\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u5b89\u88c5 **kubectx** \uff0c\u66f4\u52a0\u65b9\u4fbf\u5730\u53bb\u8bbf\u95ee\u591a\u4e2a kubernetes \u96c6\u7fa4\u548c\u5207\u6362\u56fa\u5b9a\u7684\u547d\u540d\u7a7a\u95f4\uff09\uff1a\\n\\n```shell\\n# 1\uff09\u4e0b\u8f7d\u6700\u65b0\u7248\\ncurl -LO \\\"https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl\\\"\\n\\n# 2\uff09\u6dfb\u52a0\u6267\u884c\u6743\u9650\\nchmod +x kubectl\\n\\n# 3\uff09\u79fb\u52a8\u5230\u5e38\u7528\u7684\u5de5\u5177\u547d\u4ee4\u4f4d\u7f6e\\nmv ./kubectl /usr/local/bin/kubectl\\n\\n# 4\uff09\u53ef\u4ee5\u5728 /etc/profile \u6216\u8005 root\u7528\u6237\u5bb6\u76ee\u5f55\u7684  .bashrc \u4e2d\u914d\u7f6e\\nvim /root/.bashrc\\nexport JAVA_HOME=/usr/local/jdk1.8.0_391\\nPATH=/usr/local/bin:$JAVA_HOME/bin:$PATH\\n\\n# 5\uff09\u9a8c\u8bc1\u5ba2\u6237\u7aef\u548c\u96c6\u7fa4\u5bc6\u94a5\\nkubectl cluster-info\\n```\\n\\n\u6700\u540e\uff0c\u8fd8\u9700\u8981\u521b\u5efa\u4e00\u4e2a Flink \u4e13\u7528\u7684\u8d26\u6237\u51ed\u8bc1\uff08\u540e\u9762\u4f1a\u7528\u5230\uff09\uff1a\\n\\n```shell\\n# 1\uff09\u521b\u5efa\u547d\u540d\u7a7a\u95f4\\nkubectl create namespace flink\\n\\n# 2\uff09\u521b\u5efa flink \u8bbf\u95ee k8s \u7684\u8d26\u53f7  \u8bb0\u5f97\u5e26\u547d\u540d\u7a7a\u95f4\uff01\\nkubectl  create serviceaccount flink-service-account -n flink\\n\\n# 3\uff09\u7ed9\u8be5\u8d26\u53f7\u7ed1\u5b9a\u5bb9\u5668\u64cd\u4f5c\u7684\u4e00\u4e9b\u6743\u9650 \u8bb0\u5f97\u5e26\u547d\u540d\u7a7a\u95f4\uff01\uff01\uff01\\nkubectl  create clusterrolebinding flink-role-binding-flink --clusterrole=edit --serviceaccount=flink:flink-service-account -n flink  \\n```\\n\\n### **3.6. \u5b89\u88c5\u914d\u7f6e Flink**\\n\\n\u6211\u4eec Kubernetes \u73af\u5883\u9009\u62e9\u4e86 Flink1.17-scala2.12 Java11 \u7684\u955c\u50cf\uff0c\u56e0\u4e3a\u5f53\u65f6 Flink 1.18 \u6709\u4e9b\u4f9d\u8d56\u5305\u4e0d\u597d\u627e\u3002\\n\\n\u4e0b\u8f7d\u5e76\u89e3\u538b flink-1.17.2-bin-scala_2.12.tgz \u5b89\u88c5\u5305\uff0c\u811a\u672c\u5982\u4e0b\uff1a\\n\\n```shell\\ncd /data && wget https://dlcdn.apache.org/flink/flink-1.17.2/flink-1.17.2-bin-scala_2.12.tgz\\n\\n#\u5b8c\u6574\u6027\u6821\u9a8c\\nsha512sum flink-1.17.2-bin-scala_2.12.tgz\\n\\n#\u89e3\u538b\\ntar -xzvf flink-1.17.2-bin-scala_2.12.tgz\\n\\n#\u6539\u540d\\nmv flink-1.17.2-bin-scala_2.12 flink-1.17.2\\n\\n#\u8f6f\u8fde\\nln -s flink-1.17.2 flink\\n\\n#\u65e7\u4e8c\u8fdb\u5236\u5305\u6536\u7eb3\\nmv flink-1.17.2-bin-scala_2.12.tgz /data/softbag   \\n```\\n\\n\u81f3\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u628a\u73af\u5883\u642d\u5efa\u597d\u4e86\uff0c\u4e0b\u9762\u7ee7\u7eed\u6309\u6b65\u9aa4\u8be6\u7ec6\u8bb2\u89e3 StreamPark \u7684\u4f7f\u7528\u3002\\n\\n## **4. \u843d\u5730\u5b9e\u8df5 - StreamPark \u4f7f\u7528\u7bc7**\\n\\n\u60f3\u5feb\u901f\u4e86\u89e3 StreamPark \u8fd0\u884c\u4f5c\u4e1a\u81f3 Kubernetes \u7684\u8bfb\u8005\uff0c\u53ef\u4ee5\u89c2\u770b\u4e0b\u9762\u7684\u89c6\u9891\uff1a\\n\\n//\u89c6\u9891\u94fe\u63a5 (Flink On Kubernetes Application \u4e0a\u624b\u6559\u7a0b)\\n\\n//\u89c6\u9891\u94fe\u63a5 (Flink On Kubernetes Session \u4e0a\u624b\u6559\u7a0b)\\n\\n### **4.1. \u914d\u7f6e Flink Home**\\n\\n\u767b\u5f55 StreamPark \u4e4b\u540e\uff0c\u5207\u6362\u81f3 Flink Home \u83dc\u5355\uff0c\u914d\u7f6e\u6211\u4eec\u5728\u524d\u9762\u89e3\u538b\u7684 Flink \u5b89\u88c5\u5305\u76ee\u5f55\uff0c\u622a\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/flink_home.png)\\n\\n### **4.2. \u521b\u5efa Flink Session**\\n\\n\u63a5\u7740\u5207\u6362\u5230 FlinkCluster\uff0cAdd New \u65b0\u589e\u4e00\u4e2a Flink \u96c6\u7fa4\uff1a\\n\\n![](/blog/joymaker/flink_cluster.png)\\n\\n\u914d\u7f6e\u8be6\u60c5\u5982\u4e0b\uff0c\u4ee5\u4e0b\u662f\u7b2c\u4e00\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\uff1a\\n\\n**\u914d\u7f6e\u8be6\u89e3**\uff1a\u96c6\u7fa4\u540d\u5b57\u548c Kubernetes \u96c6\u7fa4 ID \u6211\u4eec\u901a\u5e38\u5199\u4e00\u6837\uff0c\u586b\u5199\u6b63\u786e\u7684 Kubernetes \u670d\u52a1\u8d26\u53f7\uff0c\u8fd9\u91cc\u7684\u955c\u50cf\u4f7f\u7528\u817e\u8baf\u4e91 tcr \u4e2d\u7684\u955c\u50cf\uff0c\u5e76\u4f7f\u7528 lb \u4f5c\u4e3a\u5bf9\u5916\u8bbf\u95ee Flink UI \u7684\u65b9\u5f0f\u3002\u8fd9\u91cc\u7684\u69fd\u4e00\u822c\u8bbe\u7f6e\u4e3a 2\uff0c\u4efb\u52a1\u5e76\u884c\u5ea6\u4e00\u822c\u662f 2 \u7684\u500d\u6570\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u8ba9 Session \u96c6\u7fa4\u6ca1\u6709\u95f2\u7f6e\u7684\u8d44\u6e90\uff09\\n\\n![](/blog/joymaker/first_configuration.png)\\n\\n\u7b2c\u4e8c\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\uff1a\\n\\n**\u914d\u7f6e\u8be6\u89e3**\uff1a\u6211\u4eec\u91c7\u53d6\u7684\u662f Session \u6a21\u5f0f\uff0c\u4e00\u4e2a JobManager \u7ba1\u7406\u7740\u5f88\u591a\u4efb\u52a1\uff0c\u6545\u8d44\u6e90\u53ef\u4ee5\u7a0d\u5fae\u5927\u4e00\u4e9b\uff0c\u6211\u4eec\u7ed9 2G\uff0c\u7ecf\u89c2\u5bdf\u53ef\u4ee5\u6ee1\u8db3\uff0c\u4f46\u662f\u7531\u4e8e\u4efb\u52a1\u591a\uff0cJobManager \u7684\u5185\u5b58\u5206\u914d\u4e2d metaspace \u6d88\u8017\u6bd4\u8f83\u5927\uff0c\u6545\u53ef\u4ee5\u5c06\u9ed8\u8ba4\u7684 256M\uff0c\u6539\u5230 500M\uff0c\u7ecf\u8fc7\u89c2\u5bdf\uff0c\u4e00\u4e2a Session \u7ba1\u7406 10 \u4e2a\u4efb\u52a1\u4ee5\u4e0b\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5408\u7406\u3002\\n\\nTaskManager \u5185\u5b58\u5728 session \u914d\u7f6e\u7ed9\u51fa\u540e\uff0c\u5728 StreamPark \u7a0b\u5e8f\u914d\u7f6e\u9875\u5c06\u65e0\u6cd5\u4fee\u6539\uff0c\u6545\u53ef\u4ee5\u5bf9 Session \u9879\u76ee\u6570\u636e\u91cf\u8fdb\u884c\u9884\u4f30\uff0c\u6570\u636e\u91cf\u5927\u5c31\u53ef\u4ee5 \u628a \u201cCPU : \u5185\u5b58\u201d \u8c03\u6574\u5230 \u201c1 \u6838 : 2G\u201d\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u66f4\u5927\uff0c\u56e0\u4e3a\u6570\u636e\u5904\u7406\u8fd8\u6709 TaskManager \u6570\u91cf\u6709\u5173\uff0c\u4e5f\u5c31\u662f\u5e76\u884c\u5ea6\u6709\u5173\uff0c\u8fd9\u6837\u57fa\u672c\u5c31\u53ef\u4ee5\u907f\u514d\u4e00\u4e9b OOM \u95ee\u9898\uff0c\u6211\u4eec \u201c1 : 2\u201d Session \u96c6\u7fa4\u9879\u76ee\u4e00\u5929\u5904\u7406\u6570\u636e\u91cf 60 \u4ebf\uff0c18 \u4e2a\u5e76\u884c\u5ea6\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002\u9ed8\u8ba4 cpu: \u5185\u5b58 1 : 1 \u57fa\u672c ok\u3002\\n\\n![](/blog/joymaker/second_configuration.png)\\n\\n\u6700\u540e\u4e00\u90e8\u5206\u7684\u5185\u5bb9\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/third_configuration.png)\\n\\n\u8fd9\u91cc\u8d34\u51fa\u5177\u4f53\u7684\u6587\u672c\u5185\u5bb9\uff1a\\n\\n```shell\\n#\u8bbf\u95ee\u65b9\u5f0f  \u590d\u7528lb+port lb\u53ef\u4ee5\u63d0\u524d\u521b\u5efa \u4e0d\u7528k8s\u521b\u5efa  \u8fd9\u6837ip\u56fa\u5b9a\u3002\u590d\u7528\u540e\u66f4\u52a0\u65b9\u4fbf\\n-Drest.port=8091\\n-Dkubernetes.rest-service.annotations=service.kubernetes.io/qcloud-share-existed-lb:true,service.kubernetes.io/tke-existed-lbid:lb-iv9ixxxxx\\n-Dkubernetes.rest-service.exposed.type=LoadBalancer\\n\\n#cp sp  \u4f7f\u7528s3\u534f\u8bae\u8bbf\u95ee\u817e\u8baf\u4e91cos  \u63d2\u4ef6\u65b9\u5f0f\u4f9d\u8d56\u5305  s3\u7684cos\u8ba4\u8bc1\\n-Dcontainerized.master.env.ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar\\n-Dcontainerized.taskmanager.env.EANABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar\\n-Dstate.checkpoints.dir=s3://k8s-bigdata-xxxxxx/flink-checkpoints\\n-Dstate.savepoints.dir=s3://k8s-bigdata-xxxxx/flink-savepoints\\n\\n#k8s\u4e2d\u7684\u4efb\u52a1\u8c03\u5ea6\u7b56\u7565\u3001\u8282\u70b9\u9009\u62e9\u7b56\u7565\uff0c\u56e0\u4e3aflink\u547d\u540d\u7a7a\u95f4\u662f\u903b\u8f91\u7684\uff0c\u800c\u8282\u70b9\u9009\u62e9\u7b56\u7565\u53ef\u4ee5\u8ba9\u5176\u8dd1\u5728flink\u4e13\u7528\u7684\u7269\u7406\u8d85\u7ea7\u8282\u70b9\u4e0a\u53bb\\n-Dkubernetes.jobmanager.node-selector=usefor:flink\\n-Dkubernetes.taskmanager.node-selector=usefor:flink\\n\\n#\u5f00\u542fjobmanager\u9ad8\u53ef\u7528 \u4f7f\u7528 k8s\u5b9e\u73b0\u65b9\u5f0f\u3001 \u4f7f\u7528cos\u7684\u76ee\u5f55\u5b58\u50a8  \u6574\u4f53\u5c31\u4e0d\u7528hdfs\\n-Dhigh-availability.type=kubernetes\\n-Dhigh-availability.storageDir=s3://k8s-bigdata-xxx/flink-recovery\\n-Dkubernetes.cluster-id=streampark-share-session\\n-Dkubernetes.jobmanager.replicas=2\\n\\n#pod\u955c\u50cf\u62c9\u53d6\u7b56\u7565\u548cflink\u53d6\u6d88cp\u7684\u4fdd\u7559 \u65f6\u533a\\n-Dkubernetes.container.image.pull-policy=Always\\n-Dexecution.checkpointing.externalized-checkpoint-retention=RETAIN_ON_CANCELLATION\\n-Dtable.local-time-zone=Asia/Shanghai\\n\\n#\u955c\u50cf\u62c9\u53d6\u7f13\u5b58\u52a0\u901f  \u8be6\u7ec6\u4e0b\u6587\u6709\u89e3\u91ca\\n-Dkubernetes.taskmanager.annotations=eks.tke.cloud.tencent.com/use-image-cache: imc-6iubofdt\\n-Dkubernetes.jobmanager.annotations=eks.tke.cloud.tencent.com/use-image-cache: imc-6iubofdt  \\n```\\n\\n\u5907\u6ce8\uff1aFlink \u57fa\u7840\u4fe1\u606f\u7684\u53ef\u4ee5\u914d\u7f6e\u5230 conf \u6587\u4ef6\u4e2d\uff0c\u66f4\u591a\u7a0b\u5e8f\u901a\u7528\u7684\u5efa\u8bae\u5728 session \u4e2d\u5199\u597d\uff0cStreamPark \u4e2d\u586b\u5199 \u5e76\u884c\u5ea6/cp/sp/\u5bb9\u9519/main \u53c2\u6570\u7b49\u6bd4\u8f83\u5408\u9002\u3002\\n\\n\u6700\u540e\u542f\u52a8 Session \u96c6\u7fa4\u5373\u53ef\uff0c\u53ef\u4ee5\u901a\u8fc7 kubectl \u547d\u4ee4\u6765\u67e5\u770b Flink kubernetes session \u96c6\u7fa4\u662f\u5426\u6210\u529f\u542f\u52a8\uff1a\\n\\n![](/blog/joymaker/session_cluster.png)\\n\\n### **4.3. \u4efb\u52a1\u914d\u7f6e**\\n\\n\u8fd9\u91cc\u5c06\u7ee7\u7eed\u5c55\u793a\u4f7f\u7528 StreamPark \u63d0\u4ea43\u79cd\u7c7b\u578b\u7684\u4efb\u52a1\uff0c\u5206\u522b\u662f **SQL\u4efb\u52a1\u3001Jar\u4efb\u52a1 \u4ee5\u53ca Application \u6a21\u5f0f\u4efb\u52a1**\u3002\\n\\n- **\u63d0\u4ea4 Flink SQL \u4efb\u52a1**\\n\\nFlink Sql \u4f5c\u4e1a\u7684\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/sql_configuration.png)\\n\\n\u5176\u4e2d\u7684 kubernetes clusterid \u586b\u5199\u5bf9\u5e94\u7684\u9879\u76ee session \u540d\u5c31\u884c\uff1a\\n\\n![](/blog/joymaker/kubernetes_configuration.png)\\n\\n\u52a8\u6001\u53c2\u6570\u914d\u7f6e\u5982\u4e0b\uff1a\\n\\n```shell\\n-Dstate.checkpoints.dir=s3://k8s-bigdata-12xxxxx/flink-checkpoints/ro-cn-sync\\n-Dstate.savepoints.dir=s3://k8s-bigdata-12xxxxxxx/flink-savepoints/ro-cn-sync\\n-Dkubernetes.container.image.pull-policy=Always\\n-Dkubernetes.service-account=flink-service-account\\n-Dexecution.checkpointing.interval=25s\\n-Dexecution.checkpointing.mode=EXACTLY_ONCE\\n-Dtable.local-time-zone=Asia/Shanghai\\n-Drestart-strategy.fixed-delay.attempts=10\\n-Drestart-strategy.fixed-delay.delay=3min  \\n```\\n\\n- **\u63d0\u4ea4 Flink JAR \u4efb\u52a1**\\n\\nJar \u4efb\u52a1\u57fa\u672c\u548c Sql \u4efb\u52a1\u57fa\u672c\u4e00\u6837\uff0c\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/jar_configuration.png)\\n\\n\u52a8\u6001\u53c2\u6570\u5982\u4e0b\uff08\u5982\u679c\u6709\u914d\u7f6e\u6a21\u7248\uff0c\u8fd9\u91cc\u5c31\u53ef\u4ee5\u66f4\u52a0\u7cbe\u7b80\uff0c\u56e0\u4e3a StreamPark \u652f\u6301\u5f88\u597d\u7684\u4efb\u52a1\u590d\u5236\uff0c\u6545\u53ef\u4ee5\u5199\u4e00\u6807\u51c6\u7684 Jar \u548c SQL \u7684\u4efb\u52a1 demo\uff0c\u5269\u4e0b\u4efb\u52a1\u90fd\u91c7\u7528\u590d\u5236\uff0c\u53ef\u5927\u5927\u63d0\u9ad8\u4efb\u52a1\u5f00\u53d1\u6548\u7387\uff09\uff1a\\n\\n```shell\\n-Dstate.checkpoints.dir=s3://k8s-bigdata-1xxxx/flink-checkpoints/ro-cn-shushu\\n-Dstate.savepoints.dir=s3://k8s-bigdata-1xxxx/flink-savepoints/ro-cn-shushu\\n-Dkubernetes.container.image.pull-policy=Always\\n-Dkubernetes.service-account=flink-service-account\\n-Dexecution.checkpointing.interval=60s\\n-Dexecution.checkpointing.mode=EXACTLY_ONCE\\n-Dstate.checkpoints.num-retained=2\\n-Drestart-strategy.type=failure-rate\\n-Drestart-strategy.failure-rate.delay=3min\\n-Drestart-strategy.failure-rate.failure-rate-interval=30min\\n-Drestart-strategy.failure-rate.max-failures-per-interval=8\\n```\\n\\n- **\u63d0\u4ea4 Flink Application \u4efb\u52a1**\\n\\n\u5f53\u7136\u4e5f\u53ef\u4ee5\u90e8\u7f72 Application \u6a21\u5f0f\u7684\u4efb\u52a1\u81f3 Kubernetes\uff0c\u8fd9\u91cc\u8d34\u4e0a\u793a\u4f8b\uff0c\u9996\u5148\u662f\u7b2c\u4e00\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\uff1a\\n\\n![](/blog/joymaker/application_first_configuration.png)\\n\\n\u8fd9\u662f\u7b2c\u4e8c\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/application_second_configuration.png)\\n\\n\u7b2c\u4e09\u90e8\u5206\u7684\u914d\u7f6e\u5185\u5bb9\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/application_third_configuration.png)\\n\\n\u52a8\u6001\u53c2\u6570\uff1a\\n\\n![](/blog/joymaker/dynamic_parameter.png)\\n\\n\u8be6\u7ec6\u7684\u914d\u7f6e\u5185\u5bb9\uff1a\\n\\n```shell\\n-Dcontainerized.master.env.ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar \\n-Dcontainerized.taskmanager.env.ENABLE_BUILT_IN_PLUGINS=flink-s3-fs-hadoop-1.17.2.jar\\n-Dstate.checkpoints.dir=s3://k8s-bigdata-xxx/flink-checkpoints/Kafka2Rocketmq2Kafka\\n-Dstate.savepoints.dir=s3://k8s-bigdata-xxx/flink-savepoints/Kafka2Rocketmq2Kafka\\n-Dkubernetes.container.image.pull-policy=Always\\n-Dkubernetes.service-account=flink-service-account\\n-Dexecution.checkpointing.interval=60s\\n-Dexecution.checkpointing.mode=EXACTLY_ONCE\\n-Dstate.checkpoints.num-retained=2\\n-Drest.port=8092\\n-Dkubernetes.jobmanager.node-selector=usefor:flink\\n-Dkubernetes.taskmanager.node-selector=usefor:flink\\n-Dkubernetes.rest-service.annotations=service.kubernetes.io/qcloud-share-existed-lb:true,service.kubernetes.io/tke-existed-lbid:lb-xxx\\n-Dkubernetes.rest-service.exposed.type=LoadBalancer\\n-Dfs.allowed-fallback-filesystems=s3\\n```\\n\\n### **4.4. \u6784\u5efa\u4efb\u52a1**\\n\\n\u63a5\u7740\u5bf9\u4efb\u52a1\u8fdb\u884c\u6784\u5efa\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5f88\u6e05\u6670\u7684\u770b\u5230\u4efb\u52a1\u6784\u5efa\u7684\u6bcf\u4e00\u6b65\u9aa4\uff1a\\n\\n![](/blog/joymaker/task_construction.png)\\n\\n\u6700\u7ec8\u53ef\u4ee5\u8dd1\u8d77\u6765\u89c2\u5bdf\u5230\u4efb\u52a1\u6b63\u5728\u8fd0\u884c\uff1a\\n\\n![](/blog/joymaker/running.png)\\n\\n### **4.5. \u901a\u77e5\u544a\u8b66\u914d\u7f6e\uff08\u975e\u5fc5\u9009\uff09**\\n\\n\u5f53\u7136 StreamPark \u652f\u6301\u591a\u79cd\u901a\u77e5\u544a\u8b66\u65b9\u5f0f\uff08\u4f8b\u5982\uff1a\u90ae\u7bb1\u548c\u98de\u4e66\u7b49\uff09\uff0c\u6211\u4eec\u4f7f\u7528\u7684\u662f\u90ae\u7bb1\u7684\u65b9\u5f0f\uff0c\u76f4\u63a5\u754c\u9762\u914d\u7f6e\u5373\u53ef\uff1a\\n\\n![](/blog/joymaker/alarm_configuration.png)\\n\\n\u81f3\u6b64\uff0c\u6211\u4eec\u5df2\u7ecf\u5206\u4eab\u4e86\u5982\u4f55\u5728 StremPark \u4e2d\u6210\u529f\u5730\u53bb\u90e8\u7f72\u8fd0\u884c\u5728 kubernetes \u4e0d\u540c\u7c7b\u578b\u7684 Flink\u4efb\u52a1\uff0c\u5341\u5206\u7684\u4e1d\u6ed1\uff01\\n\\n## **5. \u843d\u5730\u5b9e\u8df5 - \u4f5c\u4e1a\u5e94\u7528\u573a\u666f\u7bc7**\\n\\n\u63a5\u4e0b\u6765\uff0c\u7ee7\u7eed\u9488\u5bf9\u4f5c\u4e1a\u8fdb\u884c\u5256\u6790\uff0c\u4ece\u8c03\u4f18\u3001\u5b9e\u64cd\u7b49\u573a\u666f\u4e2d\u8ba9\u6211\u4eec\u66f4\u8fdb\u4e00\u6b65\u5730\u53bb\u4e86\u89e3 Flink \u4efb\u52a1\u7684\u5e94\u7528\u3002\\n\\n### **5.1. \u8c03\u4f18\u5efa\u8bae**\\n\\n**\u5efa\u8bae\u4e00\uff08\u65f6\u533a\uff09**\uff1a\u5bb9\u5668\u4e2d\u9700\u8981\u4ee5utc+8\u65b9\u4fbf\u770b\u65e5\u5fd7\uff0c\u6211\u4eec\u53ef\u4ee5\u5728conf\u914d\u7f6e\u4e2d\u6dfb\u52a0\u5982\u4e0b\uff1a\\n\\n```shell\\nenv.java.opts.jobmanager: -Duser.timezone=GMT+08\\nenv.java.opts.taskmanager: -Duser.timezone=GMT+08\\n```\\n\\n**\u5efa\u8bae\u4e8c\uff08StreamPark\u53d8\u91cf\u7ba1\u7406\uff09**\uff1aStreamPark \u63d0\u4f9b\u53d8\u91cf\u7ba1\u7406\u3001\u8ba9\u6211\u4eec\u53ef\u4ee5\u7ba1\u7406\u4e00\u4e9b\u914d\u7f6e\uff0c\u63d0\u9ad8\u5b89\u5168\u548c\u4fbf\u6377\u6027\uff1a\\n\\n![](/blog/joymaker/variable_management.png)\\n\\n**\u5efa\u8bae\u4e09\uff08StreamPark\u4f20\u53c2\uff09**\uff1a\u5728 on YARN \u4e0a\u4f7f\u7528 Flink\u81ea\u5e26\u7684\u5de5\u5177\u7c7b\u4f20\u53c2\u6570\uff0c\u53c2\u6570\u96be\u4f20\u9012\u5230 Flink \u73af\u5883\u53bb\uff0c\u6211\u4eec\u4e5f\u6ca1\u6df1\u7a76\u3002\u6211\u4eec\u9009\u62e9\u901a\u8fc7 StreamPark \u4f20\u5165\u7a0b\u5e8f\u53c2\u6570\uff0c\u8fd9\u6837\u5728 YARN \u548c kubernetes \u90fd\u53ef\u4ee5\u7528\uff0c**\u540c\u65f6\u5728 kubernetes \u7684 application \u548c session \u65b9\u5f0f\u4e5f\u90fd\u53ef\u4ee5\u7528\uff0c\u53d8\u5f97\u66f4\u52a0\u901a\u7528\u4e14\u6539\u52a8\u65b9\u4fbf\uff0c\u5f3a\u70c8\u63a8\u8350**\uff01\\n\\n![](/blog/joymaker/incoming_parameter.png)\\n\\n**\u5efa\u8bae\u56db\uff08\u4f7f\u7528Session\u6a21\u5f0f\uff09**\uff1a\u5c3d\u7ba1 Yarn-application\u6a21\u5f0f\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u7684\u4efb\u52a1\u9694\u79bb\uff0c\u4f46\u5176\u6bcf\u4e2a\u4efb\u52a1\u90fd\u9700\u8981\u72ec\u7acb\u7684 jobmanager \u8d44\u6e90\uff0c\u8fd9\u5bfc\u81f4\u8d44\u6e90\u6d88\u8017\u8fc7\u9ad8\u3002\u6b64\u5916\uff0c\u5408\u5e76\u4efb\u52a1\u867d\u7136\u53ef\u4ee5\u51cf\u5c11\u8d44\u6e90\u6d88\u8017\uff0c\u4f46\u4f1a\u5e26\u6765\u5de5\u4f5c\u91cf\u5927\u3001\u6570\u636e\u4e0d\u7a33\u5b9a\u7b49\u95ee\u9898\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0csession \u6a21\u5f0f\u5141\u8bb8\u4efb\u52a1\u5728\u4e00\u4e2a session \u4e2d\u5171\u4eab\u4e00\u4e2a jobmanager \u8d44\u6e90\uff0c\u8fd9\u53ef\u4ee5\u6700\u5927\u9650\u5ea6\u5730\u8282\u7ea6\u8ba1\u7b97\u8d44\u6e90\uff0c\u867d\u7136\u5b83\u53ef\u80fd\u5b58\u5728\u5355\u70b9\u95ee\u9898\uff0c\u4f46\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4e24\u4e2a jobmanager \u5b9e\u4f8b\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u6765\u89e3\u51b3\u3002\u66f4\u91cd\u8981\u7684\u662f\uff0csession \u6a21\u5f0f\u8fd8\u53ef\u4ee5\u66f4\u65b9\u4fbf\u5730\u67e5\u770b\u56e0\u4efb\u52a1\u5931\u8d25\u800c\u4ea7\u751f\u7684\u65e5\u5fd7\uff0c\u6709\u52a9\u4e8e\u63d0\u9ad8\u6545\u969c\u8bca\u65ad\u7684\u6548\u7387\u3002\u56e0\u6b64\uff0c\u9274\u4e8e\u5176\u5728\u8d44\u6e90\u5229\u7528\u3001\u9ad8\u53ef\u7528\u6027\u548c\u4efb\u52a1\u6545\u969c\u5904\u7406\u65b9\u9762\u7684\u4f18\u52bf\uff0c\u9009\u62e9 session \u6a21\u5f0f\u6210\u4e3a\u4e86\u4e00\u79cd\u66f4\u4e3a\u7406\u60f3\u7684\u9009\u62e9\u3002\\n\\n### **5.2. \u6570\u636eCDC\u540c\u6b65**\\n\\n**\u3010MySQL \u2192 Doris\u3011**\uff1a\u4e0b\u9762\u4ee3\u7801\u4e3b\u8981\u6f14\u793a\u4e86 **MySQL \u6570\u636e\u540c\u6b65\u81f3 Apache Doris** \u7684 Flink sql \u6d41\u6c34\u7ebf\uff1a\\n\\n```sql\\nCREATE TABLE IF NOT EXISTS `login_log_mysql` (\\n login_log_id      bigint not null,  \\n account_id        bigint ,  \\n long_account_id   string , \\n short_account_id  string , \\n game_code         string , \\n package_code      string , \\n channel_id        int    ,\\n login_at          int    ,  \\n login_ip          string ,    \\n device_ua         string ,\\n device_id         string ,\\n device_net        string ,\\n device_ratio      string , \\n device_os         string ,\\n device_carrier    string ,\\n ext               string ,        \\n created_at        int    ,  \\n updated_at        int    ,  \\n deleted_at        int ,\\n  PRIMARY KEY(`login_log_id`)\\n NOT ENFORCED\\n) with (\\n  'connector' = 'mysql-cdc',\\n  'hostname' = '10.xxx.xxx.xxx',\\n  'port' = '3306',\\n  'username' = 'http_readxxxxx',\\n  'password' = 'xxxx@)',\\n  'database-name' = 'player_user_center',\\n  -- 'scan.startup.mode' = 'latest-offset',\\n  'scan.startup.mode' = 'earliest-offset',\\n  'table-name' = 'login_log_202[3-9][0-9]{2}',\\n  'server-time-zone' = '+07:00'\\n);\\n\\ncreate table if not EXISTS login_log_doris(\\n  `date`    date              ,    \\n   login_log_id    bigint     ,\\n   account_id    bigint       ,\\n   long_account_id    string  ,\\n   short_account_id    string ,\\n   game_code    string        ,\\n  `package_code`    string    ,\\n  `channel_id`    int         ,\\n   login_at     string      ,\\n   login_ip    string         ,\\n   device_ua    string        ,\\n   device_id    string        ,\\n   device_net    string       ,\\n   device_ratio    string     ,\\n   device_os    string        ,\\n   device_carrier    string   ,\\n   ext        string          ,\\n   created_at      string   ,\\n   updated_at      string   ,\\n   deleted_at      string   ,\\n    PRIMARY KEY(`date`,`login_log_id`)\\n NOT ENFORCED\\n) WITH (\\n   'connector' = 'doris',\\n    'jdbc-url'='jdbc:mysql://xxx.xx.xx.xx:9030,xxx.xxx.xxx.xxx:9030,xxx.xxx.xxx.xxx:9030',\\n    'load-url'='xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030',\\n    'database-name' = 'ro_sea_player_user_center',\\n    'table-name' = 'ods_login_log',\\n    'username' = 'root',\\n    'password' = 'root123',\\n    'sink.semantic' = 'exactly-once',\\n    'sink.max-retries' = '10'\\n);\\n\\ncreate view login_log_flink_trans as \\nselect  \\n to_date(cast(to_timestamp_ltz(login_at,0) as varchar) )  , \\n login_log_id     ,  \\n account_id       ,  \\n long_account_id  , \\n short_account_id , \\n game_code        , \\n package_code     , \\n channel_id,\\n cast(to_timestamp_ltz(login_at,0) as varchar) as login_at,\\n login_ip         ,    \\n device_ua        ,\\n device_id        ,\\n device_net       ,\\n device_ratio     , \\n device_os        ,\\n device_carrier   ,\\n ext              ,\\n cast(to_timestamp_ltz(created_at,0) as varchar) as created_at,\\n cast(to_timestamp_ltz(updated_at,0) as varchar) as updated_at,\\n cast(to_timestamp_ltz(deleted_at,0) as varchar) as deleted_at\\nfrom login_log_mysql;\\n\\ninsert into login_log_doris select * from login_log_flink_trans;\\n\\nCREATE TABLE IF NOT EXISTS `account_mysql` (\\n account_id        bigint ,  \\n open_id   string , \\n dy_openid  string , \\n dy_ios_openid  string , \\n ext               string ,        \\n last_channel      int    ,  \\n last_login_time   int    ,  \\n last_login_ip     string ,  \\n created_at        int    ,  \\n updated_at        int    ,  \\n deleted_at        string ,\\n  PRIMARY KEY(`account_id`)\\n NOT ENFORCED\\n) with (\\n  'connector' = 'mysql-cdc',\\n  'hostname' = 'xxx.xx.xx.xx',\\n  'port' = '3306',\\n  'username' = 'http_readxxxx',\\n  'password' = 'xxxxx@)',\\n  'database-name' = 'player_user_center',\\n  -- 'scan.startup.mode' = 'latest-offset',\\n  'scan.startup.mode' = 'earliest-offset',\\n  'table-name' = 'account_[0-9]+',\\n  'server-time-zone' = '+07:00'\\n);\\n\\ncreate table if not EXISTS account_doris(\\n  `date`    date              ,    \\n   account_id    bigint     ,\\n   open_id    string  ,\\n   dy_openid    string ,\\n   dy_ios_openid    string        ,\\n   ext        string          ,\\n  `last_channel`    int         ,\\n   last_login_time     string      ,\\n   last_login_ip    string         ,\\n   created_at      string   ,\\n   updated_at      string   ,\\n   deleted_at      string   ,\\n   PRIMARY KEY(`date`,`account_id`)\\n NOT ENFORCED\\n) WITH (\\n   'connector' = 'doris',\\n    'jdbc-url'='jdbc:mysql://xxx.xx.xx.xx:9030,xxx.xx.xx.xx:9030,xxx.xx.xx.xx:9030',\\n    'load-url'='xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030;xxx.xx.xx.xx:8030',\\n    'database-name' = 'ro_sea_player_user_center',\\n    'table-name' = 'ods_account_log',\\n    'username' = 'root',\\n    'password' = 'root123',\\n    'sink.semantic' = 'exactly-once',\\n    'sink.max-retries' = '10'\\n);\\n\\ncreate view account_flink_trans as \\nselect  \\n to_date(cast(to_timestamp_ltz(created_at,0) as varchar) )  , \\n account_id     ,  \\n open_id  , \\n dy_openid , \\n dy_ios_openid        , \\n ext              ,\\n last_channel,\\ncast(to_timestamp_ltz(last_login_time,0) as varchar) as last_login_time,\\n last_login_ip         ,    \\n cast(to_timestamp_ltz(created_at,0) as varchar) as created_at,\\n cast(to_timestamp_ltz(updated_at,0) as varchar) as updated_at,\\n deleted_at\\nfrom account_mysql;\\n\\ninsert into account_doris select * from account_flink_trans;\\n```\\n\\n**\u3010\u6e38\u620f\u6570\u636e\u540c\u6b65\u3011**\uff1a\u5c06\u6d77\u5916 **filebeat \u91c7\u96c6\u7684 kafka \u6570\u636e\u62c9\u5230\u56fd\u5185 kafka**\uff0c\u5e76\u8fdb\u884c\u5904\u7406\u5143\u6570\u636e\u52a0\u5de5\uff1a\\n\\n```sql\\n--\u521b\u5efahmt \u7684kafka source \u8868\\nCREATE TABLE kafka_in (\\n  `env` STRING comment '\u6e38\u620f\u73af\u5883 hdf  /qc/cbt/obt/prod',\\n  `host` STRING comment '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\\n  `tags` STRING comment '\u65e5\u5fd7\u6807\u7b7e normal | fix',\\n  `log`  STRING comment '\u65e5\u5fd7\u6240\u5728\u6587\u4ef6\u53ca\u504f\u79fb\u91cf',\\n  `topic` STRING METADATA VIRTUAL comment 'kafka\u7684topic',\\n  `partition_id` BIGINT METADATA FROM 'partition' VIRTUAL comment '\u65e5\u5fd7\u6240\u5728\u7684kafka\u5206\u533a', \\n  `offset` BIGINT METADATA VIRTUAL comment 'kafka\u5206\u533a\u7684\u504f\u79fb\u91cf', \\n   `uuid`  STRING comment 'filebeat\u751f\u6210\u7684uuid',\\n  `message` STRING comment 'tlog\u4fe1\u606f',\\n  `@timestamp` STRING comment 'filebeat\u91c7\u96c6\u65f6\u95f4',\\n  `ts` TIMESTAMP(3) METADATA FROM 'timestamp' comment 'kafka\u5b58\u50a8\u6d88\u606f\u65f6\u95f4'\\n) WITH (\\n  'connector' = 'kafka',\\n  'topic' = 'ro_sea_tlog',\\n  'properties.bootstrap.servers' = 'sea-kafka-01:9092,sea-kafka-02:9092,sea-kafka-03:9092',\\n  'properties.group.id' = 'streamx-ro-sea-total',\\n  'properties.client.id' = 'streamx-ro-sea-total',\\n  'properties.session.timeout.ms' = '60000',\\n  'properties.request.timeout.ms' = '60000',\\n  'scan.startup.mode' = 'group-offsets',\\n  --'scan.startup.mode' = 'earliest-offset',\\\\\\n  'properties.fetch.max.bytes' = '123886080',\\n  'properties.max.partition.fetch.bytes' = '50388608',\\n  'properties.fetch.max.wait.ms' = '2000',\\n  'properties.max.poll.records' = '1000',\\n  'format' = 'json',\\n  'json.ignore-parse-errors' = 'false'\\n);\\n\\n--\u521b\u5efaemr \u7684kafka \u6b63\u5f0f\u8868\\nCREATE TABLE kafka_out_sea (\\n`env` STRING comment '\u6e38\u620f\u73af\u5883 qc/cbt/obt/prod',\\n`hostname` STRING comment '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\\n`tags` STRING comment '\u65e5\u5fd7\u6807\u7b7e normal | fix',\\n`log_offset`  STRING comment '\u65e5\u5fd7\u6240\u5728\u6587\u4ef6\u53ca\u504f\u79fb\u91cf',\\n`uuid`  STRING comment 'filebeat\u751f\u6210\u7684uuid',\\n`topic` STRING comment 'kafka\u7684topic',\\n`partition_id` BIGINT comment '\u65e5\u5fd7\u6240\u5728\u7684kafka\u5206\u533a', \\n`kafka_offset` BIGINT comment 'kafka\u5206\u533a\u7684\u504f\u79fb\u91cf', \\n eventname string comment '\u4e8b\u4ef6\u540d',\\n`message` STRING comment 'tlog\u4fe1\u606f',\\n`filebeat_ts` STRING comment 'filebeat\u91c7\u96c6\u65f6\u95f4',\\n`kafka_ts` TIMESTAMP(3) comment 'kafka\u5b58\u50a8\u6d88\u606f\u65f6\u95f4',\\n`flink_ts` TIMESTAMP(3)  comment 'flink\u5904\u7406\u7684\u6d88\u606f\u65f6\u95f4'\\n) WITH (\\n  'connector' = 'kafka',\\n  'topic' = 'ro_sea_tlog',\\n  --'properties.client.id' = 'flinkx-ro-sea-prod-v2',\\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\\n  'format' = 'json',\\n  --'sink.partitioner'= 'fixed',\\n  'sink.delivery-guarantee' = 'exactly-once',\\n  'sink.transactional-id-prefix' = 'ro_sea_kafka_sync_v10',\\n  'properties.compression.type' = 'zstd',\\n  'properties.transaction.timeout.ms' = '600000',\\n  'properties.message.max.bytes' = '13000000',\\n  'properties.max.request.size' = '13048576',\\n  --'properties.buffer.memory' = '83554432',\\n  'properties.acks' = '-1'\\n);\\n\\n--etl \u521b\u5efa\u76ee\u6807\u89c6\u56fe\\ncreate view kafka_sea_in_view  as \\nselect `env`,JSON_VALUE(`host`,'$.name') as hostname,`tags`,`log` as log_offset,`uuid`,\\n       `topic`,`partition_id`,`offset` as kafka_offset,\\n     lower(SPLIT_INDEX(message,'|',0)) as eventname,`message`, \\n     CONVERT_TZ(REPLACE(REPLACE(`@timestamp`,'T',' '),'Z',''), 'UTC', 'Asia/Bangkok') as filebeat_ts, `ts` as kafka_ts ,CURRENT_TIMESTAMP as flink_ts\\nfrom kafka_in;\\n\\n--\u5199\u6570\u636e\u5230emr  sea topic\\ninsert into kafka_out_sea\\nselect * from kafka_sea_in_view ;\\n```\\n\\n**\u3010\u5b9e\u65f6\u6570\u4ed3\u3011**\uff1a\u5206\u6d41 Jar \u7a0b\u5e8f\u548c ods -> dwd sql \u52a0\u5de5\u51fd\u6570\uff0c\u90e8\u5206\u4ee3\u7801\u622a\u56fe\u5982\u4e0b\uff1a\\n\\n![](/blog/joymaker/jar.png)\\n\\n\u4ee5\u53ca\u76f8\u5173\u7684 Flink sql\uff1a\\n\\n```sql\\n--2 dwd_moneyflow_log\\nCREATE TABLE kafka_in_money (\\n`env` STRING   comment '\u6e38\u620f\u73af\u5883 qc/cbt/obt/prod',\\n`hostname` STRING comment '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\\n`uuid` STRING comment '\u65e5\u5fd7\u552f\u4e00id',\\n`message` STRING comment 'tlog\u4fe1\u606f',\\n`filebeat_ts` STRING comment 'filebeat\u91c7\u96c6\u65f6\u95f4'\\n) WITH (\\n  'connector' = 'kafka',\\n  'topic' = 'ro_sea_tlog_split_moneyflow',\\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\\n  'properties.group.id' = 'flinksql_kafka_in_moneyflow_v2',\\n  'scan.startup.mode' = 'group-offsets',\\n  --'scan.startup.mode' = 'earliest-offset',\\n  'properties.isolation.level' = 'read_committed',\\n  'format' = 'json',\\n  'json.ignore-parse-errors' = 'false'\\n);\\n\\nCREATE TABLE kafka_out_money(\\n  `date` string not NULL  COMMENT '\u65e5\u671f',\\n  `vroleid`  int NULL COMMENT '\u89d2\u8272ID',\\n  `moneytype` int NULL  COMMENT '\u8d27\u5e01\u7c7b\u578b', \\n  `env` string NULL COMMENT '\u6e38\u620f\u73af\u5883 hdf  /qc/cbt/obt/prod',\\n  `hostname` string NULL COMMENT '\u65e5\u5fd7\u6240\u5728\u6e38\u620f\u670d\u52a1\u5668',\\n  `uuid`  string NULL COMMENT 'filebeat \u91c7\u96c6\u751f\u6210\u7684uuid',\\n  `filebeat_ts` string NULL COMMENT 'filebeat\u91c7\u96c6\u65f6\u95f4',\\n   flink_ts string NULL COMMENT 'flink\u5199\u5165\u7684\u6d88\u606f\u65f6\u95f4',  \\n  `gamesvrid` int  NULL  COMMENT '\u767b\u5f55\u6e38\u620f\u670d\u52a1\u5668\u7f16\u53f7', \\n  `dteventtime` string NULL  COMMENT  '\u6e38\u620f\u4e8b\u4ef6\u7684\u65f6\u95f4, \u683c\u5f0f YYYY-MM-DD HH:MM:SS', \\n  `vgameappid` string NULL COMMENT  '\u6e38\u620fAPPID', \\n  `platid` int NULL  COMMENT 'ios 0 /android 1', \\n  `izoneareaid` int NULL  COMMENT '\u9488\u5bf9\u5206\u533a\u5206\u670d\u7684\u6e38\u620f\u586b\u5199\u5206\u533aid\uff0c\u7528\u6765\u552f\u4e00\u6807\u793a\u4e00\u4e2a\u533a\uff1b\u975e\u5206\u533a\u5206\u670d\u6e38\u620f\u8bf7\u586b\u51990', \\n  `vopenid` string NULL COMMENT '\u7528\u6237OPENID\u53f7', \\n  `vrolename` string NULL COMMENT '\u89d2\u8272\u59d3\u540d', \\n  `jobid` int  NULL  COMMENT '\u89d2\u8272\u804c\u4e1a   0=\u5deb\u5e08 1=\u2026\u2026', \\n  `gender` int NULL  COMMENT '\u89d2\u8272\u6027\u522b 0=\u7537  1=\u5973', \\n  `ilevel` int NULL  COMMENT '\u89d2\u8272\u57fa\u7840\u7b49\u7ea7', \\n  `ijoblevel` int NULL  COMMENT '\u89d2\u8272\u804c\u4e1a\u7b49\u7ea7', \\n  `playerfriendsnum` int NULL  COMMENT '\u73a9\u5bb6\u597d\u53cb\u6570\u91cf', \\n  `chargegold` int NULL  COMMENT '\u89d2\u8272\u5145\u503c\u7ecf\u5386\uff08\u7d2f\u8ba1\u5145\u503c\uff09',\\n  `iviplevel` int NULL  COMMENT '\u89d2\u8272VIP\u7b49\u7ea7', \\n  `createtime` string NULL  COMMENT  '\u8d26\u53f7\u521b\u5efa\u65f6\u95f4',\\n  `irolece` int NULL  COMMENT '\u6218\u529b/\u8bc4\u5206',\\n  `unionid` int NULL  COMMENT '\u516c\u4f1aID',\\n  `unionname`  string NULL COMMENT '\u516c\u4f1a\u540d\u79f0', \\n  `regchannel` int NULL  COMMENT '\u6ce8\u518c\u6e20\u9053', \\n  `loginchannel` int NULL  COMMENT '\u767b\u5f55\u6e20\u9053', \\n  `sequence` int NULL  COMMENT '\u7528\u4e8e\u5173\u8054\u4e00\u6b21\u52a8\u4f5c\u4ea7\u751f\u591a\u6761\u4e0d\u540c\u7c7b\u578b\u7684\u8d27\u5e01\u6d41\u52a8\u65e5\u5fd7', \\n  `reason` int NULL  COMMENT '\u884c\u4e3a\uff08\u8d27\u5e01\u6d41\u52a8\u4e00\u7ea7\u539f\u56e0\uff09',\\n  `subreason` int NULL  COMMENT '\u6d41\u5411\uff08\u7269\u54c1\u6d41\u5411\u5b9a\u4e49\uff09', \\n  `imoney` int NULL  COMMENT '\u8d27\u5e01\u53d8\u66f4\u6570\u91cf',\\n  `aftermoney` int NULL  COMMENT '\u52a8\u4f5c\u540e\u7684\u91d1\u94b1\u6570',\\n  `afterboundmoney` int NULL  COMMENT '\u52a8\u4f5c\u540e\u7684\u7ed1\u5b9a\u91d1\u94b1\u6570',\\n  `addorreduce` int NULL  COMMENT '\u589e\u52a0\u6216\u51cf\u5c11: 0\u662f\u589e\u52a0; 1\u662f\u51cf\u5c11', \\n  `serialnum` string NULL COMMENT  '\u6d41\u6c34\u53f7', \\n  `sourceid` int NULL  COMMENT '\u6e20\u9053\u53f7', \\n  `cmd` string NULL COMMENT  '\u547d\u4ee4\u5b57', \\n  `orderid` string NULL COMMENT  '\u8ba2\u5355id(\u5305\u542b\u55b5\u679c\u589e\u52a0\u548c\u55b5\u679c\u51cf\u5c11\uff0c\u4e5f\u5305\u542b\u73b0\u91d1\u5145\u503c\u8ba2\u5355id)', \\n  `imoneytype` int NULL  COMMENT '\u8d27\u5e01\u7c7b\u578b2', \\n  `distincid` string NULL COMMENT  '\u8bbf\u5ba2ID', \\n  `deviceuid` string NULL COMMENT  '\u8bbe\u5907ID', \\n  `guildjob` int NULL  COMMENT '\u516c\u4f1a\u804c\u4f4d', \\n  `regtime` string NULL  COMMENT  '\u8d26\u53f7\u6ce8\u518c\u65f6\u95f4'\\n) WITH (\\n   'connector' = 'doris',\\n    'jdbc-url'='jdbc:mysql://xxx:9030,xxx:9030,xxx:9030',\\n    'load-url'='xx:8030;xxx:8030;xxx:8030',\\n    'database-name' = 'ro_sea',\\n    'table-name' = 'dwd_moneyflow_log',\\n    'username' = 'root',\\n    'password' = 'root123',\\n    'sink.semantic' = 'exactly-once'\\n);\\n\\ncreate view kafka_out_money_view1  as \\nselect  IF(to_date(SPLIT_INDEX(message,'|',2)) > CURRENT_DATE + interval '1' day,CURRENT_DATE,to_date(SPLIT_INDEX(message,'|',2))) as `date`,\\n        `env`,`hostname` as hostname,`uuid`,\\n    try_cast(SPLIT_INDEX(message,'|',1) as int) as gamesvrid               ,                                  \\n        SPLIT_INDEX(message,'|',2) as dteventtime             ,                                  \\n        SPLIT_INDEX(message,'|',3) as vgameappid              ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',4) as int) as platid                  ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',5)  as int) as izoneareaid             ,                                  \\n        SPLIT_INDEX(message,'|',6) as vopenid                 ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',7) as int) as vroleid                 ,                                  \\n        SPLIT_INDEX(message,'|',8) as vrolename               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',9)  as int)  as jobid                   ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',10) as int) as gender                  ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',11) as int) as ilevel                  ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',12) as int) as ijoblevel               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',13) as int) as playerfriendsnum        ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',14) as int) as chargegold              ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',15) as int) as iviplevel               ,                                  \\n        SPLIT_INDEX(message,'|',16) as createtime              ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',17) as int)  as irolece                 ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',18) as int) as unionid                 ,                                  \\n        SPLIT_INDEX(message,'|',19) as unionname               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',20) as int) as regchannel              ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',21) as int) as loginchannel            ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',22) as int) as `sequence`                ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',23) as int) as `reason`                 ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',24) as int) as subreason               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',25) as int) as moneytype               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',26) as int) as imoney                  ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',27) as int) as aftermoney              ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',28) as int) as afterboundmoney         ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',29) as int) as addorreduce             ,                                  \\n        SPLIT_INDEX(message,'|',30) as serialnum               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',31) as int) as sourceid                ,                                  \\n        SPLIT_INDEX(message,'|',32) as `cmd`                    ,                                  \\n        SPLIT_INDEX(message,'|',33) as orderid                 ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',34) as int) as imoneytype              ,                                  \\n        SPLIT_INDEX(message,'|',35) as distincid               ,                                  \\n        SPLIT_INDEX(message,'|',36) as deviceuid               ,                                  \\n        try_cast(SPLIT_INDEX(message,'|',37) as int) as guildjob                ,                                  \\n        SPLIT_INDEX(message,'|',38) as regtime ,\\n      filebeat_ts,CURRENT_TIMESTAMP  as flink_ts\\nfrom kafka_in_money;\\n\\ninsert into kafka_out_money\\nselect \\ncast(`date` as varchar) as `date`,\\n`vroleid`,\\n`moneytype`,\\n`env`,\\n`hostname`,\\n`uuid`,\\n`filebeat_ts`,\\ncast(`flink_ts` as varchar) as flink_ts,\\n`gamesvrid`,\\n`dteventtime`,\\n`vgameappid`,\\n`platid`,\\n`izoneareaid`,\\n`vopenid`,\\n`vrolename`,\\n`jobid`,\\n`gender`,\\n`ilevel`,\\n`ijoblevel`,\\n`playerfriendsnum`,\\n`chargegold`,\\n`iviplevel`,\\n`createtime`,\\n`irolece`,\\n`unionid`,\\n`unionname`,\\n`regchannel`,\\n`loginchannel`,\\n`sequence`,\\n`reason`,\\n`subreason`,\\n`imoney`,\\n`aftermoney`,\\n`afterboundmoney`,\\n`addorreduce`,\\n`serialnum`,\\n`sourceid`,\\n`cmd`,\\n`orderid`,\\n`imoneytype`,\\n`distincid`,\\n`deviceuid`,\\n`guildjob`,\\n`regtime`\\nfrom kafka_out_money_view1;\\n```\\n\\n**\u3010\u5e7f\u544a\u7cfb\u7edf\u3011\uff1a\u4f7f\u7528 Flink SQL \u5c06\u4e00\u884c\u65e5\u5fd7\u6570\u636e\u8fdb\u884c\u5207\u5206\u89e3\u6790\u51fa\u5404\u4e2a\u5b57\u6bb5\u7684\u6570\u636e\u5e76\u5b8c\u6210\u4e1a\u52a1\u8ba1\u7b97:**\\n\\n```sql\\nCREATE TABLE IF NOT EXISTS ods_adjust_in (\\n  log STRING\\n) WITH (\\n  'connector' = 'kafka',\\n  'topic' = 'ad_adjust_callback',\\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\\n  'properties.group.id' = 'ods_adjust_etl_20231011',\\n  'properties.max.partition.fetch.bytes' = '4048576',\\n  'scan.startup.mode' = 'group-offsets',\\n  'properties.isolation.level' = 'read_committed',\\n  'format' = 'raw'\\n);\\n\\nCREATE TABLE IF NOT EXISTS ods_af_in (\\n  log STRING\\n) WITH (\\n  'connector' = 'kafka',\\n  'topic' = 'ad_af_callback',\\n  'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\\n  'properties.max.partition.fetch.bytes' = '4048576',\\n  'properties.group.id' = 'ods_af_etl_20231011',\\n  'scan.startup.mode' = 'group-offsets',\\n  'properties.isolation.level' = 'read_committed',\\n  'format' = 'raw'\\n);\\n\\nCREATE TABLE IF NOT EXISTS ods_mmp_out (\\n  `date` DATE,\\n  `mmp_type` STRING,\\n  `app_id` STRING,\\n  `event_name` STRING,\\n  `event_time` TIMESTAMP(3),\\n  `mmp_id` STRING,\\n  `distinct_id` STRING,\\n  `open_id` STRING,\\n  `account_id` STRING, \\n  `os_name` STRING, -- platform\\n  `country_code` STRING,\\n  `install_time` TIMESTAMP(3),\\n  `bundle_id` STRING,\\n  `media` STRING,\\n  `channel` STRING,\\n  `campaign` STRING,\\n  `campaign_id` STRING,\\n  `adgroup` STRING,\\n  `adgroup_id` STRING,\\n  `ad` STRING,\\n  `ad_id` STRING,\\n  `flink_ts` TIMESTAMP(3) comment 'flink\u5904\u7406\u7684\u6d88\u606f\u65f6\u95f4',\\n  `device_properties` STRING,\\n  `log` STRING\\n) WITH (\\n    'connector' = 'kafka',\\n    'topic' = 'ods_mmp_log',\\n    'properties.bootstrap.servers' = 'emr_kafka1:9092,emr_kafka2:9092,emr_kafka3:9092',\\n    'scan.topic-partition-discovery.interval'='60000',\\n    'properties.group.id' = 'mmp2etl-out',\\n    'format' = 'json'\\n);\\n\\nINSERT INTO ods_mmp_out\\nSELECT\\n   `date`\\n  ,'Adjust' as `mmp_type`\\n  ,`app_token` as `app_id`\\n  ,`event_name`\\n  ,`event_time`\\n  ,`adid` as `mmp_id`\\n  ,`distinct_id`\\n  ,`open_id`\\n  ,`account_id`\\n  ,`os_name`\\n  ,`country_code`\\n  ,`install_time`\\n  ,'' as `bundle_id`\\n  ,'' as `media`\\n  ,`network` as `channel`\\n  ,`campaign`\\n  ,REGEXP_EXTRACT(`campaign`, '([\\\\\\\\(=])([a-z0-9]+)', 2) as `campaign_id`\\n  ,`adgroup`\\n  ,REGEXP_EXTRACT(`adgroup`, '([\\\\\\\\(=])([a-z0-9]+)', 2) as `adgroup_id`\\n  ,`creative` as `ad`\\n  ,REGEXP_EXTRACT(`creative`, '([\\\\\\\\(=])([a-z0-9]+)', 2) as `ad_id`\\n  ,`flink_ts`\\n  ,`device_properties`\\n  ,`log`\\nFROM (\\n  SELECT\\n     to_date(FROM_UNIXTIME(cast(JSON_VALUE(log,'$.created_at') as bigint))) as `date`\\n    ,JSON_VALUE(log,'$.app_token') as `app_token`\\n    ,JSON_VALUE(log,'$.adid') as `adid`\\n    ,LOWER(REPLACE( TRIM( COALESCE(JSON_VALUE(log,'$.event_name'), JSON_VALUE(log,'$.activity_kind')) ), ' ', '_')) as `event_name`\\n    ,TO_TIMESTAMP(FROM_UNIXTIME(cast(JSON_VALUE(log,'$.created_at') as bigint))) as `event_time`\\n    ,TO_TIMESTAMP(FROM_UNIXTIME(cast(JSON_VALUE(log,'$.installed_at') as bigint))) as `install_time`\\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN COALESCE(JSON_VALUE(log,'$.fb_install_referrer_publisher_platform'),'facebook') ELSE JSON_VALUE(log,'$.network_name') END) AS `network`\\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN (concat(JSON_VALUE(log,'$.fb_install_referrer_campaign_group_name'), '(', JSON_VALUE(log,'$.fb_install_referrer_campaign_group_id'), ')')) ELSE JSON_VALUE(log,'$.campaign_name') END) AS `campaign`\\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN (concat(JSON_VALUE(log,'$.fb_install_referrer_campaign_name'), '(', JSON_VALUE(log,'$.fb_install_referrer_campaign_id'), ')')) ELSE JSON_VALUE(log,'$.adgroup_name') END) AS `adgroup`\\n    ,LOWER(CASE WHEN (JSON_VALUE(log,'$.network_name') = 'Unattributed') THEN (concat(JSON_VALUE(log,'$.fb_install_referrer_adgroup_name'), '(', JSON_VALUE(log,'$.fb_install_referrer_adgroup_id'), ')')) ELSE JSON_VALUE(log,'$.creative_name') END) AS `creative`\\n    ,JSON_VALUE(log,'$.os_name') as `os_name`\\n    ,JSON_VALUE(log,'$.country_code') as `country_code`\\n    ,JSON_VALUE(JSON_VALUE(log,'$.publisher_parameters'), '$.ta_distinct_id') as `distinct_id`\\n    ,JSON_VALUE(JSON_VALUE(log,'$.publisher_parameters'), '$.open_id') as `open_id`\\n    ,JSON_VALUE(JSON_VALUE(log,'$.publisher_parameters'), '$.ta_account_id') as `account_id`\\n    ,CURRENT_TIMESTAMP as `flink_ts`\\n    ,JSON_OBJECT(\\n       'ip' VALUE JSON_VALUE(log,'$.ip')\\n      ,'ua' VALUE JSON_VALUE(log,'$.ua')\\n      ,'idfa' VALUE JSON_VALUE(log,'$.idfa')\\n      ,'idfv' VALUE JSON_VALUE(log,'$.idfv')\\n      ,'gps_adid' VALUE JSON_VALUE(log,'$.gps_adid')\\n      ,'android_id' VALUE JSON_VALUE(log,'$.android_id')\\n      ,'mac_md5' VALUE JSON_VALUE(log,'$.mac_md5')\\n      ,'oaid' VALUE JSON_VALUE(log,'$.oaid')\\n      ,'gclid' VALUE JSON_VALUE(log,'$.gclid')\\n      ,'gbraid' VALUE JSON_VALUE(log,'$.gbraid')\\n      ,'dcp_wbraid' VALUE JSON_VALUE(log,'$.dcp_wbraid')\\n    ) as `device_properties`\\n    ,`log`\\n  FROM ods_adjust_in \\n  WHERE COALESCE(JSON_VALUE(log,'$.activity_kind'), JSON_VALUE(log,'$.event_name')) not in ('impression', 'click')\\n)\\nUNION ALL \\nSELECT\\n  to_date(CONVERT_TZ(JSON_VALUE(log,'$.event_time'), 'UTC', 'Asia/Shanghai')) as `date`\\n  ,'AppsFlyer' as `mmp_type`\\n  ,JSON_VALUE(log,'$.app_id') as `app_id`\\n  ,LOWER(REPLACE( TRIM(JSON_VALUE(log,'$.event_name') ), ' ', '-')) as `event_name`\\n  ,TO_TIMESTAMP(CONVERT_TZ(JSON_VALUE(log,'$.event_time'), 'UTC', 'Asia/Shanghai')) as `event_time`\\n  ,JSON_VALUE(log,'$.appsflyer_id') as `mmp_id`\\n  ,JSON_VALUE(JSON_VALUE(log,'$.custom_data'), '$.ta_distinct_id') as `distinct_id`\\n  ,JSON_VALUE(JSON_VALUE(log,'$.custom_data'), '$.open_id') as `open_id`\\n  ,JSON_VALUE(JSON_VALUE(log,'$.custom_data'), '$.ta_account_id') as `account_id`\\n  ,LOWER(JSON_VALUE(log,'$.platform')) AS `os_name`\\n  ,LOWER(JSON_VALUE(log,'$.country_code')) as `country_code`\\n  ,TO_TIMESTAMP(CONVERT_TZ(JSON_VALUE(log,'$.install_time'), 'UTC', 'Asia/Shanghai')) as `install_time`\\n  ,LOWER(JSON_VALUE(log,'$.bundle_id')) AS `bundle_id`\\n  ,LOWER(JSON_VALUE(log,'$.media_source')) AS `media`\\n  ,LOWER(JSON_VALUE(log,'$.af_channel')) AS `channel`\\n  ,CONCAT(LOWER(JSON_VALUE(log,'$.campaign')), ' (', LOWER(JSON_VALUE(log,'$.af_c_id')), ')') AS `campaign`\\n  ,LOWER(JSON_VALUE(log,'$.af_c_id')) AS `campaign_id`\\n  ,CONCAT(LOWER(JSON_VALUE(log,'$.af_adset')), ' (', LOWER(JSON_VALUE(log,'$.af_adset_id')), ')') AS `adgroup`\\n  ,LOWER(JSON_VALUE(log,'$.af_adset_id')) AS `adgroup_id`\\n  ,CONCAT(LOWER(JSON_VALUE(log,'$.af_ad')), ' (', LOWER(JSON_VALUE(log,'$.af_ad_id')), ')') AS `ad`\\n  ,LOWER(JSON_VALUE(log,'$.af_ad_id')) AS `ad_id`\\n  ,CURRENT_TIMESTAMP as `flink_ts`\\n  ,JSON_OBJECT(\\n     'ip' VALUE JSON_VALUE(log,'$.ip')\\n    ,'ua' VALUE JSON_VALUE(log,'$.user_agent')\\n    ,'idfa' VALUE JSON_VALUE(log,'$.idfa')\\n    ,'idfv' VALUE JSON_VALUE(log,'$.idfv')\\n    ,'gps_adid' VALUE JSON_VALUE(log,'$.advertising_id')\\n    ,'android_id' VALUE JSON_VALUE(log,'$.android_id')\\n    ,'oaid' VALUE JSON_VALUE(log,'$.oaid')\\n  ) as `device_properties`\\n  ,`log`\\nFROM ods_af_in;\\n```\\n\\n**\u6570\u636e\u4e0a\u62a5**\uff1a\u7c7b\u4f3c\u4e8e\u795e\u7b56\\n\\n![](/blog/joymaker/data_reporting.png)\\n\\n## **6.  \u843d\u5730\u5b9e\u8df5 - \u817e\u8baf\u4e91\u73af\u5883\u7bc7**\\n\\n\u672c\u6587\u7684 Flink \u4efb\u52a1\u662f\u8fd0\u884c\u5728\u817e\u8baf\u7684 kubernetes \u73af\u5883\uff0c\u5176\u4e2d\u5305\u62ec\u4e00\u4e9b\u76f8\u5173\u7684\u77e5\u8bc6\u70b9\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u8be6\u8ff0\u4e86\uff0c\u4f8b\u5982\uff1a\\n\\n- **\u955c\u50cf\u540c\u6b65**\uff1aharbor \u914d\u7f6e\u81ea\u52a8\u540c\u6b65\u955c\u50cf\u5230\u817e\u8baf\u4e91\u955c\u50cf\u670d\u52a1 TCR \u4e2d\u3002\\n\\n- **\u955c\u50cf\u914d\u7f6e**\uff1a\u5982\u514d\u5bc6\u62c9\u53d6\u3001\u7f13\u5b58\u52a0\u901f\u3002\\n\\n- **Flink webui \u5916\u7f51\u8bbf\u95ee**\uff1a\u9700\u8981\u4ece\u5916\u7f51lb\u8d2d\u4e70\u4ee5\u4fbf\u4e8e\u8bbf\u95ee Flink UI\u3002\\n\\n- **\u73af\u5883\u6253\u901a**\uff1a\u56e0\u4e3a kubernetes \u96c6\u7fa4\u4e3b\u8981\u662f\u4e00\u4e2a\u504f\u5c01\u95ed\u7684\u5185\u7f51\u8ba1\u7b97\u73af\u5883\u3001\u4e0e\u5404\u7cfb\u7edf\u7f51\u7edc\u3001\u5b89\u5168\u7ec4\u3001\u6743\u9650\u3001\u8def\u7531\u7b49\u90fd\u9700\u8981\u5f88\u597d\u7684\u914d\u7f6e\u548c\u6d4b\u8bd5\uff0c\u624d\u80fd\u8ba9\u4efb\u52a1\u771f\u6b63\u6bd4\u8f83\u597d\u7684\u8dd1\u5728\u8be5\u751f\u4ea7\u73af\u5883\u3002\\n\\n- **\u5b89\u5168\u7ec4\u914d\u7f6e**\uff1a\u4e3a\u4e86\u5b9e\u73b0\u6d77\u5916\u6e38\u620f\u5b9e\u65f6\u6570\u636e\u7684\u62c9\u53d6\u5904\u7406\u548c\u5199\u5165\u56fd\u5185 Kafka \u96c6\u7fa4\uff0c\u786e\u4fdd\u6570\u636e\u6d41\u7a0b\u7684\u5e73\u7a33\uff0c\u6211\u4eec\u4f7f\u7528\u4e13\u7ebf\u5e76\u4e14\u901a\u8fc7\u7ed9 kubernetes Flink\u8d85\u7ea7\u8282\u70b9\u5f00\u901a\u4e13\u7ebf\u5916\u7f51\u8bbf\u95ee\u6743\u6765\u5b9e\u73b0\u3002\\n\\n**\u76f8\u5173\u622a\u56fe**\uff1a\\n\\n![](/blog/joymaker/cloud_environment.png)\\n\\n![](/blog/joymaker/instance_management.png)\\n\\n## **7.  \u6536\u76ca\u4e0e\u671f\u671b**\\n\\n**\u4f7f\u7528 Apache StreamPark \u4e4b\u540e\uff0c\u7ed9\u6211\u4eec\u6700\u5927\u7684\u611f\u53d7\u5c31\u662f StreamPark \u7528\u8d77\u6765\u5341\u5206\u5730\u7b80\u5355\uff0c\u901a\u8fc7\u7b80\u5355\u7684\u914d\u7f6e\u5c31\u80fd\u5f88\u5feb\u5730\u628a Flink \u4efb\u52a1\u90e8\u7f72\u5230\u4efb\u610f\u7684\u96c6\u7fa4\uff0c\u4e14\u53ef\u4ee5\u5b9e\u65f6\u7684\u53bb\u76d1\u63a7\u5e76\u7ba1\u7406\u6210\u5343\u4e0a\u4e07\u7684\u4f5c\u4e1a\uff0c\u5341\u5206\u7684 nice\uff01\u6536\u76ca\u5982\u4e0b\uff1a**\\n\\n- \u5927\u91cf\u7684\u5b9e\u65f6\u4efb\u52a1\u901a\u8fc7 StreamPark \u5f88\u5feb\u901f\u5730\u5c31\u8fc1\u79fb\u5230\u4e86 Kubernetes\uff0c\u4e0b\u6389 YARN \u540e\uff0c\u65e9\u671f\u6df7\u90e8\u7684 Apache Doris \u96c6\u7fa4\u6ca1\u6709\u8d44\u6e90\u4e89\u62a2\u540e\uff0c\u53d8\u5f97\u5341\u5206\u7a33\u5b9a\u3002\\n\\n- \u8865\u6570\u636e\u65f6\uff0c\u53ef\u5feb\u901f\u501f\u7528 TKE \u4e2d\u8d85\u7ea7\u8282\u70b9\u7684\u80fd\u529b\uff0c\u901a\u8fc7 StreamPark \u5e73\u53f0\uff0c\u5f88\u5bb9\u6613\u8fdb\u884c\u4e0a\u5343\u4e2a pod \u7684\u4e00\u5206\u949f\u5f39\u7f29\uff0c\u8865\u6570\u7279\u522b\u9ad8\u6548\u3002\\n\\n- \u6280\u672f\u6808\u53d8\u5f97\u66f4\u52a0\u5148\u8fdb\u548c\u7edf\u4e00\u3002\u5927\u6570\u636e\u65f6\u4ee3\u7684\u4e00\u5806\u7ec4\u4ef6\uff0c\u53d8\u7684\u8d8a\u6765\u8d8a\u9ad8\u6548\u548c\u7edf\u4e00\u3002\u76ee\u524d\u6b22\u4e50\u5927\u6570\u636e\u5df2\u7ecf\u5b8c\u6210\u4e86 Doris\u3001Flink\u3001Spark\u3001Hive\u3001Grafana\u3001Prometheus \u7b49\u4e00\u7cfb\u5217\u7ec4\u4ef6\u7684 Kubernetes \u4e91\u539f\u751f\u5316\uff0c\u8fd0\u7ef4\u8d77\u6765\u66f4\u52a0\u7b80\u5355\u548c\u9ad8\u6548\uff0cStreamPark \u5728 Flink \u5bb9\u5668\u5316\u8fdb\u7a0b\u4e2d\u8d77\u5230\u4e86\u5f88\u5927\u7684\u4f5c\u7528\u3002\\n\\n- StreamPark \u5e73\u53f0\u64cd\u4f5c\u7b80\u5355\u3001\u529f\u80fd\u5b8c\u5907\u3001\u6027\u80fd\u7a33\u5b9a\u3001\u793e\u533a\u54cd\u5e94\u79ef\u6781\uff0c\u771f\u6b63\u8ba9\u6d41\u5904\u7406\u4f5c\u4e1a\u5f00\u53d1\u8d8a\u6765\u8d8a\u7b80\u5355\uff0c\u4e3a\u6211\u4eec\u5e26\u6765\u4e86\u5f88\u591a\u4fbf\u5229\uff0c\u8ba9\u6211\u4eec\u66f4\u52a0\u4e13\u6ce8\u4e8e\u4e1a\u52a1\uff0c\u70b9\u8d5e~\\n\\n\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4e5f\u671f\u671b StreamPark \u80fd\u505a\u5f97\u8d8a\u6765\u8d8a\u597d\uff0c\u8fd9\u91cc\u63d0\u51fa\u4e86\u4e00\u4e9b\u4f18\u5316\u7684\u5efa\u8bae\uff1a\\n\\n- **\u652f\u6301 Operator \u90e8\u7f72**\uff1a\u671f\u671b Flink on kubernetes \u652f\u6301 operator \u90e8\u7f72\u65b9\u5f0f\uff0c\u56e0\u4e3a\u5176\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8d44\u6e90\u7c7b\u578b\u3001\u6307\u5b9a\u8c03\u7528\u987a\u5e8f\u3001\u76d1\u63a7\u6307\u6807\u7b49\u7b49\u597d\u5904\u3002\\n\\n- **\u652f\u6301 autoscaler**\uff1a\u56e0\u4e3a\u5b9e\u65f6\u6d41\u4efb\u52a1\u6709\u4e1a\u52a1\u9ad8\u5cf0\u548c\u6ce2\u8c37\u3001\u7279\u522b\u5468\u4e48\u6d3b\u52a8\u3001\u6570\u636e\u91cf\u7ffb\u500d\u3001\u4eba\u4e3a\u5468\u671f\u6027\u8c03\u6574\u5e76\u884c\u5ea6\u4e0d\u662f\u5f88\u5408\u9002\u3002\u6545\u7ed3\u5408 Kubernetes\u3001\u671f\u5f85 StreamPark \u65e9\u65e5\u5b8c\u6210 operator \u65b9\u5f0f\u521b\u5efa Flink \u96c6\u7fa4\u3001\u5728 Flink 1.17\u4ee5\u4e0a\u3001\u5c31\u53ef\u4ee5\u6bd4\u8f83\u597d\u7684\u8bbe\u7f6e\u9608\u503c\u3001\u5229\u7528\u81ea\u52a8\u5f39\u7f29\u3001\u5b9e\u73b0\u9ad8\u5cf0\u671f\u5f39\u66f4\u591a\u8d44\u6e90\u5904\u7406\u6570\u636e\u3001\u4f4e\u8c37\u671f\u6536\u7f29\u8d44\u6e90\u8282\u7ea6\u6210\u672c\u3001\u975e\u5e38\u671f\u5f85\u3002\\n\\n- **\u7a0b\u5e8f\u62a5\u9519\u903b\u8f91**\uff1a\u5f53\u524d Flink \u4efb\u52a1\u8bbe\u7f6e\u4e86\u56fa\u5b9a\u6b21\u6570\u6216\u8005\u6bd4\u7387\u91cd\u8bd5\uff0c\u4f46\u5f53\u524d StreamPark \u90ae\u4ef6\u544a\u8b66\u7279\u522b\u9891\u7e41\u3001\u4e0d\u662f\u671f\u5f85\u7684\u4efb\u52a1\u5931\u8d25\u4e00\u6b21\u8fdb\u884c\u4e00\u6b21\u544a\u8b66\uff0c\u6545\u5e0c\u671b\u5176\u8fdb\u4e00\u6b65\u63d0\u5347\u3002\\n\\n\u6700\u540e\uff0c\u6211\u4eec\u8877\u5fc3\u5730\u611f\u8c22 **Apache StreamPark** \u793e\u533a\u5728\u6211\u4eec\u4f7f\u7528 StreamPark \u65f6\u63d0\u4f9b\u7684\u65e0\u79c1\u5e2e\u52a9\u3002\u4ed6\u4eec\u4e13\u4e1a\u7684\u670d\u52a1\u7cbe\u795e\u548c\u4ee5\u7528\u6237\u4e3a\u672c\u7684\u6001\u5ea6\uff0c\u4f7f\u6211\u4eec\u5f97\u4ee5\u66f4\u52a0\u9ad8\u6548\u3001\u6d41\u7545\u5730\u8fd0\u7528\u8fd9\u4e00\u5f3a\u5927\u6846\u67b6\u3002\u671f\u671b StreamPark \u8d8a\u6765\u8d8a\u597d\uff0c\u6210\u4e3a\u65b0\u664b Apache \u9879\u76ee\u7684\u5178\u8303\uff01\"},{\"id\":\"streampark-usercase-chinaunion\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-chinaunion\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/2-streampark-usercase-chinaunion.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/2-streampark-usercase-chinaunion.md\",\"title\":\"\u8054\u901a Flink \u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5316\u8fd0\u7ef4\u5b9e\u8df5\",\"description\":\"\u6458\u8981\uff1a\u672c\u6587\u6574\u7406\u81ea\u8054\u901a\u6570\u79d1\u5b9e\u65f6\u8ba1\u7b97\u56e2\u961f\u8d1f\u8d23\u4eba\u3001Apache StreamPark Committer \u7a46\u7eaf\u8fdb\u5728 Flink Forward Asia 2022 \u5e73\u53f0\u5efa\u8bbe\u4e13\u573a\u7684\u5206\u4eab\uff0c\u672c\u7bc7\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u56db\u4e2a\u90e8\u5206\uff1a\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"}],\"readingTime\":22.835,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-chinaunion\",\"title\":\"\u8054\u901a Flink \u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5316\u8fd0\u7ef4\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"FlinkSQL\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 \u5728\u6b22\u4e50\u4e92\u5a31\u7684\u4e91\u539f\u751f\u5e73\u53f0\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-joymaker\"},\"nextItem\":{\"title\":\"\u6d77\u7a0b\u90a6\u8fbe\u57fa\u4e8e Apache Paimon + Apache StreamPark\u2122 \u7684\u6d41\u5f0f\u6570\u4ed3\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-bondex-with-paimon\"}},\"content\":\"**\u6458\u8981\uff1a**\u672c\u6587\u6574\u7406\u81ea\u8054\u901a\u6570\u79d1\u5b9e\u65f6\u8ba1\u7b97\u56e2\u961f\u8d1f\u8d23\u4eba\u3001Apache StreamPark Committer \u7a46\u7eaf\u8fdb\u5728 Flink Forward Asia 2022 \u5e73\u53f0\u5efa\u8bbe\u4e13\u573a\u7684\u5206\u4eab\uff0c\u672c\u7bc7\u5185\u5bb9\u4e3b\u8981\u5206\u4e3a\u56db\u4e2a\u90e8\u5206\uff1a\\n\\n- \u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u80cc\u666f\u4ecb\u7ecd\\n- Flink \u5b9e\u65f6\u4f5c\u4e1a\u8fd0\u7ef4\u6311\u6218\\n- \u57fa\u4e8e StreamPark \u4e00\u4f53\u5316\u7ba1\u7406\\n- \u672a\u6765\u89c4\u5212\u4e0e\u6f14\u8fdb\\n\\n\x3c!-- truncate --\x3e\\n\\n## **\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u80cc\u666f\u4ecb\u7ecd**\\n\\n![](/blog/chinaunion/overall_architecture.png)\\n\\n\\n\\n\u4e0a\u56fe\u662f\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u7684\u6574\u4f53\u67b6\u6784\uff0c\u6700\u5e95\u5c42\u662f\u6570\u636e\u6e90\uff0c\u7531\u4e8e\u4e00\u4e9b\u654f\u611f\u4fe1\u606f\uff0c\u6ca1\u6709\u5c06\u6570\u636e\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\u5217\u51fa\uff0c\u5b83\u4e3b\u8981\u5305\u542b\u4e09\u90e8\u5206\uff0c\u5206\u522b\u662f\u4e1a\u52a1\u6570\u636e\u5e93\u3001\u7528\u6237\u884c\u4e3a\u65e5\u5fd7\u3001\u7528\u6237\u4f4d\u7f6e\uff0c\u8054\u901a\u7684\u6570\u636e\u6e90\u975e\u5e38\u591a\uff0c\u4e1a\u52a1\u6570\u636e\u5e93\u8fd9\u4e00\u9879\u5c31\u6709\u51e0\u4e07\u5f20\u8868\uff1b\u4e3b\u8981\u901a\u8fc7 Flink SQL \u548c DataStream API \u6765\u5904\u7406\u6570\u636e \uff0c\u6570\u636e\u5904\u7406\u6d41\u7a0b\u5305\u62ec Flink \u5bf9\u6570\u636e\u6e90\u7684\u5b9e\u65f6\u89e3\u6790\u3001\u89c4\u5219\u7684\u5b9e\u65f6\u8ba1\u7b97\u4ee5\u53ca\u5b9e\u65f6\u4ea7\u54c1\uff1b\u7528\u6237\u5728\u53ef\u89c6\u5316\u8ba2\u9605\u5e73\u53f0\u4e0a\u8fdb\u884c\u5b9e\u65f6\u6570\u636e\u8ba2\u9605\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u5730\u56fe\u4e0a\u753b\u4e00\u4e2a\u7535\u5b50\u56f4\u680f\uff0c\u5e76\u8bbe\u7f6e\u4e00\u4e9b\u89c4\u5219\uff0c\u5982\u6765\u81ea\u4e8e\u54ea\u91cc\uff0c\u5728\u56f4\u680f\u91cc\u9a7b\u7559\u591a\u957f\u65f6\u95f4\u7b49\uff0c\u8fd8\u53ef\u4ee5\u7b5b\u9009\u4e00\u4e9b\u7279\u5f81\uff0c\u7b26\u5408\u8fd9\u4e9b\u89c4\u5219\u7684\u7528\u6237\u4fe1\u606f\u4f1a\u5b9e\u65f6\u8fdb\u884c\u63a8\u9001\uff0c\u7136\u540e\u662f\u5b9e\u65f6\u5b89\u5168\u90e8\u5206\uff0c\u5f53\u67d0\u4e2a\u7528\u6237\u8fde\u63a5\u4e86\u9ad8\u5371\u57fa\u7ad9\u6216\u662f\u6709\u5f02\u5e38\u64cd\u4f5c\u884c\u4e3a\u65f6\uff0c\u6211\u4eec\u4f1a\u8ba4\u4e3a\u53ef\u80fd\u5b58\u5728\u8bc8\u9a97\u884c\u4e3a\uff0c\u4f1a\u5bf9\u624b\u673a\u53f7\u7801\u8fdb\u884c\u5173\u505c\u7b49\u7b49\uff0c\u8fd8\u6709\u7528\u6237\u7684\u4e00\u4e9b\u5b9e\u65f6\u7279\u5f81\u4ee5\u53ca\u5b9e\u65f6\u5927\u5c4f\u3002\\n\\n\\n\\n![](/blog/chinaunion/data_processing_processes.png)\\n\\n\u4e0a\u56fe\u662f\u6570\u636e\u5904\u7406\u7684\u8be6\u7ec6\u7684\u6d41\u7a0b\u3002\\n\\n\u7b2c\u4e00\u90e8\u5206\u662f\u91c7\u96c6\u89e3\u6790\uff0c\u6211\u4eec\u7684\u6570\u636e\u6e90\u6765\u81ea\u4e8e\u4e1a\u52a1\u7684\u6570\u636e\u5e93\uff0c\u5305\u542b OGG \u548c DTS \u683c\u5f0f\u7684\u6d88\u606f\u3001\u65e5\u5fd7\u6d88\u606f\u3001\u7528\u6237\u884c\u4e3a\u548c\u7528\u6237\u4f4d\u7f6e\u6570\u636e\uff0c\u603b\u5171 50 \u591a\u79cd\u6570\u636e\u6e90\uff0c\u540e\u7eed\u8fd8\u4f1a\u9010\u6e10\u589e\u52a0\uff0c\u6240\u6709\u6570\u636e\u6e90\u5747\u4f7f\u7528 Flink \u505a\u5b9e\u65f6\u89e3\u6790\uff1b\u5e76\u589e\u52a0\u4e86 Metrics \u6765\u76d1\u63a7\u6570\u636e\u6e90\u7684\u5ef6\u8fdf\u60c5\u51b5\u3002\\n\\n\u7b2c\u4e8c\u90e8\u5206\u662f\u5b9e\u65f6\u8ba1\u7b97\uff0c\u8fd9\u4e2a\u73af\u8282\u5904\u7406\u7684\u6570\u636e\u91cf\u5f88\u5927\uff0c\u6570\u636e\u91cf\u5728\u4e07\u4ebf\u7ea7\u522b\uff0c\u652f\u6491\u4e86 10000+\u7684\u6570\u636e\u5b9e\u65f6\u8ba2\u9605\uff0c\u6709 200 \u591a\u4e2a Flink \u4efb\u52a1\uff0c\u6211\u4eec\u5c06\u67d0\u4e00\u79cd\u540c\u7c7b\u578b\u7684\u4e1a\u52a1\u5c01\u88c5\u6210\u4e00\u79cd\u573a\u666f\uff0c\u540c\u4e00\u4e2a Flink \u4f5c\u4e1a\u53ef\u4ee5\u652f\u6301\u76f8\u540c\u573a\u666f\u7684\u591a\u4e2a\u8ba2\u9605\uff0c\u76ee\u524d Flink \u4f5c\u4e1a\u6570\u8fd8\u5728\u4e0d\u505c\u7684\u589e\u957f\uff0c\u540e\u7eed\u53ef\u80fd\u4f1a\u589e\u52a0\u5230 500 \u591a\u4e2a\uff1b\u5176\u4e2d\u9762\u4e34\u7684\u4e00\u4e2a\u5f88\u5927\u6311\u6218\u662f\u6bcf\u5929\u4e07\u4ebf\u7ea7\u7684\u6570\u636e\u5b9e\u65f6\u5173\u8054\u7535\u5b50\u56f4\u680f\u3001\u7528\u6237\u7279\u5f81\u7b49\u4fe1\u606f\uff0c\u7535\u5b50\u56f4\u680f\u6709\u51e0\u4e07\u4e2a\uff0c\u7528\u6237\u7279\u5f81\u6d89\u53ca\u6570\u4ebf\u7528\u6237\uff0c\u6700\u521d\u6211\u4eec\u5c06\u7535\u5b50\u56f4\u680f\u4fe1\u606f\u548c\u7528\u6237\u7279\u5f81\u653e\u5230 HBase\uff0c\u4f46\u8fd9\u6837\u4f1a\u5bfc\u81f4 HBase \u538b\u529b\u5f88\u5927\uff0c\u7ecf\u5e38\u9047\u5230\u6027\u80fd\u95ee\u9898\u9020\u6210\u6570\u636e\u5ef6\u8fdf\uff0c\u800c\u4e14\u4e00\u65e6\u4ea7\u751f\u6570\u636e\u79ef\u538b\uff0c\u9700\u8981\u5f88\u957f\u7684\u65f6\u95f4\u53bb\u6d88\u5316\uff0c\u5f97\u76ca\u4e8e Flink State \u7684\u5f3a\u5927\uff0c\u6211\u4eec\u5c06\u7535\u5b50\u56f4\u680f\u4fe1\u606f\u548c\u7528\u6237\u7279\u5f81\u653e\u5230\u72b6\u6001\u91cc\uff0c\u76ee\u524d\u5df2\u7ecf\u5f88\u597d\u7684\u652f\u6491\u4e86\u5927\u5e76\u53d1\u7684\u573a\u666f\uff0c\u540c\u65f6\u6211\u4eec\u4e5f\u589e\u52a0\u4e86\u6570\u636e\u5904\u7406\u7684\u6027\u80fd\u76d1\u63a7\uff1b\u6700\u540e\u662f\u5b9e\u65f6\u4ea7\u54c1\u548c\u8425\u9500\u89e6\u8fbe\u524d\u7aef\u7684\u4e00\u4e9b\u5e94\u7528\u3002\\n\\n![](/blog/chinaunion/platform_evolution.png)\\n\\n2018 \u5e74\u91c7\u7528\u4e86\u4e09\u65b9\u9ed1\u76d2\u7684\u8ba1\u7b97\u5f15\u64ce\uff0c\u4e0d\u80fd\u652f\u6301\u7075\u6d3b\u5b9a\u5236\u4e2a\u6027\u5316\u529f\u80fd\uff0c\u4e14\u4f9d\u8d56\u8fc7\u591a\u5916\u90e8\u7cfb\u7edf\uff0c\u5bfc\u81f4\u5916\u90e8\u7cfb\u7edf\u8d1f\u8f7d\u9ad8\uff0c\u8fd0\u7ef4\u590d\u6742\uff1b2019 \u5e74\u4f7f\u7528\u4e86 Spark Streaming \u7684\u5fae\u6279\u5904\u7406\uff0c2020 \u5e74\u5f00\u59cb\u4f7f\u7528 Flink \u7684\u6d41\u5f0f\u8ba1\u7b97\uff0c\u4ece 2021 \u5e74\u5f00\u59cb\uff0c\u51e0\u4e4e\u6240\u6709 Spark Streaming \u7684\u5fae\u6279\u5904\u7406\u90fd\u88ab Flink \u66ff\u4ee3\u4e86\uff0c\u540c\u65f6\u4e0a\u7ebf\u4e86 Apache StreamPark \u5bf9\u6211\u4eec\u7684 Flink \u4f5c\u4e1a\u8fdb\u884c\u7ba1\u7406\u3002\\n\\n![](/blog/chinaunion/platform_background.png)\\n\\n\u603b\u7ed3\u4e00\u4e0b\u5e73\u53f0\u80cc\u666f\uff0c\u4e3b\u8981\u5305\u542b\u4ee5\u4e0b\u51e0\u90e8\u5206\uff1a\\n\\n- \u6570\u636e\u91cf\u5927\uff1a\u65e5\u5747\u4e07\u4ebf\u7684\u6570\u636e\u5904\u7406\u3002\\n- \u6570\u636e\u6e90\u591a\uff1a\u96c6\u6210\u4e86 50 \u591a\u79cd\u5b9e\u65f6\u6570\u636e\u6e90\u3002\\n- \u8ba2\u9605\u591a\uff1a\u652f\u6491\u4e86 10000+\u7684\u6570\u636e\u670d\u52a1\u8ba2\u9605\u3002\\n- \u7528\u6237\u591a\uff1a\u652f\u6491\u4e86 30 \u591a\u4e2a\u5185\u90e8\u548c\u5916\u90e8\u7528\u6237\u4f7f\u7528\u3002\\n\\n![](/blog/chinaunion/operational_background.png)\\n\\n\u8fd0\u7ef4\u80cc\u666f\u4e5f\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u90e8\u5206\uff1a\\n\\n- \u652f\u6491\u9700\u6c42\u591a\uff1a50 \u591a\u79cd\u6570\u636e\u6e90\uff0c10000+\u7684\u6570\u636e\u670d\u52a1\u8ba2\u9605\u3002\\n- \u5b9e\u65f6\u4f5c\u4e1a\u591a\uff1a\u73b0\u5728\u6709 200+Flink \u751f\u4ea7\u4f5c\u4e1a\uff0c\u5e76\u4e14\u6301\u7eed\u5feb\u901f\u589e\u957f\u4e2d\uff0c\u672a\u6765\u53ef\u8fbe 500+\u3002\\n- \u4e0a\u7ebf\u9891\u7387\u9ad8\uff1a\u6bcf\u5929\u90fd\u6709\u65b0\u589e\u7684\u6216\u589e\u5f3a\u7684 Flink \u4f5c\u4e1a\u4e0a\u7ebf\u64cd\u4f5c\u3002\\n- \u5f00\u53d1\u4eba\u5458\u591a\uff1a50+\u7814\u53d1\u4eba\u5458\u53c2\u4e0e\u5f00\u53d1 Flink \u5b9e\u65f6\u8ba1\u7b97\u4efb\u52a1\u3002\\n- \u4f7f\u7528\u7528\u6237\u591a\uff1a30+\u5185\u90e8\u548c\u5916\u90e8\u7ec4\u7ec7\u7684\u7528\u6237\u4f7f\u7528\u3002\\n- \u76d1\u63a7\u5ef6\u8fdf\u4f4e\uff1a\u4e00\u65e6\u53d1\u73b0\u95ee\u9898\u6211\u4eec\u8981\u7acb\u9a6c\u8fdb\u884c\u5904\u7406\uff0c\u907f\u514d\u5f15\u8d77\u7528\u6237\u7684\u6295\u8bc9\u3002\\n\\n## **Flink \u5b9e\u65f6\u4f5c\u4e1a\u8fd0\u7ef4\u6311\u6218**\\n\\n![](/blog/chinaunion/difficulties.png)\\n\\n\u57fa\u4e8e\u5e73\u53f0\u548c\u8fd0\u7ef4\u80cc\u666f\uff0c\u5c24\u5176\u662f Flink \u4f5c\u4e1a\u8d8a\u6765\u8d8a\u591a\u7684\u60c5\u51b5\u4e0b\uff0c\u9047\u5230\u4e86\u5f88\u5927\u7684\u6311\u6218\uff0c\u4e3b\u8981\u6709\u4e24\u65b9\u9762\uff0c\u5206\u522b\u662f\u4f5c\u4e1a\u8fd0\u7ef4\u56f0\u5883\u548c\u4e1a\u52a1\u652f\u6491\u56f0\u5883\u3002\\n\\n\\n\\n\u5728\u4f5c\u4e1a\u8fd0\u7ef4\u56f0\u5883\u4e0a\uff0c\u9996\u5148\u4f5c\u4e1a\u90e8\u7f72\u6d41\u7a0b\u957f\u3001\u6548\u7387\u4f4e\uff1b\u5728\u8054\u901a\u5b89\u5168\u662f\u7b2c\u4e00\u7ea2\u7ebf\u4e0b\uff0c\u5728\u670d\u52a1\u5668\u4e0a\u90e8\u7f72\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u8981\u8fde\u63a5 VPN\u3001\u767b\u5f55 4A\u3001\u6253\u5305\u7f16\u8bd1\u3001\u90e8\u7f72\u3001\u7136\u540e\u518d\u542f\u52a8\uff0c\u6574\u4e2a\u6d41\u7a0b\u6bd4\u8f83\u957f\uff0c\u6700\u521d\u5728\u5f00\u53d1 Flink \u7684\u65f6\u5019\uff0c\u90fd\u662f\u7528\u811a\u672c\u542f\u52a8\u7684\uff0c\u5bfc\u81f4\u4ee3\u7801\u5206\u652f\u662f\u4e0d\u53ef\u63a7\u7684\uff0c\u90e8\u7f72\u5b8c\u4e4b\u540e\u4e5f\u96be\u4ee5\u8ffd\u6eaf\uff0c\u518d\u5c31\u662f\u811a\u672c\u5f88\u96be\u4e0e git \u4e0a\u7684\u4ee3\u7801\u8fdb\u884c\u540c\u6b65\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u811a\u672c\u4ee3\u7801\uff0c\u5f00\u53d1\u4eba\u5458\u66f4\u559c\u6b22\u5728\u670d\u52a1\u5668\u4e0a\u76f4\u63a5\u6539\uff0c\u5f88\u5bb9\u6613\u5fd8\u8bb0\u4e0a\u4f20 git\u3002\\n\\n\\n\\n\u7531\u4e8e\u4f5c\u4e1a\u8fd0\u7ef4\u56f0\u5883\u4e0a\u7684\u79cd\u79cd\u56e0\u7d20\uff0c\u4f1a\u4ea7\u751f\u4e1a\u52a1\u652f\u6491\u56f0\u5883\uff0c\u5982\u5bfc\u81f4\u4e0a\u7ebf\u6545\u969c\u7387\u9ad8\u3001\u5f71\u54cd\u6570\u636e\u8d28\u91cf\u3001\u4e0a\u7ebf\u65f6\u95f4\u957f\u3001\u6570\u636e\u5ef6\u8fdf\u9ad8\u3001\u544a\u8b66\u6f0f\u53d1\u5904\u7406\u7b49\uff0c\u5f15\u8d77\u7684\u6295\u8bc9\uff0c\u6b64\u5916\uff0c\u6211\u4eec\u7684\u4e1a\u52a1\u5f71\u54cd\u4e0d\u660e\u786e\uff0c\u4e00\u65e6\u51fa\u73b0\u95ee\u9898\uff0c\u5904\u7406\u95ee\u9898\u4f1a\u6210\u4e3a\u7b2c\u4e00\u4f18\u5148\u7ea7\u3002\\n\\n## **\u57fa\u4e8e Apache StreamPark\u2122 \u4e00\u4f53\u5316\u7ba1\u7406**\\n\\n![](/blog/chinaunion/job_management.png)\\n\\n\u5bf9\u4e8e\u4ee5\u4e0a\u7684\u4e24\u79cd\u56f0\u5883\uff0c\u6211\u4eec\u57fa\u4e8e StreamPark \u4e00\u4f53\u5316\u7ba1\u7406\u89e3\u51b3\u4e86\u5f88\u591a\u95ee\u9898\uff0c\u9996\u5148\u6765\u770b\u4e00\u4e0b StreamPark \u7684\u53cc\u7ebf\u6f14\u8fdb\uff0c\u5206\u522b\u662f Flink \u4f5c\u4e1a\u7ba1\u7406\u548c Flink \u4f5c\u4e1a DevOps \u5e73\u53f0\uff1b\u5728\u4f5c\u4e1a\u7ba1\u7406\u4e0a\uff0cStreamPark \u652f\u6301\u5c06 Flink \u5b9e\u65f6\u4f5c\u4e1a\u90e8\u7f72\u5230\u4e0d\u540c\u7684\u96c6\u7fa4\u91cc\u53bb\uff0c\u6bd4\u5982 Flink \u539f\u751f\u81ea\u5e26\u7684 Standalone \u6a21\u5f0f\uff0cFlink on Yarn \u7684 Session\u3001Application\u3001PerJob \u6a21\u5f0f\uff0c\u5728\u6700\u65b0\u7684\u7248\u672c\u4e2d\u5c06\u652f\u6301 Kubernetes Native Session \u6a21\u5f0f\uff1b\u4e2d\u95f4\u5c42\u662f\u9879\u76ee\u7ba1\u7406\u3001\u4f5c\u4e1a\u7ba1\u7406\u3001\u96c6\u7fa4\u7ba1\u7406\u3001\u56e2\u961f\u7ba1\u7406\u3001\u53d8\u91cf\u7ba1\u7406\u3001\u544a\u8b66\u7ba1\u7406\u3002\\n\\n\\n\\n- \u9879\u76ee\u7ba1\u7406\uff1a\u5f53\u90e8\u7f72 Flink \u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u7ba1\u7406\u91cc\u586b\u5199 git \u5730\u5740\uff0c\u540c\u65f6\u9009\u62e9\u8981\u90e8\u7f72\u7684\u5206\u652f\u3002\\n- \u4f5c\u4e1a\u7ba1\u7406\uff1a\u53ef\u4ee5\u6307\u5b9a Flink \u4f5c\u4e1a\u7684\u6267\u884c\u6a21\u5f0f\uff0c\u6bd4\u5982\u4f60\u8981\u63d0\u4ea4\u5230\u4ec0\u4e48\u7c7b\u578b\u7684\u96c6\u7fa4\u91cc\u53bb\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u914d\u7f6e\u4e00\u4e9b\u8d44\u6e90\uff0c\u6bd4\u5982 TaskManager \u7684\u6570\u91cf\u3001TaskManager/JobManager \u7684\u5185\u5b58\u5927\u5c0f\u3001\u5e76\u884c\u5ea6\u7b49\u7b49\uff0c\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e9b\u5bb9\u9519\uff0c\u6bd4\u5982 Flink \u4f5c\u4e1a\u5931\u8d25\u540e\uff0cStreamPark \u53ef\u4ee5\u652f\u6301\u5b83\u81ea\u52a8\u62c9\u8d77\uff0c\u540c\u65f6\u652f\u6301\u4f20\u5165\u4e00\u4e9b\u52a8\u6001\u53c2\u6570\u3002\\n- \u96c6\u7fa4\u7ba1\u7406\uff1a\u53ef\u4ee5\u5728\u754c\u9762\u4e0a\u6dfb\u52a0\u548c\u7ba1\u7406\u5927\u6570\u636e\u96c6\u7fa4\u3002\\n- \u56e2\u961f\u7ba1\u7406\uff1a\u5728\u4f01\u4e1a\u7684\u5b9e\u9645\u751f\u4ea7\u8fc7\u7a0b\u4e2d\u4f1a\u6709\u591a\u4e2a\u56e2\u961f\uff0c\u56e2\u961f\u4e4b\u95f4\u662f\u9694\u79bb\u7684\u3002\\n- \u53d8\u91cf\u7ba1\u7406\uff1a\u53ef\u4ee5\u628a\u4e00\u4e9b\u53d8\u91cf\u7edf\u4e00\u7ef4\u62a4\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u6bd4\u5982 Kafka \u7684 Broker \u5730\u5740\u5b9a\u4e49\u6210\u4e00\u4e2a\u53d8\u91cf\uff0c\u5728\u914d\u7f6e Flink \u4f5c\u4e1a\u6216\u8005 SQL \u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u4ee5\u53d8\u91cf\u7684\u65b9\u5f0f\u6765\u66ff\u6362 Broker \u7684 IP\uff0c\u4e14\u540e\u7eed\u8fd9\u4e2a Kafka \u8981\u4e0b\u7ebf\u7684\u65f6\u5019\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u53d8\u91cf\u53bb\u67e5\u770b\u5230\u5e95\u54ea\u4e9b\u4f5c\u4e1a\u4f7f\u7528\u4e86\u8fd9\u4e2a\u96c6\u7fa4\uff0c\u65b9\u4fbf\u6211\u4eec\u53bb\u505a\u4e00\u4e9b\u540e\u7eed\u7684\u6d41\u7a0b\u3002\\n- \u544a\u8b66\u7ba1\u7406\uff1a\u652f\u6301\u591a\u79cd\u544a\u8b66\u6a21\u5f0f\uff0c\u5982\u5fae\u4fe1\u3001\u9489\u9489\u3001\u77ed\u4fe1\u548c\u90ae\u4ef6\u3002\\n\\n\\n\\nStreamPark \u652f\u6301 Flink SQL\u3001Flink Jar \u7684\u63d0\u4ea4\uff0c\u652f\u6301\u8d44\u6e90\u914d\u7f6e\uff0c\u652f\u6301\u72b6\u6001\u8ddf\u8e2a\uff0c\u5982\u72b6\u6001\u662f\u8fd0\u884c\u72b6\u6001\uff0c\u5931\u8d25\u72b6\u6001\u7b49\uff0c\u540c\u65f6\u652f\u6301\u6307\u6807\u5927\u5c4f\u548c\u5404\u79cd\u65e5\u5fd7\u67e5\u770b\u3002\\n\\n![](/blog/chinaunion/devops_platform.png)\\n\\nFlink \u4f5c\u4e1a DevOps \u5e73\u53f0\uff0c\u4e3b\u8981\u5305\u62ec\u4ee5\u4e0b\u51e0\u90e8\u5206\uff1a\\n- \u56e2\u961f\uff1aStreamPark \u652f\u6301\u591a\u4e2a\u56e2\u961f\uff0c\u6bcf\u4e2a\u56e2\u961f\u90fd\u6709\u56e2\u961f\u7684\u7ba1\u7406\u5458\uff0c\u4ed6\u62e5\u6709\u6240\u6709\u6743\u9650\uff0c\u540c\u65f6\u8fd8\u6709\u56e2\u961f\u7684\u5f00\u53d1\u8005\uff0c\u4ed6\u53ea\u6709\u5c11\u91cf\u7684\u4e00\u90e8\u5206\u6743\u9650\u3002\\n- \u7f16\u8bd1\u3001\u6253\u5305\uff1a\u5728\u521b\u5efa Flink \u9879\u76ee\u65f6\uff0c\u53ef\u4ee5\u628a git \u5730\u5740\u3001\u5206\u652f\u3001\u6253\u5305\u7684\u547d\u4ee4\u7b49\u914d\u7f6e\u5728\u9879\u76ee\u91cc\uff0c\u7136\u540e\u4e00\u952e\u70b9\u51fb build \u6309\u94ae\u8fdb\u884c\u7f16\u8bd1\u3001\u6253\u5305\u3002\\n- \u53d1\u5e03\u3001\u90e8\u7f72\uff1a\u53d1\u5e03\u548c\u90e8\u7f72\u7684\u65f6\u5019\u4f1a\u521b\u5efa Flink \u4f5c\u4e1a\uff0c\u5728 Flink \u4f5c\u4e1a\u91cc\u53ef\u4ee5\u9009\u62e9\u6267\u884c\u6a21\u5f0f\u3001\u90e8\u7f72\u96c6\u7fa4\u3001\u8d44\u6e90\u8bbe\u7f6e\u3001\u5bb9\u9519\u8bbe\u7f6e\u3001\u53d8\u91cf\u586b\u5145\uff0c\u6700\u540e\u901a\u8fc7\u4e00\u952e\u542f\u52a8\u505c\u6b62\uff0c\u542f\u52a8 Flink \u4f5c\u4e1a\u3002\\n- \u72b6\u6001\u76d1\u6d4b\uff1aFlink \u4f5c\u4e1a\u542f\u52a8\u5b8c\u6210\u4e4b\u540e\uff0c\u5c31\u662f\u72b6\u6001\u7684\u5b9e\u65f6\u8ddf\u8e2a\uff0c\u5305\u62ec Flink \u7684\u8fd0\u884c\u72b6\u6001\u3001\u8fd0\u884c\u65f6\u957f\u3001Checkpoint \u4fe1\u606f\u7b49\uff0c\u5e76\u652f\u6301\u4e00\u952e\u8df3\u8f6c\u5230 Flink \u7684 Web UI\u3002\\n- \u65e5\u5fd7\u3001\u544a\u8b66\uff1a\u5305\u542b\u6784\u5efa\u7684\u4e00\u4e9b\u65e5\u5fd7\u548c\u542f\u52a8\u65e5\u5fd7\uff0c\u540c\u65f6\u652f\u6301\u9489\u9489\u3001\u5fae\u4fe1\u3001\u90ae\u4ef6\u3001\u77ed\u4fe1\u7b49\u544a\u8b66\u65b9\u5f0f\u3002\\n\\n![](/blog/chinaunion/multi_team_support.png)\\n\\n\u4f01\u4e1a\u4e00\u822c\u6709\u591a\u4e2a\u56e2\u961f\u540c\u65f6\u5f00\u53d1\u5b9e\u65f6\u4f5c\u4e1a\uff0c\u5728\u6211\u4eec\u516c\u53f8\u5305\u542b\u5b9e\u65f6\u91c7\u96c6\u56e2\u961f\u3001\u6570\u636e\u5904\u7406\u56e2\u961f\u548c\u5b9e\u65f6\u7684\u8425\u9500\u56e2\u961f\uff0cStreamPark \u652f\u6301\u591a\u4e2a\u56e2\u961f\u7684\u8d44\u6e90\u9694\u79bb\u3002\\n\\n![](/blog/chinaunion/platformized_management.png)\\n\\nFlink \u4f5c\u4e1a\u5e73\u53f0\u5316\u7ba1\u7406\u9762\u4e34\u5982\u4e0b\u6311\u6218\uff1a\\n- \u811a\u672c\u6570\u91cf\u591a\uff1a\u5e73\u53f0\u6709\u51e0\u767e\u4e2a\u811a\u672c\uff0c\u5206\u6563\u5728\u591a\u4e2a\u670d\u52a1\u5668\u4e0a\u3002\\n- \u811a\u672c\u7c7b\u578b\u591a\uff1a\u5728\u542f\u52a8 Flink \u4f5c\u4e1a\u65f6\uff0c\u4f1a\u6709\u542f\u52a8\u811a\u672c\u3001\u505c\u6b62\u811a\u672c\u548c\u5b88\u62a4\u811a\u672c\uff0c\u800c\u4e14\u64cd\u4f5c\u6743\u9650\u5f88\u96be\u63a7\u5236\u3002\\n- \u811a\u672c\u4e0d\u4e00\u81f4\uff1a\u670d\u52a1\u5668\u4e0a\u7684\u811a\u672c\u4e0e git \u4e0a\u7684\u811a\u672c\u4e0d\u4e00\u81f4\u3002\\n- \u811a\u672c\u786e\u6743\u96be\uff1aFlink \u4f5c\u4e1a\u7684\u8d23\u4efb\u4eba\uff0c\u7528\u9014\u4e0d\u660e\u786e\u3002\\n- \u5206\u652f\u4e0d\u53ef\u63a7\uff1a\u542f\u52a8\u4f5c\u4e1a\u7684\u65f6\u5019\uff0c\u9700\u8981\u5728\u811a\u672c\u91cc\u6307\u5b9a git \u5206\u652f\uff0c\u5bfc\u81f4\u5206\u652f\u4e0d\u53ef\u8ffd\u6eaf\u7684\u3002\\n\\n\\n\\n\u57fa\u4e8e\u4ee5\u4e0a\u7684\u6311\u6218\uff0cStreamPark \u901a\u8fc7\u9879\u76ee\u7ba1\u7406\u6765\u89e3\u51b3\u4e86\u8d23\u4efb\u4eba\u4e0d\u660e\u786e\uff0c\u5206\u652f\u4e0d\u53ef\u8ffd\u6eaf\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u5728\u521b\u5efa\u9879\u76ee\u7684\u65f6\u5019\u9700\u8981\u624b\u52a8\u6307\u5b9a\u4e00\u4e9b\u5206\u652f\uff0c\u4e00\u65e6\u6253\u5305\u6210\u529f\uff0c\u8fd9\u4e9b\u5206\u652f\u662f\u6709\u8bb0\u5f55\u7684\uff1b\u901a\u8fc7\u4f5c\u4e1a\u7ba1\u7406\u5bf9\u914d\u7f6e\u8fdb\u884c\u4e86\u96c6\u4e2d\u5316\uff0c\u907f\u514d\u4e86\u811a\u672c\u592a\u8fc7\u4e8e\u5206\u6563\uff0c\u800c\u4e14\u4f5c\u4e1a\u542f\u52a8\u3001\u505c\u6b62\u7684\u6743\u9650\u6709\u4e25\u683c\u7684\u63a7\u5236\uff0c\u907f\u514d\u4e86\u811a\u672c\u5316\u6743\u9650\u4e0d\u53ef\u63a7\u7684\u72b6\u6001\uff0cStreamPark \u4ee5\u63a5\u53e3\u7684\u65b9\u5f0f\u4e0e\u96c6\u7fa4\u8fdb\u884c\u4ea4\u4e92\u6765\u83b7\u53d6\u4f5c\u4e1a\u4fe1\u606f\uff0c\u8fd9\u6837\u505a\u4f1a\u8ba9\u4f5c\u4e1a\u63a7\u5236\u66f4\u52a0\u7cbe\u7ec6\u3002\\n\\n\\n\\n\u53ef\u4ee5\u770b\u4e00\u4e0b\u4e0a\u56fe\u4e2d\u4e0b\u9762\u7684\u56fe\uff0c\u901a\u8fc7\u9879\u76ee\u7ba1\u7406\u8fdb\u884c\u6253\u5305\uff0c\u901a\u8fc7\u4f5c\u4e1a\u7ba1\u7406\u8fdb\u884c\u914d\u7f6e\uff0c\u7136\u540e\u53d1\u5e03\uff0c\u53ef\u4ee5\u8fdb\u884c\u4e00\u952e\u542f\u505c\uff0c\u901a\u8fc7 API \u63d0\u4ea4\u4f5c\u4e1a\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/development_efficiency.png)\\n\\n\u65e9\u671f\u6211\u4eec\u9700\u8981\u901a\u8fc7 7 \u6b65\u8fdb\u884c\u90e8\u7f72\uff0c\u5305\u62ec\u8fde\u63a5 VPN\u3001\u767b\u5f55 4A\u3001\u6267\u884c\u7f16\u8bd1\u811a\u672c\u3001\u6267\u884c\u542f\u52a8\u811a\u672c\u3001\u6253\u5f00 Yarn\u3001\u641c\u7d22\u4f5c\u4e1a\u540d\u3001\u8fdb\u5165 Flink UI \u7b49 7 \u4e2a\u6b65\u9aa4\uff0cStreamPark \u53ef\u4ee5\u652f\u6301 4 \u4e2a\u4e00\u952e\u8fdb\u884c\u90e8\u7f72\uff0c\u5305\u62ec\u4e00\u952e\u6253\u5305\u3001\u4e00\u952e\u53d1\u5e03\u3001\u4e00\u952e\u542f\u52a8\u3001\u4e00\u952e\u5230 Flink UI\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/submission_process.png)\\n\\n\u4e0a\u56fe\u662f\u6211\u4eec StreamPark \u7684\u4f5c\u4e1a\u63d0\u4ea4\u6d41\u7a0b\uff0c\u9996\u5148 StreamPark \u4f1a\u5c06\u4f5c\u4e1a\u8fdb\u884c\u53d1\u5e03\uff0c\u53d1\u5e03\u7684\u65f6\u5019\u4f1a\u4e0a\u4f20\u4e00\u4e9b\u8d44\u6e90\uff0c\u7136\u540e\u4f1a\u8fdb\u884c\u4f5c\u4e1a\u7684\u63d0\u4ea4\uff0c\u63d0\u4ea4\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a\u914d\u7f6e\u7684\u4e00\u4e9b\u53c2\u6570\uff0c\u4ee5 Flink Submit \u7684\u65b9\u5f0f\u8c03\u7528\u63a5\u53e3\u53d1\u5e03\u5230\u96c6\u7fa4\u4e0a\uff1b\u8fd9\u91cc\u4f1a\u6709\u591a\u4e2a Flink Submit \u5bf9\u5e94\u7740\u4e0d\u540c\u7684\u6267\u884c\u6a21\u5f0f\uff0c\u6bd4\u5982 Yarn Session\u3001Yarn Application\u3001Kubernetes Session\u3001Kubernetes Application \u7b49\u90fd\u662f\u5728\u8fd9\u91cc\u63a7\u5236\u7684\uff0c\u63d0\u4ea4\u4f5c\u4e1a\u4e4b\u540e\uff0c\u5982\u679c\u662f Flink on Yarn \u4f5c\u4e1a\uff0c\u4f1a\u5f97\u5230\u8fd9\u4e2a Flink \u4f5c\u4e1a\u7684 Application ID \u6216\u8005 Job ID\uff0c\u8fd9\u4e2a ID \u4f1a\u4fdd\u5b58\u5728\u6211\u4eec\u7684\u6570\u636e\u5e93\u4e2d\uff0c\u5982\u679c\u662f\u57fa\u4e8e Kubernetes \u6267\u884c\u7684\u8bdd\uff0c\u4e5f\u4f1a\u5f97\u5230 Job ID\uff0c\u540e\u9762\u6211\u4eec\u5728\u8ddf\u8e2a\u4f5c\u4e1a\u72b6\u6001\u7684\u65f6\u5019\uff0c\u4e3b\u8981\u5c31\u662f\u901a\u8fc7\u4fdd\u5b58\u7684\u8fd9\u4e9b ID \u53bb\u8ddf\u8e2a\u4f5c\u4e1a\u7684\u72b6\u6001\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/status_acquisition_bottleneck.png)\\n\\n\u5982\u4e0a\u6240\u8ff0\uff0c\u5982\u679c\u662f Flink on Yarn \u4f5c\u4e1a\uff0c\u5728\u63d0\u4ea4\u4f5c\u4e1a\u7684\u65f6\u5019\u4f1a\u83b7\u53d6\u4e24\u4e2a ID\uff0cApplication ID \u6216\u8005 Job ID\uff0c\u57fa\u4e8e\u8fd9\u4e24\u4e2a ID \u53ef\u4ee5\u83b7\u53d6\u6211\u4eec\u7684\u72b6\u6001\uff0c\u4f46\u5f53 Flink \u4f5c\u4e1a\u975e\u5e38\u591a\u7684\u65f6\u5019\u4f1a\u9047\u5230\u4e00\u4e9b\u95ee\u9898\uff0cStreamPark \u5b83\u662f\u6709\u4e00\u4e2a\u72b6\u6001\u83b7\u53d6\u5668\uff0c\u5b83\u4f1a\u901a\u8fc7\u6211\u4eec\u4fdd\u5b58\u7684\u6570\u636e\u5e93\u91cc\u7684 Application ID \u6216\u8005 Job ID\uff0c\u53bb\u5411 ResourceManager \u505a\u4e00\u4e2a\u8bf7\u6c42\uff0c\u4f1a\u505a\u6bcf\u4e94\u79d2\u949f\u5468\u671f\u6027\u7684\u8f6e\u8be2\uff0c\u5982\u679c\u4f5c\u4e1a\u7279\u522b\u591a\uff0c\u6bcf\u6b21\u8f6e\u8be2 ResourceManager \u4f1a\u8d1f\u8d23\u518d\u53bb\u8c03\u7528 Job Manager \u7684\u5730\u5740\u8bbf\u95ee\u5b83\u7684\u72b6\u6001\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4 ResourceManager \u7684\u8fde\u63a5\u6570\u538b\u529b\u8f83\u5927\u548c\u8fde\u63a5\u6570\u8fc7\u9ad8\u3002\\n\\n\\n\\n\u4e0a\u56fe\u4e2d ResourceManager \u7684\u8fde\u63a5\u6570\u9636\u6bb5\u6027\u3001\u5468\u671f\u6027\u7684\u6301\u7eed\u8d70\u9ad8\uff0c\u53ef\u4ee5\u770b\u5230 ResourceManager \u5904\u4e8e\u6bd4\u8f83\u7ea2\u7684\u72b6\u6001\uff0c\u4ece\u4e3b\u673a\u4e0a\u53bb\u76d1\u63a7\u7684\u65f6\u5019\uff0c\u5b83\u7684\u8fde\u63a5\u6570\u786e\u5b9e\u6bd4\u8f83\u9ad8\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/state_optimization.png)\\n\\n\u9488\u5bf9\u4e0a\u9762\u7684\u95ee\u9898\uff0c\u6211\u4eec\u505a\u4e86\u4e00\u4e9b\u4f18\u5316\uff0c\u9996\u5148 StreamPark \u4fdd\u5b58\u4e86\u63d0\u4ea4\u4f5c\u4e1a\u4e4b\u540e\u7684 Application ID \u6216\u8005 Job ID\uff0c\u540c\u65f6\u4e5f\u4f1a\u83b7\u53d6 Job Manager \u76f4\u63a5\u8bbf\u95ee\u7684\u5730\u5740\uff0c\u5e76\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf\u6b21\u8f6e\u8be2\u65f6\u4e0d\u518d\u901a\u8fc7 ResourceManager \u83b7\u53d6\u4f5c\u4e1a\u7684\u72b6\u6001\uff0c\u5b83\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u5404\u4e2a Job Manager \u7684\u5730\u5740\u5b9e\u65f6\u83b7\u53d6\u72b6\u6001\uff0c\u6781\u5927\u7684\u964d\u4f4e\u4e86 ResourceManager \u7684\u8fde\u63a5\u6570\uff1b\u4ece\u4e0a\u56fe\u6700\u540e\u7684\u90e8\u5206\u53ef\u4ee5\u770b\u5230\uff0c\u57fa\u672c\u4e0d\u4f1a\u4ea7\u751f\u592a\u5927\u7684\u8fde\u63a5\u6570\uff0c\u5927\u5927\u51cf\u8f7b\u4e86 ResourceManager \u7684\u538b\u529b\uff0c\u4e14\u540e\u7eed\u5f53 Flink \u4f5c\u4e1a\u8d8a\u6765\u8d8a\u591a\u65f6\u83b7\u53d6\u72b6\u6001\u4e5f\u4e0d\u4f1a\u9047\u5230\u74f6\u9888\u7684\u95ee\u9898\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/state_recovery.png)\\n\\nStreamPark \u89e3\u51b3\u7684\u53e6\u4e00\u4e2a\u95ee\u9898\u662f Flink \u4ece\u72b6\u6001\u6062\u590d\u7684\u4fdd\u969c\uff0c\u4ee5\u524d\u6211\u4eec\u7528\u811a\u672c\u505a\u8fd0\u7ef4\u7684\u65f6\u5019\uff0c\u5728\u542f\u52a8 Flink \u7684\u65f6\u5019\uff0c\u5c24\u5176\u662f\u5728\u4e1a\u52a1\u5347\u7ea7\u7684\u65f6\u5019\uff0c\u8981\u4ece\u4e0a\u4e00\u4e2a\u6700\u65b0\u7684 Checkpoint \u6765\u6062\u590d\uff0c\u4f46\u7ecf\u5e38\u6709\u5f00\u53d1\u4eba\u5458\u5fd8\u8bb0\u4ece\u4e0a\u4e00\u4e2a\u68c0\u67e5\u70b9\u8fdb\u884c\u6062\u590d\uff0c\u5bfc\u81f4\u6570\u636e\u8d28\u91cf\u4ea7\u751f\u5f88\u5927\u7684\u95ee\u9898\uff0c\u906d\u5230\u6295\u8bc9\uff0cStreamPark \u7684\u6d41\u7a0b\u662f\u5728\u9996\u6b21\u542f\u52a8\u7684\u65f6\u5019\uff0c\u6bcf\u4e94\u79d2\u949f\u8f6e\u8be2\u4e00\u6b21\u83b7\u53d6 Checkpoint \u7684\u8bb0\u5f55\uff0c\u540c\u65f6\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e4b\u4e2d\uff0c\u5728 StreamPark \u4e0a\u624b\u52a8\u505c\u6b62 Flink \u4f5c\u4e1a\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u9009\u62e9\u505a\u4e0d\u505a Savepoint\uff0c\u5982\u679c\u9009\u62e9\u4e86\u505a Savepoint\uff0c\u4f1a\u5c06 Savepoint \u7684\u8def\u5f84\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u540c\u65f6\u6bcf\u6b21\u7684 Checkpoint \u8bb0\u5f55\u4e5f\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u5f53\u4e0b\u6b21\u542f\u52a8 Flink \u4f5c\u4e1a\u7684\u65f6\u5019\uff0c\u9ed8\u8ba4\u4f1a\u9009\u62e9\u6700\u65b0\u7684 Checkpoint \u6216\u8005 Savepoint \u8bb0\u5f55\uff0c\u6709\u6548\u907f\u514d\u4e86\u65e0\u6cd5\u4ece\u4e0a\u4e00\u4e2a\u68c0\u67e5\u70b9\u53bb\u6062\u590d\u7684\u95ee\u9898\uff0c\u4e5f\u907f\u514d\u4e86\u5bfc\u81f4\u95ee\u9898\u540e\u8981\u8fdb\u884c offset \u56de\u62e8\u91cd\u8dd1\u4f5c\u4e1a\u9020\u6210\u7684\u8d44\u6e90\u6d6a\u8d39\uff0c\u540c\u65f6\u4e5f\u4fdd\u8bc1\u4e86\u6570\u636e\u5904\u7406\u7684\u4e00\u81f4\u6027\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/multiple_environments_and_components.png)\\n\\nStreamPark \u8fd8\u89e3\u51b3\u4e86\u5728\u591a\u73af\u5883\u4e0b\u591a\u4e2a\u7ec4\u4ef6\u7684\u5f15\u7528\u6311\u6218\uff0c\u6bd4\u5982\u5728\u4f01\u4e1a\u4e2d\u901a\u5e38\u4f1a\u6709\u591a\u5957\u73af\u5883\uff0c\u5982\u5f00\u53d1\u73af\u5883\u3001\u6d4b\u8bd5\u73af\u5883\u3001\u751f\u4ea7\u73af\u5883\u7b49\uff0c\u4e00\u822c\u6765\u8bf4\u6bcf\u5957\u73af\u5883\u4e0b\u90fd\u4f1a\u6709\u591a\u4e2a\u7ec4\u4ef6\uff0c\u6bd4\u5982 Kafka\uff0cHBase\u3001Redis \u7b49\uff0c\u800c\u4e14\u5728\u540c\u4e00\u5957\u73af\u5883\u91cc\u8fd8\u53ef\u80fd\u4f1a\u5b58\u5728\u591a\u4e2a\u76f8\u540c\u7684\u7ec4\u4ef6\uff0c\u6bd4\u5982\u5728\u8054\u901a\u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\uff0c\u4ece\u4e0a\u6e38\u7684 Kafka \u6d88\u8d39\u6570\u636e\u7684\u65f6\u5019\uff0c\u5c06\u7b26\u5408\u8981\u6c42\u7684\u6570\u636e\u518d\u5199\u5230\u4e0b\u6e38\u7684 Kafka\uff0c\u8fd9\u4e2a\u65f6\u5019\u540c\u4e00\u5957\u73af\u5883\u4f1a\u6d89\u53ca\u5230\u4e24\u5957 Kafka\uff0c\u5355\u7eaf\u4ece IP \u5f88\u96be\u5224\u65ad\u662f\u54ea\u4e2a\u73af\u5883\u54ea\u4e2a\u7ec4\u4ef6\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u6240\u6709\u7ec4\u4ef6\u7684 IP \u5730\u5740\u90fd\u5b9a\u4e49\u6210\u4e00\u4e2a\u53d8\u91cf\uff0c\u6bd4\u5982 Kafka \u96c6\u7fa4\uff0c\u5f00\u53d1\u73af\u5883\u3001\u6d4b\u8bd5\u73af\u5883\u3001\u751f\u4ea7\u73af\u5883\u90fd\u6709 Kafka.cluster \u8fd9\u4e2a\u53d8\u91cf\uff0c\u4f46\u5b83\u4eec\u6307\u5411\u7684 Broker \u7684\u5730\u5740\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u8fd9\u6837\u4e0d\u7ba1\u662f\u5728\u54ea\u4e2a\u73af\u5883\u4e0b\u914d\u7f6e Flink \u4f5c\u4e1a\uff0c\u53ea\u8981\u5f15\u7528\u8fd9\u4e2a\u53d8\u91cf\u5c31\u53ef\u4ee5\u4e86\uff0c\u5927\u5927\u964d\u4f4e\u4e86\u751f\u4ea7\u4e0a\u7684\u6545\u969c\u7387\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/multiple_execution_modes.png)\\n\\nStreamPark \u652f\u6301 Flink \u591a\u6267\u884c\u7684\u6a21\u5f0f\uff0c\u5305\u62ec\u57fa\u4e8e on Yarn \u7684 Application/ Perjob / Session \u4e09\u79cd\u90e8\u7f72\u6a21\u5f0f\uff0c\u8fd8\u652f\u6301 Kubernetes \u7684 Application \u548c Session \u4e24\u79cd\u90e8\u7f72\u6a21\u5f0f\uff0c\u8fd8\u6709\u4e00\u4e9b Remote \u7684\u6a21\u5f0f\u3002\\n\\n![\u56fe\u7247](/blog/chinaunion/versioning.png)\\n\\nStreamPark \u4e5f\u652f\u6301 Flink \u7684\u591a\u7248\u672c\uff0c\u6bd4\u5982\u8054\u901a\u73b0\u5728\u7528\u7684\u662f 1.14.x\uff0c\u73b0\u5728 1.16.x \u51fa\u6765\u540e\u6211\u4eec\u4e5f\u60f3\u4f53\u9a8c\u4e00\u4e0b\uff0c\u4f46\u4e0d\u53ef\u80fd\u628a\u6240\u6709\u7684\u4f5c\u4e1a\u90fd\u5347\u7ea7\u5230 1.16.x\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u65b0\u4e0a\u7ebf\u7684\u5347\u7ea7\u5230 1.16.x\uff0c\u8fd9\u6837\u53ef\u4ee5\u5f88\u597d\u7684\u6ee1\u8db3\u4f7f\u7528\u65b0\u7248\u672c\u7684\u8981\u6c42\uff0c\u540c\u65f6\u4e5f\u517c\u5bb9\u8001\u7248\u672c\u3002\\n\\n## **\u672a\u6765\u89c4\u5212\u4e0e\u6f14\u8fdb**\\n\\n![\u56fe\u7247](/blog/chinaunion/contribution_and_enhancement.png)\\n\\n\u672a\u6765\u6211\u4eec\u5c06\u52a0\u5927\u529b\u5ea6\u53c2\u4e0e StreamPark \u5efa\u8bbe\uff0c\u4ee5\u4e0b\u6211\u4eec\u8ba1\u5212\u8981\u589e\u5f3a\u7684\u65b9\u5411\u3002\\n- \u9ad8\u53ef\u7528\uff1aStreamPark \u76ee\u524d\u4e0d\u652f\u6301\u9ad8\u53ef\u7528\uff0c\u8fd9\u65b9\u9762\u8fd8\u9700\u8981\u505a\u4e00\u4e9b\u52a0\u5f3a\u3002\\n- \u72b6\u6001\u7684\u7ba1\u7406\uff1a\u5728\u4f01\u4e1a\u5b9e\u8df5\u4e2d Flink \u4f5c\u4e1a\u5728\u4e0a\u7ebf\u65f6\uff0c\u6bcf\u4e2a\u7b97\u5b50\u4f1a\u6709 UID\u3002\u5982\u679c Flink UID \u4e0d\u505a\u8bbe\u7f6e\uff0c\u505a Flink \u4f5c\u4e1a\u7684\u5347\u7ea7\u7684\u65f6\u5019\uff0c\u5c31\u6709\u53ef\u80fd\u51fa\u73b0\u72b6\u6001\u65e0\u6cd5\u6062\u590d\u7684\u60c5\u51b5\uff0c\u76ee\u524d\u901a\u8fc7\u5e73\u53f0\u8fd8\u65e0\u6cd5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u5728\u5e73\u53f0\u4e0a\u589e\u52a0\u8fd9\u4e2a\u529f\u80fd\uff0c\u5728 Flink Jar \u63d0\u4ea4\u65f6\uff0c\u589e\u52a0\u68c0\u6d4b\u7b97\u5b50\u662f\u5426\u8bbe\u7f6e UID \u7684\u529f\u80fd\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u4f1a\u53d1\u51fa\u63d0\u9192\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u6bcf\u6b21\u4e0a\u7ebf Flink \u4f5c\u4e1a\u65f6\uff0c\u4f5c\u4e1a\u65e0\u6cd5\u6062\u590d\u7684\u95ee\u9898\uff1b\u4e4b\u524d\u9047\u5230\u8fd9\u79cd\u60c5\u51b5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u72b6\u6001\u5904\u7406\u7684 API\uff0c\u4ece\u539f\u6765\u7684\u72b6\u6001\u91cc\u8fdb\u884c\u53cd\u5e8f\u5217\u5316\uff0c\u7136\u540e\u518d\u7528\u72b6\u6001\u5904\u7406 API \u53bb\u5236\u4f5c\u65b0\u7684\u72b6\u6001\uff0c\u4f9b\u5347\u7ea7\u540e\u7684 Flink \u52a0\u8f7d\u72b6\u6001\u3002\\n- \u66f4\u7ec6\u81f4\u7684\u76d1\u63a7\uff1a\u76ee\u524d\u652f\u6301 Flink \u4f5c\u4e1a\u5931\u8d25\u4e4b\u540e\uff0cStreamPark \u53d1\u51fa\u544a\u8b66\u3002\u6211\u4eec\u5e0c\u671b Task \u5931\u8d25\u4e4b\u540e\u4e5f\u53ef\u4ee5\u53d1\u51fa\u544a\u8b66\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u5931\u8d25\u7684\u539f\u56e0\uff1b\u8fd8\u6709\u4f5c\u4e1a\u53cd\u538b\u76d1\u63a7\u544a\u8b66\u3001Checkpoint \u8d85\u65f6\u3001\u5931\u8d25\u544a\u8b66\u6027\u80fd\u6307\u6807\u91c7\u96c6\uff0c\u4e5f\u6709\u5f85\u52a0\u5f3a\u3002\\n- \u6d41\u6279\u4e00\u4f53\uff1a\u7ed3\u5408 Flink \u6d41\u6279\u4e00\u4f53\u5f15\u64ce\u548c\u6570\u636e\u6e56\u6d41\u6279\u4e00\u4f53\u5b58\u50a8\u63a2\u7d22\u6d41\u6279\u4e00\u4f53\u5e73\u53f0\u3002\\n\\n![](/blog/chinaunion/road_map.png)\\n\\n\u4e0a\u56fe\u662f StreamPark \u7684 Roadmap\u3002\\n- \u6570\u636e\u6e90\uff1aStreamPark \u4f1a\u652f\u6301\u66f4\u591a\u6570\u636e\u6e90\u7684\u5feb\u901f\u63a5\u5165\uff0c\u8fbe\u5230\u6570\u636e\u4e00\u952e\u5165\u6237\u3002\\n- \u8fd0\u7ef4\u4e2d\u5fc3\uff1a\u83b7\u53d6\u66f4\u591a Flink Metrics \u8fdb\u4e00\u6b65\u52a0\u5f3a\u76d1\u63a7\u8fd0\u7ef4\u7684\u80fd\u529b\u3002\\n- K8S-operator\uff1a\u73b0\u6709\u7684 Flink on K8S \u8fd8\u662f\u6709\u70b9\u91cd\uff0c\u7ecf\u5386\u4e86\u6253 Jar \u5305\u3001\u6253\u955c\u50cf\u3001\u63a8\u955c\u50cf\u7684\u8fc7\u7a0b\uff0c\u540e\u7eed\u9700\u8981\u6539\u8fdb\u4f18\u5316\uff0c\u79ef\u6781\u62e5\u62b1\u4e0a\u6e38\u5bf9\u63a5\u7684 K8S-operator\u3002\\n- \u6d41\u5f0f\u6570\u4ed3\uff1a\u589e\u5f3a\u5bf9 Flink SQL \u4f5c\u4e1a\u80fd\u529b\u7684\u652f\u6301\uff0c\u7b80\u5316 Flink SQL \u4f5c\u4e1a\u7684\u63d0\u4ea4\uff0c\u8ba1\u5212\u5bf9\u63a5 Flink SQL Gateway\uff1bSQL \u6570\u4ed3\u65b9\u9762\u7684\u80fd\u529b\u52a0\u5f3a\uff0c\u5305\u62ec\u5143\u6570\u636e\u5b58\u50a8\u3001\u7edf\u4e00\u5efa\u8868\u8bed\u6cd5\u6821\u9a8c\u3001\u8fd0\u884c\u6d4b\u8bd5\u3001\u4ea4\u4e92\u5f0f\u67e5\u8be2\uff0c\u79ef\u6781\u62e5\u62b1 Flink \u4e0a\u6e38\uff0c\u63a2\u7d22\u5b9e\u65f6\u6570\u4ed3\u548c\u6d41\u5f0f\u6570\u4ed3\u3002\"},{\"id\":\"streampark-usercase-bondex-with-paimon\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-bondex-with-paimon\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/3-streampark-usercase-bondex-paimon.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/3-streampark-usercase-bondex-paimon.md\",\"title\":\"\u6d77\u7a0b\u90a6\u8fbe\u57fa\u4e8e Apache Paimon + Apache StreamPark\u2122 \u7684\u6d41\u5f0f\u6570\u4ed3\u5b9e\u8df5\",\"description\":\"\u5bfc\u8bfb\uff1a\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4f5c\u4e3a\u4f9b\u5e94\u94fe\u7269\u6d41\u670d\u52a1\u5546\u6d77\u7a0b\u90a6\u8fbe\u5728\u6570\u5b57\u5316\u8f6c\u578b\u8fc7\u7a0b\u4e2d\u91c7\u7528 Paimon + StreamPark \u5e73\u53f0\u5b9e\u73b0\u6d41\u5f0f\u6570\u4ed3\u7684\u843d\u5730\u65b9\u6848\u3002\u6211\u4eec\u4ee5 Apache StreamPark \u6d41\u6279\u4e00\u4f53\u5e73\u53f0\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6613\u4e8e\u4e0a\u624b\u7684\u751f\u4ea7\u64cd\u4f5c\u624b\u518c\uff0c\u4ee5\u5e2e\u52a9\u7528\u6237\u63d0\u4ea4 Flink \u4efb\u52a1\u5e76\u8fc5\u901f\u638c\u63e1 Paimon \u7684\u4f7f\u7528\u65b9\u6cd5\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"paimon\",\"permalink\":\"/zh-CN/blog/tags/paimon\"},{\"label\":\"streaming-warehouse\",\"permalink\":\"/zh-CN/blog/tags/streaming-warehouse\"}],\"readingTime\":35.015,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-bondex-with-paimon\",\"title\":\"\u6d77\u7a0b\u90a6\u8fbe\u57fa\u4e8e Apache Paimon + Apache StreamPark\u2122 \u7684\u6d41\u5f0f\u6570\u4ed3\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"paimon\",\"streaming-warehouse\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"\u8054\u901a Flink \u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5316\u8fd0\u7ef4\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-chinaunion\"},\"nextItem\":{\"title\":\"Apache StreamPark\u2122 \u5728\u987a\u7f51\u79d1\u6280\u7684\u5927\u89c4\u6a21\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-shunwang\"}},\"content\":\"![](/blog/bondex/Bondex.png)\\n\\n**\u5bfc\u8bfb\uff1a**\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u4f5c\u4e3a\u4f9b\u5e94\u94fe\u7269\u6d41\u670d\u52a1\u5546\u6d77\u7a0b\u90a6\u8fbe\u5728\u6570\u5b57\u5316\u8f6c\u578b\u8fc7\u7a0b\u4e2d\u91c7\u7528 Paimon + StreamPark \u5e73\u53f0\u5b9e\u73b0\u6d41\u5f0f\u6570\u4ed3\u7684\u843d\u5730\u65b9\u6848\u3002\u6211\u4eec\u4ee5 Apache StreamPark \u6d41\u6279\u4e00\u4f53\u5e73\u53f0\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6613\u4e8e\u4e0a\u624b\u7684\u751f\u4ea7\u64cd\u4f5c\u624b\u518c\uff0c\u4ee5\u5e2e\u52a9\u7528\u6237\u63d0\u4ea4 Flink \u4efb\u52a1\u5e76\u8fc5\u901f\u638c\u63e1 Paimon \u7684\u4f7f\u7528\u65b9\u6cd5\u3002\\n\\n- \u516c\u53f8\u4e1a\u52a1\u60c5\u51b5\u4ecb\u7ecd\\n- \u5927\u6570\u636e\u6280\u672f\u75db\u70b9\u4ee5\u53ca\u9009\u578b\\n- \u751f\u4ea7\u5b9e\u8df5\\n- \u95ee\u9898\u6392\u67e5\u5206\u6790\\n- \u672a\u6765\u89c4\u5212\\n\\n\x3c!-- truncate --\x3e\\n\\n## 01 \u516c\u53f8\u4e1a\u52a1\u60c5\u51b5\u4ecb\u7ecd\\n\\n\u6d77\u7a0b\u90a6\u8fbe\u96c6\u56e2\u4e00\u76f4\u4e13\u6ce8\u4e8e\u4f9b\u5e94\u94fe\u7269\u6d41\u9886\u57df\uff0c\u901a\u8fc7\u6253\u9020\u4f18\u79c0\u7684\u56fd\u9645\u5316\u7269\u6d41\u5e73\u53f0\uff0c\u4e3a\u5ba2\u6237\u63d0\u4f9b\u7aef\u5230\u7aef\u4e00\u7ad9\u5f0f\u667a\u6167\u578b\u4f9b\u5e94\u94fe\u7269\u6d41\u670d\u52a1\u3002\u96c6\u56e2\u73b0\u6709\u5458\u5de5 2000 \u4f59\u4eba\uff0c\u5e74\u8425\u4e1a\u989d\u903e 120 \u4ebf\u4eba\u6c11\u5e01\uff0c\u7f51\u7edc\u904d\u53ca\u5168\u7403 200 \u4f59\u4e2a\u6e2f\u53e3\uff0c\u5728\u6d77\u5185\u5916\u6709\u8d85 80 \u5bb6\u5206\u3001\u5b50\u516c\u53f8\uff0c\u52a9\u529b\u4e2d\u56fd\u4f01\u4e1a\u4e0e\u4e16\u754c\u4e92\u8054\u4e92\u901a\u3002\\n\\n### **\u4e1a\u52a1\u80cc\u666f**\\n\\n\u968f\u7740\u516c\u53f8\u89c4\u6a21\u7684\u4e0d\u65ad\u6269\u5927\u548c\u4e1a\u52a1\u590d\u6742\u6027\u7684\u589e\u52a0\uff0c\u4e3a\u4e86\u66f4\u597d\u5730\u5b9e\u73b0\u8d44\u6e90\u4f18\u5316\u548c\u6d41\u7a0b\u6539\u8fdb\uff0c\u516c\u53f8\u8fd0\u8425\u4e0e\u6d41\u7a0b\u7ba1\u7406\u90e8\u9700\u8981\u5b9e\u65f6\u76d1\u63a7\u516c\u53f8\u7684\u4e1a\u52a1\u8fd0\u8f6c\u60c5\u51b5\uff0c\u4ee5\u786e\u4fdd\u4e1a\u52a1\u6d41\u7a0b\u7684\u7a33\u5b9a\u6027\u548c\u9ad8\u6548\u6027\u3002\\n\\n\u516c\u53f8\u8fd0\u8425\u4e0e\u6d41\u7a0b\u7ba1\u7406\u90e8\u8d1f\u8d23\u76d1\u7763\u516c\u53f8\u5404\u7c7b\u4e1a\u52a1\u6d41\u7a0b\u7684\u6267\u884c\uff0c\u5305\u62ec\u6d77\u8fd0\u3001\u7a7a\u8fd0\u3001\u94c1\u8fd0\u5404\u4e2a\u5927\u533a\u548c\u4e8b\u4e1a\u90e8\u7684\u8ba2\u5355\u91cf\uff0c\u5927\u5ba2\u6237\u7684\u8ba2\u5355\u91cf\uff0c\u822a\u7ebf\u8ba2\u5355\u91cf\uff0c\u5173\u52a1\u3001\u4ed3\u50a8\u3001\u9646\u8fd0\u5404\u4e2a\u64cd\u4f5c\u7ad9\u70b9\u7684\u59d4\u6258\u91cf\uff0c\u516c\u53f8\u5f53\u5929\u5404\u4e2a\u5927\u533a\u548c\u4e8b\u4e1a\u90e8\u5b9e\u9645\u6536\u5165\u548c\u652f\u51fa\u60c5\u51b5\u7b49\u3002\u901a\u8fc7\u5bf9\u8fd9\u4e9b\u6d41\u7a0b\u7684\u76d1\u63a7\u548c\u5206\u6790\uff0c\u516c\u53f8\u80fd\u591f\u8bc6\u522b\u51fa\u6f5c\u5728\u7684\u95ee\u9898\u548c\u74f6\u9888\uff0c\u63d0\u51fa\u6539\u8fdb\u63aa\u65bd\u548c\u5efa\u8bae\uff0c\u4ee5\u4f18\u5316\u516c\u53f8\u8fd0\u8425\u6548\u7387\u3002\\n\\n**\u5b9e\u65f6\u6570\u4ed3\u67b6\u6784\uff1a**\\n\\n![](/blog/bondex/realtime_warehouse.png)\\n\\n\u5f53\u524d\u7cfb\u7edf\u8981\u6c42\u76f4\u63a5\u4ece\u751f\u4ea7\u7cfb\u7edf\u6536\u96c6\u5b9e\u65f6\u6570\u636e\uff0c\u4f46\u5b58\u5728\u591a\u4e2a\u6570\u636e\u6e90\u9700\u8981\u8fdb\u884c\u5173\u8054\u67e5\u8be2\uff0c\u800c\u5e06\u8f6f\u62a5\u8868\u5728\u5904\u7406\u591a\u4e2a\u6570\u636e\u6e90\u65f6\u5c55\u793a\u4e0d\u591f\u53cb\u597d\uff0c\u4e14\u65e0\u6cd5\u518d\u6b21\u805a\u5408\u591a\u4e2a\u6570\u636e\u6e90\u3002\u5b9a\u65f6\u67e5\u8be2\u751f\u4ea7\u7cfb\u7edf\u4f1a\u7ed9\u751f\u4ea7\u7cfb\u7edf\u6570\u636e\u5e93\u5e26\u6765\u538b\u529b\uff0c\u5f71\u54cd\u751f\u4ea7\u7cfb\u7edf\u7684\u7a33\u5b9a\u8fd0\u884c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5f15\u5165\u4e00\u4e2a\u53ef\u4ee5\u901a\u8fc7 [Flink CDC](https://github.com/ververica/flink-cdc-connectors) \u6280\u672f\u5b9e\u73b0\u6d41\u5f0f\u5904\u7406\u7684\u6570\u4ed3\uff0c\u4ee5\u89e3\u51b3\u5b9e\u65f6\u6570\u636e\u5904\u7406\u7684\u95ee\u9898\u3002\u8fd9\u4e2a\u6570\u4ed3\u9700\u8981\u80fd\u591f\u4ece\u591a\u4e2a\u6570\u636e\u6e90\u6536\u96c6\u5b9e\u65f6\u6570\u636e\u5e76\u5728\u6b64\u57fa\u7840\u4e0a\u5b9e\u73b0\u590d\u6742\u7684\u5173\u8054 SQL \u67e5\u8be2\u3001\u673a\u5668\u5b66\u4e60\u7b49\u64cd\u4f5c\uff0c\u5e76\u4e14\u53ef\u4ee5\u907f\u514d\u4e0d\u5b9a\u65f6\u67e5\u8be2\u751f\u4ea7\u7cfb\u7edf\uff0c\u4ece\u800c\u51cf\u8f7b\u751f\u4ea7\u7cfb\u7edf\u7684\u538b\u529b\uff0c\u4fdd\u969c\u751f\u4ea7\u7cfb\u7edf\u7684\u7a33\u5b9a\u8fd0\u884c\u3002\\n\\n## 02 \u5927\u6570\u636e\u6280\u672f\u75db\u70b9\u4ee5\u53ca\u9009\u578b\\n\\n\u6d77\u7a0b\u90a6\u8fbe\u5927\u6570\u636e\u56e2\u961f\u5efa\u7acb\u4ee5\u6765\u4e00\u76f4\u4ee5\u9ad8\u6548\u8fd0\u7ef4\u5de5\u5177\u6216\u5e73\u53f0\u6765\u5b9e\u73b0\u5bf9\u4eba\u5458\u7684\u9ad8\u6548\u914d\u7f6e\uff0c\u4f18\u5316\u91cd\u590d\u52b3\u52a8\uff0c\u624b\u5de5\u4f5c\u4e1a\u3002\\n\\n\u5728\u79bb\u7ebf\u6279\u6570\u5904\u7406\u5df2\u80fd\u591f\u652f\u6301\u96c6\u56e2\u57fa\u7840\u9a7e\u9a76\u8231\u548c\u7ba1\u7406\u62a5\u8868\u7684\u60c5\u51b5\u4e0b\uff0c\u96c6\u56e2\u8fd0\u7ba1\u90e8\u95e8\u63d0\u51fa\u4e86\u4e1a\u52a1\u8981\u5b9e\u65f6\u7edf\u8ba1\u8ba2\u5355\u6570\u91cf\uff0c\u64cd\u4f5c\u5355\u91cf\u7684\u9700\u6c42\uff0c\u8d22\u52a1\u90e8\u95e8\u6709\u73b0\u91d1\u6d41\u5b9e\u65f6\u5c55\u793a\u7684\u9700\u6c42\uff0c\u5728\u8fd9\u6837\u7684\u80cc\u666f\u4e0b\uff0c\u57fa\u4e8e\u5927\u6570\u636e\u7684\u6d41\u6279\u4e00\u4f53\u65b9\u6848\u52bf\u5728\u5fc5\u884c\u3002\\n\\n\u867d\u7136\u5927\u6570\u636e\u90e8\u95e8\u5df2\u7ecf\u4f7f\u7528\u4e86 [Apache Doris](https://github.com/apache/doris) \u6765\u5b9e\u73b0\u6e56\u4ed3\u4e00\u4f53\u7684\u5b58\u50a8\u548c\u8ba1\u7b97\uff0c\u6b64\u524d\u5df2\u5728 Doris \u793e\u533a\u53d1\u8868\u6e56\u4ed3\u4e00\u4f53\u5efa\u8bbe\u7684\u6587\u7ae0\uff0c\u4f46\u662f\u6709\u4e9b\u95ee\u9898\u6709\u5f85\u89e3\u51b3\uff0c\u6d41\u5f0f\u6570\u636e\u5b58\u50a8\u65e0\u6cd5\u590d\u7528\u3001\u4e2d\u95f4\u5c42\u6570\u636e\u4e0d\u53ef\u67e5\u3001\u505a\u4e0d\u5230\u5b9e\u65f6\u805a\u5408\u8ba1\u7b97\u95ee\u9898\u3002\\n\\n\u6309\u7167\u67b6\u6784\u6f14\u8fdb\u65f6\u95f4\u6392\u5e8f\uff0c\u8fd1\u51e0\u5e74\u901a\u7528\u7684\u67b6\u6784\u89e3\u51b3\u65b9\u6848\u5982\u4e0b\uff1a\\n\\n### **hadoop\u67b6\u6784**\\n\\n\u4f20\u7edf\u6570\u4ed3\u548c\u4e92\u8054\u7f51\u6570\u4ed3\u7684\u5206\u754c\u70b9\uff0c\u5728\u4e92\u8054\u7f51\u65e9\u671f\u7684\u65f6\u5019\uff0c\u5927\u5bb6\u5bf9\u4e8e\u6570\u636e\u5206\u6790\u7684\u8981\u6c42\u4e5f\u4e0d\u9ad8\uff0c\u4e3b\u8981\u662f\u505a\u5b9e\u65f6\u6027\u4e0d\u9ad8\u7684\u62a5\u8868\u3001\u652f\u6491\u51b3\u7b56\uff0c\u5bf9\u5e94\u7684\u79bb\u7ebf\u6570\u636e\u5206\u6790\u65b9\u6848\u5c31\u4ea7\u751f\u4e86\u3002\\n\\n**\u4f18\u70b9\uff1a**\u6570\u636e\u7c7b\u578b\u652f\u6301\u4e30\u5bcc\uff0c\u652f\u6301\u6d77\u91cf\u8fd0\u7b97\uff0c\u673a\u5668\u914d\u7f6e\u8981\u6c42\u4f4e\uff0c\u65f6\u6548\u6027\u4f4e\uff0c\u5bb9\u9519\\n\\n**\u7f3a\u70b9\uff1a**\u4e0d\u652f\u6301\u5b9e\u65f6\uff1b\u8fd0\u7ef4\u590d\u6742\uff1b\u67e5\u8be2\u4f18\u5316\u5668\u4e0d\u5982 MPP\uff0c\u54cd\u5e94\u6162\\n\\n\u9009\u578b\u4f9d\u636e\uff1a\u4e0d\u652f\u6301\u5b9e\u65f6\uff1b\u8fd0\u7ef4\u590d\u6742\uff0c\u4e0d\u7b26\u5408\u4eba\u5458\u7cbe\u7b80\u914d\u7f6e\u539f\u5219\uff1b\u6027\u80fd\u5dee\\n\\n### **lambda\u67b6\u6784**\\n\\nLambda \u67b6\u6784\u662f\u7531 Storm \u7684\u4f5c\u8005 Nathan Marz \u63d0\u51fa\u7684\u4e00\u4e2a\u5b9e\u65f6\u5927\u6570\u636e\u5904\u7406\u6846\u67b6\u3002Marz \u5728 Twitter \u5de5\u4f5c\u671f\u95f4\u5f00\u53d1\u4e86\u8457\u540d\u7684\u5b9e\u65f6\u5927\u6570\u636e\u5904\u7406\u6846\u67b6 [Apache Storm](https://github.com/apache/storm) \uff0cLambda \u67b6\u6784\u662f\u5176\u6839\u636e\u591a\u5e74\u8fdb\u884c\u5206\u5e03\u5f0f\u5927\u6570\u636e\u7cfb\u7edf\u7684\u7ecf\u9a8c\u603b\u7ed3\u63d0\u70bc\u800c\u6210\u3002\\n\\n![](/blog/bondex/lambda.png)\\n\\n\u6570\u636e\u6d41\u5904\u7406\u5206\u4e3a ServingLayer\u3001SpeedLayer\u3001BatchLayer \u4e09\u5c42\uff1a\\n\\n- Batch\u5c42: \u5bf9\u79bb\u7ebf\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u6700\u540e\u63d0\u4f9b view \u670d\u52a1\u7ed9\u5230\u4e1a\u52a1\uff1b\\n- Speed\u5c42: \u5bf9\u5b9e\u65f6\u589e\u91cf\u6570\u636e\u8fdb\u884c\u5904\u7406\uff0c\u6700\u540e\u63d0\u4f9b view \u670d\u52a1\u7ed9\u5230\u4e1a\u52a1\uff1b\\n- Serving\u5c42: \u54cd\u5e94\u7528\u6237\u7684\u8bf7\u6c42\uff0c\u5b9e\u73b0\u79bb\u7ebf\u548c\u589e\u91cf\u6570\u636e\u7684\u805a\u5408\u8ba1\u7b97\uff0c\u5e76\u6700\u7ec8\u63d0\u4f9b\u670d\u52a1\uff1b\\n\\n\u4f18\u70b9\u662f\uff1a\u79bb\u7ebf\u548c\u5b9e\u65f6\u5206\u5f00\u8ba1\u7b97\uff0c\u4f7f\u7528\u4e24\u5957\u6846\u67b6\uff0c\u67b6\u6784\u7a33\u5b9a\\n\\n\u7f3a\u70b9\u662f\uff1a\u79bb\u7ebf\u548c\u5b9e\u65f6\u6570\u636e\u5f88\u96be\u4fdd\u6301\u4e00\u81f4\u6027\uff0c\u8fd0\u7ef4\u4eba\u5458\u9700\u8981\u7ef4\u62a4\u4e24\u5957\u6846\u67b6\u4e09\u5c42\u67b6\u6784\uff0c\u5f00\u53d1\u4eba\u5458\u9700\u8981\u5199\u4e09\u5957\u4ee3\u7801\\n\\n\u9009\u578b\u4f9d\u636e\uff1a\u6570\u636e\u4e00\u81f4\u6027\u4e0d\u53ef\u63a7\uff1b\u8fd0\u7ef4\u3001\u5f00\u53d1\u5de5\u4f5c\u91cf\u5927\uff0c\u4e0d\u7b26\u5408\u4eba\u5458\u7cbe\u7b80\u914d\u7f6e\u7684\u539f\u5219\uff1b\\n\\n### **kappa\u67b6\u6784**\\n\\nkappa \u67b6\u6784\u53ea\u7528\u4e00\u5957\u6570\u636e\u6d41\u5904\u7406\u67b6\u6784\u6765\u89e3\u51b3\u79bb\u7ebf\u548c\u5b9e\u65f6\u6570\u636e\uff0c\u7528\u5b9e\u65f6\u6d41\u6765\u89e3\u51b3\u6240\u6709\u95ee\u9898\uff0c\u65e8\u5728\u63d0\u4f9b\u5feb\u901f\u53ef\u9760\u7684\u67e5\u8be2\u8bbf\u95ee\u7ed3\u679c\u3002\u5b83\u975e\u5e38\u9002\u5408\u5404\u79cd\u6570\u636e\u5904\u7406\u5de5\u4f5c\u8d1f\u8f7d\uff0c\u5305\u62ec\u8fde\u7eed\u6570\u636e\u7ba1\u9053\u3001\u5b9e\u65f6\u6570\u636e\u5904\u7406\u3001\u673a\u5668\u5b66\u4e60\u6a21\u578b\u548c\u5b9e\u65f6\u6570\u636e\u5206\u6790\u3001\u7269\u8054\u7f51\u7cfb\u7edf\u4ee5\u53ca\u8bb8\u591a\u5176\u4ed6\u5177\u6709\u5355\u4e00\u6280\u672f\u5806\u6808\u7684\u7528\u4f8b\u3002\\n\\n\u5b83\u901a\u5e38\u4f7f\u7528\u6d41\u5904\u7406\u5f15\u64ce\u5b9e\u73b0\uff0c\u4f8b\u5982Apache Flink\u3001Apache Storm\u3001Apache Kinesis\u3001 Apache Kafka\uff0c\u65e8\u5728\u5904\u7406\u5927\u91cf\u6570\u636e\u6d41\u5e76\u63d0\u4f9b\u5feb\u901f\u53ef\u9760\u7684\u67e5\u8be2\u8bbf\u95ee\u7ed3\u679c\u3002\\n\\n![](/blog/bondex/kappa.png)\\n\\n**\u4f18\u70b9\u662f\uff1a**\u5355\u6570\u636e\u6d41\u5904\u7406\u6846\u67b6\\n\\n**\u7f3a\u70b9\u662f\uff1a**\u867d\u7136\u5b83\u7684\u67b6\u6784\u76f8\u5bf9 lamabda \u67b6\u6784\u7b80\u5355\uff0c\u4f46\u662f\u6d41\u5f0f\u5904\u7406\u6846\u67b6\u7684\u8bbe\u7f6e\u548c\u7ef4\u62a4\u76f8\u5bf9\u590d\u6742\uff0c\u4e0d\u5177\u5907\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u79bb\u7ebf\u6570\u636e\u5904\u7406\u80fd\u529b\uff1b\u6d41\u5e73\u53f0\u4e2d\u5b58\u50a8\u5927\u6570\u636e\u6210\u672c\u9ad8\u6602\\n\\n\u9009\u578b\u4f9d\u636e\uff1a\u79bb\u7ebf\u6570\u636e\u5904\u7406\u80fd\u529b\u9700\u8981\u4fdd\u7559\uff0c\u63a7\u5236\u6210\u672c\\n\\n### **Iceberg**\\n\\n\u4e3a\u6b64\u6211\u4eec\u4e5f\u8c03\u7814\u4e86 [Apache Iceberg](https://github.com/apache/Iceberg) \uff0c\u5b83\u7684\u5feb\u7167\u529f\u80fd\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u80fd\u591f\u5b9e\u73b0\u6d41\u6279\u4e00\u4f53\uff0c\u4f46\u662f\u5b83\u7684\u95ee\u9898\u662f\u57fa\u4e8e kafka \u505a\u7684\u5b9e\u65f6\u8868\u4e2d\u95f4\u5c42\u4e0d\u53ef\u67e5\u6216\u8005\u65e0\u6cd5\u590d\u7528\u5df2\u7ecf\u5b58\u5728\u7684\u8868\uff0c\u5bf9 kafka \u6709\u5f3a\u4f9d\u8d56\uff0c\u9700\u8981\u5229\u7528 kafka \u5c06\u4e2d\u95f4\u7ed3\u679c\u5199\u5230 iceberg \u8868\uff0c\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u548c\u53ef\u7ef4\u62a4\u6027\u3002\\n\\n\u9009\u578b\u4f9d\u636e\uff1a\u65e0 kafka \u5b9e\u65f6\u67b6\u6784\u5df2\u843d\u5730\uff0c\u4e2d\u95f4\u6570\u636e\u65e0\u6cd5\u5b9e\u73b0\u53ef\u67e5\u53ef\u590d\u7528\\n\\n### **\u6d41\u5f0f\u6570\u4ed3\uff08kappa\u67b6\u6784\u7684\u5ef6\u7eed)**\\n\\n\u6d77\u7a0b\u90a6\u8fbe\u5927\u6570\u636e\u56e2\u961f\u81ea FTS0.3.0 \u7248\u672c\u5f00\u59cb\u53c2\u4e0e\u6d41\u5f0f\u6570\u4ed3\u5efa\u8bbe\uff0c\u65e8\u5728\u8fdb\u4e00\u6b65\u964d\u4f4e\u6570\u636e\u5904\u7406\u6846\u67b6\u7684\u590d\u6742\u5ea6\u548c\u4eba\u5458\u7684\u7cbe\u7b80\u914d\u7f6e\uff0c\u524d\u671f\u7684\u5b97\u65e8\u662f\u65e2\u7136\u662f\u8d8b\u52bf\u5c31\u8981\u53c2\u4e0e\u8fdb\u6765\uff0c\u8fc7\u7a0b\u4e2d\u4e0d\u65ad\u5b66\u4e60\u7cbe\u8fdb\uff0c\u5411\u6700\u524d\u6cbf\u7684\u6280\u672f\u9760\u62e2\uff0c\u56e2\u961f\u4e00\u81f4\u8ba4\u4e3a\u6709\u5751\u5c31\u8e29\u5751\uff0c\u6478\u7740\u77f3\u5934\u4e5f\u8981\u8fc7\u6cb3\uff0c\u597d\u5728\u7ecf\u8fc7\u51e0\u4e2a\u7248\u672c\u7684\u8fed\u4ee3\uff0c\u5728\u793e\u533a\u7684\u9ad8\u6548\u914d\u5408\u4e0b\uff0c\u6700\u5f00\u59cb\u51fa\u73b0\u7684\u95ee\u9898\u4e5f\u6162\u6162\u5f97\u4ee5\u89e3\u51b3\\n\\n**\u6d41\u5f0f\u6570\u4ed3\u67b6\u6784\u5982\u4e0b\uff1a**\\n\\n![](/blog/bondex/streaming_warehouse.png)\\n\\n\u5ef6\u7eed\u4e86 kappa \u67b6\u6784\u7684\u7279\u70b9\uff0c\u4e00\u5957\u6d41\u5904\u7406\u67b6\u6784\uff0c\u597d\u5904\u5728\u4e0e\uff0c\u5e95\u5c42 Paimon \u7684\u6280\u672f\u652f\u6491\u4f7f\u5f97\u6570\u636e\u5728\u5168\u94fe\u8def\u53ef\u67e5\uff0c\u6570\u4ed3\u5206\u5c42\u67b6\u6784\u5f97\u4ee5\u590d\u7528\uff0c\u540c\u65f6\u517c\u987e\u4e86\u79bb\u7ebf\u548c\u5b9e\u65f6\u7684\u5904\u7406\u80fd\u529b\uff0c\u51cf\u5c11\u5b58\u50a8\u548c\u8ba1\u7b97\u7684\u6d6a\u8d39\\n\\n## 03 \u751f \u4ea7 \u5b9e \u8df5\\n\\n\u672c\u65b9\u6848\u91c7\u7528 Flink Application On K8s \u96c6\u7fa4\uff0cFlink CDC \u5b9e\u65f6\u6444\u53d6\u4e1a\u52a1\u7cfb\u7edf\u5173\u7cfb\u578b\u6570\u636e\u5e93\u6570\u636e\uff0c\u901a\u8fc7 StreamPark \u4efb\u52a1\u5e73\u53f0\u63d0\u4ea4 Flink + Paimon Streaming Data Warehouse \u4efb\u52a1\uff0c \u6700\u540e\u91c7\u7528 Trino \u5f15\u64ce\u63a5\u5165 Finereport \u63d0\u4f9b\u670d\u52a1\u548c\u5f00\u53d1\u4eba\u5458\u7684\u67e5\u8be2\u3002Paimon \u5e95\u5c42\u5b58\u50a8\u652f\u6301 S3 \u534f\u8bae\uff0c\u56e0\u4e3a\u516c\u53f8\u5927\u6570\u636e\u670d\u52a1\u4f9d\u8d56\u4e8e\u963f\u91cc\u4e91\u6240\u4ee5\u4f7f\u7528\u5bf9\u8c61\u5b58\u50a8OSS\u4f5c\u4e3a\u6570\u636e\u6587\u4ef6\u7cfb\u7edf\u3002\\n\\n[StreamPark](https://github.com/apache/incubator-streampark) \u662f\u4e00\u4e2a\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\uff0c\u4e0e [Paimon](https://github.com/apache/incubator-paimon) \u7ed3\u5408\u4f7f\u7528\u5176\u5f3a\u5927\u529f\u80fd\u6765\u5904\u7406\u5b9e\u65f6\u6570\u636e\u6d41\u3002\u6b64\u5e73\u53f0\u63d0\u4f9b\u4ee5\u4e0b\u4e3b\u8981\u529f\u80fd\uff1a\\n\\n**\u5b9e\u65f6\u6570\u636e\u5904\u7406\uff1a**StreamPark \u652f\u6301\u63d0\u4ea4\u5b9e\u65f6\u6570\u636e\u6d41\u4efb\u52a1\uff0c\u80fd\u591f\u5b9e\u65f6\u83b7\u53d6\u3001\u8f6c\u6362\u3001\u8fc7\u6ee4\u548c\u5206\u6790\u6570\u636e\u3002\u8fd9\u5bf9\u4e8e\u9700\u8981\u5feb\u901f\u54cd\u5e94\u5b9e\u65f6\u6570\u636e\u7684\u5e94\u7528\u975e\u5e38\u91cd\u8981\uff0c\u4f8b\u5982\u5b9e\u65f6\u76d1\u63a7\u3001\u5b9e\u65f6\u63a8\u8350\u548c\u5b9e\u65f6\u98ce\u63a7\u7b49\u9886\u57df\u3002\\n\\n**\u53ef\u6269\u5c55\u6027\uff1a**\u53ef\u4ee5\u9ad8\u6548\u5904\u7406\u5927\u89c4\u6a21\u5b9e\u65f6\u6570\u636e\uff0c\u5177\u5907\u826f\u597d\u7684\u53ef\u6269\u5c55\u6027\u3002\u53ef\u4ee5\u5728\u5206\u5e03\u5f0f\u8ba1\u7b97\u73af\u5883\u4e2d\u8fd0\u884c\uff0c\u5e76\u80fd\u591f\u81ea\u52a8\u5904\u7406\u5e76\u884c\u5316\u3001\u6545\u969c\u6062\u590d\u548c\u8d1f\u8f7d\u5747\u8861\u7b49\u95ee\u9898\uff0c\u4ee5\u786e\u4fdd\u9ad8\u6548\u4e14\u53ef\u9760\u5730\u5904\u7406\u6570\u636e\u3002\\n\\n**Flink \u96c6\u6210\uff1a**\u57fa\u4e8e [Apache Flink](https://github.com/apache/flink) \u6784\u5efa\uff0c\u5229\u7528 Flink \u7684\u5f3a\u5927\u6d41\u5904\u7406\u5f15\u64ce\u6765\u5b9e\u73b0\u9ad8\u6027\u80fd\u548c\u9c81\u68d2\u6027\u3002\u7528\u6237\u53ef\u4ee5\u5145\u5206\u5229\u7528 Flink \u7684\u7279\u6027\u548c\u751f\u6001\u7cfb\u7edf\uff0c\u5982\u5e7f\u6cdb\u7684\u8fde\u63a5\u5668\u3001\u72b6\u6001\u7ba1\u7406\u548c\u4e8b\u4ef6\u65f6\u95f4\u5904\u7406\u7b49\u3002\\n\\n**\u6613\u7528\u6027\uff1a**\u63d0\u4f9b\u4e86\u76f4\u89c2\u7684\u56fe\u5f62\u754c\u9762\u548c\u7b80\u5316\u7684 API\uff0c\u53ef\u4ee5\u8f7b\u677e\u5730\u6784\u5efa\u548c\u90e8\u7f72\u6570\u636e\u5904\u7406\u4efb\u52a1\uff0c\u800c\u65e0\u9700\u6df1\u5165\u4e86\u89e3\u5e95\u5c42\u6280\u672f\u7ec6\u8282\u3002\\n\\n\u901a\u8fc7\u5728 StreamPark \u5e73\u53f0\u4e0a\u63d0\u4ea4 Paimon \u4efb\u52a1\uff0c\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u5168\u94fe\u8def\u5b9e\u65f6\u6d41\u52a8\u3001\u53ef\u67e5\u8be2\u548c\u5206\u5c42\u53ef\u590d\u7528\u7684 Pipline\u3002\\n\\n![](/blog/bondex/pipline.png)\\n\\n\u4e3b\u8981\u91c7\u7528\u7ec4\u4ef6\u7248\u672c\u5982\u4e0b\uff1a\\n\\n- flink-1.16.0-scala-2.12\\n- paimon-flink-1.16-0.4-20230424.001927-40.jar\\n- apache-streampark_2.12-2.0.0\\n- kubernetes v1.18.3\\n\\n### **\u73af\u5883\u6784\u5efa**\\n\\n\u4e0b\u8f7d flink-1.16.0-scala-2.12.tar.gz \u53ef\u4ee5\u5728 flink\u5b98\u7f51 \u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c\u7684\u5b89\u88c5\u5305\u5230StreamPark \u90e8\u7f72\u670d\u52a1\u5668\\n\\n```shell\\n#\u89e3\u538b\\ntar zxvf flink-1.16.0-scala-2.12.tar.gz\\n\\n#\u4fee\u6539 flink-conf \u914d\u7f6e\u6587\u4ef6\u5e76\u542f\u52a8\u96c6\u7fa4\\n\\njobmanager.rpc.address: localhost\\njobmanager.rpc.port: 6123\\njobmanager.bind-host: localhost\\njobmanager.memory.process.size: 4096m\\ntaskmanager.bind-host: localhost\\ntaskmanager.host: localhost\\ntaskmanager.memory.process.size: 4096m\\ntaskmanager.numberOfTaskSlots: 4\\nparallelism.default: 4\\nakka.ask.timeout: 100s\\nweb.timeout: 1000000\\n\\n#checkpoints&&savepoints\\nstate.checkpoints.dir: file:///opt/flink/checkpoints\\nstate.savepoints.dir: file:///opt/flink/savepoints\\nexecution.checkpointing.interval: 2min\\n\\n#\u5f53\u4f5c\u4e1a\u624b\u52a8\u53d6\u6d88/\u6682\u505c\u65f6\uff0c\u5c06\u4f1a\u4fdd\u7559\u4f5c\u4e1a\u7684 Checkpoint \u72b6\u6001\u4fe1\u606f\\nexecution.checkpointing.externalized-checkpoint-retention: RETAIN_ON_CANCELLATION\\nstate.backend: rocksdb\\n\\n#\u5df2\u5b8c\u6210\u7684CP\u4fdd\u5b58\u4e2a\u6570\\nstate.checkpoints.num-retained: 2000\\nstate.backend.incremental: true\\nexecution.checkpointing.checkpoints-after-tasks-finish.enabled: true\\n\\n#OSS\\nfs.oss.endpoint: oss-cn-zhangjiakou-internal.aliyuncs.com\\nfs.oss.accessKeyId: xxxxxxxxxxxxxxxxxxxxxxx\\nfs.oss.accessKeySecret: xxxxxxxxxxxxxxxxxxxxxxx\\nfs.oss.impl: org.apache.hadoop.fs.aliyun.oss.AliyunOSSFileSystem\\njobmanager.execution.failover-strategy: region\\nrest.port: 8081\\nrest.address: localhost\\n```\\n\\n\u5efa\u8bae\u53ef\u4ee5\u5728\u672c\u5730\u6dfb\u52a0 FLINK_HOME \u65b9\u4fbf\u5728\u4e0a k8s \u4e4b\u524d\u672c\u5730\u6392\u67e5\u95ee\u9898\u4f7f\u7528\\n\\nvim /etc/profile\\n\\n```shell\\n#FLINK\\nexport FLINK_HOME=/data/src/flink-1.16.0-scala-2.12\\nexport PATH=$PATH:$FLINK_HOME/bin\\nsource /etc/profile\\n```\\n\\n\u5728 StreamPark \u6dfb\u52a0 Flink conf:\\n\\n![](/blog/bondex/flink_conf.jpg)\\n\\n\u6784\u5efa Flink 1.16.0 \u57fa\u7840\u955c\u50cf\u4ece dockerhub\u62c9\u53d6\u5bf9\u5e94\u7248\u672c\u7684\u955c\u50cf\\n\\n```dockerfile\\n#\u62c9\u53d6\u955c\u50cf\\ndocker pull flink:1.16.0-scala_2.12-java8\\n\\n#\u6253\u4e0a tag\\ndocker tagflink:1.16.0-scala_2.12-java8  registry-vpc.cn-zhangjiakou.aliyuncs.com/xxxxx/flink:1.16.0-scala_2.12-java8\\n\\n#push \u5230\u516c\u53f8\u4ed3\u5e93\\ndocker pushregistry-vpc.cn-zhangjiakou.aliyuncs.com/xxxxx/flink:1.16.0-scala_2.12-java8\\n```\\n\\n\u521b\u5efa Dockerfile \u6587\u4ef6 & target \u76ee\u5f55\u5c06 flink-oss-fs-hadoop JAR\u5305\u653e\u7f6e\u5728\u8be5\u76ee\u5f55 Shaded Hadoop OSS file system jar \u5305\u4e0b\u8f7d\u5730\u5740\uff1a\\n\\nhttps://repository.apache.org/snapshots/org/apache/paimon/paimon-oss/\\n\\n.\\n\\n\u251c\u2500\u2500 Dockerfile\\n\\n\u2514\u2500\u2500 target\\n\\n \u2514\u2500\u2500 flink-oss-fs-hadoop-1.16.0.jar\\n\\n```shell\\ntouch Dockerfile\\n\\nmkdir target\\n\\n#vim Dockerfile\\nFROM registry-vpc.cn-zhangjiakou.aliyuncs.com/xxxxx/flink:1.16.0-scala_2.12-java8\\n\\nRUN mkdir /opt/flink/plugins/oss-fs-hadoop\\n\\nCOPY target/flink-oss-fs-hadoop-1.16.0.jar  /opt/flink/plugins/oss-fs-hadoop\\n```\\n\\n### **build \u57fa\u7840\u955c\u50cf**\\n\\n```shell\\ndocker build -t flink-table-store:v1.16.0 .\\n\\ndocker tag flink-table-store:v1.16.0 registry-vpc.cn-zhangjiakou.aliyuncs.com/xxxxx/flink-table-store:v1.16.0\\n\\ndocker push registry-vpc.cn-zhangjiakou.aliyuncs.com/xxxxx/flink-table-store:v1.16.0\\n```\\n\\n\u63a5\u4e0b\u6765\u51c6\u5907 Paimon jar \u5305\uff0c\u53ef\u4ee5\u5728 Apache [Repository](https://repository.apache.org/content/groups/snapshots/org/apache/paimon) \u4e0b\u8f7d\u5bf9\u5e94\u7248\u672c\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u8981\u548c flink \u5927\u7248\u672c\u4fdd\u6301\u4e00\u81f4\\n\\n### **\u4f7f\u7528 Apache StreamPark\u2122 \u7ba1\u7406\u4f5c\u4e1a**\\n\\n**\u524d\u63d0\u6761\u4ef6\uff1a**\\n\\n- Kubernetes \u5ba2\u6237\u7aef\u8fde\u63a5\u914d\u7f6e\\n- Kubernetes RBAC \u914d\u7f6e\\n- \u5bb9\u5668\u955c\u50cf\u4ed3\u5e93\u914d\u7f6e \uff08\u6848\u4f8b\u4e2d\u4f7f\u7528\u7684\u662f\u963f\u91cc\u4e91\u955c\u50cf\u514d\u8d39\u7248\uff09\\n- \u521b\u5efa\u6302\u8f7d checkpoint/savepoint \u7684 pvc \u8d44\u6e90\\n\\n**Kubernetes \u5ba2\u6237\u7aef\u8fde\u63a5\u914d\u7f6e\uff1a**\\n\\n\u5c06 k8s master\u8282\u70b9~/.kube/config \u914d\u7f6e\u76f4\u63a5\u62f7\u8d1d\u5230 StreamPark \u670d\u52a1\u5668\u7684\u76ee\u5f55\uff0c\u4e4b\u540e\u5728 StreamPark \u670d\u52a1\u5668\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u663e\u793a k8s \u96c6\u7fa4 running \u4ee3\u8868\u6743\u9650\u548c\u7f51\u7edc\u9a8c\u8bc1\u6210\u529f\u3002\\n\\n```shell\\nkubectl cluster-info\\n```\\n\\nKubernetes RBAC \u914d\u7f6e\uff0c\u521b\u5efa streampark \u547d\u540d\u7a7a\u95f4:\\n\\n```shell\\nkubectl create ns streampark\\n```\\n\\n\u4f7f\u7528 default \u8d26\u6237\u521b\u5efa clusterrolebinding \u8d44\u6e90:\\n\\n```shell\\nkubectl create secret docker-registry streamparksecret \\n--docker-server=registry-vpc.cn-zhangjiakou.aliyuncs.com \\n--docker-username=xxxxxx \\n--docker-password=xxxxxx -n streampark```\\n```\\n\\n**\u5bb9\u5668\u955c\u50cf\u4ed3\u5e93\u914d\u7f6e:**\\n\\n\u6848\u4f8b\u4e2d\u4f7f\u7528\u963f\u91cc\u4e91\u5bb9\u5668\u955c\u50cf\u670d\u52a1ACR\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u81ea\u5efa\u955c\u50cf\u670d\u52a1harbor\u4ee3\u66ff\u3002\\n\\n\u521b\u5efa\u547d\u540d\u7a7a\u95f4 StreamPark (\u5b89\u5168\u8bbe\u7f6e\u9700\u8981\u8bbe\u7f6e\u4e3a\u79c1\u6709)\\n\\n![](/blog/bondex/aliyun.png)\\n\\n\u5728 StreamPark \u914d\u7f6e\u955c\u50cf\u4ed3\u5e93\uff0c\u4efb\u52a1\u6784\u5efa\u955c\u50cf\u4f1a\u63a8\u9001\u5230\u955c\u50cf\u4ed3\u5e93\\n\\n![](/blog/bondex/dockersystem_setting.png)\\n\\n\u521b\u5efa k8s secret \u5bc6\u94a5\u7528\u6765\u62c9\u53d6 ACR \u4e2d\u7684\u955c\u50cf streamparksecret \u4e3a\u5bc6\u94a5\u540d\u79f0 \u81ea\u5b9a\u4e49\\n\\n```shell\\nkubectl create secret docker-registry streamparksecret \\n--docker-server=registry-vpc.cn-zhangjiakou.aliyuncs.com \\n--docker-username=xxxxxx \\n--docker-password=xxxxxx -n streampark\\n```\\n\\n\u521b\u5efa\u6302\u8f7d checkpoint/savepoint \u7684 pvc \u8d44\u6e90\uff0c\u57fa\u4e8e\u963f\u91cc\u4e91\u7684\u5bf9\u8c61\u5b58\u50a8OSS\u505aK8S\u7684\u6301\u4e45\u5316\\n\\n**OSS CSI \u63d2\u4ef6\uff1a**\\n\\n\u53ef\u4ee5\u4f7f\u7528 OSS CSI \u63d2\u4ef6\u6765\u5e2e\u52a9\u7b80\u5316\u5b58\u50a8\u7ba1\u7406\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 csi \u914d\u7f6e\u521b\u5efa pv\uff0c\u5e76\u4e14 pvc\u3001pod \u50cf\u5f80\u5e38\u4e00\u6837\u5b9a\u4e49\uff0cyaml \u6587\u4ef6\u53c2\u8003\uff1a\\nhttps://bondextest.oss-cn-zhangjiakou.aliyuncs.com/ossyaml.zip\\n\\n**\u914d\u7f6e\u8981\u6c42\uff1a**\\n\\n\\\\- \u521b\u5efa\u5177\u6709\u6240\u9700 RBAC \u6743\u9650\u7684\u670d\u52a1\u5e10\u6237\uff0c\u53c2\u8003\uff1a\\n\\nhttps://github.com/kubernetes-sigs/alibaba-cloud-csi-driver/blob/master/docs/oss.md\\n\\n```shell\\nkubectl -f rbac.yaml\\n```\\n\\n\\\\- \u90e8\u7f72OSS CSI \u63d2\u4ef6\\n\\n```shell\\nkubectl -f oss-plugin.yaml\\n```\\n\\n\\\\- \u521b\u5efa CP&SP \u7684 PV\\n\\n```shell\\nkubectl -f checkpoints_pv.yaml kubectl -f savepoints_pv.yaml\\n```\\n\\n\\\\- \u521b\u5efa CP&SP \u7684 PVC\\n\\n```shell\\nkubectl -f checkpoints_pvc.yaml kubectl -f savepoints_pvc.yaml\\n```\\n\\n\u914d\u7f6e\u597d\u4f9d\u8d56\u73af\u5883\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u5f00\u59cb\u4f7f\u7528 Paimon \u8fdb\u884c\u6d41\u5f0f\u6570\u4ed3\u7684\u5206\u5c42\u5f00\u53d1\u3002\\n\\n### **\u6848\u4f8b**\\n\\n\u7edf\u8ba1\u6d77\u8fd0\u7a7a\u8fd0\u5b9e\u65f6\u59d4\u6258\u5355\u91cf\\n\\n\u4efb\u52a1\u63d0\u4ea4\uff1a\u521d\u59cb\u5316 Paimon catalog \u914d\u7f6e\\n\\n![](/blog/bondex/paimon_catalog_setting.png)\\n\\n```sql\\nSET 'execution.runtime-mode' = 'streaming';\\nset 'table.exec.sink.upsert-materialize' = 'none';\\nSET 'sql-client.execution.result-mode' = 'tableau';\\n-- \u521b\u5efa\u5e76\u4f7f\u7528 FTS Catalog \u5e95\u5c42\u5b58\u50a8\u65b9\u6848\u91c7\u7528\u963f\u91cc\u4e91oss\\nCREATE CATALOG `table_store` WITH (\\n'type' = 'paimon',\\n'warehouse' = 'oss://xxxxx/xxxxx' #\u81ea\u5b9a\u4e49oss\u5b58\u50a8\u8def\u5f84\\n);\\nUSE CATALOG `table_store`;\\n```\\n\\n\u4e00\u4e2a\u4efb\u52a1\u540c\u65f6\u62bd\u53d6 postgres\u3001mysql\u3001sqlserver \u4e09\u79cd\u6570\u636e\u5e93\u7684\u8868\u6570\u636e\u5199\u5165\u5230 Paimon\\n\\n![](/blog/bondex/application_setting.png)\\n\\n![](/blog/bondex/pom.jpg)\\n\\n![](/blog/bondex/pod_template.png)\\n\\n**\u4fe1\u606f\u5982\u4e0b:**\\n\\n```\\nDevelopment Mode\uff1aFlink SQL\\n\\nExecution Mode \uff1akubernetes application\\n\\nFlink Version \uff1aflink-1.16.0-scala-2.12\\n\\nKubernetes Namespace \uff1astreampark\\n\\nKubernetes ClusterId \uff1a\uff08\u4efb\u52a1\u540d\u81ea\u5b9a\u4e49\u5373\u53ef\uff09\\n\\n#\u4e0a\u4f20\u5230\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u7684\u57fa\u7840\u955c\u50cf\\nFlink Base Docker Image \uff1aregistry-vpc.cn-zhangjiakou.aliyuncs.com/xxxxx/flink-table-store:v1.16.0\\n\\nRest-Service Exposed Type\uff1aNodePort\\n\\n#paimon\u57fa\u7840\u4f9d\u8d56\u5305\uff1a\\n\\npaimon-flink-1.16-0.4-20230424.001927-40.jar\\n\\nflink-shaded-hadoop-2-uber-2.8.3-10.0.jar\\n\\n#flinkcdc\u4f9d\u8d56\u5305\u4e0b\u8f7d\u5730\u5740\uff1a\\n\\nhttps://github.com/ververica/flink-cdc-connectors/releases/tag/release-2.2.0\\n```\\n\\n**pod template:**\\n\\n```yaml\\napiVersion: v1\\nkind: Pod\\nmetadata:\\nname: pod-template\\nspec:\\n\\ncontainers:\\n  - name: flink-main-container\\n    volumeMounts:\\n      - name: flink-checkpoints-csi-pvc\\n        mountPath: /opt/flink/checkpoints\\n      - name: flink-savepoints-csi-pvc\\n        mountPath: /opt/flink/savepoints\\n\\nvolumes:\\n  - name: flink-checkpoints-csi-pvc\\n    persistentVolumeClaim:\\n      claimName: flink-checkpoints-csi-pvc\\n  - name: flink-savepoints-csi-pvc\\n    persistentVolumeClaim:\\n      claimName: flink-savepoints-csi-pvc\\n\\nimagePullSecrets:\\n- name: streamparksecret\\n```\\n\\n**Flink sql\uff1a**\\n\\n1. \u6784\u5efa\u6e90\u8868\u548cpaimon\u4e2dods\u8868\u7684\u5173\u7cfb\uff0c\u8fd9\u91cc\u5c31\u662f\u6e90\u8868\u548c\u76ee\u6807\u8868\u4e00\u5bf9\u4e00\u6620\u5c04\\n\\n```sql\\n-- postgre\u6570\u636e\u5e93 \u793a\u4f8b\\nCREATE TEMPORARY TABLE `shy_doc_hdworkdochd` (\\n`doccode` varchar(50) not null COMMENT '\u4e3b\u952e',\\n`businessmodel` varchar(450) COMMENT '\u4e1a\u52a1\u6a21\u5f0f',\\n`businesstype` varchar(450)  COMMENT '\u4e1a\u52a1\u6027\u8d28',\\n`transporttype` varchar(50) COMMENT '\u8fd0\u8f93\u7c7b\u578b',\\n......\\n`bookingguid` varchar(50) COMMENT '\u64cd\u4f5c\u7f16\u53f7',\\nPRIMARY KEY (`doccode`) NOT ENFORCED\\n) WITH (\\n'connector' = 'postgres-cdc',\\n'hostname' = '\u6570\u636e\u5e93\u670d\u52a1\u5668IP\u5730\u5740',\\n'port' = '\u7aef\u53e3\u53f7',\\n'username' = '\u7528\u6237\u540d',\\n'password' = '\u5bc6\u7801',\\n'database-name' = '\u6570\u636e\u5e93\u540d',\\n'schema-name' = 'dev',\\n'decoding.plugin.name' = 'wal2json',,\\n'table-name' = 'doc_hdworkdochd',\\n'debezium.slot.name' = 'hdworkdochdslotname03'\\n);\\n\\nCREATE TEMPORARY TABLE `shy_base_enterprise` (\\n`entguid` varchar(50) not null COMMENT '\u4e3b\u952e',\\n`entorgcode` varchar(450) COMMENT '\u5ba2\u6237\u7f16\u53f7',\\n`entnature` varchar(450)  COMMENT '\u5ba2\u6237\u7c7b\u578b',\\n`entfullname` varchar(50) COMMENT '\u5ba2\u6237\u540d\u79f0',\\nPRIMARY KEY (`entguid`,`entorgcode`) NOT ENFORCED\\n) WITH (\\n'connector' = 'postgres-cdc',\\n'hostname' = '\u6570\u636e\u5e93\u670d\u52a1\u5668IP\u5730\u5740',\\n'port' = '\u7aef\u53e3\u53f7',\\n'username' = '\u7528\u6237\u540d',\\n'password' = '\u5bc6\u7801',\\n'database-name' = '\u6570\u636e\u5e93\u540d',\\n'schema-name' = 'dev',\\n'decoding.plugin.name' = 'wal2json',\\n'table-name' = 'base_enterprise',\\n'debezium.snapshot.mode'='never', -- \u589e\u91cf\u540c\u6b65(\u5168\u91cf+\u589e\u91cf\u5ffd\u7565\u8be5\u5c5e\u6027)\\n'debezium.slot.name' = 'base_enterprise_slotname03'\\n);\\n\\n-- \u6839\u636e\u6e90\u8868\u7ed3\u6784\u5728paimon\u4e0aods\u5c42\u521b\u5efa\u5bf9\u5e94\u7684\u76ee\u6807\u8868\\nCREATE TABLE IF NOT EXISTS ods.`ods_shy_jh_doc_hdworkdochd` (\\n`o_year` BIGINT NOT NULL COMMENT '\u5206\u533a\u5b57\u6bb5',\\n`create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\nPRIMARY KEY (`o_year`, `doccode`) NOT ENFORCED\\n) PARTITIONED BY (`o_year`)\\nWITH (\\n'changelog-producer.compaction-interval' = '2m'\\n) LIKE `shy_doc_hdworkdochd` (EXCLUDING CONSTRAINTS EXCLUDING OPTIONS);\\nCREATE TABLE IF NOT EXISTS ods.`ods_shy_base_enterprise` (\\n`create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\nPRIMARY KEY (`entguid`,`entorgcode`) NOT ENFORCED\\n)\\nWITH (\\n'changelog-producer.compaction-interval' = '2m'\\n) LIKE `shy_base_enterprise` (EXCLUDING CONSTRAINTS EXCLUDING OPTIONS);\\n\\n-- \u8bbe\u7f6e\u4f5c\u4e1a\u540d\uff0c\u6267\u884c\u4f5c\u4e1a\u4efb\u52a1\u5c06\u6e90\u8868\u6570\u636e\u5b9e\u65f6\u5199\u5165\u5230paimon\u5bf9\u5e94\u8868\u4e2d\\nSET 'pipeline.name' = 'ods_doc_hdworkdochd';\\nINSERT INTO\\nods.`ods_shy_jh_doc_hdworkdochd`\\nSELECT\\n*\\n,YEAR(`docdate`) AS `o_year`\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM\\n`shy_doc_hdworkdochd` where `docdate` is not null and `docdate` > '2023-01-01';\\nSET 'pipeline.name' = 'ods_shy_base_enterprise';\\nINSERT INTO\\nods.`ods_shy_base_enterprise`\\nSELECT\\n*\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM\\n`shy_base_enterprise` where entorgcode is not null and entorgcode <> '';\\n\\n-- mysql\u6570\u636e\u5e93 \u793a\u4f8b\\nCREATE TEMPORARY TABLE `doc_order` (\\n`id` BIGINT NOT NULL COMMENT '\u4e3b\u952e',\\n`order_no` varchar(50) NOT NULL COMMENT '\u8ba2\u5355\u53f7',\\n`business_no` varchar(50) COMMENT 'OMS\u670d\u52a1\u53f7',\\n......\\n`is_deleted` int COMMENT '\u662f\u5426\u4f5c\u5e9f',\\nPRIMARY KEY (`id`) NOT ENFORCED\\n) WITH (\\n'connector' = 'mysql-cdc',\\n'hostname' = '\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740',\\n'port' = '\u7aef\u53e3\u53f7',\\n'username' = '\u7528\u6237\u540d',\\n'password' = '\u5bc6\u7801',\\n'database-name' = '\u5e93\u540d',\\n'table-name' = 'doc_order'\\n);\\n\\n-- \u6839\u636e\u6e90\u8868\u7ed3\u6784\u5728paimon\u4e0aods\u5c42\u521b\u5efa\u5bf9\u5e94\u7684\u76ee\u6807\u8868\\nCREATE TABLE IF NOT EXISTS ods.`ods_bondexsea_doc_order` (\\n`o_year` BIGINT NOT NULL COMMENT '\u5206\u533a\u5b57\u6bb5',\\n`create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\nPRIMARY KEY (`o_year`, `id`) NOT ENFORCED\\n) PARTITIONED BY (`o_year`)\\nWITH (\\n'changelog-producer.compaction-interval' = '2m'\\n) LIKE `doc_order` (EXCLUDING CONSTRAINTS EXCLUDING OPTIONS);\\n\\n-- \u8bbe\u7f6e\u4f5c\u4e1a\u540d\uff0c\u6267\u884c\u4f5c\u4e1a\u4efb\u52a1\u5c06\u6e90\u8868\u6570\u636e\u5b9e\u65f6\u5199\u5165\u5230paimon\u5bf9\u5e94\u8868\u4e2d\\nSET 'pipeline.name' = 'ods_bondexsea_doc_order';\\nINSERT INTO\\nods.`ods_bondexsea_doc_order`\\nSELECT\\n*\\n,YEAR(`gmt_create`) AS `o_year`\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM `doc_order` where gmt_create > '2023-01-01';\\n\\n-- sqlserver\u6570\u636e\u5e93 \u793a\u4f8b\\nCREATE TEMPORARY TABLE `OrderHAWB` (\\n`HBLIndex` varchar(50) NOT NULL COMMENT '\u4e3b\u952e',\\n`CustomerNo` varchar(50) COMMENT '\u5ba2\u6237\u7f16\u53f7',\\n......\\n`CreateOPDate` timestamp COMMENT '\u5236\u5355\u65e5\u671f',\\nPRIMARY KEY (`HBLIndex`) NOT ENFORCED\\n) WITH (\\n'connector' = 'sqlserver-cdc',\\n'hostname' = '\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740',\\n'port' = '\u7aef\u53e3\u53f7',\\n'username' = '\u7528\u6237\u540d',\\n'password' = '\u5bc6\u7801',\\n'database-name' = '\u6570\u636e\u5e93\u540d',\\n'schema-name' = 'dbo',\\n-- 'debezium.snapshot.mode' = 'initial' -- \u5168\u91cf\u589e\u91cf\u90fd\u62bd\u53d6\\n'scan.startup.mode' = 'latest-offset',-- \u53ea\u62bd\u53d6\u589e\u91cf\u6570\u636e\\n'table-name' = 'OrderHAWB'\\n);\\n\\n-- \u6839\u636e\u6e90\u8868\u7ed3\u6784\u5728paimon\u4e0aods\u5c42\u521b\u5efa\u5bf9\u5e94\u7684\u76ee\u6807\u8868\\nCREATE TABLE IF NOT EXISTS ods.`ods_airsea_airfreight_orderhawb` (\\n`o_year` BIGINT NOT NULL COMMENT '\u5206\u533a\u5b57\u6bb5',\\n`create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\nPRIMARY KEY (`o_year`, `HBLIndex`) NOT ENFORCED\\n) PARTITIONED BY (`o_year`)\\nWITH (\\n'changelog-producer.compaction-interval' = '2m'\\n) LIKE `OrderHAWB` (EXCLUDING CONSTRAINTS EXCLUDING OPTIONS);\\n\\n-- \u8bbe\u7f6e\u4f5c\u4e1a\u540d\uff0c\u6267\u884c\u4f5c\u4e1a\u4efb\u52a1\u5c06\u6e90\u8868\u6570\u636e\u5b9e\u65f6\u5199\u5165\u5230paimon\u5bf9\u5e94\u8868\u4e2d\\nSET 'pipeline.name' = 'ods_airsea_airfreight_orderhawb';\\nINSERT INTO\\nods.`ods_airsea_airfreight_orderhawb`\\nSELECT\\nRTRIM(`HBLIndex`) as `HBLIndex`\\n......\\n,`CreateOPDate`\\n,YEAR(`CreateOPDate`) AS `o_year`\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM `OrderHAWB` where CreateOPDate > '2023-01-01';\\n```\\n\\n\u4e1a\u52a1\u8868\u6570\u636e\u5b9e\u65f6\u5199\u5165 Paimon ods \u8868\u6548\u679c\u5982\u4e0b\uff1a\\n\\n![](/blog/bondex/ods.png)\\n\\n2. \u5c06ods\u5c42\u8868\u7684\u6570\u636e\u6253\u5bbd\u5199\u5165 dwd \u5c42\u4e2d\uff0c\u8fd9\u91cc\u5176\u5b9e\u5c31\u662f\u5c06 ods \u5c42\u76f8\u5173\u4e1a\u52a1\u8868\u5408\u5e76\u5199\u5165dwd \u4e2d\uff0c\u8fd9\u91cc\u4e3b\u8981\u662f\u5904\u7406 count_order \u5b57\u6bb5\u7684\u503c\uff0c\u56e0\u4e3a\u6e90\u8868\u4e2d\u7684\u6570\u636e\u5b58\u5728\u903b\u8f91\u5220\u9664\u548c\u7269\u7406\u5220\u9664\u6240\u4ee5\u901a\u8fc7 count \u51fd\u6570\u7edf\u8ba1\u4f1a\u6709\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u91c7\u7528 sum \u805a\u5408\u6765\u8ba1\u7b97\u5355\u91cf\uff0c\u6bcf\u4e2areference_no\u5bf9\u5e94\u7684count_order\u662f1\uff0c\u5982\u679c\u903b\u8f91\u4f5c\u5e9f\u901a\u8fc7sql\u5c06\u5b83\u5904\u7406\u62100\uff0c\u7269\u7406\u5220\u9664 Paimon \u4f1a\u81ea\u52a8\u5904\u7406\u3002\\n\\ndim \u7ef4\u8868\u6211\u4eec\u8fd9\u8fb9\u76f4\u63a5\u62ff\u7684 doris \u91cc\u9762\u5904\u7406\u597d\u7684\u7ef4\u8868\u6765\u4f7f\u7528\uff0c\u7ef4\u8868\u66f4\u65b0\u9891\u7387\u4f4e\uff0c\u6240\u4ee5\u6ca1\u6709\u5728 Paimon \u91cc\u9762\u8fdb\u884c\u4e8c\u6b21\u5f00\u53d1\u3002\\n\\n```sql\\n-- \u5728paimon-dwd\u5c42\u521b\u5efa\u5bbd\u8868\\nCREATE TABLE IF NOT EXISTS dwd.`dwd_business_order` (\\n`reference_no` varchar(50) NOT NULL COMMENT '\u59d4\u6258\u5355\u53f7\u4e3b\u952e',\\n`bondex_shy_flag` varchar(8) NOT NULL COMMENT '\u533a\u5206',\\n`is_server_item` int NOT NULL COMMENT '\u662f\u5426\u5df2\u7ecf\u5173\u8054\u8ba2\u5355',\\n`order_type_name` varchar(50) NOT NULL COMMENT '\u4e1a\u52a1\u5206\u7c7b',\\n`consignor_date` DATE COMMENT '\u7edf\u8ba1\u65e5\u671f',\\n`consignor_code` varchar(50) COMMENT '\u5ba2\u6237\u7f16\u53f7',\\n`consignor_name` varchar(160) COMMENT '\u5ba2\u6237\u540d\u79f0',\\n`sales_code` varchar(32) NOT NULL COMMENT '\u9500\u552e\u7f16\u53f7',\\n`sales_name` varchar(200) NOT NULL COMMENT '\u9500\u552e\u540d\u79f0',\\n`delivery_center_op_id` varchar(32) NOT NULL COMMENT '\u4ea4\u4ed8\u7f16\u53f7',\\n`delivery_center_op_name` varchar(200) NOT NULL COMMENT '\u4ea4\u4ed8\u540d\u79f0',\\n`pol_code` varchar(100) NOT NULL COMMENT '\u8d77\u8fd0\u6e2f\u4ee3\u7801',\\n`pot_code` varchar(100) NOT NULL COMMENT '\u4e2d\u8f6c\u6e2f\u4ee3\u7801',\\n`port_of_dest_code` varchar(100) NOT NULL  COMMENT '\u76ee\u7684\u6e2f\u4ee3\u7801',\\n`is_delete` int not NULL COMMENT '\u662f\u5426\u4f5c\u5e9f',\\n`order_status` varchar(8) NOT NULL COMMENT '\u8ba2\u5355\u72b6\u6001',\\n`count_order` BIGINT not NULL COMMENT '\u8ba2\u5355\u6570',\\n`o_year` BIGINT NOT NULL COMMENT '\u5206\u533a\u5b57\u6bb5',\\n`create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\nPRIMARY KEY (`o_year`,`reference_no`,`bondex_shy_flag`) NOT ENFORCED\\n) PARTITIONED BY (`o_year`)\\nWITH (\\n-- \u6bcf\u4e2a partition \u4e0b\u8bbe\u7f6e 2 \u4e2a bucket\\n'bucket' = '2',\\n'changelog-producer' = 'full-compaction',\\n'snapshot.time-retained' = '2h',\\n'changelog-producer.compaction-interval' = '2m'\\n);\\n\\n-- \u8bbe\u7f6e\u4f5c\u4e1a\u540d\uff0c\u5c06ods\u5c42\u7684\u76f8\u5173\u4e1a\u52a1\u8868\u5408\u5e76\u5199\u5165\u5230dwd\u5c42\\nSET 'pipeline.name' = 'dwd_business_order';\\nINSERT INTO\\ndwd.`dwd_business_order`\\nSELECT\\no.doccode,\\n......,\\nYEAR (o.docdate) AS o_year\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM\\nods.ods_shy_jh_doc_hdworkdochd o\\nINNER JOIN ods.ods_shy_base_enterprise en ON o.businessguid = en.entguid\\nLEFT JOIN dim.dim_hhl_user_code sales ON o.salesguid = sales.USER_GUID\\nLEFT JOIN dim.dim_hhl_user_code op ON o.bookingguid = op.USER_GUID\\nUNION ALL\\nSELECT\\nbusiness_no,\\n......,\\nYEAR ( gmt_create ) AS o_year\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM\\nods.ods_bondexsea_doc_order\\nUNION ALL\\nSELECT\\n  HBLIndex,\\n ......,\\n  YEAR ( CreateOPDate ) AS o_year\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS `create_date`\\nFROM\\n  ods.`ods_airsea_airfreight_orderhawb`\\n;\\n```\\n\\nflink ui \u53ef\u4ee5\u770b\u5230 ods \u6570\u636e\u7ecf\u8fc7 paimon \u5b9e\u65f6 join \u6e05\u6d17\u5230\u8868 dwd_business_order\\n\\n![](/blog/bondex/dwd_business_order.png)\\n\\n2.\u5c06dwd\u5c42\u6570\u636e\u8f7b\u5ea6\u805a\u5408\u5230dwm\u5c42\u4e2d\uff0c\u5c06\u76f8\u5173\u6570\u636e\u5199\u5165dwm.`dwm_business_order_count` \u8868\u4e2d\uff0c\u8be5\u8868\u6570\u636e\u4f1a\u6839\u636e\u4e3b\u952e\u5bf9\u805a\u5408\u5b57\u6bb5\u505a sum\uff0csum_orderCount \u5b57\u6bb5\u5c31\u662f\u805a\u5408\u7ed3\u679c\uff0c\u7269\u7406\u5220\u9664\u7684\u6570\u636e sum \u65f6 paimon \u4f1a\u81ea\u52a8\u5904\u7406\u3002\\n\\n```sql\\n-- \u521b\u5efadwm\u5c42\u8f7b\u5ea6\u6c47\u603b\u8868\uff0c\u6839\u636e\u65e5\u671f\u3001\u9500\u552e\u3001\u64cd\u4f5c\u3001\u4e1a\u52a1\u7c7b\u522b\u3001\u5ba2\u6237\u3001\u8d77\u8fd0\u6e2f\u3001\u76ee\u7684\u6e2f\u6c47\u603b\u5355\u91cf\\nCREATE TABLE IF NOT EXISTS dwm.`dwm_business_order_count` (\\n`l_year` BIGINT NOT NULL COMMENT '\u7edf\u8ba1\u5e74',\\n`l_month` BIGINT NOT NULL COMMENT '\u7edf\u8ba1\u6708',\\n`l_date` DATE NOT NULL  COMMENT '\u7edf\u8ba1\u65e5\u671f',\\n`bondex_shy_flag` varchar(8) NOT NULL COMMENT '\u533a\u5206',\\n`order_type_name` varchar(50) NOT NULL COMMENT '\u4e1a\u52a1\u5206\u7c7b',\\n`is_server_item` int NOT NULL COMMENT '\u662f\u5426\u5df2\u7ecf\u5173\u8054\u8ba2\u5355',\\n`customer_code` varchar(50) NOT NULL COMMENT '\u5ba2\u6237\u7f16\u53f7',\\n`sales_code` varchar(50) NOT NULL COMMENT '\u9500\u552e\u7f16\u53f7',\\n`delivery_center_op_id` varchar(50) NOT NULL COMMENT '\u4ea4\u4ed8\u7f16\u53f7',\\n`pol_code` varchar(100) NOT NULL COMMENT '\u8d77\u8fd0\u6e2f\u4ee3\u7801',\\n`pot_code` varchar(100) NOT NULL COMMENT '\u4e2d\u8f6c\u6e2f\u4ee3\u7801',\\n`port_of_dest_code` varchar(100) NOT NULL COMMENT '\u76ee\u7684\u6e2f\u4ee3\u7801',\\n`customer_name` varchar(200) NOT NULL COMMENT '\u5ba2\u6237\u540d\u79f0',\\n`sales_name` varchar(200) NOT NULL COMMENT '\u9500\u552e\u540d\u79f0',\\n`delivery_center_op_name` varchar(200) NOT NULL COMMENT '\u4ea4\u4ed8\u540d\u79f0',\\n`sum_orderCount` BIGINT NOT NULL COMMENT '\u8ba2\u5355\u6570',\\n`create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\nPRIMARY KEY (`l_year`,\\n             `l_month`,\\n             `l_date`,\\n             `order_type_name`,\\n             `bondex_shy_flag`,\\n             `is_server_item`,\\n             `customer_code`,\\n             `sales_code`,\\n             `delivery_center_op_id`,\\n             `pol_code`,\\n             `pot_code`,\\n             `port_of_dest_code`) NOT ENFORCED\\n) WITH (\\n'changelog-producer' = 'full-compaction',\\n  'changelog-producer.compaction-interval' = '2m',\\n  'merge-engine' = 'aggregation', -- \u4f7f\u7528 aggregation \u805a\u5408\u8ba1\u7b97 sum\\n  'fields.sum_orderCount.aggregate-function' = 'sum',\\n  'fields.create_date.ignore-retract'='true',\\n  'fields.sales_name.ignore-retract'='true',\\n  'fields.customer_name.ignore-retract'='true',\\n  'snapshot.time-retained' = '2h',\\n'fields.delivery_center_op_name.ignore-retract'='true'\\n);\\n-- \u8bbe\u7f6e\u4f5c\u4e1a\u540d\\nSET 'pipeline.name' = 'dwm_business_order_count';\\nINSERT INTO\\ndwm.`dwm_business_order_count`\\nSELECT\\nYEAR(o.`consignor_date`) AS `l_year`\\n,MONTH(o.`consignor_date`) AS `l_month`\\n......,\\n,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS create_date\\nFROM\\ndwd.`dwd_business_order` o\\n;\\n```\\n\\nFlink UI \u6548\u679c\u5982\u4e0b dwd_business_orders \u6570\u636e\u805a\u5408\u5199\u5230 dwm_business_order_count\uff1a\\n\\n![](/blog/bondex/dwm_business_order_count.png)\\n\\n4.\u5c06 dwm \u5c42\u6570\u636e\u805a\u5408\u5230 dws \u5c42\u4e2d\uff0cdws \u5c42\u662f\u505a\u4e86\u66f4\u5c0f\u7ef4\u5ea6\u7684\u6c47\u603b\\n\\n```sql\\n-- \u521b\u5efa\u6839\u636e\u64cd\u4f5c\u4eba\u3001\u4e1a\u52a1\u7c7b\u578b\u805a\u5408\u5f53\u5929\u7684\u5355\u91cf\\nCREATE TABLE IF NOT EXISTS dws.`dws_business_order_count_op` (\\n  `l_year` BIGINT NOT NULL COMMENT '\u7edf\u8ba1\u5e74',\\n  `l_month` BIGINT NOT NULL COMMENT '\u7edf\u8ba1\u6708',\\n  `l_date` DATE NOT NULL  COMMENT '\u7edf\u8ba1\u65e5\u671f',\\n  `order_type_name` varchar(50) NOT NULL COMMENT '\u4e1a\u52a1\u5206\u7c7b',\\n  `delivery_center_op_id` varchar(50) NOT NULL COMMENT '\u4ea4\u4ed8\u7f16\u53f7',\\n  `delivery_center_op_name` varchar(200) NOT NULL COMMENT '\u4ea4\u4ed8\u540d\u79f0',\\n  `sum_orderCount` BIGINT NOT NULL COMMENT '\u8ba2\u5355\u6570',\\n  `create_date` timestamp NOT NULL COMMENT '\u521b\u5efa\u65f6\u95f4',\\n  PRIMARY KEY (`l_year`, `l_month`,`l_date`,`order_type_name`,`delivery_center_op_id`) NOT ENFORCED\\n) WITH (\\n  'merge-engine' = 'aggregation', -- \u4f7f\u7528 aggregation \u805a\u5408\u8ba1\u7b97 sum\\n  'fields.sum_orderCount.aggregate-function' = 'sum',\\n  'fields.create_date.ignore-retract'='true',\\n  'snapshot.time-retained' = '2h',\\n  'fields.delivery_center_op_name.ignore-retract'='true'\\n);\\n-- \u8bbe\u7f6e\u4f5c\u4e1a\u540d\\nSET 'pipeline.name' = 'dws_business_order_count_op';\\nINSERT INTO\\n  dws.`dws_business_order_count_op`\\nSELECT\\n  o.`l_year`\\n  ,o.`l_month`\\n  ,o.`l_date`\\n  ,o.`order_type_name`\\n  ,o.`delivery_center_op_id`\\n  ,o.`delivery_center_op_name`\\n  ,o.`sum_orderCount`\\n  ,TO_TIMESTAMP(CONVERT_TZ(cast(CURRENT_TIMESTAMP as varchar), 'UTC', 'Asia/Shanghai')) AS create_date\\nFROM\\n  dwm.`dwm_business_order_count` o\\n;\\n```\\n\\nFlink UI \u6548\u679c\u5982\u4e0b dws_business_order_count_op \u6570\u636e\u5199\u5230 dws_business_order_count_op\uff1a\\n\\n![](/blog/bondex/dws_business_order_count_op.png)\\n\\n\u603b\u4f53\u6570\u636e\u6d41\u8f6c\u793a\u4f8b\\n\\n![](/blog/bondex/all_datastream.jpg)\\n\\n\u6e90\u8868\uff1a\\n\\n![](/blog/bondex/source.png)\\n\\npaimon-ods:\\n\\n![](/blog/bondex/paimon-ods.png)\\n\\npaimon-dwd:\\n\\n![](/blog/bondex/paimon-dwd.png)\\n\\npaimon-dwm:\\n\\n![](/blog/bondex/paimon-dwm.png)\\n\\npaimon-dws:\\n\\n![](/blog/bondex/paimon-dws.png)\\n\\n\u7279\u522b\u63d0\u9192 sqlserver \u6570\u636e\u5e93\u62bd\u53d6\u65f6\u5982\u679c\u6e90\u8868\u6570\u636e\u91cf\u8fc7\u5927\u5168\u91cf\u62bd\u53d6\u4f1a\u9501\u8868\uff0c\u5efa\u8bae\u5728\u4e1a\u52a1\u5141\u8bb8\u7684\u60c5\u51b5\u4e0b\u91c7\u7528\u589e\u91cf\u62bd\u53d6\u3002\u5bf9\u4e8e\u5168\u91cf\u62bd\u53d6 sqlserver \u53ef\u4ee5\u91c7\u7528\u4e2d\u8f6c\u7684\u65b9\u5f0f sqlserver \u5168\u91cf\u6570\u636e\u5bfc\u5165\u5230 mysql\uff0c\u4ece mysql \u518d\u5230 paimon-ods \uff0c\u540e\u9762\u518d\u901a\u8fc7 sqlserever \u505a\u589e\u91cf\u62bd\u53d6\u3002\\n\\n## 04 \u95ee\u9898\u6392\u67e5\u5206\u6790\\n\\n**1. \u805a\u5408\u6570\u636e\u8ba1\u7b97\u4e0d\u51c6**\\n\\nsqlserver cdc \u91c7\u96c6\u6570\u636e\u5230 paimon \u8868\uff0c\u8bf4\u660e\uff1a\\n\\n**dwd \u8868\uff1a**\\n\\n'changelog-producer' = 'input'\\n\\n**ads \u8868\uff1a**\\n\\n'merge-engine' = 'aggregation'\uff0c-- \u4f7f\u7528 aggregation \u805a\u5408\u8ba1\u7b97 sum\\n\\n'fields.sum_amount.aggregate-function' = 'sum'\\n\\nADS \u5c42\u805a\u5408\u8868\u91c7\u7528 agg sum \u4f1a\u51fa\u73b0 dwd \u6570\u636e\u6d41\u4e0d\u4ea7\u751f update_before\uff0c\u4ea7\u751f\u9519\u8bef\u6570\u636e\u6d41 update_after  \u6bd4\u5982\u4e0a\u6e38\u6e90\u8868 update 10 \u5230 30 dwd \u5c42\u6570\u636e\u4f1a\u53d8\u66f4\u4e3a 30\uff0cads \u805a\u5408\u5c42\u6570\u636e\u4e5f\u4f1a\u53d8\u66f4\u4e3a 30\uff0c\u4f46\u662f\u73b0\u5728\u53d8\u4e3a\u4e86 append \u6570\u636e\u53d8\u6210\u4e86 10+30=40 \u7684\u9519\u8bef\u6570\u636e\u3002\\n\\n\u89e3\u51b3\u529e\u6cd5\uff1a\\n\\nBy specifying 'changelog-producer' = 'full-compaction',\\nTable Store will compare the results between full compactions and produce the differences as changelog.\\nThe latency of changelog is affected by the frequency of full compactions.\\n\\nBy specifying changelog-producer.compaction-interval table property (default value 30min),\\nusers can define the maximum interval between two full compactions to ensure latency.\\nThis table property does not affect normal compactions and they may still be performed once in a while by writers to reduce reader costs.\\n\\n\u8fd9\u6837\u80fd\u89e3\u51b3\u4e0a\u8ff0\u95ee\u9898\u3002\u4f46\u662f\u968f\u4e4b\u800c\u6765\u51fa\u73b0\u4e86\u65b0\u7684\u95ee\u9898\u3002\u9ed8\u8ba4 changelog-producer.compaction-interval \u662f 30min\uff0c\u610f\u5473\u7740 \u4e0a\u6e38\u7684\u6539\u52a8\u5230 ads \u67e5\u8be2\u8981\u95f4\u9694 30min\uff0c\u751f\u4ea7\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u5c06\u538b\u7f29\u95f4\u9694\u65f6\u95f4\u6539\u6210 1min \u6216\u8005 2 \u5206\u949f\u7684\u60c5\u51b5\u4e0b\uff0c\u53c8\u4f1a\u51fa\u73b0\u4e0a\u8ff0 ADS \u5c42\u805a\u5408\u6570\u636e\u4e0d\u51c6\u7684\u60c5\u51b5\u3002\\n\\n```sql\\n'changelog-producer.compaction-interval' = '2m'\\n```\\n\\n\u9700\u8981\u5728\u5199\u5165 Flink Table Store \u65f6\u9700\u8981\u914d\u7f6e table.exec.sink.upsert-materialize= none\uff0c\u907f\u514d\u4ea7\u751f Upsert \u6d41\uff0c\u4ee5\u4fdd\u8bc1 Flink Table Store \u4e2d\u80fd\u591f\u4fdd\u5b58\u5b8c\u6574\u7684 changelog\uff0c\u4e3a\u540e\u7eed\u7684\u6d41\u8bfb\u64cd\u4f5c\u505a\u51c6\u5907\u3002\\n\\n```sql\\nset 'table.exec.sink.upsert-materialize' = 'none'\\n```\\n\\n**2. \u76f8\u540c sequence.field \u5bfc\u81f4 dwd \u660e\u7ec6\u5bbd\u8868\u65e0\u6cd5\u6536\u5230 update \u6570\u636e\u66f4\u65b0**\\n\\n**mysql cdc \u91c7\u96c6\u6570\u636e\u5230 paimon \u8868**\\n\\n\u8bf4\u660e\uff1a\\n\\n\u5728 MySQL \u6e90\u7aef\u6267\u884c update \u6570\u636e\u4fee\u6539\u6210\u529f\u540e\uff0cdwd_orders \u8868\u6570\u636e\u80fd\u540c\u6b65\u6210\u529f\\n\\n![](/blog/bondex/dwd_orders.png)\\n\\n\u4f46\u662f\u67e5\u770b dwd_enriched_orders \u8868\u6570\u636e\u65e0\u6cd5\u540c\u6b65\uff0c\u542f\u52a8\u6d41\u6a21\u5f0f\u67e5\u770b\u6570\u636e\uff0c\u53d1\u73b0\u6ca1\u6709\u6570\u636e\u6d41\u5411\\n\\n![](/blog/bondex/log.png)\\n\\n**\u89e3\u51b3\uff1a**\\n\\n\u6392\u67e5\u53d1\u73b0\u662f\u7531\u4e8e\u914d\u7f6e\u4e86\u53c2\u6570 'sequence.field' = 'o_orderdate'\uff08\u4f7f\u7528 o_orderdate \u751f\u6210 sequence id\uff0c\u76f8\u540c\u4e3b\u952e\u5408\u5e76\u65f6\u9009\u62e9 sequence id \u66f4\u5927\u7684\u8bb0\u5f55\uff09\u5bfc\u81f4\u7684\uff0c\u56e0\u4e3a\u5728\u4fee\u6539\u4ef7\u683c\u7684\u65f6\u5019 o_orderdate \u5b57\u6bb5\u65f6\u95f4\u4e0d\u53d8\uff0c \u7ee7\u800c'sequence.field' \u662f\u76f8\u540c\u7684\uff0c\u5bfc\u81f4\u987a\u5e8f\u4e0d\u786e\u5b9a\uff0c\u6240\u4ee5 ROW1 \u548c ROW2\uff0c\u5b83\u4eec\u7684 o_orderdate \u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u5728\u66f4\u65b0\u65f6\u4f1a\u968f\u673a\u9009\u62e9\uff0c\u6240\u6709\u5c06\u8be5\u53c2\u6570\u53bb\u6389\u5373\u53ef\uff0c\u53bb\u6389\u540e\u6b63\u5e38\u6309\u7167\u8f93\u5165\u7684\u5148\u540e\u987a\u5e8f\uff0c\u81ea\u52a8\u751f\u6210\u4e00\u4e2a sequence number\uff0c\u4e0d\u4f1a\u5f71\u54cd\u540c\u6b65\u7ed3\u679c\u3002\\n\\n**3. Aggregate function 'last_non_null_value' does not support retraction**\\n\\n\u62a5\u9519\uff1a\\n\\n```\\nCaused by: java.lang.UnsupportedOperationException: Aggregate function 'last_non_null_value' does not support retraction, If you allow this function to ignore retraction messages, you can configure 'fields.${field_name}.ignore-retract'='true'.\\n```\\n\\n\u53ef\u4ee5\u5728\u5b98\u65b9\u6587\u6863\u627e\u5230\u89e3\u91ca\uff1a\\n\\n```\\nOnly sum supports retraction (UPDATE_BEFORE and DELETE), others aggregate functions do not support retraction.\\n```\\n\\n\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1a\u9664\u4e86 SUM \u51fd\u6570\uff0c\u5176\u4ed6\u7684 Agg \u51fd\u6570\u90fd\u4e0d\u652f\u6301 Retraction\uff0c\u4e3a\u4e86\u907f\u514d\u63a5\u6536\u5230 DELETE \u548c UPDATEBEFORE \u6d88\u606f\u62a5\u9519\uff0c\u9700\u8981\u901a\u8fc7\u7ed9\u6307\u5b9a\u5b57\u6bb5\u914d `'fields.${field_name}.ignore-retract'='true'` \u5ffd\u7565\uff0c\u89e3\u51b3\u8fd9\u4e2a\u62a5\u9519\\n\\n```sql\\nWITH (\\n\\n'merge-engine' = 'aggregation', -- \u4f7f\u7528 aggregation \u805a\u5408\u8ba1\u7b97 sum\\n\\n'fields.sum_orderCount.aggregate-function' = 'sum',\\n\\n'fields.create_date.ignore-retract'='true' #create_date \u5b57\u6bb5\\n\\n);\\n```\\n\\n**4. paimon\u4efb\u52a1\u4e2d\u65ad\u5931\u8d25**\\n\\n\u4efb\u52a1\u5f02\u5e38\u4e2d\u65ad \u5bfc\u81f4pod\u6302\u6389\uff0c\u67e5\u770bloki\u65e5\u5fd7\u663e\u793aakka.pattern.AskTimeoutException: Ask timed out on\\n\\n![](/blog/bondex/loki.png)\\n\\njava.util.concurrent.TimeoutException: Invocation of [RemoteRpcInvocation(JobMasterGateway.updateTaskExecutionState(TaskExecutionState))] at recipient [akka.tcp://flink@fts-business-order-count.streampark:6123/user/rpc/jobmanager_2] timed out. This is usually caused by: 1) Akka failed sending the message silently, due to problems like oversized payload or serialization failures. In that case, you should find detailed error information in the logs. 2) The recipient needs more time for responding, due to problems like slow machines or network jitters. In that case, you can try to increase akka.ask.timeout.\\\\n\\\"\\n\\n\u521d\u6b65\u5224\u65ad\u5e94\u8be5\u662f\u7531\u4e8e\u4ee5\u4e0a2\u4e2a\u539f\u56e0\u5bfc\u81f4\u89e6\u53d1\u4e86 akka \u7684\u8d85\u65f6\u673a\u5236\uff0c\u90a3\u5c31\u8c03\u6574\u96c6\u7fa4\u7684akka\u8d85\u65f6\u95f4\u914d\u7f6e\u548c\u8fdb\u884c\u5355\u4e2a\u4efb\u52a1\u62c6\u5206\u6216\u8005\u8c03\u5927\u8d44\u6e90\u914d\u7f6e\u3002\\n\\n\\n\\n\u6211\u4eec\u8fd9\u8fb9\u5148\u770b\u5982\u4f55\u8fdb\u884c\u53c2\u6570\u4fee\u6539:\\n\\n\\n\\n| key              | default | describe                                                     |\\n| ---------------- | ------- | ------------------------------------------------------------ |\\n| akka.ask.timeout | 10s     | Timeout used for all futures and blocking Akka calls. If Flink fails due to timeouts then you should try to increase this value. Timeouts can be caused by slow machines or a congested network. The timeout value requires a time-unit specifier (ms/s/min/h/d). |\\n| web.timeout      | 600000  | Timeout for asynchronous operations by the web monitor in milliseconds. |\\n\\n\u5728 conf/flink-conf.yaml \u6700\u540e\u589e\u52a0\u4e0b\u9762\u53c2\u6570:\\n\\n**akka.ask.timeout: 100s**\\n\\n**web.timeout:1000000**\\n\\n\u7136\u540e\u5728 streampark \u624b\u52a8\u5237\u65b0\u4e0b flink-conf.yaml \u9a8c\u8bc1\u53c2\u6570\u662f\u5426\u540c\u6b65\u6210\u529f\u3002\\n\\n**5. snapshot no such file or director**\\n\\n\u53d1\u73b0 cp \u51fa\u73b0\u5931\u8d25\u60c5\u51b5\\n\\n![](/blog/bondex/cp_fail.jpg)\\n\\n\u5bf9\u5e94\u65f6\u95f4\u70b9\u65e5\u5fd7\u663e\u793a Snapshot \u4e22\u5931\uff0c\u4efb\u52a1\u663e\u793a\u4e3a running \u72b6\u6001\uff0c\u4f46\u662f\u6e90\u8868 mysql \u6570\u636e\u65e0\u6cd5\u5199\u5165 paimon ods \u8868\\n\\n![](/blog/bondex/status_log.png)\\n\\n\u5b9a\u4f4dcp\u5931\u8d25\u539f\u56e0\u4e3a\uff1a\u8ba1\u7b97\u91cf\u5927\uff0cCPU\u5bc6\u96c6\u6027\uff0c\u5bfc\u81f4TM\u5185\u7ebf\u7a0b\u4e00\u76f4\u5728processElement\uff0c\u800c\u6ca1\u6709\u65f6\u95f4\u505aCP\\n\\n\u65e0\u6cd5\u8bfb\u53d6 Snapshot \u539f\u56e0\u4e3a\uff1aflink \u96c6\u7fa4\u8d44\u6e90\u4e0d\u591f\uff0cWriter \u548c Committer \u4ea7\u751f\u7ade\u4e89\uff0cFull-Compaction \u65f6\u8bfb\u5230\u4e86\u5df2\u8fc7\u671f\u90e8\u5206\u7684\u4e0d\u5b8c\u6574\u7684 Snapshot\uff0c\u76ee\u524d\u5b98\u65b9\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\u5df2\u7ecf\u4fee\u590d:\\n\\nhttps://github.com/apache/incubator-paimon/pull/1308\\n\\n\u800c\u89e3\u51b3 cp \u5931\u8d25\u7684\u89e3\u51b3\u529e\u6cd5\u589e\u52a0\u5e76\u884c\u5ea6\uff0c\u589e\u52a0 deploymenttaskmanager slot \u548c jobmanager cpu\\n\\n```\\n-D kubernetes.jobmanager.cpu=0.8\\n\\n-D kubernetes.jobmanager.cpu.limit-factor=1\\n\\n-D taskmanager.numberOfTaskSlots=8\\n\\n-D jobmanager.adaptive-batch-scheduler.default-source-parallelism=2\\n```\\n\\n![](/blog/bondex/dynamic_properties.jpg)\\n\\n![](/blog/bondex/flink_dashboard.png)\\n\\n\u5728\u590d\u6742\u7684\u5b9e\u65f6\u4efb\u52a1\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u52a8\u6001\u53c2\u6570\u7684\u65b9\u5f0f\uff0c\u589e\u52a0\u8d44\u6e90\u3002\\n\\n## 05 \u672a \u6765 \u89c4 \u5212\\n\\n- \u81ea\u5efa\u7684\u6570\u636e\u5e73\u53f0 bondata \u6b63\u5728\u96c6\u6210 paimon \u7684\u5143\u6570\u636e\u4fe1\u606f\u3001\u6570\u636e\u6307\u6807\u4f53\u7cfb\u3001\u8840\u7f18\u3001\u4e00\u952e pipline \u7b49\u529f\u80fd\uff0c\u5f62\u6210\u6d77\u7a0b\u90a6\u8fbe\u7684\u6570\u636e\u8d44\u4ea7\uff0c\u5e76\u5c06\u5728\u6b64\u57fa\u7840\u4e0a\u5c55\u5f00\u4e00\u7ad9\u5f0f\u6570\u636e\u6cbb\u7406\\n- \u540e\u9762\u5c06\u57fa\u4e8e trino Catalog\u63a5\u5165Doris\uff0c\u5b9e\u73b0\u771f\u6b63\u7684\u79bb\u7ebf\u6570\u636e\u548c\u5b9e\u65f6\u6570\u636e\u7684one service\\n- \u91c7\u7528 doris + paimon \u7684\u67b6\u6784\u65b9\u6848\u7ee7\u7eed\u63a8\u8fdb\u96c6\u56e2\u5185\u90e8\u6d41\u6279\u4e00\u4f53\u6570\u4ed3\u5efa\u8bbe\u7684\u6b65\u4f10\\n\\n\u5728\u8fd9\u91cc\u8981\u611f\u8c22\u4e4b\u4fe1\u8001\u5e08\u548c StreamPark \u793e\u533a\u5728\u4f7f\u7528 StreamPark + Paimon \u8fc7\u7a0b\u4e2d\u7684\u5927\u529b\u652f\u6301\uff0c\u5728\u5b66\u4e60\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u95ee\u9898\uff0c\u90fd\u80fd\u5728\u7b2c\u4e00\u65f6\u95f4\u7ed9\u5230\u89e3\u60d1\u5e76\u5f97\u5230\u89e3\u51b3\uff0c\u6211\u4eec\u540e\u9762\u4e5f\u4f1a\u79ef\u6781\u53c2\u4e0e\u793e\u533a\u7684\u4ea4\u6d41\u548c\u5efa\u8bbe\uff0c\u8ba9 paimon \u80fd\u4e3a\u66f4\u591a\u5f00\u53d1\u8005\u548c\u4f01\u4e1a\u63d0\u4f9b\u6d41\u6279\u4e00\u4f53\u7684\u6570\u636e\u6e56\u89e3\u51b3\u65b9\u6848\u3002\"},{\"id\":\"streampark-usercase-shunwang\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-shunwang\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/4-streampark-usercase-shunwang.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/4-streampark-usercase-shunwang.md\",\"title\":\"Apache StreamPark\u2122 \u5728\u987a\u7f51\u79d1\u6280\u7684\u5927\u89c4\u6a21\u751f\u4ea7\u5b9e\u8df5\",\"description\":\"\u5bfc\u8bfb\uff1a\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u987a\u7f51\u79d1\u6280\u5728\u4f7f\u7528 Flink \u8ba1\u7b97\u5f15\u64ce\u4e2d\u9047\u5230\u7684\u4e00\u4e9b\u6311\u6218\uff0c\u57fa\u4e8e StreamPark \u4f5c\u4e3a\u5b9e\u65f6\u6570\u636e\u5e73\u53f0\u5982\u4f55\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u4ece\u800c\u5927\u89c4\u6a21\u652f\u6301\u516c\u53f8\u7684\u4e1a\u52a1\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"}],\"readingTime\":18.595,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-shunwang\",\"title\":\"Apache StreamPark\u2122 \u5728\u987a\u7f51\u79d1\u6280\u7684\u5927\u89c4\u6a21\u751f\u4ea7\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"FlinkSQL\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"\u6d77\u7a0b\u90a6\u8fbe\u57fa\u4e8e Apache Paimon + Apache StreamPark\u2122 \u7684\u6d41\u5f0f\u6570\u4ed3\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-bondex-with-paimon\"},\"nextItem\":{\"title\":\"Apache StreamPark\u2122 \u5728\u5c18\u950b\u4fe1\u606f\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5316\u7e41\u4e3a\u7b80\u6781\u81f4\u4f53\u9a8c\",\"permalink\":\"/zh-CN/blog/streampark-usercase-dustess\"}},\"content\":\"![](/blog/shunwang/autor.png)\\n\\n**\u5bfc\u8bfb\uff1a**\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u987a\u7f51\u79d1\u6280\u5728\u4f7f\u7528 Flink \u8ba1\u7b97\u5f15\u64ce\u4e2d\u9047\u5230\u7684\u4e00\u4e9b\u6311\u6218\uff0c\u57fa\u4e8e StreamPark \u4f5c\u4e3a\u5b9e\u65f6\u6570\u636e\u5e73\u53f0\u5982\u4f55\u6765\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u4ece\u800c\u5927\u89c4\u6a21\u652f\u6301\u516c\u53f8\u7684\u4e1a\u52a1\u3002\\n\\n\\n- \u516c\u53f8\u4e1a\u52a1\u4ecb\u7ecd\\n- \u9047\u5230\u7684\u6311\u6218\\n- \u4e3a\u4ec0\u4e48\u7528 StreamPark\\n- \u843d\u5730\u5b9e\u8df5\\n- \u5e26\u6765\u7684\u6536\u76ca\\n- \u672a\u6765\u89c4\u5212\\n\\n\x3c!-- truncate --\x3e\\n\\n## **\u516c\u53f8\u4e1a\u52a1\u4ecb\u7ecd**\\n\\n\u676d\u5dde\u987a\u7f51\u79d1\u6280\u80a1\u4efd\u6709\u9650\u516c\u53f8\u6210\u7acb\u4e8e 2005 \u5e74\uff0c\u79c9\u627f\u79d1\u6280\u8fde\u63a5\u5feb\u4e50\u7684\u4f01\u4e1a\u4f7f\u547d\uff0c\u662f\u56fd\u5185\u5177\u6709\u5f71\u54cd\u529b\u7684\u6cdb\u5a31\u4e50\u6280\u672f\u670d\u52a1\u5e73\u53f0\u4e4b\u4e00\u3002\u591a\u5e74\u6765\u516c\u53f8\u59cb\u7ec8\u4ee5\u4ea7\u54c1\u548c\u6280\u672f\u4e3a\u9a71\u52a8\uff0c\u81f4\u529b\u4e8e\u4ee5\u6570\u5b57\u5316\u5e73\u53f0\u670d\u52a1\u4e3a\u4eba\u4eec\u521b\u9020\u6c89\u6d78\u5f0f\u7684\u5168\u573a\u666f\u5a31\u4e50\u4f53\u9a8c\u3002\\n\\n\\n\\n\u81ea\u987a\u7f51\u79d1\u6280\u6210\u7acb\u4ee5\u6765\uff0c\u968f\u7740\u4e1a\u52a1\u5feb\u901f\u53d1\u5c55\uff0c\u987a\u7f51\u79d1\u6280\u670d\u52a1\u4e86 8 \u4e07\u5bb6\u7ebf\u4e0b\u5b9e\u4f53\u5e97\uff0c\u62e5\u6709\u8d85\u8fc7 5000 \u4e07\u4e92\u8054\u7f51\u7528\u6237\uff0c\u5e74\u89e6\u8fbe\u8d85 1.4 \u4ebf\u7f51\u6c11\uff0c\u6bcf 10 \u5bb6\u516c\u5171\u4e0a\u7f51\u670d\u52a1\u573a\u6240\u6709 7 \u5bb6\u4f7f\u7528\u987a\u7f51\u79d1\u6280\u4ea7\u54c1\u3002\\n\\n\u5728\u62e5\u6709\u5e9e\u5927\u7684\u7528\u6237\u7fa4\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c\u987a\u7f51\u79d1\u6280\u4e3a\u4e86\u7ed9\u7528\u6237\u63d0\u4f9b\u66f4\u52a0\u4f18\u8d28\u7684\u4ea7\u54c1\u4f53\u9a8c\uff0c\u5b9e\u73b0\u4f01\u4e1a\u7684\u6570\u5b57\u5316\u8f6c\u578b\uff0c\u4ece 2015 \u5e74\u5f00\u59cb\u5927\u529b\u53d1\u5c55\u5927\u6570\u636e\uff0c Flink \u5728\u987a\u7f51\u79d1\u6280\u7684\u5b9e\u65f6\u8ba1\u7b97\u4e2d\u4e00\u76f4\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\u3002\u5728\u987a\u7f51\u79d1\u6280\uff0c\u5b9e\u65f6\u8ba1\u7b97\u5927\u6982\u5206\u4e3a 4 \u4e2a\u5e94\u7528\u573a\u666f\uff1a\\n\\n- \u7528\u6237\u753b\u50cf\u5b9e\u65f6\u66f4\u65b0\uff1a\u5305\u62ec\u7f51\u5427\u753b\u50cf\u548c\u7f51\u6c11\u753b\u50cf\u3002\\n- \u5b9e\u65f6\u98ce\u63a7\uff1a\u5305\u62ec\u6d3b\u52a8\u9632\u5237\u3001\u5f02\u5730\u767b\u5f55\u76d1\u6d4b\u7b49\u3002\\n- \u6570\u636e\u540c\u6b65\uff1a\u5305\u62ec Kafka \u6570\u636e\u540c\u6b65\u5230 Hive / Iceberg / ClickHouse \u7b49\u3002\\n- \u5b9e\u65f6\u6570\u636e\u5206\u6790\uff1a\u5305\u62ec\u6e38\u620f\u3001\u8bed\u97f3\u3001\u5e7f\u544a\u3001\u76f4\u64ad\u7b49\u4e1a\u52a1\u5b9e\u65f6\u5927\u5c4f\u3002\\n\\n\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u987a\u7f51\u79d1\u6280\u6bcf\u65e5\u9700\u8981\u5904\u7406 TB \u7ea7\u522b\u7684\u6570\u636e\uff0c\u603b\u5171\u62e5\u6709 700+ \u4e2a\u5b9e\u65f6\u4efb\u52a1\uff0c\u5176\u4e2d FlinkSQL \u4efb\u52a1\u5360\u6bd4\u4e3a 95% \u4ee5\u4e0a\u3002\u968f\u7740\u516c\u53f8\u4e1a\u52a1\u5feb\u901f\u53d1\u5c55\u548c\u6570\u636e\u65f6\u6548\u6027\u8981\u6c42\u53d8\u9ad8\uff0c\u9884\u8ba1\u5728\u4eca\u5e74\u5e74\u5e95 Flink \u4efb\u52a1\u4f1a\u8fbe\u5230 900+\u3002\\n\\n## **\u9047\u5230\u7684\u6311\u6218**\\n\\nFlink \u4f5c\u4e3a\u5f53\u4e0b\u5b9e\u65f6\u8ba1\u7b97\u9886\u57df\u4e2d\u6700\u6d41\u884c\u7684\u6280\u672f\u6846\u67b6\u4e4b\u4e00\uff0c\u62e5\u6709\u9ad8\u541e\u5410\u3001\u4f4e\u5ef6\u8fdf\u3001\u6709\u72b6\u6001\u8ba1\u7b97\u7b49\u5f3a\u5927\u7684\u7279\u6027\u3002\u5728\u63a2\u7d22\u4e2d\u6211\u4eec\u53d1\u73b0 Flink \u867d\u7136\u62e5\u6709\u5f3a\u5927\u7684\u8ba1\u7b97\u80fd\u529b\uff0c\u4f46\u662f\u5bf9\u4e8e\u4f5c\u4e1a\u5f00\u53d1\u7ba1\u7406\u548c\u8fd0\u7ef4\u95ee\u9898\uff0c\u793e\u533a\u5e76\u6ca1\u6709\u63d0\u4f9b\u6709\u6548\u7684\u89e3\u51b3\u65b9\u6848\u3002\u6211\u4eec\u5bf9 Flink \u4f5c\u4e1a\u5f00\u53d1\u7ba1\u7406\u4e0a\u9047\u5230\u7684\u4e00\u4e9b\u75db\u70b9\u5927\u6982\u603b\u7ed3\u4e3a 4 \u4e2a\u65b9\u9762\uff0c\u5982\u4e0b\uff1a\\n\\n![\u56fe\u7247](/blog/shunwang/pain.png)\\n\\n\u5728\u9762\u5bf9 Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u4e0a\u7684\u7684\u4e00\u7cfb\u5217\u75db\u70b9\u540e\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u5bfb\u627e\u5408\u9002\u7684\u89e3\u51b3\u65b9\u6848\u6765\u964d\u4f4e\u5f00\u53d1\u540c\u5b66\u4f7f\u7528 Flink \u95e8\u69db\uff0c\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u3002\\n\\n\u5728\u6ca1\u6709\u9047\u5230 StreamPark \u4e4b\u524d\uff0c\u6211\u4eec\u8c03\u7814\u4e86\u90e8\u5206\u516c\u53f8\u7684 Flink \u7ba1\u7406\u89e3\u51b3\u65b9\u6848\uff0c\u53d1\u73b0\u90fd\u662f\u901a\u8fc7\u81ea\u7814\u5b9e\u65f6\u4f5c\u4e1a\u5e73\u53f0\u7684\u65b9\u5f0f\u6765\u5f00\u53d1\u548c\u7ba1\u7406 Flink \u4f5c\u4e1a\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u4e5f\u51b3\u5b9a\u81ea\u7814\u4e00\u5957\u5b9e\u65f6\u8ba1\u7b97\u7ba1\u7406\u5e73\u53f0\uff0c\u6765\u6ee1\u8db3\u4e86\u5f00\u53d1\u540c\u5b66\u5bf9\u4e8e Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u7684\u57fa\u7840\u9700\u6c42\uff0c\u6211\u4eec\u8fd9\u5957\u5e73\u53f0\u53eb Streaming-Launcher\uff0c\u5927\u4f53\u529f\u80fd\u5982\u4e0b\uff1a\\n\\n![\u56fe\u7247](/blog/shunwang/launcher.png)\\n\\n\u4f46\u662f\u540e\u7eed\u5f00\u53d1\u540c\u5b66\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u53d1\u73b0 Streaming-Launcher \u5b58\u5728\u6bd4\u8f83\u591a\u7684\u7f3a\u9677\uff1aFlink \u5f00\u53d1\u6210\u672c\u4f9d\u7136\u8fc7\u9ad8\u3001\u5de5\u4f5c\u6548\u7387\u4f4e\u4e0b\u3001\u95ee\u9898\u6392\u67e5\u56f0\u96be\u3002\u6211\u4eec\u603b\u7ed3\u4e86 Streaming-Launcher \u5b58\u5728\u7684\u7f3a\u9677\uff0c\u5927\u81f4\u5982\u4e0b\uff1a\\n\\n### **SQL\u5f00\u53d1\u6d41\u7a0b\u7e41\u7410**\\n\\n\u4f5c\u4e1a\u52a1\u5f00\u53d1\u9700\u8981\u591a\u4e2a\u5de5\u5177\u5b8c\u6210\u4e00\u4e2a SQL \u4f5c\u4e1a\u5f00\u53d1\uff0c\u63d0\u9ad8\u4e86\u5f00\u53d1\u540c\u5b66\u7684\u4f7f\u7528\u95e8\u69db\u3002\\n\\n![cc0b1414ed43942e0ef5e9129c2bf817](/blog/shunwang/sql_develop.png)\\n\\n### **SQL-Client \u5b58\u5728\u5f0a\u7aef**\\n\\nFlink \u63d0\u4f9b\u7684 SQL-Client \u76ee\u524d\u5bf9\u4f5c\u4e1a\u8fd0\u884c\u6a21\u5f0f\u652f\u6301\u4e0a\uff0c\u5b58\u5728\u4e00\u5b9a\u7684\u5f0a\u7aef\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/sql_client.png)\\n\\n### **\u4f5c\u4e1a\u7f3a\u5c11\u7edf\u4e00\u7ba1\u7406**\\n\\nStreaming-Launcher \u4e2d\uff0c\u6ca1\u6709\u63d0\u4f9b\u7edf\u4e00\u7684\u4f5c\u4e1a\u7ba1\u7406\u754c\u9762\u3002\u5f00\u53d1\u540c\u5b66\u65e0\u6cd5\u76f4\u89c2\u7684\u770b\u5230\u4f5c\u4e1a\u8fd0\u884c\u60c5\u51b5\uff0c\u53ea\u80fd\u901a\u8fc7\u544a\u8b66\u4fe1\u606f\u6765\u5224\u65ad\u4f5c\u4e1a\u8fd0\u884c\u60c5\u51b5\uff0c\u8fd9\u5bf9\u5f00\u53d1\u540c\u5b66\u6765\u8bf4\u975e\u5e38\u4e0d\u53cb\u597d\u3002\u5982\u679c\u56e0\u4e3a Yarn \u96c6\u7fa4\u7a33\u5b9a\u6027\u95ee\u9898\u6216\u8005\u7f51\u7edc\u6ce2\u52a8\u7b49\u4e0d\u786e\u5b9a\u56e0\u7d20\uff0c\u4e00\u4e0b\u5b50\u5931\u8d25\u5927\u6279\u91cf\u4efb\u52a1\uff0c\u5728\u5f00\u53d1\u540c\u5b66\u624b\u52a8\u6062\u590d\u4f5c\u4e1a\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5f88\u5bb9\u6613\u6f0f\u6062\u590d\u67d0\u4e2a\u4efb\u52a1\u800c\u9020\u6210\u751f\u4ea7\u4e8b\u6545\u3002\\n\\n### **\u95ee\u9898\u8bca\u65ad\u6d41\u7a0b\u7e41\u7410**\\n\\n\u4e00\u4e2a\u4f5c\u4e1a\u67e5\u770b\u65e5\u5fd7\u9700\u8981\u901a\u8fc7\u591a\u4e2a\u6b65\u9aa4\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u5f00\u53d1\u540c\u5b66\u5de5\u4f5c\u6548\u7387\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/step.png)\\n\\n## **\u4e3a\u4ec0\u4e48\u7528** **Apache StreamPark\u2122**\\n\\n\u9762\u5bf9\u81ea\u7814\u5e73\u53f0 Streaming-Launcher \u5b58\u5728\u7684\u7f3a\u9677\uff0c\u6211\u4eec\u4e00\u76f4\u5728\u601d\u8003\u5982\u4f55\u5c06 Flink \u7684\u4f7f\u7528\u95e8\u69db\u964d\u5230\u66f4\u4f4e\uff0c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u3002\u8003\u8651\u5230\u4eba\u5458\u6295\u5165\u6210\u672c\u548c\u65f6\u95f4\u6210\u672c\uff0c\u6211\u4eec\u51b3\u5b9a\u5411\u5f00\u6e90\u793e\u533a\u6c42\u52a9\u5bfb\u627e\u5408\u9002\u7684\u5f00\u6e90\u9879\u76ee\u6765\u5bf9\u6211\u4eec\u7684 Flink \u4efb\u52a1\u8fdb\u884c\u7ba1\u7406\u548c\u8fd0\u7ef4\u3002\\n\\n\\n\\n### 01  **Apache StreamPark\u2122 \u89e3\u51b3 Flink \u95ee\u9898\u7684\u5229\u5668**\\n\\n\u5f88\u5e78\u8fd0\u5728 2022 \u5e74 6 \u6708\u521d\uff0c\u6211\u4eec\u5728 GitHub \u673a\u7f18\u5de7\u5408\u4e4b\u95f4\u8ba4\u8bc6\u5230\u4e86 StreamPark\uff0c\u6211\u4eec\u6ee1\u6000\u5e0c\u671b\u5730\u5bf9 StreamPark \u8fdb\u884c\u4e86\u521d\u6b65\u7684\u63a2\u7d22\u3002\u53d1\u73b0 StreamPark \u5177\u5907\u7684\u80fd\u529b\u5927\u6982\u5206\u4e3a\u4e09\u5927\u5757\uff1a\u7528\u6237\u6743\u9650\u7ba1\u7406\u3001\u4f5c\u4e1a\u8fd0\u7ef4\u7ba1\u7406\u548c\u5f00\u53d1\u811a\u624b\u67b6\u3002\\n\\n**\u7528\u6237\u6743\u9650\u7ba1\u7406**\\n\\n\u5728 StreamPark \u5e73\u53f0\u4e2d\u4e3a\u4e86\u907f\u514d\u7528\u6237\u6743\u9650\u8fc7\u5927\uff0c\u53d1\u751f\u4e00\u4e9b\u4e0d\u5fc5\u8981\u7684\u8bef\u64cd\u4f5c\uff0c\u5f71\u54cd\u4f5c\u4e1a\u8fd0\u884c\u7a33\u5b9a\u6027\u548c\u73af\u5883\u914d\u7f6e\u7684\u51c6\u786e\u6027\uff0c\u63d0\u4f9b\u4e86\u76f8\u5e94\u7684\u4e00\u4e9b\u7528\u6237\u6743\u9650\u7ba1\u7406\u529f\u80fd\uff0c\u8fd9\u5bf9\u4f01\u4e1a\u7ea7\u7528\u6237\u6765\u8bf4\uff0c\u975e\u5e38\u6709\u5fc5\u8981\u3002\\n\\n\\n\\n![\u56fe\u7247](/blog/shunwang/permission.png)\\n\\n\\n\\n**\u4f5c\u4e1a\u8fd0\u7ef4\u7ba1\u7406**\\n\\n**\u6211\u4eec\u5728\u5bf9 StreamPark \u505a\u8c03\u7814\u7684\u65f6\u5019\uff0c\u6700\u5173\u6ce8\u7684\u662f StreamPark \u5bf9\u4e8e\u4f5c\u4e1a\u7684\u7ba1\u7406\u7684\u80fd\u529b\u3002**StreamPark \u662f\u5426\u6709\u80fd\u529b\u7ba1\u7406\u4f5c\u4e1a\u4e00\u4e2a\u5b8c\u6574\u7684\u751f\u547d\u5468\u671f\uff1a\u4f5c\u4e1a\u5f00\u53d1\u3001\u4f5c\u4e1a\u90e8\u7f72\u3001\u4f5c\u4e1a\u7ba1\u7406\u3001\u95ee\u9898\u8bca\u65ad\u7b49\u3002**\u5f88\u5e78\u8fd0\uff0cStreamPark \u5728\u8fd9\u4e00\u65b9\u9762\u975e\u5e38\u4f18\u79c0\uff0c\u5bf9\u4e8e\u5f00\u53d1\u540c\u5b66\u6765\u8bf4\u53ea\u9700\u8981\u5173\u6ce8\u4e1a\u52a1\u672c\u8eab\uff0c\u4e0d\u518d\u9700\u8981\u7279\u522b\u5173\u5fc3 Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u4e0a\u9047\u5230\u7684\u4e00\u7cfb\u5217\u75db\u70b9\u3002**\u5728 StreamPark \u4f5c\u4e1a\u5f00\u53d1\u7ba1\u7406\u7ba1\u7406\u4e2d\uff0c\u5927\u81f4\u5206\u4e3a\u4e09\u4e2a\u6a21\u5757\uff1a\u4f5c\u4e1a\u7ba1\u7406\u57fa\u7840\u529f\u80fd\uff0cJar \u4f5c\u4e1a\u7ba1\u7406\uff0cFlinkSQL \u4f5c\u4e1a\u7ba1\u7406\u3002\u5982\u4e0b\uff1a\\n\\n![\u56fe\u7247](/blog/shunwang/homework_manager.png)\\n\\n**\u5f00\u53d1\u811a\u624b\u67b6**\\n\\n\u901a\u8fc7\u8fdb\u4e00\u6b65\u7684\u7814\u7a76\u53d1\u73b0\uff0cStreamPark \u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u5e73\u53f0\uff0c\u8fd8\u5305\u542b Flink \u4f5c\u4e1a\u5f00\u53d1\u811a\u624b\u67b6\uff0c\u5728 StreamPark \u4e2d\uff0c\u9488\u5bf9\u7f16\u5199\u4ee3\u7801\u7684 Flink \u4f5c\u4e1a\uff0c\u63d0\u4f9b\u4e00\u79cd\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5c06\u7a0b\u5e8f\u914d\u7f6e\u6807\u51c6\u5316\uff0c\u63d0\u4f9b\u4e86\u66f4\u4e3a\u7b80\u5355\u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u540c\u65f6\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5217 Connectors\uff0c\u964d\u4f4e\u4e86 DataStream \u5f00\u53d1\u7684\u95e8\u69db\u3002\\n\\n\\n\\n![\u56fe\u7247](/blog/shunwang/connectors.png)\\n\\n\\n\\n\\n\\n### 02  **Apache StreamPark\u2122 \u89e3\u51b3\u81ea\u7814\u5e73\u53f0\u7684\u95ee\u9898**\\n\\n\u4e0a\u9762\u6211\u4eec\u7b80\u5355\u4ecb\u7ecd\u4e86 StreamPark \u7684\u6838\u5fc3\u80fd\u529b\u3002\u5728\u987a\u7f51\u79d1\u6280\u7684\u6280\u672f\u9009\u578b\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0 StreamPark \u6240\u5177\u5907\u5f3a\u5927\u7684\u529f\u80fd\u4e0d\u4ec5\u5305\u542b\u4e86\u73b0\u6709 Streaming-Launcher \u7684\u57fa\u7840\u529f\u80fd\uff0c\u8fd8\u63d0\u4f9b\u4e86\u66f4\u5b8c\u6574\u7684\u5bf9\u5e94\u65b9\u6848\u89e3\u51b3\u4e86 Streaming-Launcher \u7684\u8bf8\u591a\u4e0d\u8db3\u3002\u5728\u8fd9\u90e8\u5206\uff0c\u7740\u91cd\u4ecb\u7ecd\u4e0b StreamPark \u9488\u5bf9\u6211\u4eec\u81ea\u7814\u5e73\u53f0 Streaming-Launcher \u7684\u4e0d\u8db3\u6240\u63d0\u4f9b\u7684\u89e3\u51b3\u65b9\u6848\u3002\\n\\n\\n\\n![\u56fe\u7247](/blog/shunwang/function.png)\\n\\n\\n\\n**Flink \u4f5c\u4e1a\u4e00\u7ad9\u5f0f\u7684\u5f00\u53d1\u80fd\u529b**\\n\\nStreamPark \u4e3a\u4e86\u964d\u4f4e Flink \u4f5c\u4e1a\u5f00\u53d1\u95e8\u69db\uff0c\u63d0\u9ad8\u5f00\u53d1\u540c\u5b66\u5de5\u4f5c\u6548\u7387\uff0c**\u63d0\u4f9b\u4e86 FlinkSQL IDE\u3001\u53c2\u6570\u7ba1\u7406\u3001\u4efb\u52a1\u7ba1\u7406\u3001\u4ee3\u7801\u7ba1\u7406\u3001\u4e00\u952e\u7f16\u8bd1\u3001\u4e00\u952e\u4f5c\u4e1a\u4e0a\u4e0b\u7ebf\u7b49\u4f7f\u7528\u7684\u529f\u80fd**\u3002\u5728\u8c03\u7814\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0 StreamPark \u96c6\u6210\u7684\u8fd9\u4e9b\u529f\u80fd\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u5f00\u53d1\u540c\u5b66\u7684\u5de5\u4f5c\u6548\u7387\u3002\u5728\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u6765\u8bf4\uff0c\u5f00\u53d1\u540c\u5b66\u4e0d\u9700\u8981\u53bb\u5173\u5fc3 Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u7684\u96be\u9898\uff0c\u53ea\u8981\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u7684\u5f00\u53d1\u3002\u540c\u65f6\uff0c\u8fd9\u4e9b\u529f\u80fd\u4e5f\u89e3\u51b3\u4e86 Streaming-Launcher \u4e2d SQL \u5f00\u53d1\u6d41\u7a0b\u7e41\u7410\u7684\u75db\u70b9\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/application.png)\\n\\n**\u652f\u6301\u591a\u79cd\u90e8\u7f72\u6a21\u5f0f**\\n\\n\u5728 Streaming-Launcher \u4e2d\uff0c\u7531\u4e8e\u53ea\u652f\u6301 Yarn Session \u6a21\u5f0f\uff0c\u5bf9\u4e8e\u5f00\u53d1\u540c\u5b66\u6765\u8bf4\uff0c\u5176\u5b9e\u975e\u5e38\u4e0d\u7075\u6d3b\u3002StreamPark \u5bf9\u4e8e\u8fd9\u4e00\u65b9\u9762\u4e5f\u63d0\u4f9b\u4e86\u5b8c\u5584\u7684\u89e3\u51b3\u65b9\u6848\u3002**StreamPark \u5b8c\u6574\u7684\u652f\u6301\u4e86Flink \u7684\u6240\u6709\u90e8\u7f72\u6a21\u5f0f\uff1aRemote\u3001Yarn Per-Job\u3001Yarn Application\u3001Yarn Session\u3001K8s Session\u3001K8s Application****\uff0c**\u53ef\u4ee5\u8ba9\u5f00\u53d1\u540c\u5b66\u9488\u5bf9\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\u81ea\u7531\u9009\u62e9\u5408\u9002\u7684\u8fd0\u884c\u6a21\u5f0f\u3002**\\n\\n**\u4f5c\u4e1a\u7edf\u4e00\u7ba1\u7406\u4e2d\u5fc3**\\n\\n\u5bf9\u4e8e\u5f00\u53d1\u540c\u5b66\u6765\u8bf4\uff0c\u4f5c\u4e1a\u8fd0\u884c\u72b6\u6001\u662f\u4ed6\u4eec\u6700\u5173\u5fc3\u7684\u5185\u5bb9\u4e4b\u4e00\u3002\u5728 Streaming-Launcher \u4e2d\u7531\u4e8e\u7f3a\u4e4f\u4f5c\u4e1a\u7edf\u4e00\u7ba1\u7406\u754c\u9762\uff0c\u5f00\u53d1\u540c\u5b66\u53ea\u80fd\u901a\u8fc7\u544a\u8b66\u4fe1\u606f\u548c Yarn \u4e2dApplication \u7684\u72b6\u6001\u4fe1\u606f\u6765\u5224\u65ad\u4efb\u52a1\u72b6\u6001\uff0c\u8fd9\u5bf9\u5f00\u53d1\u540c\u5b66\u6765\u8bf4\u975e\u5e38\u4e0d\u53cb\u597d\u3002StreamPark \u9488\u5bf9\u8fd9\u4e00\u70b9\uff0c\u63d0\u4f9b\u4e86\u4f5c\u4e1a\u7edf\u4e00\u7ba1\u7406\u754c\u9762\uff0c\u53ef\u4ee5\u4e00\u76ee\u4e86\u7136\u67e5\u770b\u5230\u6bcf\u4e2a\u4efb\u52a1\u7684\u8fd0\u884c\u60c5\u51b5\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/management.png)\\n\\n\u5728 Streaming-Launcher \u4e2d\uff0c\u5f00\u53d1\u540c\u5b66\u5728\u4f5c\u4e1a\u95ee\u9898\u8bca\u65ad\u7684\u65f6\u5019\uff0c\u9700\u8981\u901a\u8fc7\u591a\u4e2a\u6b65\u9aa4\u624d\u80fd\u5b9a\u4f4d\u4f5c\u4e1a\u8fd0\u884c\u65e5\u5fd7\u3002StreamPark \u63d0\u4f9b\u4e86\u4e00\u952e\u8df3\u8f6c\u529f\u80fd\uff0c\u80fd\u5feb\u901f\u5b9a\u4f4d\u5230\u4f5c\u4e1a\u8fd0\u884c\u65e5\u5fd7\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/logs.png)\\n\\n\\n\\n## \u843d \u5730 \u5b9e \u8df5\\n\\n\u5728 StreamPark \u5f15\u5165\u987a\u7f51\u79d1\u6280\u65f6\uff0c\u7531\u4e8e\u516c\u53f8\u4e1a\u52a1\u7684\u7279\u70b9\u548c\u5f00\u53d1\u540c\u5b66\u7684\u4e00\u4e9b\u5b9a\u5236\u5316\u9700\u6c42\uff0c\u6211\u4eec\u5bf9 StreamPark \u7684\u529f\u80fd\u505a\u4e86\u4e00\u4e9b\u589e\u52a0\u548c\u4f18\u5316\uff0c\u540c\u65f6\u4e5f\u603b\u7ed3\u4e86\u4e00\u4e9b\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u95ee\u9898\u548c\u5bf9\u5e94\u7684\u89e3\u51b3\u65b9\u6848\u3002\\n\\n### 01  **\u7ed3\u5408 Flink-SQL-Gateway \u7684\u80fd\u529b**\\n\\n\u5728\u987a\u7f51\u79d1\u6280\uff0c\u6211\u4eec\u57fa\u4e8e Flink-SQL-Gateway \u81ea\u7814\u4e86 ODPS \u5e73\u53f0\u6765\u65b9\u4fbf\u4e1a\u52a1\u5f00\u53d1\u540c\u5b66\u7ba1\u7406 Flink \u8868\u7684\u5143\u6570\u636e\u3002\u4e1a\u52a1\u5f00\u53d1\u540c\u5b66\u5728 ODPS \u4e0a\u5bf9 Flink \u8868\u8fdb\u884c DDL \u64cd\u4f5c\uff0c\u7136\u540e\u5728 StreamPark \u4e0a\u5bf9\u521b\u5efa\u7684 Flink \u8868\u8fdb\u884c\u5206\u6790\u67e5\u8be2\u64cd\u4f5c\u3002\u5728\u6574\u4e2a\u4e1a\u52a1\u5f00\u53d1\u6d41\u7a0b\u4e0a\uff0c\u6211\u4eec\u5bf9 Flink \u8868\u7684\u521b\u5efa\u548c\u5206\u6790\u5b9e\u73b0\u4e86\u89e3\u8026\uff0c\u8ba9\u5f00\u53d1\u6d41\u7a0b\u663e\u5f97\u6bd4\u8f83\u6e05\u6670\u3002\\n\\n\u5f00\u53d1\u540c\u5b66\u5982\u679c\u60f3\u5728 ODPS \u4e0a\u67e5\u8be2\u5b9e\u65f6\u6570\u636e\uff0c\u6211\u4eec\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a Flink SQL \u7684\u8fd0\u884c\u73af\u5883\u3002\u6211\u4eec\u4f7f\u7528 StreamPark \u8fd0\u884c\u4e86\u4e00\u4e2a Yarn Session \u7684 Flink \u73af\u5883\u63d0\u4f9b\u7ed9 ODPS \u505a\u5b9e\u65f6\u67e5\u8be2\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/homework.png)\\n\\n\u76ee\u524d StreamPark \u793e\u533a\u4e3a\u4e86\u8fdb\u4e00\u6b65\u964d\u4f4e\u5b9e\u65f6\u4f5c\u4e1a\u5f00\u53d1\u95e8\u69db\uff0c\u6b63\u5728\u5bf9\u63a5 Flink-SQL-Gateway\u3002\\n\\nhttps://github.com/apache/streampark/issues/2274\\n\\n\\n\\n### 02  **\u589e\u5f3a Flink \u96c6\u7fa4\u7ba1\u7406\u80fd\u529b**\\n\\n\u5728\u987a\u7f51\u79d1\u6280\uff0c\u5b58\u5728\u5927\u91cf\u4ece Kafka \u6570\u636e\u540c\u6b65\u5230 Iceberg / PG / Clickhouse / Hive \u7684\u4f5c\u4e1a\u3002\u8fd9\u4e9b\u4f5c\u4e1a\u9700\u8981\u7684 Yarn \u5bf9\u4e8e\u8d44\u6e90\u8981\u6c42\u548c\u65f6\u6548\u6027\u8981\u6c42\u4e0d\u9ad8\uff0c\u4f46\u662f\u5982\u679c\u5168\u90e8\u4f7f\u7528 Yarn Application \u548c per-job \u6a21\u5f0f\uff0c\u6bcf\u4e2a\u4efb\u52a1\u90fd\u4f1a\u542f\u52a8 JobManager\uff0c\u90a3\u4e48\u4f1a\u9020\u6210 Yarn \u8d44\u6e90\u7684\u6d6a\u8d39\u3002\u5bf9\u6b64\uff0c\u6211\u4eec\u51b3\u5b9a\u4f7f\u7528 Yarn Session \u6a21\u5f0f\u8fd0\u884c\u8fd9\u4e9b\u5927\u91cf\u7684\u6570\u636e\u540c\u6b65\u4f5c\u4e1a\u3002\\n\\n\u5728\u5b9e\u8df5\u4e2d\u6211\u4eec\u53d1\u73b0\u4e1a\u52a1\u5f00\u53d1\u540c\u5b66\u5f88\u96be\u76f4\u89c2\u7684\u77e5\u9053\u5728\u6bcf\u4e2a Yarn Session \u4e2d\u8fd0\u884c\u4e86\u591a\u5c11\u4e2a\u4f5c\u4e1a\uff0c\u5176\u4e2d\u5305\u62ec\u4f5c\u4e1a\u603b\u6570\u548c\u6b63\u5728\u8fd0\u884c\u4e2d\u7684\u4f5c\u4e1a\u6570\u91cf\u3002\u57fa\u4e8e\u8fd9\u4e2a\u539f\u56e0\uff0c\u6211\u4eec\u4e3a\u4e86\u65b9\u4fbf\u5f00\u53d1\u540c\u5b66\u53ef\u4ee5\u76f4\u89c2\u5730\u89c2\u5bdf\u5230 Yarn Session \u4e2d\u7684\u4f5c\u4e1a\u6570\u91cf\uff0c\u5728 Flink Cluster \u754c\u9762\u589e\u52a0\u4e86 All Jobs \u548c Running Jobs \u6765\u8868\u793a\u5728\u4e00\u4e2a Yarn Session \u4e2d\u603b\u7684\u4f5c\u4e1a\u6570\u548c\u6b63\u5728\u8fd0\u884c\u7684\u4f5c\u4e1a\u6570\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/cluster.png)\\n\\n\\n\\n### 03  **\u589e\u5f3a\u544a\u8b66\u80fd\u529b**\\n\\n\u56e0\u4e3a\u6bcf\u4e2a\u516c\u53f8\u7684\u77ed\u4fe1\u544a\u8b66\u5e73\u53f0\u5b9e\u73b0\u90fd\u5404\u4e0d\u76f8\u540c\uff0c\u6240\u4ee5 StreamPark \u793e\u533a\u5e76\u6ca1\u6709\u62bd\u8c61\u51fa\u7edf\u4e00\u7684\u77ed\u4fe1\u544a\u8b66\u529f\u80fd\u3002\u5728\u6b64\uff0c\u6211\u4eec\u901a\u8fc7 Webhook \u7684\u65b9\u5f0f\uff0c\u81ea\u5df1\u5b9e\u73b0\u4e86\u77ed\u4fe1\u544a\u8b66\u529f\u80fd\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/alarm.png)\\n\\n\\n\\n### 04  **\u589e\u52a0\u963b\u585e\u961f\u5217\u89e3\u51b3\u9650\u6d41\u95ee\u9898**\\n\\n\u5728\u751f\u4ea7\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u5728\u5927\u6279\u91cf\u4efb\u52a1\u540c\u65f6\u5931\u8d25\u7684\u65f6\u5019\uff0c\u6bd4\u5982 Yarn Session \u96c6\u7fa4\u6302\u4e86\uff0c\u98de\u4e66 / \u5fae\u4fe1\u7b49\u5e73\u53f0\u5728\u591a\u7ebf\u7a0b\u540c\u65f6\u8c03\u7528\u544a\u8b66\u63a5\u53e3\u65f6\u4f1a\u5b58\u5728\u9650\u6d41\u7684\u95ee\u9898\uff0c\u90a3\u4e48\u5927\u91cf\u7684\u544a\u8b66\u4fe1\u606f\u56e0\u4e3a\u98de\u4e66 / \u5fae\u4fe1\u7b49\u5e73\u53f0\u9650\u6d41\u95ee\u9898\uff0cStreamPark \u53ea\u4f1a\u53d1\u9001\u4e00\u90e8\u5206\u7684\u544a\u8b66\u4fe1\u606f\uff0c\u8fd9\u6837\u975e\u5e38\u5bb9\u6613\u8bef\u5bfc\u5f00\u53d1\u540c\u5b66\u6392\u67e5\u95ee\u9898\u3002\u5728\u987a\u7f51\u79d1\u6280\uff0c\u6211\u4eec\u589e\u52a0\u4e86\u4e00\u4e2a\u963b\u585e\u961f\u5217\u548c\u4e00\u4e2a\u544a\u8b66\u7ebf\u7a0b\uff0c\u6765\u89e3\u51b3\u9650\u6d41\u95ee\u9898\u3002\\n\\n![\u56fe\u7247](/blog/shunwang/queue.png)\\n\\n\u5f53\u4f5c\u4e1a\u76d1\u63a7\u8c03\u5ea6\u5668\u68c0\u6d4b\u5230\u4f5c\u4e1a\u5f02\u5e38\u65f6\uff0c\u4f1a\u4ea7\u751f\u4e00\u6761\u4f5c\u4e1a\u5f02\u5e38\u7684\u6d88\u606f\u53d1\u9001\u7684\u963b\u585e\u961f\u5217\u4e2d\uff0c\u5728\u544a\u8b66\u7ebf\u7a0b\u4e2d\u4f1a\u4e00\u76f4\u6d88\u8d39\u963b\u585e\u961f\u5217\u4e2d\u7684\u6d88\u606f\uff0c\u5728\u5f97\u5230\u4f5c\u4e1a\u5f02\u5e38\u6d88\u606f\u540e\u5219\u4f1a\u6839\u636e\u7528\u6237\u914d\u7f6e\u7684\u544a\u8b66\u4fe1\u606f\u5355\u7ebf\u7a0b\u53d1\u9001\u5230\u4e0d\u540c\u7684\u5e73\u53f0\u4e2d\u3002\u867d\u7136\u8fd9\u6837\u505a\u53ef\u80fd\u4f1a\u8ba9\u7528\u6237\u5ef6\u8fdf\u6536\u5230\u544a\u8b66\uff0c\u4f46\u662f\u6211\u4eec\u5728\u5b9e\u8df5\u4e2d\u53d1\u73b0\u540c\u65f6\u6709 100+ \u4e2a Flink \u4f5c\u4e1a\u5931\u8d25\uff0c\u7528\u6237\u63a5\u53d7\u5230\u544a\u8b66\u7684\u5ef6\u8fdf\u65f6\u95f4\u5c0f\u4e8e 3s\u3002\u5bf9\u4e8e\u8fd9\u79cd\u5ef6\u8fdf\u65f6\u95f4\uff0c\u6211\u4eec\u4e1a\u52a1\u5f00\u53d1\u540c\u5b66\u5b8c\u5168\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u3002\u8be5\u6539\u8fdb\u76ee\u524d\u5df2\u7ecf\u8bb0\u5f55 ISSUE\uff0c\u6b63\u5728\u8003\u8651\u8d21\u732e\u5230\u793e\u533a\u4e2d\u3002\\n\\nhttps://github.com/apache/streampark/issues/2142\\n\\n\\n\\n## \u5e26\u6765\u7684\u6536\u76ca\\n\\n\u6211\u4eec\u4ece StreamX 1.2.3\uff08StreamPark \u524d\u8eab\uff09\u5f00\u59cb\u63a2\u7d22\u548c\u4f7f\u7528\uff0c\u7ecf\u8fc7\u4e00\u5e74\u591a\u65f6\u95f4\u7684\u78e8\u5408\uff0c\u6211\u4eec\u53d1\u73b0 StreamPark \u771f\u5b9e\u89e3\u51b3\u4e86 Flink \u4f5c\u4e1a\u5728\u5f00\u53d1\u7ba1\u7406\u548c\u8fd0\u7ef4\u4e0a\u7684\u8bf8\u591a\u75db\u70b9\u3002\\n\\nStreamPark \u7ed9\u987a\u7f51\u79d1\u6280\u5e26\u6765\u7684\u6700\u5927\u7684\u6536\u76ca\u5c31\u662f\u964d\u4f4e\u4e86 Flink \u7684\u4f7f\u7528\u95e8\u69db\uff0c\u63d0\u5347\u4e86\u5f00\u53d1\u6548\u7387\u3002\u6211\u4eec\u4e1a\u52a1\u5f00\u53d1\u540c\u5b66\u5728\u539f\u5148\u7684 Streaming-Launcher \u4e2d\u9700\u8981\u4f7f\u7528 vscode\u3001GitLab \u548c\u8c03\u5ea6\u5e73\u53f0\u7b49\u591a\u4e2a\u5de5\u5177\u5b8c\u6210\u4e00\u4e2a FlinkSQL \u4f5c\u4e1a\u5f00\u53d1\uff0c\u4ece\u5f00\u53d1\u5230\u7f16\u8bd1\u5230\u53d1\u5e03\u7684\u6d41\u7a0b\u4e2d\u7ecf\u8fc7\u591a\u4e2a\u5de5\u5177\u4f7f\u7528\uff0c\u6d41\u7a0b\u7e41\u7410\u3002StreamPark \u63d0\u4f9b\u4e00\u7ad9\u5f0f\u670d\u52a1\uff0c\u53ef\u4ee5\u5728 StreamPark \u4e0a\u5b8c\u6210\u4f5c\u4e1a\u5f00\u53d1\u7f16\u8bd1\u53d1\u5e03\uff0c\u7b80\u5316\u4e86\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b\u3002\\n\\n**\u76ee\u524d StreamPark \u5728\u987a\u7f51\u79d1\u6280\u5df2\u7ecf\u5927\u89c4\u6a21\u5728\u751f\u4ea7\u73af\u5883\u6295\u5165\u4f7f\u7528\uff0cStreamPark \u4ece\u6700\u5f00\u59cb\u7ba1\u7406\u7684 500+ \u4e2a FlinkSQL \u4f5c\u4e1a\u589e\u52a0\u5230\u4e86\u8fd1 700 \u4e2a FlinkSQL\u4f5c\u4e1a\uff0c\u540c\u65f6\u7ba1\u7406\u4e86 10+ \u4e2a Yarn Sesssion Cluster\u3002**\\n\\n![\u56fe\u7247](/blog/shunwang/achievements1.png)\\n\\n![\u56fe\u7247](/blog/shunwang/achievements2.png)\\n\\n##  \u672a \u6765 \u89c4 \u5212\\n\\n\u987a\u7f51\u79d1\u6280\u4f5c\u4e3a StreamPark \u65e9\u671f\u7684\u7528\u6237\u4e4b\u4e00\uff0c\u5728 1 \u5e74\u671f\u95f4\u5185\u4e00\u76f4\u548c\u793e\u533a\u540c\u5b66\u4fdd\u6301\u4ea4\u6d41\uff0c\u53c2\u4e0e StreamPark \u7684\u7a33\u5b9a\u6027\u6253\u78e8\uff0c\u6211\u4eec\u5c06\u751f\u4ea7\u8fd0\u7ef4\u4e2d\u9047\u5230\u7684 Bug \u548c\u65b0\u7684 Feature \u63d0\u4ea4\u7ed9\u4e86\u793e\u533a\u3002\u5728\u672a\u6765\uff0c\u6211\u4eec\u5e0c\u671b\u53ef\u4ee5\u5728 StreamPark \u4e0a\u7ba1\u7406 Flink \u8868\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u57fa\u4e8e Flink \u5f15\u64ce\u901a\u8fc7\u591a Catalog \u5b9e\u73b0\u8de8\u6570\u636e\u6e90\u67e5\u8be2\u5206\u6790\u529f\u80fd\u3002\u76ee\u524d StreamPark \u6b63\u5728\u5bf9\u63a5 Flink-SQL-Gateway \u80fd\u529b\uff0c\u8fd9\u4e00\u5757\u5728\u672a\u6765\u5bf9\u4e8e\u8868\u5143\u6570\u636e\u7684\u7ba1\u7406\u548c\u8de8\u6570\u636e\u6e90\u67e5\u8be2\u529f\u80fd\u4f1a\u63d0\u4f9b\u4e86\u5f88\u5927\u7684\u5e2e\u52a9\u3002\\n\\n\u7531\u4e8e\u5728\u987a\u7f51\u79d1\u6280\u591a\u662f\u5df2 Yarn Session \u6a21\u5f0f\u8fd0\u884c\u7684\u4f5c\u4e1a\uff0c\u6211\u4eec\u5e0c\u671b StreamPark \u53ef\u4ee5\u63d0\u4f9b\u66f4\u591a\u5bf9\u4e8e Remote\u96c6\u7fa4\u3001Yarn Session \u96c6\u7fa4\u548c K8s Session \u96c6\u7fa4\u529f\u80fd\u652f\u6301\uff0c\u6bd4\u5982\u76d1\u63a7\u544a\u8b66\uff0c\u4f18\u5316\u64cd\u4f5c\u6d41\u7a0b\u7b49\u65b9\u9762\u3002\\n\\n\u8003\u8651\u5230\u672a\u6765\uff0c\u968f\u7740\u4e1a\u52a1\u53d1\u5c55\u53ef\u80fd\u4f1a\u4f7f\u7528 StreamPark \u7ba1\u7406\u66f4\u591a\u7684 Flink \u5b9e\u65f6\u4f5c\u4e1a\uff0c\u5355\u8282\u70b9\u6a21\u5f0f\u4e0b\u7684 StreamPark \u53ef\u80fd\u5e76\u4e0d\u5b89\u5168\u3002\u6240\u4ee5\u6211\u4eec\u5bf9\u4e8e StreamPark \u7684 HA \u4e5f\u662f\u975e\u5e38\u671f\u5f85\u3002\\n\\n\u5bf9\u4e8e StreamPark \u5bf9\u63a5 Flink-SQL-Gateway \u80fd\u529b\u3001\u4e30\u5bcc Flink Cluster \u529f\u80fd\u548c StreamPark HA\uff0c\u6211\u4eec\u540e\u7eed\u4e5f\u4f1a\u53c2\u4e0e\u5efa\u8bbe\u4e2d\u3002\"},{\"id\":\"streampark-usercase-dustess\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-dustess\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/5-streampark-usercase-dustess.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/5-streampark-usercase-dustess.md\",\"title\":\"Apache StreamPark\u2122 \u5728\u5c18\u950b\u4fe1\u606f\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5316\u7e41\u4e3a\u7b80\u6781\u81f4\u4f53\u9a8c\",\"description\":\"\u6458\u8981\uff1a\u672c\u6587\u6e90\u81ea StreamPark \u5728\u5c18\u950b\u4fe1\u606f\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u4f5c\u8005\u662f\u8d44\u6df1\u6570\u636e\u5f00\u53d1\u5de5\u7a0b\u5e08Gump\u3002\u4e3b\u8981\u5185\u5bb9\u4e3a\uff1a\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"}],\"readingTime\":21.04,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-dustess\",\"title\":\"Apache StreamPark\u2122 \u5728\u5c18\u950b\u4fe1\u606f\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5316\u7e41\u4e3a\u7b80\u6781\u81f4\u4f53\u9a8c\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"FlinkSQL\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 \u5728\u987a\u7f51\u79d1\u6280\u7684\u5927\u89c4\u6a21\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-shunwang\"},\"nextItem\":{\"title\":\"Apache StreamPark\u2122 \u5728 Joyme \u7684\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-joyme\"}},\"content\":\"**\u6458\u8981\uff1a**\u672c\u6587\u6e90\u81ea StreamPark \u5728\u5c18\u950b\u4fe1\u606f\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u4f5c\u8005\u662f\u8d44\u6df1\u6570\u636e\u5f00\u53d1\u5de5\u7a0b\u5e08Gump\u3002\u4e3b\u8981\u5185\u5bb9\u4e3a\uff1a\\n\\n1. \u6280\u672f\u9009\u578b\\n2. \u843d\u5730\u5b9e\u8df5\\n3. \u4e1a\u52a1\u652f\u6491 & \u80fd\u529b\u5f00\u653e\\n4. \u672a\u6765\u89c4\u5212\\n5. \u7ed3\u675f\u8bed\\n\\n\u5c18\u950b\u4fe1\u606f\u662f\u57fa\u4e8e\u4f01\u4e1a\u5fae\u4fe1\u751f\u6001\u7684\u4e00\u7ad9\u5f0f\u79c1\u57df\u8fd0\u8425\u7ba1\u7406\u89e3\u51b3\u65b9\u6848\u4f9b\u5e94\u5546\uff0c\u81f4\u529b\u4e8e\u6210\u4e3a\u5168\u884c\u4e1a\u9996\u5e2d\u79c1\u57df\u8fd0\u8425\u4e0e\u7ba1\u7406\u4e13\u5bb6\uff0c\u5e2e\u52a9\u4f01\u4e1a\u6784\u5efa\u6570\u5b57\u65f6\u4ee3\u79c1\u57df\u8fd0\u8425\u7ba1\u7406\u65b0\u6a21\u5f0f\uff0c\u52a9\u529b\u4f01\u4e1a\u5b9e\u73b0\u9ad8\u8d28\u91cf\u53d1\u5c55\u3002\\n\\n\u76ee\u524d\uff0c\u5c18\u950b\u5df2\u5728\u5168\u56fd\u62e5\u670913\u4e2a\u57ce\u5e02\u4e2d\u5fc3\uff0c\u8986\u76d6\u534e\u5317\u3001\u534e\u4e2d\u3001\u534e\u4e1c\u3001\u534e\u5357\u3001\u897f\u5357\u4e94\u5927\u533a\u57df\uff0c\u4e3a\u8d8530\u4e2a\u884c\u4e1a\u768410,000+\u5bb6\u4f01\u4e1a\u63d0\u4f9b\u6570\u5b57\u8425\u9500\u670d\u52a1\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## **01 \u6280\u672f\u9009\u578b**\\n\\n\u5c18\u950b\u4fe1\u606f\u57282021\u5e74\u8fdb\u5165\u4e86\u5feb\u901f\u53d1\u5c55\u65f6\u671f\uff0c\u968f\u7740\u670d\u52a1\u884c\u4e1a\u548c\u4f01\u4e1a\u5ba2\u6237\u7684\u589e\u52a0\uff0c\u5b9e\u65f6\u9700\u6c42\u8d8a\u6765\u8d8a\u591a\uff0c\u843d\u5730\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u8feb\u5728\u7709\u776b\u3002\\n\\n\u7531\u4e8e\u516c\u53f8\u5904\u4e8e\u9ad8\u901f\u53d1\u5c55\u671f\uff0c\u9700\u6c42\u7d27\u8feb\u4e14\u53d8\u5316\u5feb\uff0c\u6240\u4ee5\u56e2\u961f\u7684\u6280\u672f\u9009\u578b\u9075\u5faa\u4ee5\u4e0b\u539f\u5219:\\n\\n- \u5feb\uff1a\u7531\u4e8e\u4e1a\u52a1\u7d27\u8feb\uff0c\u6211\u4eec\u9700\u8981\u5feb\u901f\u843d\u5730\u89c4\u5212\u7684\u6280\u672f\u9009\u578b\u5e76\u8fd0\u7528\u751f\u4ea7\\n- \u7a33\uff1a\u6ee1\u8db3\u5feb\u7684\u57fa\u7840\u4e0a\uff0c\u6240\u9009\u62e9\u6280\u672f\u4e00\u5b9a\u8981\u7a33\u5b9a\u670d\u52a1\u4e1a\u52a1\\n- \u65b0\uff1a\u5728\u4ee5\u4e0a\u57fa\u7840\uff0c\u6240\u9009\u62e9\u7684\u6280\u672f\u4e5f\u5c3d\u91cf\u7684\u65b0\\n- \u5168\uff1a\u6240\u9009\u62e9\u6280\u672f\u80fd\u591f\u6ee1\u8db3\u516c\u53f8\u5feb\u901f\u53d1\u5c55\u548c\u53d8\u5316\u7684\u4e1a\u52a1\uff0c\u80fd\u591f\u7b26\u5408\u56e2\u961f\u957f\u671f\u53d1\u5c55\u76ee\u6807\uff0c\u80fd\u591f\u652f\u6301\u4e14\u5feb\u901f\u652f\u6301\u4e8c\u6b21\u5f00\u53d1\\n\\n\u9996\u5148\u5728\u8ba1\u7b97\u5f15\u64ce\u65b9\u9762\uff1a\u6211\u4eec\u9009\u62e9 Flink\uff0c\u539f\u56e0\u5982\u4e0b:\\n\\n- \u56e2\u961f\u6210\u5458\u5bf9 Flink \u6709\u6df1\u5165\u4e86\u89e3\uff0c\u719f\u8bfb\u6e90\u7801\\n- Flink \u652f\u6301\u6279\u6d41\u4e00\u4f53\uff0c\u867d\u7136\u76ee\u524d\u516c\u53f8\u7684\u6279\u5904\u7406\u67b6\u6784\u8fd8\u662f\u57fa\u4e8e Hive\u3001Spark \u7b49\u3002\u4f7f\u7528 Flink \u8fdb\u884c\u6d41\u8ba1\u7b97\uff0c\u4fbf\u4e8e\u540e\u671f\u5efa\u8bbe\u6279\u6d41\u4e00\u4f53\u548c\u6e56\u4ed3\u4e00\u4f53\\n- \u76ee\u524d\u56fd\u5185 Flink \u751f\u6001\u5df2\u7ecf\u8d8a\u6765\u8d8a\u6210\u719f\uff0cFlink \u4e5f\u5f00\u59cb\u7740\u624b\u8e0f\u7834\u8fb9\u754c\u5411\u6d41\u5f0f\u6570\u4ed3\u53d1\u5c55\\n\\n\u5728\u5e73\u53f0\u5c42\u9762\uff0c\u6211\u4eec\u7efc\u5408\u5bf9\u6bd4\u4e86 StreamPark \u3001 Apache Zeppelin \u548c flink-streaming-platform-web\uff0c\u4e5f\u6df1\u5165\u9605\u8bfb\u4e86\u6e90\u7801\u548c\u5e76\u505a\u4e86\u4f18\u7f3a\u70b9\u5206\u6790\uff0c\u5173\u4e8e\u540e\u4e24\u4e2a\u9879\u76ee\u672c\u6587\u5c31\u4e0d\u5c55\u5f00\u8d58\u8ff0\uff0c\u611f\u5174\u8da3\u7684\u670b\u53cb\u53ef\u4ee5\u53bb GitHub \u641c\u7d22\uff0c\u6211\u4eec\u6700\u7ec8\u9009\u62e9 StreamPark\uff0c\u7406\u7531\u5982\u4e0b\uff1a\\n\\n### **\u5b8c\u6210\u5ea6\u9ad8**\\n\\n#### **1. \u652f\u6301Flink \u591a\u7248\u672c**\\n\\n//\u89c6\u9891\u94fe\u63a5\uff08 Flink \u591a\u7248\u672c\u652f\u6301 Demo \uff09\\n\\n\\n\\n\u65b0\u5efa\u4efb\u52a1\u65f6\u53ef\u4ee5**\u81ea\u7531\u9009\u62e9Flink\u7248\u672c**\uff0cFlink \u4e8c\u8fdb\u5236\u7248\u672c\u5305\u4f1a\u81ea\u52a8\u4e0a\u4f20\u81f3 HDFS\uff08\u5982\u679c\u4f7f\u7528 Yarn \u63d0\u4ea4\uff09\uff0c\u4e14\u4e00\u4e2a\u7248\u672c\u7684\u4e8c\u8fdb\u5236\u5305\u53ea\u4f1a\u5728 HDFS \u4fdd\u5b58\u4e00\u4efd\u3002\u4efb\u52a1\u542f\u52a8\u65f6\u4f1a\u81ea\u52a8\u6839\u636e\u4e0a\u4e0b\u6587\u52a0\u8f7d HDFS \u4e2d\u7684 Flink \u4e8c\u8fdb\u5236\u5305\uff0c\u975e\u5e38\u4f18\u96c5\u3002\u80fd\u591f\u6ee1\u8db3\u591a\u7248\u672c\u5171\u5b58\uff0c\u53ca\u5347\u7ea7Flink \u65b0\u7248\u672c\u8bd5\u7528\u6d4b\u8bd5\u7684\u573a\u666f\u3002\\n\\n![](/blog/dustess/flink_home.png)\\n\\n#### **2. \u652f\u6301\u591a\u79cd\u90e8\u7f72\u6a21\u5f0f**\\n\\nStreamPark \u652f\u6301 Flink **\u6240\u6709\u4e3b\u6d41\u7684\u63d0\u4ea4\u6a21\u5f0f**\uff0c\u5982 standalone\u3001yarn-session \u3001yarn application\u3001yarn-perjob\u3001kubernetes-session\u3001kubernetes-application \u800c\u4e14StreamPark \u4e0d\u662f\u7b80\u5355\u7684\u62fc\u63a5 Flink run \u547d\u4ee4\u6765\u8fdb\u884c\u7684\u4efb\u52a1\u63d0\u4ea4\uff0c\u800c\u662f\u5f15\u5165\u4e86 Flink Client \u6e90\u7801\u5305\uff0c\u76f4\u63a5\u8c03\u7528 Flink Client API \u6765\u8fdb\u884c\u7684\u4efb\u52a1\u63d0\u4ea4\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f\u4ee3\u7801\u6a21\u5757\u5316\u3001\u6613\u8bfb\u3001\u4fbf\u4e8e\u6269\u5c55\uff0c\u7a33\u5b9a\uff0c\u4e14\u80fd\u5728\u540e\u671f\u6839\u636e Flink \u7248\u672c\u5347\u7ea7\u8fdb\u884c\u5f88\u5feb\u7684\u9002\u914d\u3002\\n\\n![](/blog/dustess/execution_mode.png)\\n\\nFlink SQL \u53ef\u4ee5\u6781\u5927\u63d0\u5347\u5f00\u53d1\u6548\u7387\u548c\u63d0\u9ad8 Flink \u7684\u666e\u53ca\u3002StreamPark \u5bf9\u4e8e **Flink SQL \u7684\u652f\u6301\u975e\u5e38\u5230\u4f4d**\uff0c\u4f18\u79c0\u7684 SQL \u7f16\u8f91\u5668\uff0c\u4f9d\u8d56\u7ba1\u7406\uff0c\u4efb\u52a1\u591a\u7248\u672c\u7ba1\u7406\u7b49\u7b49\u3002StreamPark \u5b98\u7f51\u4ecb\u7ecd\u540e\u671f\u4f1a\u52a0\u5165 Flink SQL \u7684\u5143\u6570\u636e\u7ba1\u7406\u6574\u5408\uff0c\u5927\u5bb6\u62ed\u76ee\u4ee5\u5f85\u3002\\n\\n![](/blog/dustess/flink_sql.png)\\n\\n![](/blog/dustess/flink_sql_version.png)\\n\\n#### **4. JAVA\u4efb\u52a1\u5728\u7ebf\u6784\u5efa**\\n\\n//\u89c6\u9891\u94fe\u63a5\uff08 JAVA \u4efb\u52a1\u6784\u5efa Demo\uff09\\n\\n\\n\\nFlink SQL \u73b0\u5728\u867d\u7136\u8db3\u591f\u5f3a\u5927\uff0c\u4f46\u4f7f\u7528 Java \u548c Scala \u7b49 JVM \u8bed\u8a00\u5f00\u53d1 Flink \u4efb\u52a1\u4f1a\u66f4\u52a0\u7075\u6d3b\u3001\u5b9a\u5236\u5316\u66f4\u5f3a\u3001\u4fbf\u4e8e\u8c03\u4f18\u548c\u63d0\u5347\u8d44\u6e90\u5229\u7528\u7387\u3002\u4e0e SQL \u76f8\u6bd4 Jar \u5305\u63d0\u4ea4\u4efb\u52a1\u6700\u5927\u7684\u95ee\u9898\u662fJar\u5305\u7684\u4e0a\u4f20\u7ba1\u7406\u7b49\uff0c\u6ca1\u6709\u4f18\u79c0\u7684\u5de5\u5177\u4ea7\u54c1\u4f1a\u4e25\u91cd\u964d\u4f4e\u5f00\u53d1\u6548\u7387\u548c\u52a0\u5927\u7ef4\u62a4\u6210\u672c\u3002\\n\\nStreamPark \u9664\u4e86\u652f\u6301 Jar \u4e0a\u4f20\uff0c\u66f4\u63d0\u4f9b\u4e86**\u5728\u7ebf\u66f4\u65b0\u6784\u5efa**\u7684\u529f\u80fd\uff0c\u4f18\u96c5\u89e3\u51b3\u4e86\u4ee5\u4e0a\u95ee\u9898\uff1a\\n\\n1\u3001\u65b0\u5efa Project \uff1a\u586b\u5199 GitHub/Gitlab\uff08\u652f\u6301\u4f01\u4e1a\u79c1\u670d\uff09\u5730\u5740\u53ca\u7528\u6237\u540d\u5bc6\u7801\uff0cStreamPark \u5c31\u80fd Pull \u548c Build \u9879\u76ee\u3002\\n\\n2\u3001\u521b\u5efa StreamPark Custom-Code \u4efb\u52a1\u65f6\u5f15\u7528 Project\uff0c\u6307\u5b9a\u4e3b\u7c7b\uff0c\u542f\u52a8\u4efb\u52a1\u65f6\u53ef\u9009\u81ea\u52a8 Pull\u3001Build \u548c\u7ed1\u5b9a\u751f\u6210\u7684 Jar\uff0c\u975e\u5e38\u4f18\u96c5\uff01\\n\\n\u540c\u65f6 StreamPark \u793e\u533a\u6700\u8fd1\u4e5f\u5728\u5b8c\u5584\u6574\u4e2a\u4efb\u52a1\u7f16\u8bd1\u3001\u4e0a\u7ebf\u7684\u6d41\u7a0b\uff0c\u4ee5\u540e\u7684 StreamPark \u4f1a\u5728\u6b64\u57fa\u7840\u4e0a\u66f4\u52a0\u5b8c\u5584\u548c\u4e13\u4e1a\u3002\\n\\n![](/blog/dustess/system_list.png)\\n\\n#### **5. \u5b8c\u5584\u7684\u4efb\u52a1\u53c2\u6570\u914d\u7f6e**\\n\\n\u5bf9\u4e8e\u4f7f\u7528 Flink \u505a\u6570\u636e\u5f00\u53d1\u800c\u8a00\uff0cFlink run \u63d0\u4ea4\u7684\u53c2\u6570\u51e0\u4e4e\u662f\u96be\u4ee5\u7ef4\u62a4\u7684\u3002StreamPark \u4e5f\u975e\u5e38**\u4f18\u96c5\u7684\u89e3\u51b3**\u4e86\u6b64\u7c7b\u95ee\u9898\uff0c\u539f\u56e0\u662f\u4e0a\u9762\u63d0\u5230\u7684 StreamPark \u76f4\u63a5\u8c03\u7528 Flink Client API\uff0c\u5e76\u4e14\u4ece StreamPark \u4ea7\u54c1\u524d\u7aef\u6253\u901a\u4e86\u6574\u4e2a\u6d41\u7a0b\u3002\\n\\n![](/blog/dustess/parameter_configuration.png)\\n\\n\u5927\u5bb6\u53ef\u4ee5\u770b\u5230\uff0cStreamPark \u7684\u4efb\u52a1\u53c2\u6570\u8bbe\u7f6e\u6db5\u76d6\u4e86\u4e3b\u6d41\u7684\u6240\u6709\u53c2\u6570\uff0c\u5e76\u4e14\u975e\u5e38\u7ec6\u5fc3\u7684\u5bf9\u6bcf\u4e2a\u53c2\u6570\u90fd\u505a\u4e86\u4ecb\u7ecd\u548c\u6700\u4f73\u5b9e\u8df5\u7684\u6700\u4f18\u63a8\u8350\u3002\u8fd9\u5bf9\u4e8e\u521a\u4f7f\u7528 Flink \u7684\u540c\u5b66\u6765\u8bf4\u4e5f\u662f\u975e\u5e38\u597d\u7684\u4e8b\u60c5\uff0c\u907f\u514d\u8e29\u5751\uff01\\n\\n#### **6. \u4f18\u79c0\u7684\u914d\u7f6e\u6587\u4ef6\u8bbe\u8ba1**\\n\\n\u5bf9\u4e8e Flink \u4efb\u52a1\u7684\u539f\u751f\u53c2\u6570\uff0c\u4e0a\u9762\u7684\u4efb\u52a1\u53c2\u6570\u5df2\u7ecf\u6db5\u76d6\u4e86\u5f88\u5927\u4e00\u90e8\u5206\u3002StreamPark \u8fd8\u63d0\u4f9b\u4e86\u5f3a\u5927\u7684**Yaml \u914d\u7f6e\u6587\u4ef6** \u6a21\u5f0f\u548c **\u7f16\u7a0b\u6a21\u578b**\u3002\\n\\n![](/blog/dustess/extended_parameters.jpg)\\n\\n1\u3001\u5bf9\u4e8e Flink SQL \u4efb\u52a1\uff0c\u76f4\u63a5\u4f7f\u7528\u4efb\u52a1\u7684 Yaml \u914d\u7f6e\u6587\u4ef6\u53ef\u4ee5\u914d\u7f6e StreamPark \u5df2\u7ecf\u5185\u7f6e\u7684\u53c2\u6570\uff0c\u5982\u5e38\u89c1\u7684 **CheckPoint\u3001\u91cd\u8bd5\u673a\u5236\u3001State Backend\u3001table planer \u3001mode** \u7b49\u7b49\u3002\\n\\n2\u3001\u5bf9\u4e8e Jar \u4efb\u52a1\uff0cStreamPark \u63d0\u4f9b\u4e86\u901a\u7528\u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u8be5\u6a21\u578b\u5c01\u88c5\u4e86 Flink \u539f\u751f API \uff0c\u7ed3\u5408 StreamPark \u63d0\u4f9b\u7684\u5c01\u88c5\u5305\u53ef\u4ee5\u975e\u5e38\u4f18\u96c5\u7684\u83b7\u53d6\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u81ea\u5b9a\u4e49\u53c2\u6570\uff0c\u8fd9\u5757\u6587\u6863\u8be6\u89c1\uff1a\\n\\n\u7f16\u7a0b\u6a21\u578b\uff1a\\n\\n```\\nhttps://streampark.apache.org/docs/development/Programming-paradigm\\n```\\n\\n\u5185\u7f6e\u914d\u7f6e\u6587\u4ef6\u53c2\u6570\uff1a\\n\\n```\\nhttps://streampark.apache.org/docs/development/config\\n```\\n\\n\u9664\u6b64\u4e4b\u5916\uff1a\\n\\nStreamPark \u4e5f**\u652f\u6301Apache Flink\xae \u539f\u751f\u4efb\u52a1**\uff0c\u53c2\u6570\u914d\u7f6e\u53ef\u4ee5\u7531 Java \u4efb\u52a1\u5185\u90e8\u4ee3\u7801\u9759\u6001\u7ef4\u62a4\uff0c\u53ef\u4ee5\u8986\u76d6\u975e\u5e38\u591a\u7684\u573a\u666f\uff0c\u6bd4\u5982\u5b58\u91cf Flink \u4efb\u52a1\u65e0\u7f1d\u8fc1\u79fb\u7b49\u7b49\\n\\n#### **7. Checkpoint \u7ba1\u7406**\\n\\n\u5173\u4e8e Flink \u7684 Checkpoint\uff08Savepoint\uff09\u673a\u5236\uff0c\u6700\u5927\u7684\u56f0\u96be\u662f\u7ef4\u62a4 \uff0cStreamPark \u4e5f\u975e\u5e38\u4f18\u96c5\u7684\u89e3\u51b3\u6b64\u95ee\u9898:\\n\\n- StreamPark \u4f1a**\u81ea\u52a8\u7ef4\u62a4**\u4efb\u52a1 Checkpoint \u7684\u76ee\u5f55\u53ca\u7248\u672c\u81f3\u7cfb\u7edf\u4e2d\u65b9\u4fbf\u68c0\u7d22\\n- \u5f53\u7528\u6237\u9700\u8981\u66f4\u65b0\u91cd\u542f\u5e94\u7528\u65f6\uff0c\u53ef\u4ee5\u9009\u62e9\u662f\u5426\u4fdd\u5b58 Savepoint\\n- \u91cd\u65b0\u542f\u52a8\u4efb\u52a1\u65f6\u53ef\u9009\u62e9 Checkpoint/Savepoint \u4ece\u6307\u5b9a\u7248\u672c\u7684\u6062\u590d\\n\\n\u5982\u4e0b\uff0c\u5f00\u53d1\u540c\u5b66\u80fd\u591f\u975e\u5e38\u76f4\u89c2\u65b9\u4fbf\u7684\u5347\u7ea7\u6216\u5904\u7406\u5f02\u5e38\u4efb\u52a1\uff0c\u975e\u5e38\u5f3a\u5927\\n\\n![](/blog/dustess/checkpoint.png)\\n\\n![](/blog/dustess/recover.jpg)\\n\\n#### **8. \u5b8c\u5584\u7684\u62a5\u8b66\u529f\u80fd**\\n\\n\u5bf9\u4e8e\u6d41\u5f0f\u8ba1\u7b97\u6b64\u7c7b7*24H\u5e38\u9a7b\u4efb\u52a1\u6765\u8bf4\uff0c\u76d1\u63a7\u62a5\u8b66\u662f\u975e\u5e38\u91cd\u8981\u7684 \uff0cStreamPark \u5bf9\u4e8e\u6b64\u7c7b\u95ee\u9898\u4e5f\u6709**\u5b8c\u5584\u7684\u89e3\u51b3\u65b9\u6848**:\\n\\n- \u81ea\u5e26\u57fa\u4e8e\u90ae\u4ef6\u7684\u62a5\u8b66\u65b9\u5f0f\uff0c0\u5f00\u53d1\u6210\u672c\uff0c\u914d\u7f6e\u5373\u53ef\u4f7f\u7528\\n- \u5f97\u76ca\u4e8e StreamPark \u6e90\u7801\u4f18\u79c0\u7684\u6a21\u5757\u5316\uff0c\u53ef\u4ee5\u5728 Task Track \u5904\u8fdb\u884c\u4ee3\u7801\u589e\u5f3a\uff0c\u5f15\u5165\u516c\u53f8\u5185\u90e8\u7684 SDK \u8fdb\u884c\u7535\u8bdd\u3001\u7fa4\u7ec4\u7b49\u62a5\u8b66\u65b9\u5f0f\uff0c\u5f00\u53d1\u6210\u672c\u4e5f\u975e\u5e38\u4f4e\\n\\n![](/blog/dustess/alarm_email.png)\\n\\n### **\u6e90\u7801\u4f18\u79c0**\\n\\n\u9075\u5faa\u6280\u672f\u9009\u578b\u539f\u5219\uff0c\u4e00\u4e2a\u65b0\u7684\u6280\u672f\u5fc5\u987b\u8db3\u591f\u4e86\u89e3\u5e95\u5c42\u539f\u7406\u548c\u67b6\u6784\u601d\u60f3\u540e\uff0c\u624d\u4f1a\u8003\u8651\u5e94\u7528\u751f\u4ea7\u3002\u5728\u9009\u62e9 StreamPark \u4e4b\u524d\uff0c\u5bf9\u5176\u67b6\u6784\u548c\u6e90\u7801\u8fdb\u5165\u8fc7\u6df1\u5165\u7814\u7a76\u548c\u9605\u8bfb\u3002\u53d1\u73b0 StreamPark \u6240\u9009\u7528\u7684\u5e95\u5c42\u6280\u672f\u662f\u56fd\u4eba\u975e\u5e38\u719f\u6089\u7684\uff1aMySQL\u3001Spring Boot\u3001Mybatis Plus\u3001Vue \u7b49\uff0c\u4ee3\u7801\u98ce\u683c\u7edf\u4e00\uff0c\u5b9e\u73b0\u4f18\u96c5\uff0c\u6ce8\u91ca\u5b8c\u5584\uff0c\u5404\u6a21\u5757\u72ec\u7acb\u62bd\u8c61\u5408\u7406\uff0c\u4f7f\u7528\u4e86\u8f83\u591a\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u4e14\u4ee3\u7801\u8d28\u91cf\u5f88\u9ad8\uff0c\u975e\u5e38\u9002\u5408\u540e\u671f\u7684\u6392\u9519\u53ca\u4e8c\u6b21\u5f00\u53d1\u3002\\n\\n![](/blog/dustess/code_notebook.png)\\n\\nStreamPark \u4e8e 2021\u5e7411\u6708\u6210\u529f\u88ab\u5f00\u6e90\u4e2d\u56fd\u8bc4\u9009\u4e3aGVP - Gitee\u300c\u6700\u6709\u4ef7\u503c\u5f00\u6e90\u9879\u76ee\u300d\uff0c\u8db3\u4ee5\u89c1\u5f97\u5176\u8d28\u91cf\u548c\u6f5c\u529b\u3002\\n\\n![](/blog/dustess/certificate.png)\\n\\n### **03 \u793e\u533a\u6d3b\u8dc3**\\n\\n\u76ee\u524d\u793e\u533a\u975e\u5e38\u6d3b\u8dc3\uff0c\u4ece2021\u5e7411\u6708\u5e95\u843d\u5730 StreamPark (\u57fa\u4e8e1.2.0-release\uff09\uff0c\u5f53\u65f6StreamPark \u521a\u521a\u624d\u88ab\u5927\u5bb6\u8ba4\u8bc6\uff0c\u8fd8\u6709\u4e00\u4e9b\u4f53\u9a8c\u4e0a\u7684\u5c0f Bug\uff08\u4e0d\u5f71\u54cd\u6838\u5fc3\u529f\u80fd\uff09\u3002\u5f53\u65f6\u4e3a\u4e86\u5feb\u901f\u4e0a\u7ebf\uff0c\u5c4f\u853d\u6389\u4e86\u4e00\u4e9b\u529f\u80fd\u548c\u4fee\u590d\u4e86\u4e00\u4e9b\u5c0f Bug\uff0c\u6b63\u5f53\u51c6\u5907\u8d21\u732e\u7ed9\u793e\u533a\u65f6\u53d1\u73b0\u65e9\u5df2\u4fee\u590d\uff0c\u8fd9\u4e5f\u53ef\u4ee5\u770b\u51fa\u76ee\u524d\u793e\u533a\u7684\u8fed\u4ee3\u5468\u671f\u975e\u5e38\u5feb\u3002\u4ee5\u540e\u6211\u4eec\u516c\u53f8\u56e2\u961f\u4e5f\u4f1a\u52aa\u529b\u548c\u793e\u533a\u4fdd\u6301\u4e00\u81f4\uff0c\u5c06\u65b0\u7279\u6027\u5feb\u901f\u843d\u5730\uff0c\u63d0\u5347\u6570\u636e\u5f00\u53d1\u6548\u7387\u548c\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\u3002\\n\\n## **02 \u843d\u5730\u5b9e\u8df5**\\n\\nStreamPark \u7684\u73af\u5883\u642d\u5efa\u975e\u5e38\u7b80\u5355\uff0c\u8ddf\u968f\u5b98\u7f51\u7684\u642d\u5efa\u6559\u7a0b\u53ef\u4ee5\u5728\u5c0f\u65f6\u5185\u5b8c\u6210\u642d\u5efa\u3002\u76ee\u524d\u5df2\u7ecf\u652f\u6301\u4e86\u524d\u540e\u7aef\u5206\u79bb\u6253\u5305\u90e8\u7f72\u7684\u6a21\u5f0f\uff0c\u53ef\u4ee5\u6ee1\u8db3\u66f4\u591a\u516c\u53f8\u7684\u9700\u6c42\uff0c\u800c\u4e14\u5df2\u7ecf\u6709 Docker Build \u76f8\u5173\u7684 PR\uff0c\u76f8\u4fe1\u4ee5\u540e StreamPark \u7684\u7f16\u8bd1\u90e8\u7f72\u4f1a\u66f4\u52a0\u65b9\u4fbf\u5feb\u6377\u3002\u76f8\u5173\u6587\u6863\u5982\u4e0b:\\n\\n```\\nhttps://streampark.apache.org/docs/user-guide/deployment\\n```\\n\\n\u4e3a\u4e86\u5feb\u901f\u843d\u5730\u548c\u751f\u4ea7\u4f7f\u7528\uff0c\u6211\u4eec\u9009\u62e9\u4e86\u7a33\u59a5\u7684 On Yarn \u8d44\u6e90\u7ba1\u7406\u6a21\u5f0f\uff08\u867d\u7136 StreamPark \u5df2\u7ecf\u5f88\u5b8c\u5584\u7684\u652f\u6301 K8S\uff09\uff0c\u4e14\u5df2\u7ecf\u6709\u8f83\u591a\u516c\u53f8\u901a\u8fc7 StreamPark \u843d\u5730\u4e86 K8S \u90e8\u7f72\u65b9\u5f0f\uff0c\u5927\u5bb6\u53ef\u4ee5\u53c2\u8003:\\n\\n```\\nhttps://streampark.apache.org/blog/flink-development-framework-streampark\\n```\\n\\nStreamPark \u6574\u5408 Hadoop \u751f\u6001\u53ef\u4ee5\u8bf4\u662f0\u6210\u672c\u7684\uff08\u524d\u63d0\u662f\u6309\u7167 Flink \u5b98\u7f51\u5c06 Flink \u4e0e Hadoop \u751f\u6001\u6574\u5408\uff0c\u80fd\u591f\u901a\u8fc7 Flink \u811a\u672c\u542f\u52a8\u4efb\u52a1\u5373\u53ef\uff09\\n\\n\u76ee\u524d\u6211\u4eec\u4e5f\u6b63\u5728\u8fdb\u884c K8S \u7684\u6d4b\u8bd5\u53ca\u65b9\u6848\u8bbe\u8ba1\uff0c\u5728\u672a\u6765\u4e00\u6bb5\u65f6\u95f4\u4f1a\u6574\u4f53\u8fc1\u79fb\u81f3 K8S\\n\\n### **01 \u843d\u5730 FlinkSQL \u4efb\u52a1**\\n\\n\u76ee\u524d\u6211\u4eec\u516c\u53f8\u57fa\u4e8e Flink SQL \u7684\u4efb\u52a1\u4e3b\u8981\u4e3a\u4e1a\u52a1\u6bd4\u8f83\u7b80\u5355\u7684\u5b9e\u65f6 ETL \u548c\u8ba1\u7b97\u573a\u666f\uff0c\u6570\u91cf\u572810\u4e2a\u5de6\u53f3\uff0c\u4e0a\u7ebf\u81f3\u4eca\u90fd\u5341\u5206\u7a33\u5b9a\u3002\\n\\n![](/blog/dustess/online_flinksql.png)\\n\\nStreamPark \u975e\u5e38\u8d34\u5fc3\u7684\u51c6\u5907\u4e86 Demo SQL \u4efb\u52a1\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u521a\u642d\u5efa\u7684\u5e73\u53f0\u4e0a\u8fd0\u884c\uff0c\u4ece\u8fd9\u4e9b\u7ec6\u8282\u53ef\u4ee5\u770b\u51fa\u793e\u533a\u5bf9\u7528\u6237\u4f53\u9a8c\u975e\u5e38\u91cd\u89c6\u3002\u524d\u671f\u6211\u4eec\u7684\u7b80\u5355\u4efb\u52a1\u90fd\u662f\u901a\u8fc7 Flink SQL \u6765\u7f16\u5199\u53ca\u8fd0\u884c\uff0cStreamPark \u5bf9\u4e8e Flink SQL \u7684\u652f\u6301\u5f97\u975e\u5e38\u597d\uff0c\u4f18\u79c0\u7684 SQL \u7f16\u8f91\u5668\uff0c\u521b\u65b0\u578b\u7684 POM \u53ca Jar \u5305\u4f9d\u8d56\u7ba1\u7406\uff0c\u53ef\u4ee5\u6ee1\u8db3\u975e\u5e38\u591a\u7684 SQL \u573a\u666f\u4e0b\u7684\u95ee\u9898\u3002\\n\\n\u76ee\u524d\u6211\u4eec\u6b63\u5728\u8fdb\u884c\u5143\u6570\u636e\u5c42\u9762\u3001\u6743\u9650\u3001UDF\u7b49\u76f8\u5173\u7684\u65b9\u6848\u8c03\u7814\u3001\u8bbe\u8ba1\u7b49\\n\\n### **02 \u843d\u5730 Jar \u4efb\u52a1**\\n\\n\u7531\u4e8e\u76ee\u524d\u56e2\u961f\u7684\u6570\u636e\u5f00\u53d1\u540c\u5b66\u5927\u591a\u6709 Java \u548c Scala \u8bed\u8a00\u57fa\u7840\uff0c\u4e3a\u4e86\u66f4\u52a0\u7075\u6d3b\u7684\u5f00\u53d1\u3001\u66f4\u52a0\u900f\u660e\u7684\u8c03\u4f18 Flink \u4efb\u52a1\u53ca\u8986\u76d6\u66f4\u591a\u573a\u666f\uff0c\u6211\u4eec\u4e5f\u5feb\u901f\u7684\u843d\u5730\u4e86\u57fa\u4e8e Jar \u5305\u7684\u6784\u5efa\u65b9\u5f0f\u3002\u6211\u4eec\u843d\u5730\u5206\u4e3a\u4e86\u4e24\u4e2a\u9636\u6bb5\\n\\n\u7b2c\u4e00\u9636\u6bb5\uff1a**StreamPark \u63d0\u4f9b\u4e86\u539f\u751f Apache Flink\xae \u9879\u76ee\u7684\u652f\u6301**\uff0c\u6211\u4eec\u5c06\u5b58\u91cf\u7684\u4efb\u52a1Git\u5730\u5740\u914d\u7f6e\u81f3 StreamPark\uff0c\u5e95\u5c42\u4f7f\u7528 Maven \u6253\u5305\u4e3a Jar \u5305\uff0c\u521b\u5efa StreamPark \u7684 Apache Flink\u4efb\u52a1\uff0c\u65e0\u7f1d\u7684\u8fdb\u884c\u4e86\u8fc1\u79fb\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0cStreamPark \u53ea\u662f\u4f5c\u4e3a\u4e86\u4efb\u52a1\u63d0\u4ea4\u548c\u72b6\u6001\u7ef4\u62a4\u7684\u4e00\u4e2a\u5e73\u53f0\u5de5\u5177\uff0c\u8fdc\u8fdc\u6ca1\u6709\u4f7f\u7528\u5230\u4e0a\u9762\u63d0\u5230\u7684\u5176\u4ed6\u529f\u80fd\u3002\\n\\n\u7b2c\u4e8c\u9636\u6bb5\uff1a\u7b2c\u4e00\u9636\u6bb5\u5c06\u4efb\u52a1\u90fd\u8fc1\u79fb\u81f3 StreamPark \u4e0a\u4e4b\u540e\uff0c\u4efb\u52a1\u5df2\u7ecf\u5728\u5e73\u53f0\u4e0a\u8fd0\u884c\uff0c\u4f46\u662f\u4efb\u52a1\u7684\u914d\u7f6e\uff0c\u5982 checkpoint\uff0c\u5bb9\u9519\u4ee5\u53ca Flink \u4efb\u52a1\u5185\u90e8\u7684\u4e1a\u52a1\u53c2\u6570\u7684\u8c03\u6574\u90fd\u9700\u8981\u4fee\u6539\u6e90\u7801 push \u53ca build\uff0c\u6548\u7387\u5341\u5206\u4f4e\u4e0b\u4e14\u4e0d\u900f\u660e\u3002\\n\\n\u4e8e\u662f\uff0c\u6839\u636e StreamPark \u7684 QuickStart \u6211\u4eec\u5feb\u901f\u6574\u5408\u4e86StreamPark \u7684\u7f16\u7a0b\u6a21\u578b\uff0c\u4e5f\u5c31\u662fStreamPark Flink \u4efb\u52a1\uff08\u5bf9\u4e8e Apache Flink\uff09\u7684\u5c01\u88c5\u3002\\n\\n\u5982\uff1a\\n\\n```\\nStreamingContext = ParameterTool + StreamExecutionEnvironment\\n```\\n\\n- StreamingContext \u4e3a StreamPark \u7684\u5c01\u88c5\u5bf9\u8c61\\n- ParameterTool \u4e3a\u89e3\u6790\u914d\u7f6e\u6587\u4ef6\u540e\u7684\u53c2\u6570\u5bf9\u8c61\\n\\n```\\n String value = ParameterTool.get(\\\"${user.custom.key}\\\")\\n```\\n\\n- StreamExecutionEnvironment \u4e3a Apache Flink\xae \u539f\u751f\u4efb\u52a1\u4e0a\u4e0b\u6587\\n\\n## **03 \u4e1a\u52a1\u652f\u6491 & \u80fd\u529b\u5f00\u653e**\\n\\n\u76ee\u524d\u5c18\u950b\u57fa\u4e8e StreamPark \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u4ece\u53bb\u5e7411\u6708\u5e95\u4e0a\u7ebf\u81f3\u4eca\uff0c\u5df2\u7ecf\u4e0a\u7ebf 50+ Flink \u4efb\u52a1\uff0c\u5176\u4e2d 10+\u4e3a Flink SQL \u4efb\u52a1\uff0c40+ \u4e3a Jar \u4efb\u52a1\u3002\u76ee\u524d\u4e3b\u8981\u8fd8\u662f\u6570\u636e\u56e2\u961f\u5185\u90e8\u4f7f\u7528\uff0c\u8fd1\u671f\u4f1a\u5c06\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5f00\u653e\u5168\u516c\u53f8\u4e1a\u52a1\u56e2\u961f\u4f7f\u7528\uff0c\u4efb\u52a1\u91cf\u4f1a\u5927\u91cf\u589e\u52a0\u3002\\n\\n![](/blog/dustess/online_jar.png)\\n\\n### **01 \u5b9e\u65f6\u6570\u4ed3**\\n\\n\u65f6\u6570\u4ed3\u4e3b\u8981\u662f\u7528 Jar \u4efb\u52a1\uff0c\u56e0\u4e3a\u6a21\u5f0f\u6bd4\u8f83\u901a\u7528\uff0c\u4f7f\u7528 Jar \u4efb\u52a1\u53ef\u4ee5\u901a\u7528\u5316\u7684\u5904\u7406\u5927\u91cf\u7684\u6570\u636e\u8868\u540c\u6b65\u548c\u8ba1\u7b97\uff0c\u751a\u81f3\u505a\u5230\u914d\u7f6e\u5316\u540c\u6b65\u7b49\uff0c\u6211\u4eec\u7684\u5b9e\u65f6\u6570\u4ed3\u4e3b\u8981\u57fa Apache Doris \u6765\u5b58\u50a8\uff0c\u4f7f\u7528 Flink \u6765\u8fdb\u884c\u6e05\u6d17\u8ba1\u7b97\uff08\u76ee\u6807\u662f\u5b58\u7b97\u5206\u79bb\uff09\\n\\n\u4f7f\u7528 StreamPark \u6574\u5408\u5176\u4ed6\u7ec4\u4ef6\u4e5f\u662f\u975e\u5e38\u7b80\u5355\uff0c\u540c\u65f6\u6211\u4eec\u4e5f\u5c06 Apache Doris \u548c Kafka \u76f8\u5173\u7684\u914d\u7f6e\u4e5f\u62bd\u8c61\u5230\u4e86\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u5927\u5927\u63d0\u5347\u4e86\u6211\u4eec\u7684\u5f00\u53d1\u6548\u7387\u548c\u7075\u6d3b\u5ea6\u3002\\n\\n### **02 \u80fd\u529b\u5f00\u653e**\\n\\n\u6570\u636e\u56e2\u961f\u5916\u7684\u5176\u4ed6\u4e1a\u52a1\u56e2\u961f\u4e5f\u6709\u5f88\u591a\u7684\u6d41\u5904\u7406\u573a\u666f\uff0c\u4e8e\u662f\u6211\u4eec\u5c06\u57fa\u4e8e StreamPark \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u4e8c\u6b21\u5f00\u53d1\u540e\uff0c\u5c06\u4ee5\u4e0b\u80fd\u529b\u5f00\u653e\u5168\u516c\u53f8\u4e1a\u52a1\u56e2\u961f\\n\\n- \u4e1a\u52a1\u80fd\u529b\u5f00\u653e\uff1a\u5b9e\u65f6\u6570\u4ed3\u4e0a\u6e38\u5c06\u6240\u6709\u4e1a\u52a1\u8868\u901a\u8fc7\u65e5\u5fd7\u91c7\u96c6\u5199\u5165 Kafka\uff0c\u4e1a\u52a1\u56e2\u961f\u53ef\u57fa\u4e8e Kafka \u8fdb\u884c\u4e1a\u52a1\u76f8\u5173\u5f00\u53d1\uff0c\u4e5f\u53ef\u901a\u8fc7\u5b9e\u65f6\u6570\u4ed3\uff08Apache Doris\uff09\u8fdb\u884c OLAP\u5206\u6790\\n- \u8ba1\u7b97\u80fd\u529b\u5f00\u653e\uff1a\u5c06\u5927\u6570\u636e\u5e73\u53f0\u7684\u670d\u52a1\u5668\u8d44\u6e90\u5f00\u653e\u4e1a\u52a1\u56e2\u961f\u4f7f\u7528\\n- \u89e3\u51b3\u65b9\u6848\u5f00\u653e\uff1aFlink \u751f\u6001\u7684\u6210\u719f Connector\u3001Exactly Once \u8bed\u4e49\u652f\u6301\uff0c\u53ef\u51cf\u5c11\u4e1a\u52a1\u56e2\u961f\u6d41\u5904\u7406\u76f8\u5173\u7684\u5f00\u53d1\u6210\u672c\u53ca\u7ef4\u62a4\u6210\u672c\\n\\n\u76ee\u524d StreamPark \u8fd8\u4e0d\u652f\u6301\u591a\u4e1a\u52a1\u7ec4\u529f\u80fd\uff0c\u591a\u4e1a\u52a1\u7ec4\u529f\u80fd\u4f1a\u62bd\u8c61\u540e\u8d21\u732e\u793e\u533a\u3002\\n\\n![](/blog/dustess/manager.png)\\n\\n![](/blog/dustess/task_retrieval.png)\\n\\n## **04 \u672a\u6765\u89c4\u5212**\\n\\n### **01 Flink on K8S**\\n\\n\u76ee\u524d\u6211\u53f8 Flink \u4efb\u52a1\u90fd\u8fd0\u884c\u5728 Yarn \u4e0a\uff0c\u6ee1\u8db3\u5f53\u4e0b\u9700\u6c42\uff0c\u4f46 Flink on kubernetes \u6709\u4ee5\u4e0b\u4f18\u70b9:\\n\\n- **\u7edf\u4e00\u8fd0\u7ef4**\u3002\u516c\u53f8\u7edf\u4e00\u5316\u8fd0\u7ef4\uff0c\u6709\u4e13\u95e8\u7684\u90e8\u95e8\u8fd0\u7ef4 K8S\\n- **CPU \u9694\u79bb**\u3002K8S Pod \u4e4b\u95f4 CPU \u9694\u79bb\uff0c\u5b9e\u65f6\u4efb\u52a1\u4e0d\u76f8\u4e92\u5f71\u54cd\uff0c\u66f4\u52a0\u7a33\u5b9a\\n- **\u5b58\u50a8\u8ba1\u7b97\u5206\u79bb**\u3002Flink \u8ba1\u7b97\u8d44\u6e90\u548c\u72b6\u6001\u5b58\u50a8\u5206\u79bb\uff0c\u8ba1\u7b97\u8d44\u6e90\u80fd\u591f\u548c\u5176\u4ed6\u7ec4\u4ef6\u8d44\u6e90\u8fdb\u884c\u6df7\u90e8\uff0c\u63d0\u5347\u673a\u5668\u4f7f\u7528\u7387\\n- **\u5f39\u6027\u6269\u7f29\u5bb9**\u3002\u80fd\u591f\u5f39\u6027\u6269\u7f29\u5bb9\uff0c\u66f4\u597d\u7684\u8282\u7701\u4eba\u529b\u548c\u7269\u529b\u6210\u672c\\n\\n\u76ee\u524d\u672c\u4eba\u4e5f\u5728\u6574\u7406\u548c\u843d\u5730\u76f8\u5173\u7684\u6280\u672f\u67b6\u6784\u53ca\u65b9\u6848\uff0c\u5e76\u5df2\u5728\u5b9e\u9a8c\u73af\u5883\u4f7f\u7528 StreamPark \u5b8c\u6210\u4e86 Flink on kubernetes \u7684\u6280\u672f\u9a8c\u8bc1\uff0c\u751f\u4ea7\u843d\u5730\u8fd9\u4e00\u76ee\u6807\u7531\u4e8e\u6709 StreamPark \u7684\u5e73\u53f0\u652f\u6301\uff0c\u4ee5\u53ca\u793e\u533a\u540c\u5b66\u7684\u70ed\u5fc3\u5e2e\u5fc3\uff0c\u76f8\u4fe1\u5728\u672a\u6765\u4e0d\u4e45\u5c31\u80fd\u8fbe\u6210\u3002\\n\\n### **02 \u6d41\u6279\u4e00\u4f53\u5efa\u8bbe**\\n\\n\u4e2a\u4eba\u8ba4\u4e3a\u6279/\u6d41\u6700\u5927\u7684\u533a\u522b\u5728\u4e8e\u7b97\u5b50 Task \u7684\u8c03\u5ea6\u7b56\u7565 \u548c \u6570\u636e\u5728\u7b97\u5b50\u95f4\u7684\u6d41\u8f6c\u7b56\u7565\uff1a\\n\\n- **\u6279\u5904\u7406**\u4e0a\u4e0b\u6e38\u7b97\u5b50 Task \u5b58\u5728\u5148\u540e\u8c03\u5ea6\uff08\u4e0a\u6e38Task\u7ed3\u675f\u91ca\u653e\u8d44\u6e90\uff09\uff0c\u6570\u636e\u5b58\u5728 Shuffle \u7b56\u7565\uff08\u843d\u5730\u78c1\u76d8\uff09\uff0c\u7f3a\u70b9\u662f\u65f6\u6548\u6027\u8f83\u4f4e\u4e14\u8ba1\u7b97\u65e0\u4e2d\u95f4\u72b6\u6001\uff0c\u4f46\u4f18\u70b9\u662f\u541e\u5410\u91cf\u5927\uff0c\u9002\u5408\u79bb\u7ebf\u8d85\u5927\u6570\u636e\u91cf\u8ba1\u7b97\u3002\\n- **\u6d41\u5904\u7406**\u4e0a\u4e0b\u6e38\u7b97\u5b50 Task \u540c\u65f6\u62c9\u8d77\uff08\u540c\u65f6\u5360\u7528\u8d44\u6e90\uff09\uff0c\u6570\u636e\u901a\u8fc7\u7f51\u7edc\u5728\u8282\u70b9\u95f4\u6d41\u5f0f\u8ba1\u7b97\uff0c\u7f3a\u70b9\u662f\u541e\u5410\u91cf\u4e0d\u8db3\uff0c\u4f18\u70b9\u662f\u65f6\u6548\u6027\u9ad8\u53ca\u8ba1\u7b97\u6709\u4e2d\u95f4\u72b6\u6001\uff0c\u9002\u5408\u5b9e\u65f6\u53ca\u589e\u91cf\u8ba1\u7b97\u573a\u666f\u3002\\n\\n\u5982\u4e0a\uff0c\u4e2a\u4eba\u8ba4\u4e3a\u9009\u62e9**\u6279\u5904\u7406**\u8fd8\u662f**\u6d41\u5904\u7406**\uff0c**\u662f\u6570\u636e\u5f00\u53d1\u9488\u5bf9\u4e0d\u540c\u6570\u636e\u91cf\u548c\u4e0d\u540c\u4e1a\u52a1\u573a\u666f\u7684\u4e00\u79cd\u8c03\u4f18\u65b9\u5f0f**\u3002\u4f46\u76ee\u524d\u7531\u4e8e\u8ba1\u7b97\u5f15\u64ce\u548c\u8ba1\u7b97\u5e73\u53f0\u4f1a\u5c06\u79bb\u7ebf\u3001\u5b9e\u65f6\u533a\u5206\uff0c\u4f1a\u9020\u6210\u5f00\u53d1\u53ca\u7ef4\u62a4\u7684\u6495\u88c2\uff0c\u6210\u672c\u5de8\u9ad8\u4e0d\u4e0b\u3002\u5982\u679c\u8981\u5b9e\u73b0\u6279\u6d41\u4e00\u4f53\uff0c\u8981\u5b9e\u73b0\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a\\n\\n- \u5b58\u50a8\u7684\u7edf\u4e00\uff08\u5143\u6570\u636e\u7684\u7edf\u4e00\uff09\uff1a\u652f\u6301\u6279\u53ca\u6d41\u7684\u5199\u5165/\u8bfb\u53d6\\n- \u8ba1\u7b97\u5f15\u64ce\u7684\u7edf\u4e00 \uff1a\u80fd\u591f\u4f7f\u7528\u4e00\u5957 API \u6216 SQL \u5f00\u53d1\u79bb\u7ebf\u548c\u5b9e\u65f6\u4efb\u52a1\\n- \u6570\u636e\u5e73\u53f0\u7684\u7edf\u4e00 \uff1a\u80fd\u591f\u652f\u6301\u5b9e\u65f6\u4efb\u52a1\u5e38\u9a7b\uff0c\u4e5f\u80fd\u652f\u6301\u79bb\u7ebf\u8c03\u5ea6\u7b56\u7565\\n\\n\u5173\u4e8e\u6279\u6d41\u7edf\u4e00\u8fd9\u4e00\u5757\uff0c\u76ee\u524d\u4e5f\u6b63\u5728\u8c03\u7814\u3001\u6574\u7406\u3001\u611f\u5174\u8da3\u7684\u5c0f\u4f19\u4f34\u6b22\u8fce\u4e00\u5757\u63a2\u8ba8\u9879\u76ee\u5b66\u4e60\u3002\\n\\n## **05 \u7ed3\u675f\u8bed**\\n\\n\u4ee5\u4e0a\u5c31\u662f StreamPark \u5728\u5c18\u950b\u4fe1\u606f\u751f\u4ea7\u5b9e\u8df5\u7684\u5168\u90e8\u5206\u4eab\u5185\u5bb9\uff0c\u611f\u8c22\u5927\u5bb6\u770b\u5230\u8fd9\u91cc\u3002\u5199\u8fd9\u7bc7\u6587\u7ae0\u7684\u521d\u5fc3\u662f\u4e3a\u5927\u5bb6\u5e26\u6765\u4e00\u70b9 StreamPark \u7684\u751f\u4ea7\u5b9e\u8df5\u7684\u7ecf\u9a8c\u548c\u53c2\u8003\uff0c\u5e76\u4e14\u548c StreamPark \u793e\u533a\u7684\u5c0f\u4f19\u4f34\u4eec\u4e00\u9053\uff0c\u5171\u540c\u5efa\u8bbe StreamPark \uff0c\u672a\u6765\u4e5f\u51c6\u5907\u4f1a\u6709\u66f4\u591a\u7684\u53c2\u4e0e\u548c\u5efa\u8bbe\u3002\u975e\u5e38\u611f\u8c22 StreamPark \u7684\u5f00\u53d1\u8005\u4eec\uff0c\u80fd\u591f\u63d0\u4f9b\u8fd9\u6837\u4f18\u79c0\u7684\u4ea7\u54c1\uff0c\u8db3\u591f\u591a\u7684\u7ec6\u8282\u90fd\u611f\u53d7\u5230\u4e86\u5927\u5bb6\u7684\u7528\u5fc3\u3002\u867d\u7136\u76ee\u524d\u516c\u53f8\u751f\u4ea7\u4f7f\u7528\u7684\uff081.2.0-release\uff09\u7248\u672c\uff0c\u5728\u4efb\u52a1\u5206\u7ec4\u68c0\u7d22\uff0c\u7f16\u8f91\u8fd4\u56de\u8df3\u9875\u7b49\u4ea4\u4e92\u4f53\u9a8c\u4e0a\u8fd8\u6709\u4e9b\u8bb8\u4e0d\u8db3\uff0c\u4f46\u7455\u4e0d\u63a9\u745c\uff0c\u76f8\u4fe1 StreamPark \u4f1a\u8d8a\u6765\u8d8a\u597d\uff0c**\u4e5f\u76f8\u4fe1 StreamPark \u4f1a\u63a8\u52a8 Apache Flink\xae \u7684\u666e\u53ca**\u3002\u6700\u540e\u7528 Apache Flink\xae \u793e\u533a\u7684\u4e00\u53e5\u8bdd\u6765\u4f5c\u4e3a\u7ed3\u675f\u5427\uff1a\u5b9e\u65f6\u5373\u672a\u6765\uff01\\n\\n\\n\\n![](/blog/dustess/author.png)\"},{\"id\":\"streampark-usercase-joyme\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-joyme\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/6-streampark-usercase-joyme.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/6-streampark-usercase-joyme.md\",\"title\":\"Apache StreamPark\u2122 \u5728 Joyme \u7684\u751f\u4ea7\u5b9e\u8df5\",\"description\":\"\u6458\u8981\uff1a \u672c\u6587\u5e26\u6765 StreamPark \u5728 Joyme \u4e2d\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u4f5c\u8005\u662f Joyme \u7684\u5927\u6570\u636e\u5de5\u7a0b\u5e08\u79e6\u57fa\u52c7\uff0c\u4e3b\u8981\u5185\u5bb9\u4e3a:\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"}],\"readingTime\":14.715,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-joyme\",\"title\":\"Apache StreamPark\u2122 \u5728 Joyme \u7684\u751f\u4ea7\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"FlinkSQL\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 \u5728\u5c18\u950b\u4fe1\u606f\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5316\u7e41\u4e3a\u7b80\u6781\u81f4\u4f53\u9a8c\",\"permalink\":\"/zh-CN/blog/streampark-usercase-dustess\"},\"nextItem\":{\"title\":\"Apache StreamPark\u2122 \u4e00\u7ad9\u5f0f\u8ba1\u7b97\u5229\u5668\u5728\u6d77\u535a\u79d1\u6280\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u52a9\u529b\u667a\u6167\u57ce\u5e02\u5efa\u8bbe\",\"permalink\":\"/zh-CN/blog/streampark-usercase-haibo\"}},\"content\":\"**\u6458\u8981\uff1a** \u672c\u6587\u5e26\u6765 StreamPark \u5728 Joyme \u4e2d\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u4f5c\u8005\u662f Joyme \u7684\u5927\u6570\u636e\u5de5\u7a0b\u5e08\u79e6\u57fa\u52c7\uff0c\u4e3b\u8981\u5185\u5bb9\u4e3a:\\n\\n- \u9047\u89c1StreamPark\\n- Flink Sql \u4f5c\u4e1a\u5f00\u53d1\\n- Custom code \u4f5c\u4e1a\u5f00\u53d1\\n- \u76d1\u63a7\u544a\u8b66\\n- \u5e38\u89c1\u95ee\u9898\\n- \u793e\u533a\u5370\u8c61\\n- \u603b\u7ed3\\n\\n\x3c!-- truncate --\x3e\\n\\n## 1 \u9047\u89c1 Apache StreamPark\u2122\\n\\n\u9047\u89c1 StreamPark \u662f\u5fc5\u7136\u7684\uff0c\u57fa\u4e8e\u6211\u4eec\u73b0\u6709\u7684\u5b9e\u65f6\u4f5c\u4e1a\u5f00\u53d1\u6a21\u5f0f\uff0c\u4e0d\u5f97\u4e0d\u5bfb\u627e\u4e00\u4e2a\u5f00\u6e90\u7684\u5e73\u53f0\u6765\u652f\u6491\u6211\u53f8\u7684\u5b9e\u65f6\u4e1a\u52a1\u3002\u6211\u4eec\u7684\u73b0\u72b6\u5982\u4e0b:\\n\\n- \u7f16\u5199\u4f5c\u4e1a\u6253\u5305\u5230\u670d\u52a1\u5668\uff0c\u7136\u540e\u6267\u884c Flink run \u547d\u4ee4\u8fdb\u884c\u63d0\u4ea4\uff0c\u8fc7\u7a0b\u7e41\u7410\uff0c\u6548\u7387\u4f4e\u4e0b\\n- Flink Sql \u901a\u8fc7\u81ea\u7814\u7684\u8001\u5e73\u53f0\u63d0\u4ea4\uff0c\u8001\u5e73\u53f0\u5f00\u53d1\u4eba\u5458\u5df2\u79bb\u804c\uff0c\u540e\u7eed\u7684\u4ee3\u7801\u65e0\u4eba\u7ef4\u62a4\uff0c\u5373\u4fbf\u6709\u4eba\u7ef4\u62a4\u4e5f\u4e0d\u5f97\u4e0d\u9762\u5bf9\u7ef4\u62a4\u6210\u672c\u9ad8\u7684\u95ee\u9898\\n- \u5176\u4e2d\u4e00\u90e8\u5206\u4f5c\u8005\u662f SparkStreaming \u4f5c\u4e1a\uff0c\u4e24\u5957\u6d41\u5f15\u64ce\uff0c\u6846\u67b6\u4e0d\u7edf\u4e00\uff0c\u5f00\u53d1\u6210\u672c\u5927\\n- \u5b9e\u65f6\u4f5c\u4e1a\u6709 Scala \u548c Java \u5f00\u53d1\uff0c\u8bed\u8a00\u548c\u6280\u672f\u6808\u4e0d\u7edf\u4e00\\n\\n\u57fa\u4e8e\u4ee5\u4e0a\u79cd\u79cd\u539f\u56e0\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u5f00\u6e90\u5e73\u53f0\u6765\u7ba1\u7406\u6211\u4eec\u7684\u5b9e\u65f6\u4f5c\u4e1a\uff0c\u540c\u65f6\u6211\u4eec\u4e5f\u9700\u8981\u8fdb\u884c\u91cd\u6784\uff0c\u7edf\u4e00\u5f00\u53d1\u6a21\u5f0f\uff0c\u7edf\u4e00\u5f00\u53d1\u8bed\u8a00\uff0c\u5c06\u9879\u76ee\u96c6\u4e2d\u7ba1\u7406\u3002\\n\\n\u7b2c\u4e00\u6b21\u9047\u89c1 StreamPark \u5c31\u57fa\u672c\u786e\u5b9a\u4e86\uff0c\u6211\u4eec\u6839\u636e\u5b98\u7f51\u7684\u6587\u6863\u5feb\u901f\u8fdb\u884c\u4e86\u90e8\u7f72\u5b89\u88c5\uff0c\u642d\u5efa\u4ee5\u540e\u8fdb\u884c\u4e86\u4e00\u4e9b\u64cd\u4f5c\uff0c\u754c\u9762\u53cb\u597d\uff0cFlink \u591a\u7248\u672c\u652f\u6301\uff0c\u6743\u9650\u7ba1\u7406\uff0c\u4f5c\u4e1a\u76d1\u63a7\u7b49\u4e00\u7cfb\u5217\u529f\u80fd\u5df2\u80fd\u8f83\u597d\u7684\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u5230\u5176\u793e\u533a\u4e5f\u5f88\u6d3b\u8dc3\uff0c\u4ece 1.1.0 \u7248\u672c\u5f00\u59cb\u89c1\u8bc1\u4e86 StreamPark \u529f\u80fd\u5b8c\u5584\u7684\u8fc7\u7a0b\uff0c\u5f00\u53d1\u56e2\u961f\u662f\u975e\u5e38\u6709\u8ffd\u6c42\u7684\uff0c\u76f8\u4fe1\u4f1a\u4e0d\u65ad\u7684\u5b8c\u5584\u3002\\n\\n## 2 Flink SQL \u4f5c\u4e1a\u5f00\u53d1\\n\\nFlink Sql \u5f00\u53d1\u6a21\u5f0f\u5e26\u6765\u4e86\u5f88\u5927\u7684\u4fbf\u5229\uff0c\u5bf9\u4e8e\u4e00\u4e9b\u7b80\u5355\u7684\u6307\u6807\u5f00\u53d1\uff0c\u53ea\u9700\u8981\u7b80\u5355\u7684 Sql \u5c31\u53ef\u4ee5\u5b8c\u6210\uff0c\u4e0d\u9700\u8981\u5199\u4e00\u884c\u4ee3\u7801\u3002Flink Sql \u65b9\u4fbf\u4e86\u5f88\u591a\u540c\u5b66\u7684\u5f00\u53d1\u5de5\u4f5c\uff0c\u6bd5\u7adf\u4e00\u4e9b\u505a\u4ed3\u5e93\u7684\u540c\u5b66\u5728\u7f16\u5199\u4ee3\u7801\u65b9\u9762\u8fd8\u662f\u6709\u4e9b\u96be\u5ea6\u3002\\n\\n\u6253\u5f00 StreamPark \u7684\u4efb\u52a1\u65b0\u589e\u754c\u9762\u8fdb\u884c\u6dfb\u52a0\u65b0\u4efb\u52a1\uff0c\u9ed8\u8ba4 Development Mode \u5c31\u662f Flink Sql \u6a21\u5f0f\u3002\u76f4\u63a5\u5728 Flink Sql \u90e8\u5206\u7f16\u5199Sql \u903b\u8f91\u3002\\n\\nFlink Sql \u90e8\u5206\uff0c\u6309\u7167 Flink \u5b98\u7f51\u7684\u6587\u6863\u9010\u6b65\u7f16\u5199\u903b\u8f91 Sql \u5373\u53ef\uff0c\u5bf9\u4e8e\u6211\u53f8\u6765\u8bf4\uff0c\u4e00\u822c\u5c31\u4e09\u90e8\u5206: \u63a5\u5165 Source \uff0c\u4e2d\u95f4\u903b\u8f91\u5904\u7406\uff0c\u6700\u540e Sink\u3002\u57fa\u672c\u4e0a Source \u90fd\u662f\u6d88\u8d39 kafka \u7684\u6570\u636e\uff0c\u903b\u8f91\u5904\u7406\u5c42\u4f1a\u6709\u5173\u8054 MySQL \u53bb\u505a\u7ef4\u8868\u67e5\u8be2\uff0c\u6700\u540e Sink \u90e8\u5206\u5927\u591a\u662f Es\uff0cRedis\uff0cMySQL\u3002\\n\\n### **1. \u7f16\u5199SQL**\\n\\n```sql\\n-- \u8fde\u63a5kafka\\nCREATE TABLE source_table (\\n `Data` ROW<uid STRING>\\n) WITH (\\n'connector.type' = 'kafka',\\n'connector.version' = 'universal',\\n'connector.topic' = '\u4e3b\u9898',\\n'connector.properties.bootstrap.servers'='broker\u5730\u5740',\\n'connector.startup-mode' = 'latest-offset',\\n'update-mode' = 'append',\\n'format.type' = 'json',\\n'connector.properties.group.id' = '\u6d88\u8d39\u7ec4id',\\n'format.derive-schema' = 'true'\\n);\\n\\n-- \u843d\u5730\u8868sink\\nCREATE TABLE sink_table (\\n`uid` STRING\\n) WITH (\\n'connector.type' = 'jdbc',\\n'connector.url' = 'jdbc:mysql://xxx/xxx?useSSL=false',\\n'connector.username' = 'username',\\n'connector.password' = 'password',\\n'connector.table' = 'tablename',\\n'connector.write.flush.max-rows' = '50',\\n'connector.write.flush.interval' = '2s',\\n'connector.write.max-retries' = '3'\\n);\\n\\n-- \u4ee3\u7801\u903b\u8f91\u8fc7\\nINSERT INTO sink_table\\nSELECT  Data.uid  FROM source_table;\\n```\\n\\n### **2. \u6dfb\u52a0\u4f9d\u8d56**\\n\\n\u5173\u4e8e\u4f9d\u8d56\u8fd9\u5757\u662f StreamPark \u91cc\u7279\u6709\u7684\uff0c\u5728 StreamPark \u4e2d\u521b\u65b0\u578b\u7684\u5c06\u4e00\u4e2a\u5b8c\u6574\u7684 Flink Sql \u4efb\u52a1\u62c6\u5206\u6210\u4e24\u90e8\u5206\u7ec4\u6210: Sql \u548c \u4f9d\u8d56\uff0cSql \u5f88\u597d\u7406\u89e3\u4e0d\u591a\u5570\u55e6\uff0c\u4f9d\u8d56\u662f Sql \u91cc\u9700\u8981\u7528\u5230\u7684\u4e00\u4e9b Connector \u7684 Jar\uff0c\u5982 Sql \u91cc\u7528\u5230\u4e86 Kafka \u548c MySQL \u7684 Connector\uff0c\u90a3\u5c31\u9700\u8981\u5f15\u5165\u8fd9\u4e24\u4e2a Connector \u7684\u4f9d\u8d56\uff0c\u5728 StreamPark \u4e2d\u6dfb\u52a0\u4f9d\u8d56\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u57fa\u4e8e\u6807\u51c6\u7684 Maven pom \u5750\u6807\u65b9\u5f0f\uff0c\u53e6\u4e00\u79cd\u662f\u4ece\u672c\u5730\u4e0a\u4f20\u9700\u8981\u7684 Jar \u3002\u8fd9\u4e24\u79cd\u4e5f\u53ef\u4ee5\u6df7\u7740\u7528\uff0c\u6309\u9700\u6dfb\u52a0\uff0c\u70b9\u51fb\u5e94\u7528\u5373\u53ef\uff0c \u5728\u63d0\u4ea4\u4f5c\u4e1a\u7684\u65f6\u5019\u5c31\u4f1a\u81ea\u52a8\u52a0\u8f7d\u8fd9\u4e9b\u4f9d\u8d56\u3002\\n\\n![](/blog/joyme/add_dependency.png)\\n\\n### **3. \u53c2\u6570\u914d\u7f6e**\\n\\n\u5728\u4efb\u52a1\u7684\u6dfb\u52a0\u548c\u4fee\u6539\u9875\u9762\u4e2d\u5df2\u7ecf\u7f57\u5217\u4e86\u4e00\u4e9b\u5e38\u7528\u7684\u53c2\u6570\u8bbe\u7f6e\uff0c\u66f4\u591a\u7684\u53c2\u6570\u8bbe\u7f6e\u5219\u63d0\u4f9b\u4e86\u4e00\u4e2a yaml \u914d\u7f6e\u6587\u4ef6\uff0c\u6211\u4eec\u8fd9\u91cc\u53ea\u662f\u8bbe\u7f6e\u4e86 checkpoint \u548c savepoint \u8fd9\u4e24\u4e2a\u914d\u7f6e\u3002\u4e00\u662f checkpoint \u7684\u4f4d\u7f6e\uff0c\u4e8c\u662f \u6267\u884c checkpoint \u7684\u9891\u7387\u3002\u5176\u4ed6\u7684\u914d\u7f6e\u57fa\u672c\u6ca1\u6709\u52a8\uff0c\u8fd9\u90e8\u5206\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u6309\u9700\u914d\u7f6e\u3002\\n\\n\u5269\u4e0b\u7684\u4e00\u4e9b\u53c2\u6570\u8bbe\u7f6e\u5c31\u8981\u6839\u636e\u4f5c\u4e1a\u7684\u5177\u4f53\u60c5\u51b5\u53bb\u5bf9\u75c7\u4e0b\u836f\u7684\u914d\u7f6e\u4e86\uff0c\u5904\u7406\u7684\u6570\u636e\u91cf\u5927\u4e86\uff0c\u903b\u8f91\u590d\u6742\u4e86\uff0c\u53ef\u80fd\u5c31\u9700\u8981\u66f4\u591a\u7684\u5185\u5b58\uff0c\u5e76\u884c\u5ea6\u7ed9\u591a\u4e00\u4e9b\u3002\u6709\u65f6\u5019\u9700\u8981\u6839\u636e\u4f5c\u4e1a\u7684\u8fd0\u884c\u60c5\u51b5\u8fdb\u884c\u591a\u6b21\u8c03\u6574\u3002\\n\\n![](/blog/joyme/checkpoint_configuration.png)\\n\\n### **4. \u52a8\u6001\u53c2\u6570\u8bbe\u7f6e**\\n\\n\u7531\u4e8e\u6211\u4eec\u7684\u6a21\u5f0f\u90e8\u7f72\u662f on Yarn\uff0c\u5728\u52a8\u6001\u9009\u9879\u914d\u7f6e\u91cc\u914d\u7f6e\u4e86 Yarn \u7684\u961f\u5217\u540d\u79f0\u3002\u4e5f\u6709\u4e00\u4e9b\u914d\u7f6e\u4e86\u5f00\u542f\u589e\u91cf\u7684 Checkpoint \u9009\u9879\u548c\u72b6\u6001\u8fc7\u671f\u65f6\u95f4\uff0c\u57fa\u672c\u7684\u8fd9\u4e9b\u53c2\u6570\u90fd\u53ef\u4ee5\u4ece Flink \u7684\u5b98\u7f51\u53bb\u67e5\u8be2\u5230\u3002\u4e4b\u524d\u6709\u4e00\u4e9b\u4f5c\u4e1a\u786e\u5b9e\u7ecf\u5e38\u51fa\u73b0\u5185\u5b58\u6ea2\u51fa\u7684\u95ee\u9898\uff0c\u52a0\u4e0a\u589e\u91cf\u53c2\u6570\u548c\u8fc7\u671f\u53c2\u6570\u4ee5\u540e\uff0c\u4f5c\u4e1a\u7684\u8fd0\u884c\u60c5\u51b5\u597d\u591a\u4e86\u3002\u8fd8\u6709\u5c31\u662f Flink Sql \u4f5c\u4e1a\u8bbe\u8ba1\u5230\u72b6\u6001\u8fd9\u79cd\u6bd4\u8f83\u5927\u548c\u903b\u8f91\u590d\u6742\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4e2a\u4eba\u611f\u89c9\u8fd8\u662f\u7528 Streaming \u4ee3\u7801\u6765\u5b9e\u73b0\u6bd4\u8f83\u597d\u63a7\u5236\u4e00\u4e9b\u3002\\n\\n- -Dyarn.application.queue= yarn\u961f\u5217\u540d\u79f0\\n- -Dstate.backend.incremental=true\\n- -Dtable.exec.state.ttl=\u8fc7\u671f\u65f6\u95f4\\n\\n\u5b8c\u6210\u914d\u7f6e\u4ee5\u540e\u63d0\u4ea4\uff0c\u7136\u540e\u5728 application \u754c\u9762\u8fdb\u884c\u90e8\u7f72\u3002\\n\\n![](/blog/joyme/application_job.png)\\n\\n## 3 Custom Code \u4f5c\u4e1a\u5f00\u53d1\\n\\nStreaming \u4f5c\u4e1a\u6211\u4eec\u662f\u4f7f\u7528 Flink java \u8fdb\u884c\u5f00\u53d1\uff0c\u5c06\u4e4b\u524d Spark scala\uff0cFlink scala\uff0cFlink java \u7684\u4f5c\u4e1a\u8fdb\u884c\u4e86\u91cd\u6784\uff0c\u7136\u540e\u5de5\u7a0b\u6574\u5408\u5230\u4e86\u4e00\u8d77\uff0c\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u7ef4\u62a4\u8d77\u6765\u65b9\u4fbf\u3002Custom code \u4f5c\u4e1a\u9700\u8981\u63d0\u4ea4\u4ee3\u7801\u5230 Git\uff0c\u7136\u540e\u914d\u7f6e\u9879\u76ee:\\n\\n![](/blog/joyme/project_configuration.png)\\n\\n\u914d\u7f6e\u5b8c\u6210\u4ee5\u540e\uff0c\u6839\u636e\u5bf9\u5e94\u7684\u9879\u76ee\u8fdb\u884c\u7f16\u8bd1\uff0c\u4e5f\u5c31\u5b8c\u6210\u9879\u76ee\u7684\u6253\u5305\u73af\u8282\u3002\u8fd9\u6837\u540e\u9762\u7684 Constom code \u4f5c\u4e1a\u4e5f\u53ef\u4ee5\u5f15\u7528\u3002\u6bcf\u6b21\u9700\u8981\u4e0a\u7ebf\u90fd\u9700\u8981\u8fdb\u884c\u7f16\u8bd1\u624d\u53ef\u4ee5\uff0c\u5426\u5219\u53ea\u80fd\u662f\u4e0a\u6b21\u7f16\u8bd1\u7684\u4ee3\u7801\u3002\u8fd9\u91cc\u6709\u4e2a\u95ee\u9898\uff0c\u4e3a\u4e86\u5b89\u5168\uff0c\u6211\u53f8\u7684 gitlab \u8d26\u53f7\u5bc6\u7801\u90fd\u662f\u5b9a\u671f\u66f4\u65b0\u7684\u3002\u8fd9\u6837\u5c31\u4f1a\u5bfc\u81f4\uff0cStreamPark \u5df2\u7ecf\u914d\u7f6e\u597d\u7684\u9879\u76ee\u8fd8\u662f\u4e4b\u524d\u7684\u5bc6\u7801\uff0c\u7ed3\u679c\u5bfc\u81f4\u7f16\u8bd1\u65f6\u4ece git \u91cc\u62c9\u53d6\u9879\u76ee\u5931\u8d25\uff0c\u5bfc\u81f4\u6574\u4e2a\u7f16\u8bd1\u73af\u8282\u5931\u8d25\uff0c\u9488\u5bf9\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u8054\u7cfb\u5230\u793e\u533a\uff0c\u4e86\u89e3\u5230\u8fd9\u90e8\u5206\u5df2\u7ecf\u5728\u540e\u7eed\u7684 1.2.1 \u7248\u672c\u4e2d\u652f\u6301\u4e86\u9879\u76ee\u7684\u4fee\u6539\u64cd\u4f5c\u3002\\n\\n![](/blog/joyme/flink_system.png)\\n\\n\u65b0\u5efa\u4efb\u52a1\uff0c\u9009\u62e9 Custom code \uff0c\u9009\u62e9 Flink \u7248\u672c\uff0c\u9009\u62e9\u9879\u76ee\u4ee5\u53ca\u6a21\u5757 Jar \u5305\uff0c\u9009\u62e9\u5f00\u53d1\u7684\u5e94\u7528\u6a21\u5f0f\u4e3a Apache Flink\xae (\u6807\u51c6\u7684 Flink \u7a0b\u5e8f)\uff0c\u7a0b\u5e8f\u4e3b\u51fd\u6570\u5165\u53e3\u7c7b\uff0c\u4efb\u52a1\u7684\u540d\u79f0\u3002\\n\\n![](/blog/joyme/add_projectconfiguration.png)\\n\\n\u4ee5\u53ca\u4efb\u52a1\u7684\u5e76\u884c\u5ea6\uff0c\u76d1\u63a7\u7684\u65b9\u5f0f\u7b49\uff0c\u5185\u5b58\u5927\u5c0f\u6839\u636e\u4efb\u52a1\u9700\u8981\u8fdb\u884c\u914d\u7f6e\u3002Program Args \u7a0b\u5e8f\u7684\u53c2\u6570\u5219\u6839\u636e\u7a0b\u5e8f\u9700\u8981\u81ea\u884c\u5b9a\u4e49\u5165\u53e3\u53c2\u6570\uff0c\u6bd4\u5982\uff1a\u6211\u4eec\u7edf\u4e00\u542f\u52a8\u7c7b\u662f StartJobApp\uff0c\u90a3\u4e48\u542f\u52a8\u4f5c\u4e1a\u5c31\u9700\u8981\u4f20\u5165\u4f5c\u4e1a\u7684 Full name \u544a\u8bc9\u542f\u52a8\u7c7b\u8981\u53bb\u627e\u54ea\u4e2a\u7c7b\u6765\u542f\u52a8\u6b64\u6b21\u4efb\u52a1\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u53cd\u5c04\u673a\u5236\uff0c\u4f5c\u4e1a\u914d\u7f6e\u5b8c\u6210\u4ee5\u540e\u540c\u6837\u4e5f\u662f Submit \u63d0\u4ea4\uff0c\u7136\u540e\u5728 application \u754c\u9762\u90e8\u7f72\u4efb\u52a1\u3002\\n\\n![](/blog/joyme/application_interface.png)\\n\\n## 4 \u76d1\u63a7\u544a\u8b66\\n\\nStreamPark \u7684\u76d1\u63a7\u9700\u8981\u5728 setting \u6a21\u5757\u53bb\u914d\u7f6e\u53d1\u9001\u90ae\u4ef6\u7684\u57fa\u672c\u4fe1\u606f\u3002\\n\\n![](/blog/joyme/system_setting.png)\\n\\n\u7136\u540e\u5728\u4efb\u52a1\u91cc\u914d\u7f6e\u91cd\u542f\u7b56\u7565\uff1a\u76d1\u63a7\u5728\u591a\u4e45\u5185\u51e0\u6b21\u5f02\u5e38\uff0c\u7136\u540e\u662f\u62a5\u8b66\u8fd8\u662f\u91cd\u542f\u7684\u7b56\u7565\uff0c\u540c\u65f6\u53d1\u9001\u62a5\u8b66\u8981\u53d1\u5230\u54ea\u4e2a\u90ae\u7bb1\u3002\u76ee\u524d\u6211\u53f8\u4f7f\u7528\u7248\u672c\u662f 1.2.1 \u53ea\u652f\u6301\u90ae\u4ef6\u53d1\u9001\u3002\\n\\n![](/blog/joyme/email_setting.png)\\n\\n\u5f53\u6211\u4eec\u7684\u4f5c\u4e1a\u51fa\u73b0\u5931\u8d25\u7684\u60c5\u51b5\u4e0b\uff0c\u5c31\u53ef\u4ee5\u63a5\u6536\u5230\u62a5\u8b66\u90ae\u7bb1\u3002\u8fd9\u62a5\u8b66\u8fd8\u662f\u5f88\u597d\u770b\u7684\u6709\u6728\u6709\uff0c\u53ef\u4ee5\u6e05\u695a\u770b\u5230\u6211\u4eec\u7684\u54ea\u4e2a\u4f5c\u4e1a\uff0c\u4ec0\u4e48\u72b6\u6001\u3002\u4e5f\u53ef\u4ee5\u70b9\u51fb\u4e0b\u9762\u7684\u5177\u4f53\u5730\u5740\u8fdb\u884c\u67e5\u770b\u3002\\n\\n![](/blog/joyme/alarm_eamil.png)\\n\\n\u5173\u4e8e\u62a5\u8b66\u8fd9\u4e00\u5757\u76ee\u524d\u6211\u4eec\u57fa\u4e8e StreamPark \u7684 t_flink_app \u8868\u8fdb\u884c\u4e86\u4e00\u4e2a\u5b9a\u65f6\u4efb\u52a1\u7684\u5f00\u53d1\u3002\u4e3a\u4ec0\u4e48\u8981\u8fd9\u4e48\u505a\uff1f\u56e0\u4e3a\u53d1\u9001\u90ae\u4ef6\u8fd9\u79cd\u901a\u77e5\uff0c\u5927\u90e8\u5206\u4eba\u53ef\u80fd\u4e0d\u4f1a\u53bb\u53ca\u65f6\u53bb\u770b\u3002\u6240\u4ee5\u6211\u4eec\u9009\u62e9\u76d1\u63a7\u6bcf\u4e2a\u4efb\u52a1\u7684\u72b6\u6001\u53bb\u628a\u5bf9\u5e94\u7684\u76d1\u63a7\u4fe1\u606f\u53d1\u9001\u6211\u4eec\u7684\u98de\u4e66\u62a5\u8b66\u7fa4\uff0c\u8fd9\u6837\u53ef\u4ee5\u53ca\u65f6\u53d1\u73b0\u95ee\u9898\u53bb\u89e3\u51b3\u4efb\u52a1\u3002\u4e00\u4e2a\u7b80\u5355\u7684 python \u811a\u672c\uff0c\u7136\u540e\u914d\u7f6e\u4e86 crontab \u53bb\u5b9a\u65f6\u6267\u884c\u3002\\n\\n## 5 \u5e38\u89c1\u95ee\u9898\\n\\n\u5173\u4e8e\u4f5c\u4e1a\u7684\u5f02\u5e38\u95ee\u9898\uff0c\u6211\u4eec\u5f52\u7eb3\u5206\u6790\u4e86\u57fa\u672c\u5206\u4e3a\u8fd9\u4e48\u51e0\u79cd\u60c5\u51b5:\\n\\n### **1. \u4f5c\u4e1a\u542f\u52a8\u5931\u8d25**\\n\\n\u4f5c\u4e1a\u542f\u52a8\u5931\u8d25\u7684\u95ee\u9898\uff0c\u5c31\u662f\u70b9\u51fb\u542f\u52a8\u8fd0\u884c\u90e8\u7f72\u3002\u53d1\u73b0\u8d77\u4e0d\u6765\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u770b\u754c\u9762\u7684\u8be6\u60c5\u4fe1\u606f\u7684\u65e5\u5fd7\u3002\u5728\u6211\u4eec\u7684\u4efb\u52a1\u5217\u8868\u4e2d\u6709\u4e00\u4e2a\u773c\u775b\u7684\u6309\u94ae\uff0c\u70b9\u8fdb\u53bb\u3002\u5728start logs \u4e2d\u4f1a\u627e\u5230\u63d0\u4ea4\u7684\u4f5c\u4e1a\u65e5\u5fd7\u4fe1\u606f\uff0c\u70b9\u8fdb\u53bb\u67e5\u770b\uff0c\u5982\u679c\u6709\u660e\u663e\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u76f4\u63a5\u89e3\u51b3\u5c31\u53ef\u4ee5\u4e86\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u9700\u8981\u53bb\u67e5\u770b\u540e\u53f0\u90e8\u7f72\u4efb\u52a1\u7684\u76ee\u5f55 logs/\u4e0b\u9762\u7684 streamx.out\uff0c\u6253\u5f00\u4ee5\u540e\u4f1a\u627e\u5230\u542f\u52a8\u5931\u8d25\u7684\u65e5\u5fd7\u4fe1\u606f\u3002\\n\\n![](/blog/joyme/start_log.png)\\n\\n### **2. \u4f5c\u4e1a\u8fd0\u884c\u5931\u8d25**\\n\\n\u5982\u679c\u662f\u4efb\u52a1\u5df2\u7ecf\u8d77\u6765\u4e86\uff0c\u4f46\u662f\u5728\u8fd0\u884c\u9636\u6bb5\u5931\u8d25\u4e86\u3002\u8fd9\u79cd\u60c5\u51b5\u8868\u9762\u770b\u4e0a\u53bb\u548c\u4e0a\u9762\u7684\u60c5\u51b5\u4e00\u6837\uff0c\u5b9e\u5219\u5b8c\u5168\u4e0d\u540c\uff0c\u8fd9\u79cd\u60c5\u51b5\u662f\u5df2\u7ecf\u5c06\u4efb\u52a1\u63d0\u4ea4\u7ed9\u96c6\u7fa4\u4e86\uff0c\u4f46\u662f\u4efb\u52a1\u8fd0\u884c\u4e0d\u8d77\u6765\uff0c\u90a3\u5c31\u662f\u6211\u4eec\u7684\u4efb\u52a1\u81ea\u8eab\u6709\u95ee\u9898\u4e86\u3002\u540c\u6837\u53ef\u4ee5\u7528\u4e0a\u9762\u7b2c\u4e00\u79cd\u60c5\u51b5\u7684\u6392\u67e5\u65b9\u5f0f\u6253\u5f00\u4f5c\u4e1a\u7684\u5177\u4f53\u65e5\u5fd7\uff0c\u627e\u5230\u4efb\u52a1\u5728 yarn \u4e0a\u8fd0\u884c\u7684\u4fe1\u606f\uff0c\u6839\u636e\u65e5\u5fd7\u91cc\u8bb0\u5f55\u7684 yarn \u7684 tackurl \u53bb yarn \u7684\u65e5\u5fd7\u91cc\u67e5\u770b\u5177\u4f53\u7684\u539f\u56e0\uff0c\u662f Sql \u7684 Connector \u4e0d\u5b58\u5728\uff0c\u8fd8\u662f\u4ee3\u7801\u7684\u54ea\u884c\u4ee3\u7801\u7a7a\u6307\u9488\u4e86\uff0c\u90fd\u53ef\u4ee5\u770b\u5230\u5177\u4f53\u7684\u5806\u6808\u4fe1\u606f\u3002\u6709\u4e86\u5177\u4f53\u4fe1\u606f\uff0c\u5c31\u53ef\u4ee5\u5bf9\u75c7\u4e0b\u836f\u4e86\u3002\\n\\n![](/blog/joyme/yarn_log.png)\\n\\n## 6 \u793e\u533a\u5370\u8c61\\n\\n\u5f88\u591a\u65f6\u5019\u6211\u4eec\u5728 StreamPark \u7528\u6237\u7fa4\u91cc\u8ba8\u8bba\u95ee\u9898\uff0c\u90fd\u4f1a\u5f97\u5230\u793e\u533a\u5c0f\u4f19\u4f34\u7684\u5373\u65f6\u54cd\u5e94\u3002\u63d0\u4ea4\u7684\u4e00\u4e9b issue \u5728\u5f53\u4e0b\u4e0d\u80fd\u89e3\u51b3\u7684\uff0c\u57fa\u672c\u4e5f\u4f1a\u5728\u4e0b\u4e00\u4e2a\u7248\u672c\u6216\u8005\u6700\u65b0\u7684\u4ee3\u7801\u5206\u652f\u4e2d\u8fdb\u884c\u4fee\u590d\u3002\u5728\u7fa4\u91cc\uff0c\u6211\u4eec\u4e5f\u770b\u5230\u5f88\u591a\u4e0d\u662f\u793e\u533a\u7684\u5c0f\u4f19\u4f34\uff0c\u4e5f\u5728\u79ef\u6781\u4e92\u76f8\u5e2e\u52a9\u53bb\u89e3\u51b3\u95ee\u9898\u3002\u7fa4\u91cc\u4e5f\u6709\u5f88\u591a\u5176\u4ed6\u793e\u533a\u7684\u5927\u4f6c\uff0c\u5f88\u591a\u5c0f\u4f19\u4f34\u4e5f\u79ef\u6781\u52a0\u5165\u4e86\u793e\u533a\u7684\u5f00\u53d1\u5de5\u4f5c\u3002\u6574\u4e2a\u793e\u533a\u7ed9\u6211\u7684\u611f\u89c9\u8fd8\u662f\u5f88\u6d3b\u8dc3\uff01\\n\\n## 7 \u603b\u7ed3\\n\\n\u76ee\u524d\u6211\u53f8\u7ebf\u4e0a\u8fd0\u884c 60 \u4e2a\u5b9e\u65f6\u4f5c\u4e1a\uff0cFlink sql \u4e0e Custom-code \u5dee\u4e0d\u591a\u5404\u4e00\u534a\u3002\u540e\u7eed\u4e5f\u4f1a\u6709\u66f4\u591a\u7684\u5b9e\u65f6\u4efb\u52a1\u8fdb\u884c\u4e0a\u7ebf\u3002\u5f88\u591a\u540c\u5b66\u90fd\u4f1a\u62c5\u5fc3 StreamPark \u7a33\u4e0d\u7a33\u5b9a\u7684\u95ee\u9898\uff0c\u5c31\u6211\u53f8\u6839\u636e\u51e0\u4e2a\u6708\u7684\u751f\u4ea7\u5b9e\u8df5\u800c\u8a00\uff0cStreamPark \u53ea\u662f\u4e00\u4e2a\u5e2e\u52a9\u4f60\u5f00\u53d1\u4f5c\u4e1a\uff0c\u90e8\u7f72\uff0c\u76d1\u63a7\u548c\u7ba1\u7406\u7684\u4e00\u4e2a\u5e73\u53f0\u3002\u5230\u5e95\u7a33\u4e0d\u7a33\uff0c\u8fd8\u662f\u8981\u770b\u81ea\u5bb6\u7684 Hadoop yarn \u96c6\u7fa4\u7a33\u4e0d\u7a33\u5b9a\uff08\u6211\u4eec\u7528\u7684onyan\u6a21\u5f0f\uff09\uff0c\u5176\u5b9e\u5df2\u7ecf\u8ddf StreamPark\u5173\u7cfb\u4e0d\u5927\u4e86\u3002\u8fd8\u6709\u5c31\u662f\u4f60\u5199\u7684 Flink Sql \u6216\u8005\u662f\u4ee3\u7801\u5065\u4e0d\u5065\u58ee\u3002\u66f4\u591a\u7684\u662f\u8fd9\u4e24\u65b9\u9762\u5e94\u8be5\u662f\u5927\u5bb6\u8981\u8003\u8651\u7684\uff0c\u8fd9\u4e24\u65b9\u9762\u6ca1\u95ee\u9898\u518d\u5145\u5206\u5229\u7528 StreamPark \u7684\u7075\u6d3b\u6027\u624d\u80fd\u8ba9\u4f5c\u4e1a\u66f4\u597d\u7684\u8fd0\u884c\uff0c\u5355\u4ece\u4e00\u65b9\u9762\u8bf4 StreamPark \u7a33\u4e0d\u7a33\u5b9a\uff0c\u5b9e\u5c5e\u504f\u6fc0\u3002\\n\\n\u4ee5\u4e0a\u5c31\u662f StreamPark \u5728\u4e50\u6211\u65e0\u9650\u7684\u5168\u90e8\u5206\u4eab\u5185\u5bb9\uff0c\u611f\u8c22\u5927\u5bb6\u770b\u5230\u8fd9\u91cc\u3002\u975e\u5e38\u611f\u8c22 StreamPark \u63d0\u4f9b\u7ed9\u6211\u4eec\u8fd9\u4e48\u4f18\u79c0\u7684\u4ea7\u54c1\uff0c\u8fd9\u5c31\u662f\u505a\u7684\u5229\u4ed6\u4eba\u4e4b\u4e8b\u3002\u4ece1.0 \u5230 1.2.1 \u5e73\u65f6\u9047\u5230\u90a3\u4e9bbug\u90fd\u4f1a\u88ab\u5373\u65f6\u7684\u4fee\u590d\uff0c\u6bcf\u4e00\u4e2aissue\u90fd\u88ab\u8ba4\u771f\u5bf9\u5f85\u3002\u76ee\u524d\u6211\u4eec\u8fd8\u662f onyarn\u7684\u90e8\u7f72\u6a21\u5f0f\uff0c\u91cd\u542fyarn\u8fd8\u662f\u4f1a\u5bfc\u81f4\u4f5c\u4e1a\u7684lost\u72b6\u6001\uff0c\u91cd\u542fyarn\u4e5f\u4e0d\u662f\u5929\u5929\u90fd\u5e72\u7684\u4e8b\uff0c\u5173\u4e8e\u8fd9\u4e2a\u793e\u533a\u4e5f\u4f1a\u5c3d\u65e9\u7684\u4f1a\u53bb\u4fee\u590d\u8fd9\u4e2a\u95ee\u9898\u3002\u76f8\u4fe1 StreamPark \u4f1a\u8d8a\u6765\u8d8a\u597d\uff0c\u672a\u6765\u53ef\u671f\u3002\"},{\"id\":\"streampark-usercase-haibo\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-haibo\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/7-streampark-usercase-haibo.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/7-streampark-usercase-haibo.md\",\"title\":\"Apache StreamPark\u2122 \u4e00\u7ad9\u5f0f\u8ba1\u7b97\u5229\u5668\u5728\u6d77\u535a\u79d1\u6280\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u52a9\u529b\u667a\u6167\u57ce\u5e02\u5efa\u8bbe\",\"description\":\"\u6458\u8981\uff1a\u672c\u6587\u300c StreamPark \u4e00\u7ad9\u5f0f\u8ba1\u7b97\u5229\u5668\u5728\u6d77\u535a\u79d1\u6280\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u52a9\u529b\u667a\u6167\u57ce\u5e02\u5efa\u8bbe \u300d\u4f5c\u8005\u662f\u6d77\u535a\u79d1\u6280\u5927\u6570\u636e\u67b6\u6784\u5e08\u738b\u5e86\u7115\uff0c\u4e3b\u8981\u5185\u5bb9\u4e3a\uff1a\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"},{\"label\":\"FlinkSQL\",\"permalink\":\"/zh-CN/blog/tags/flink-sql\"}],\"readingTime\":6.89,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-haibo\",\"title\":\"Apache StreamPark\u2122 \u4e00\u7ad9\u5f0f\u8ba1\u7b97\u5229\u5668\u5728\u6d77\u535a\u79d1\u6280\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u52a9\u529b\u667a\u6167\u57ce\u5e02\u5efa\u8bbe\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\",\"FlinkSQL\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 \u5728 Joyme \u7684\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-joyme\"},\"nextItem\":{\"title\":\"\u81ea\u5982\u57fa\u4e8eApache StreamPark\u2122 \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-ziru\"}},\"content\":\"**\u6458\u8981\uff1a**\u672c\u6587\u300c StreamPark \u4e00\u7ad9\u5f0f\u8ba1\u7b97\u5229\u5668\u5728\u6d77\u535a\u79d1\u6280\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u52a9\u529b\u667a\u6167\u57ce\u5e02\u5efa\u8bbe \u300d\u4f5c\u8005\u662f\u6d77\u535a\u79d1\u6280\u5927\u6570\u636e\u67b6\u6784\u5e08\u738b\u5e86\u7115\uff0c\u4e3b\u8981\u5185\u5bb9\u4e3a\uff1a\\n\\n1. \u9009\u62e9 StreamPark\\n2. \u5feb\u901f\u4e0a\u624b\\n3. \u5e94\u7528\u573a\u666f\\n4. \u529f\u80fd\u6269\u5c55\\n5. \u672a\u6765\u671f\u5f85\\n\\n\u6d77\u535a\u79d1\u6280\u662f\u4e00\u5bb6\u884c\u4e1a\u9886\u5148\u7684\u4eba\u5de5\u667a\u80fd\u7269\u8054\u7f51\u4ea7\u54c1\u548c\u89e3\u51b3\u65b9\u6848\u516c\u53f8\u3002\u76ee\u524d\u5728\u516c\u5171\u5b89\u5168\u3001\u667a\u6167\u57ce\u5e02\u3001\u667a\u6167\u5236\u9020\u9886\u57df\uff0c\u4e3a\u5168\u56fd\u5ba2\u6237\u63d0\u4f9b\u5305\u62ec\u7b97\u6cd5\u3001\u8f6f\u4ef6\u548c\u786c\u4ef6\u4ea7\u54c1\u5728\u5185\u7684\u5168\u6808\u5f0f\u6574\u4f53\u89e3\u51b3\u65b9\u6848\u3002\\n\\n\x3c!-- truncate --\x3e\\n\\n## **01. \u9009\u62e9 Apache StreamPark\u2122**\\n\\n\u6d77\u535a\u79d1\u6280\u81ea 2020 \u5e74\u5f00\u59cb\u4f7f\u7528 Flink SQL \u6c47\u805a\u3001\u5904\u7406\u5404\u7c7b\u5b9e\u65f6\u7269\u8054\u6570\u636e\u3002\u968f\u7740\u5404\u5730\u5e02\u667a\u6167\u57ce\u5e02\u5efa\u8bbe\u6b65\u4f10\u7684\u52a0\u5feb\uff0c\u9700\u8981\u6c47\u805a\u7684\u5404\u7c7b\u7269\u8054\u6570\u636e\u7684\u6570\u636e\u79cd\u7c7b\u3001\u6570\u636e\u91cf\u4e5f\u4e0d\u65ad\u589e\u52a0\uff0c\u5bfc\u81f4\u7ebf\u4e0a\u7ef4\u62a4\u7684 Flink SQL \u4efb\u52a1\u8d8a\u6765\u8d8a\u591a\uff0c\u4e00\u4e2a\u4e13\u95e8\u7684\u80fd\u591f\u7ba1\u7406\u4f17\u591a Flink SQL \u4efb\u52a1\u7684\u8ba1\u7b97\u5e73\u53f0\u6210\u4e3a\u4e86\u8feb\u5207\u7684\u9700\u6c42\u3002\\n\\n\u5728\u4f53\u9a8c\u5bf9\u6bd4\u4e86 Apache Zeppelin \u548c StreamPark \u4e4b\u540e\uff0c\u6211\u4eec\u9009\u62e9\u4e86 StreamPark \u4f5c\u4e3a\u516c\u53f8\u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u3002\u76f8\u6bd4 Apache Zeppelin\uff0c StreamPark \u5e76\u4e0d\u51fa\u540d\u3002\u200d\u200d\u200d\u200d\u200d\u200d\u200d\u200d\u200d\u200d\u200d\u200d\u4f46\u662f\u5728\u4f53\u9a8c\u4e86 StreamPark \u53d1\u884c\u7684\u521d\u7248\uff0c\u9605\u8bfb\u5176\u8bbe\u8ba1\u6587\u6863\u540e\uff0c\u6211\u4eec\u53d1\u73b0\u5176\u57fa\u4e8e **\u4e00\u7ad9\u5f0f** \u8bbe\u8ba1\u7684\u601d\u60f3\uff0c\u80fd\u591f\u8986\u76d6 Flink \u4efb\u52a1\u5f00\u53d1\u7684\u5168\u751f\u547d\u5468\u671f\uff0c\u4f7f\u5f97\u914d\u7f6e\u3001\u5f00\u53d1\u3001\u90e8\u7f72\u3001\u8fd0\u7ef4\u5168\u90e8\u5728\u4e00\u4e2a\u5e73\u53f0\u5373\u53ef\u5b8c\u6210\u3002\u6211\u4eec\u7684\u5f00\u53d1\u3001\u8fd0\u7ef4\u3001\u6d4b\u8bd5\u7684\u540c\u5b66\u53ef\u4ee5\u4f7f\u7528 StreamPark \u534f\u540c\u5de5\u4f5c\uff0c**\u4f4e\u4ee3\u7801** + **\u4e00\u7ad9\u5f0f** \u7684\u8bbe\u8ba1\u601d\u60f3\u575a\u5b9a\u4e86\u6211\u4eec\u4f7f\u7528 StreamPark \u7684\u4fe1\u5fc3\u3002\\n\\n//\u89c6\u9891\u94fe\u63a5\uff08 StreamX \u5b98\u65b9\u89c6\u9891\uff09\\n\\n\\n\\n## **02. \u843d\u5730\u5b9e\u8df5**\\n\\n### **1. \u5feb\u901f\u4e0a\u624b**\\n\\n\u4f7f\u7528 StreamPark \u5b8c\u6210\u4e00\u4e2a\u5b9e\u65f6\u6c47\u805a\u4efb\u52a1\u5c31\u50cf\u628a\u5927\u8c61\u653e\u8fdb\u51b0\u7bb1\u4e00\u6837\u7b80\u5355\uff0c\u4ec5\u9700\u4e09\u6b65\u5373\u53ef\u5b8c\u6210:\\n\\n- \u7f16\u8f91 SQL\\n\\n![](/blog/haibo/flink_sql.png)\\n\\n- \u4e0a\u4f20\u4f9d\u8d56\u5305\\n\\n![](/blog/haibo/dependency.png)\\n\\n- \u90e8\u7f72\u8fd0\u884c\\n\\n![](/blog/haibo/deploy.png)\\n\\n\u4ec5\u9700\u4e0a\u8ff0\u4e09\u6b65\uff0c\u5373\u53ef\u5b8c\u6210 Mysql \u5230 Elasticsearch \u7684\u6c47\u805a\u4efb\u52a1\uff0c\u5927\u5927\u63d0\u5347\u6570\u636e\u63a5\u5165\u6548\u7387\u3002\\n\\n### **2. \u751f\u4ea7\u5b9e\u8df5**\\n\\nStreamPark \u5728\u6d77\u535a\u4e3b\u8981\u7528\u4e8e\u8fd0\u884c\u5b9e\u65f6 Flink SQL\u4efb\u52a1: \u8bfb\u53d6 Kafka \u4e0a\u7684\u6570\u636e\uff0c\u8fdb\u884c\u5904\u7406\u8f93\u51fa\u81f3 Clickhouse \u6216\u8005 Elasticsearch \u4e2d\u3002\\n\\n\u4ece2021\u5e7410\u6708\u5f00\u59cb\uff0c\u516c\u53f8\u9010\u6e10\u5c06 Flink SQL \u4efb\u52a1\u8fc1\u79fb\u81f3 StreamPark \u5e73\u53f0\u6765\u96c6\u4e2d\u7ba1\u7406\uff0c\u627f\u8f7d\u6211\u53f8\u5b9e\u65f6\u7269\u8054\u6570\u636e\u7684\u6c47\u805a\u3001\u8ba1\u7b97\u3001\u9884\u8b66\u3002\\n\\n\u622a\u81f3\u76ee\u524d\uff0cStreamPark \u5df2\u5728\u591a\u4e2a\u653f\u5e9c\u3001\u516c\u5b89\u751f\u4ea7\u73af\u5883\u8fdb\u884c\u90e8\u7f72\uff0c\u6c47\u805a\u5904\u7406\u57ce\u5e02\u5b9e\u65f6\u7269\u8054\u6570\u636e\u3001\u4eba\u8f66\u6293\u62cd\u6570\u636e\u3002\u4ee5\u4e0b\u662f\u5728\u67d0\u5e02\u4e13\u7f51\u90e8\u7f72\u7684 StreamPark \u5e73\u53f0\u622a\u56fe :\\n\\n![](/blog/haibo/application.png)\\n\\n## **03. \u5e94\u7528\u573a\u666f**\\n\\n#### **1. \u5b9e\u65f6\u7269\u8054\u611f\u77e5\u6570\u636e\u6c47\u805a**\\n\\n\u6c47\u805a\u5b9e\u65f6\u7684\u7269\u8054\u611f\u77e5\u6570\u636e\uff0c\u6211\u4eec\u76f4\u63a5\u4f7f\u7528 StreamPark \u5f00\u53d1 Flink SQL \u4efb\u52a1\uff0c\u9488\u5bf9 Flink SQL \u672a\u63d0\u4f9b\u7684\u65b9\u6cd5\uff0cStreamPark \u4e5f\u652f\u6301 Udf \u76f8\u5173\u529f\u80fd\uff0c\u7528\u6237\u901a\u8fc7 StreamPark \u4e0a\u4f20 Udf \u5305\uff0c\u5373\u53ef\u5728 SQL \u4e2d\u8c03\u7528\u76f8\u5173 Udf\uff0c\u5b9e\u73b0\u66f4\u591a\u590d\u6742\u7684\u903b\u8f91\u64cd\u4f5c\u3002\\n\\n\u201cSQL+UDF\u201d \u7684\u65b9\u5f0f\uff0c\u80fd\u591f\u6ee1\u8db3\u6211\u4eec\u7edd\u5927\u90e8\u5206\u7684\u6570\u636e\u6c47\u805a\u573a\u666f\uff0c\u5982\u679c\u540e\u671f\u4e1a\u52a1\u53d8\u52a8\uff0c\u4e5f\u53ea\u9700\u8981\u5728 StreamPark \u4e2d\u4fee\u6539 SQL \u8bed\u53e5\uff0c\u5373\u53ef\u5b8c\u6210\u4e1a\u52a1\u53d8\u66f4\u4e0e\u4e0a\u7ebf\u3002\\n\\n![](/blog/haibo/data_aggregation.png)\\n\\n#### **2. Flink CDC\u6570\u636e\u5e93\u540c\u6b65**\\n\\n\u4e3a\u4e86\u5b9e\u73b0\u5404\u7c7b\u6570\u636e\u5e93\u4e0e\u6570\u636e\u4ed3\u5e93\u4e4b\u524d\u7684\u540c\u6b65\uff0c\u6211\u4eec\u4f7f\u7528 StreamPark \u5f00\u53d1 Flink CDC SQL \u4efb\u52a1\u3002\u501f\u52a9\u4e8e Flink CDC \u7684\u80fd\u529b\uff0c\u5b9e\u73b0\u4e86 Oracle \u4e0e Oracle \u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\uff0c Mysql/Postgresql \u4e0e Clickhouse \u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\u3002\\n\\n![](/blog/haibo/flink_cdc.png)\\n\\n**3. \u6570\u636e\u5206\u6790\u6a21\u578b\u7ba1\u7406**\\n\\n\u9488\u5bf9\u65e0\u6cd5\u4f7f\u7528 Flink SQL \u9700\u8981\u5f00\u53d1 Flink \u4ee3\u7801\u7684\u4efb\u52a1\uff0c\u4f8b\u5982: \u5b9e\u65f6\u5e03\u63a7\u6a21\u578b\u3001\u79bb\u7ebf\u6570\u636e\u5206\u6790\u6a21\u578b\uff0cStreamPark \u63d0\u4f9b\u4e86 Custom code \u7684\u65b9\u5f0f\uff0c\u5141\u8bb8\u7528\u6237\u4e0a\u4f20\u53ef\u6267\u884c\u7684 Flink Jar \u5305\u5e76\u8fd0\u884c\u3002\\n\\n\u76ee\u524d\uff0c\u6211\u4eec\u5df2\u7ecf\u5c06\u4eba\u5458\uff0c\u8f66\u8f86\u7b49 20 \u4f59\u7c7b\u5206\u6790\u6a21\u578b\u4e0a\u4f20\u81f3 StreamPark\uff0c\u4ea4\u7531 StreamPark \u7ba1\u7406\u8fd0\u884c\u3002\\n\\n![](/blog/haibo/data_aggregation.png)\\n\\n**\u7efc\u4e0a:** \u65e0\u8bba\u662f Flink SQL \u4efb\u52a1\u8fd8\u662f Custome code \u4efb\u52a1\uff0cStreamPark \u5747\u63d0\u4f9b\u4e86\u5f88\u597d\u7684\u652f\u6301\uff0c\u6ee1\u8db3\u5404\u79cd\u4e0d\u540c\u7684\u4e1a\u52a1\u573a\u666f\u3002 \u4f46\u662f StreamPark \u7f3a\u5c11\u4efb\u52a1\u8c03\u5ea6\u7684\u80fd\u529b\uff0c\u5982\u679c\u4f60\u9700\u8981\u5b9a\u671f\u8c03\u5ea6\u4efb\u52a1\uff0c StreamPark \u76ee\u524d\u65e0\u6cd5\u6ee1\u8db3\u3002\u793e\u533a\u6210\u5458\u6b63\u5728\u52aa\u529b\u5f00\u53d1\u8c03\u5ea6\u76f8\u5173\u7684\u6a21\u5757\uff0c\u5728\u5373\u5c06\u53d1\u5e03\u7684 1.2.3 \u4e2d \u4f1a\u652f\u6301\u4efb\u52a1\u8c03\u5ea6\u529f\u80fd\uff0c\u656c\u8bf7\u671f\u5f85\u3002\\n\\n## **04. \u529f\u80fd\u6269\u5c55**\\n\\nDatahub \u662f Linkedin \u5f00\u53d1\u7684\u4e00\u4e2a\u5143\u6570\u636e\u7ba1\u7406\u5e73\u53f0\uff0c\u63d0\u4f9b\u4e86\u6570\u636e\u6e90\u7ba1\u7406\u3001\u6570\u636e\u8840\u7f18\u3001\u6570\u636e\u8d28\u91cf\u68c0\u67e5\u7b49\u529f\u80fd\u3002\u6d77\u535a\u79d1\u6280\u57fa\u4e8e StreamPark \u548c Datahub \u8fdb\u884c\u4e86\u4e8c\u6b21\u5f00\u53d1\uff0c\u5b9e\u73b0\u4e86\u6570\u636e\u8868\u7ea7/\u5b57\u6bb5\u7ea7\u7684\u8840\u7f18\u529f\u80fd\u3002\u901a\u8fc7\u6570\u636e\u8840\u7f18\u529f\u80fd\uff0c\u5e2e\u52a9\u7528\u6237\u68c0\u67e5 Flink SQL \u7684\u5b57\u6bb5\u8840\u7f18\u5173\u7cfb\u3002\u5e76\u5c06\u8840\u7f18\u5173\u7cfb\u4fdd\u5b58\u81f3Linkedin/Datahub \u5143\u6570\u636e\u7ba1\u7406\u5e73\u53f0\u3002\\n\\n//\u4e24\u4e2a\u89c6\u9891\u94fe\u63a5\uff08\u57fa\u4e8e StreamX \u5f00\u53d1\u7684\u6570\u636e\u8840\u7f18\u529f\u80fd\uff09\\n\\n\\n\\n## **05. \u672a\u6765\u671f\u5f85**\\n\\n\u76ee\u524d\uff0cStreamPark \u793e\u533a\u7684 Roadmap \u663e\u793a StreamPark 1.3.0 \u5c06\u8fce\u6765\u5168\u65b0\u7684 Workbench \u4f53\u9a8c\u3001\u7edf\u4e00\u7684\u8d44\u6e90\u7ba1\u7406\u4e2d\u5fc3 (JAR/UDF/Connectors \u7edf\u4e00\u7ba1\u7406)\u3001\u6279\u91cf\u4efb\u52a1\u8c03\u5ea6\u7b49\u529f\u80fd\u3002\u8fd9\u4e5f\u662f\u6211\u4eec\u975e\u5e38\u671f\u5f85\u7684\u51e0\u4e2a\u5168\u65b0\u529f\u80fd\u3002\\n\\nWorkbench \u5c06\u4f7f\u7528\u5168\u65b0\u7684\u5de5\u4f5c\u53f0\u5f0f\u7684 SQL \u5f00\u53d1\u98ce\u683c\uff0c\u9009\u62e9\u6570\u636e\u6e90\u5373\u53ef\u751f\u6210 SQL\uff0c\u8fdb\u4e00\u6b65\u63d0\u5347 Flink \u4efb\u52a1\u5f00\u53d1\u6548\u7387\u3002\u7edf\u4e00\u7684 UDF \u8d44\u6e90\u4e2d\u5fc3\u5c06\u89e3\u51b3\u5f53\u524d\u6bcf\u4e2a\u4efb\u52a1\u90fd\u8981\u4e0a\u4f20\u4f9d\u8d56\u5305\u7684\u95ee\u9898\u3002\u6279\u91cf\u4efb\u52a1\u8c03\u5ea6\u529f\u80fd\u5c06\u89e3\u51b3\u5f53\u524d StreamPark \u65e0\u6cd5\u8c03\u5ea6\u4efb\u52a1\u7684\u9057\u61be\u3002\\n\\n\u4e0b\u56fe\u662f StreamPark \u5f00\u53d1\u8005\u8bbe\u8ba1\u7684\u539f\u578b\u56fe\uff0c\u656c\u8bf7\u671f\u5f85\u3002\\n\\n![](/blog/haibo/data_source.png)\"},{\"id\":\"streampark-usercase-ziru\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-ziru\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/8-streampark-usercase-ziru.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/8-streampark-usercase-ziru.md\",\"title\":\"\u81ea\u5982\u57fa\u4e8eApache StreamPark\u2122 \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5b9e\u8df5\",\"description\":\"\u5bfc\u8bfb\uff1a\u81ea\u5982\u4f5c\u4e3a\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u63d0\u4f9b\u79df\u623f\u4ea7\u54c1\u548c\u670d\u52a1\u7684 O2O \u4e92\u8054\u7f51\u516c\u53f8\uff0c\u6784\u5efa\u4e86\u4e00\u4e2a\u6db5\u76d6\u57ce\u5e02\u5c45\u4f4f\u751f\u6d3b\u9886\u57df\u5168\u94fe\u6761\u7684\u5728\u7ebf\u5316\u3001\u6570\u636e\u5316\u3001\u667a\u80fd\u5316\u5e73\u53f0\uff0c\u5b9e\u65f6\u8ba1\u7b97\u5728\u81ea\u5982\u4e00\u76f4\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u81ea\u5982\u6bcf\u65e5\u9700\u8981\u5904\u7406 TB \u7ea7\u522b\u7684\u6570\u636e\uff0c\u672c\u6587\u7531\u6765\u81ea\u81ea\u5982\u7684\u5b9e\u65f6\u8ba1\u7b97\u5c0f\u4f19\u4f34\u5e26\u6765\uff0c\u4ecb\u7ecd\u4e86\u81ea\u5982\u57fa\u4e8e StreamPark \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u6df1\u5ea6\u5b9e\u8df5\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"}],\"readingTime\":36.195,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-ziru\",\"title\":\"\u81ea\u5982\u57fa\u4e8eApache StreamPark\u2122 \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"Apache StreamPark\u2122 \u4e00\u7ad9\u5f0f\u8ba1\u7b97\u5229\u5668\u5728\u6d77\u535a\u79d1\u6280\u7684\u751f\u4ea7\u5b9e\u8df5\uff0c\u52a9\u529b\u667a\u6167\u57ce\u5e02\u5efa\u8bbe\",\"permalink\":\"/zh-CN/blog/streampark-usercase-haibo\"},\"nextItem\":{\"title\":\"\u957f\u5b89\u6c7d\u8f66\u4ece\u81ea\u7814\u5e73\u53f0\u5230Apache StreamPark\u2122 \u7684\u5347\u7ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-changan\"}},\"content\":\"![](/blog/ziru/cover.png)\\n\\n**\u5bfc\u8bfb\uff1a**\u81ea\u5982\u4f5c\u4e3a\u4e00\u5bb6\u4e13\u6ce8\u4e8e\u63d0\u4f9b\u79df\u623f\u4ea7\u54c1\u548c\u670d\u52a1\u7684 O2O \u4e92\u8054\u7f51\u516c\u53f8\uff0c\u6784\u5efa\u4e86\u4e00\u4e2a\u6db5\u76d6\u57ce\u5e02\u5c45\u4f4f\u751f\u6d3b\u9886\u57df\u5168\u94fe\u6761\u7684\u5728\u7ebf\u5316\u3001\u6570\u636e\u5316\u3001\u667a\u80fd\u5316\u5e73\u53f0\uff0c\u5b9e\u65f6\u8ba1\u7b97\u5728\u81ea\u5982\u4e00\u76f4\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u81ea\u5982\u6bcf\u65e5\u9700\u8981\u5904\u7406 TB \u7ea7\u522b\u7684\u6570\u636e\uff0c\u672c\u6587\u7531\u6765\u81ea\u81ea\u5982\u7684\u5b9e\u65f6\u8ba1\u7b97\u5c0f\u4f19\u4f34\u5e26\u6765\uff0c\u4ecb\u7ecd\u4e86\u81ea\u5982\u57fa\u4e8e StreamPark \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u6df1\u5ea6\u5b9e\u8df5\u3002\\n\\n- \u5b9e\u65f6\u8ba1\u7b97\u9047\u5230\u7684\u6311\u6218\\n- \u9700\u6c42\u89e3\u51b3\u65b9\u6848\u4e4b\u8def\\n- \u57fa\u4e8e StreamPark \u7684\u6df1\u5ea6\u5b9e\u8df5\\n- \u5b9e\u8df5\u7ecf\u9a8c\u603b\u7ed3\u548c\u793a\u4f8b\\n- \u5e26\u6765\u7684\u6536\u76ca\\n- \u672a\u6765\u89c4\u5212\\n\\n\x3c!-- truncate --\x3e\\n\\n\u81ea\u5982\u4f5c\u4e3a\u63d0\u4f9b\u79df\u623f\u4ea7\u54c1\u53ca\u670d\u52a1\u7684 O2O \u4e92\u8054\u7f51\u54c1\u724c\uff0c\u6210\u7acb\u4e8e 2011 \u5e74 10 \u6708\uff0c\u81ea\u5982\u5df2\u4e3a\u8fd1 50 \u4e07\u4e1a\u4e3b\u3001500 \u4e07\u81ea\u5982\u5ba2\u63d0\u4f9b\u670d\u52a1\uff0c\u7ba1\u7406\u623f\u6e90\u8d85\u8fc7 100 \u4e07\u95f4\u3002\u622a\u81f3 2021 \u5e74 3 \u6708\uff0c\u81ea\u5982\u5df2\u5f00\u901a\u5317\u4eac\u3001\u4e0a\u6d77\u3001\u6df1\u5733\u3001\u676d\u5dde\u3001\u5357\u4eac\u3001\u5e7f\u5dde\u3001\u6210\u90fd\u3001\u5929\u6d25\u3001\u6b66\u6c49\u3001\u82cf\u5dde 10 \u5927\u57ce\u5e02\u3002\\n\u81ea\u5982\u901a\u8fc7\u6253\u9020\u6db5\u76d6 To C \u548c To B \u7684\u54c1\u8d28\u5c45\u4f4f\u4ea7\u54c1\u3001\u9010\u6b65\u5b9e\u73b0\u57ce\u5e02\u5c45\u4f4f\u751f\u6d3b\u9886\u57df\u5168\u94fe\u6761\u7684\u7ebf\u4e0a\u5316\u3001\u6570\u636e\u5316\u3001\u667a\u80fd\u5316\u7684\u5e73\u53f0\u80fd\u529b\u3002\u81ea\u5982 APP \u88c5\u673a\u91cf\u7d2f\u8ba1\u8fbe 1.4 \u4ebf\u6b21\uff0c\u65e5\u5747\u7ebf\u4e0a\u670d\u52a1\u8c03\u7528\u8fbe 4 \u4ebf\u6b21\uff0c\u62e5\u6709\u667a\u80fd\u5316\u623f\u6e90\u4e07\u4f59\u95f4\u3002\u81ea\u5982\u73b0\u5df2\u5728 PC\u3001APP\u3001\u5fae\u4fe1\u5168\u6e20\u9053\u5b9e\u73b0\u79df\u623f\u3001\u670d\u52a1\u3001\u793e\u533a\u7684 O2O \u95ed\u73af\uff0c\u7701\u53bb\u4f20\u7edf\u79df\u623f\u6a21\u5f0f\u6240\u6709\u4e2d\u95f4\u5197\u4f59\u73af\u8282\uff0c\u901a\u8fc7 O2O \u6a21\u5f0f\u91cd\u6784\u5c45\u4f4f\u5e02\u573a\u683c\u5c40\uff0c\u5e76\u5efa\u7acb\u4e86\u4e2d\u56fd\u6700\u5927\u7684 O2O \u9752\u5e74\u5c45\u4f4f\u793e\u533a\u3002\\n\\n\u5728\u62e5\u6709\u5e9e\u5927\u7528\u6237\u7fa4\u4f53\u60c5\u51b5\u4e0b\uff0c\u81ea\u5982\u4e3a\u4e86\u7ed9\u7528\u6237\u63d0\u4f9b\u66f4\u52a0\u4f18\u8d28\u7684\u4ea7\u54c1\u4f53\u9a8c\uff0c\u5b9e\u73b0\u4f01\u4e1a\u7684\u6570\u5b57\u5316\u8f6c\u578b\uff0c\u4ece 2021 \u5e74\u5f00\u59cb\u5927\u529b\u53d1\u5c55\u5b9e\u65f6\u8ba1\u7b97\uff0cFlink \u5728\u81ea\u5982\u7684\u5b9e\u65f6\u8ba1\u7b97\u4e2d\u4e00\u76f4\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\u3002\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u81ea\u5982\u6bcf\u65e5\u9700\u8981\u5904\u7406 TB \u7ea7\u522b\u7684\u6570\u636e\uff0c\u603b\u5171\u62e5\u6709 500+ \u4e2a\u5b9e\u65f6\u4f5c\u4e1a\uff0c\u5e76\u652f\u6491\u6bcf\u65e5\u8d85\u8fc7 1000 \u4e07\u6b21\u7684\u6570\u636e\u8c03\u7528\u8bf7\u6c42\u3002\\n\\n## **\u5b9e\u65f6\u8ba1\u7b97\u9047\u5230\u7684\u6311\u6218**\\n\\n\u5728\u81ea\u5982\uff0c\u5b9e\u65f6\u8ba1\u7b97\u5927\u6982\u5206\u4e3a 2 \u4e2a\u5e94\u7528\u573a\u666f\uff1a\\n\\n- \u6570\u636e\u540c\u6b65\uff1a\u5305\u62ec Kafka\u3001Mysql\u3001Mongo \u6570\u636e\u540c\u6b65\u5230 Hive / Paimon / ClickHouse \u7b49\u3002\\n\\n- \u5b9e\u65f6\u6570\u4ed3\uff1a\u5305\u62ec\u51fa\u79df\u3001\u6536\u623f\u3001\u5bb6\u670d\u7b49\u4e1a\u52a1\u5b9e\u65f6\u6307\u6807\u3002\\n\\n\u5728\u5b9e\u65f6\u8ba1\u7b97\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\u9047\u5230\u4e86\u4e00\u4e9b\u6311\u6218\uff0c\u5927\u81f4\u5982\u4e0b\uff1a\\n\\n### **01 \u4f5c\u4e1a\u4e0a\u7ebf\u6548\u7387\u4f4e**\\n\\n\u5728\u81ea\u5982\u5b9e\u65f6\u4f5c\u4e1a\u7684\u5f00\u53d1\u4e0a\u7ebf\u6d41\u7a0b\u662f\uff1a\u6570\u636e\u4ed3\u5e93\u5f00\u53d1\u4eba\u5458\u5c06 Flink SQL \u4ee3\u7801\u5d4c\u5165\u5230\u7a0b\u5e8f\u4e2d\uff0c\u5728\u672c\u5730\u8fdb\u884c\u4ee3\u7801\u8c03\u8bd5\uff0c\u7136\u540e\u7f16\u8bd1\u6210 FatJar\uff0c\u6700\u540e\u518d\u5c06\u4f5c\u4e1a\u4ee5\u5de5\u5355\u548c JAR \u5305\u5f62\u5f0f\u63d0\u4ea4\u7ed9\u8fd0\u7ef4\uff0c\u8fd0\u7ef4\u8d1f\u8d23\u4f5c\u4e1a\u4e0a\u7ebf\u7684\u5c0f\u4f19\u4f34\u518d\u901a\u8fc7\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u5c06\u4f5c\u4e1a\u90e8\u7f72\u5230\u7ebf\u4e0a Kubernetes session \u73af\u5883\u3002\u53ef\u4ee5\u770b\u5230\u8fd9\u4e00\u8fc7\u7a0b\u6d89\u53ca\u5230\u8bf8\u591a\u73af\u8282\uff0c\u6bcf\u4e00\u6b65\u90fd\u662f\u9700\u8981\u4eba\u4e3a\u4ecb\u5165\uff0c\u6548\u7387\u6781\u5176\u4f4e\u4e0b\uff0c\u800c\u4e14\u975e\u5e38\u5bb9\u6613\u51fa\u9519\uff0c\u5f71\u54cd\u5de5\u4f5c\u6548\u7387\u548c\u7a33\u5b9a\u6027\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e9f\u9700\u6784\u5efa\u4e00\u5957\u9ad8\u6548\u3001\u81ea\u52a8\u5316\u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\uff0c\u4ee5\u6ee1\u8db3\u65e5\u76ca\u589e\u6da8\u7684\u5b9e\u65f6\u8ba1\u7b97\u9700\u6c42\u3002\\n\\n![](/blog/ziru/job_goes_online.png)\\n\\n### **02 \u4f5c\u4e1a\u5f52\u5c5e\u4fe1\u606f\u4e0d\u660e\u786e**\\n\\n\u7531\u4e8e\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u6ca1\u6709\u5bf9\u4f5c\u4e1a\u8fdb\u884c\u7edf\u4e00\u7ba1\u7406\uff0c\u4e1a\u52a1\u4ee3\u7801\u90fd\u662f\u7531 GitLab \u7ba1\u7406\uff0c\u867d\u7136\u89e3\u51b3\u4e86\u90e8\u5206\u95ee\u9898\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\u4ed3\u5e93\u4ee3\u7801\u4e0e\u7ebf\u4e0a\u90e8\u7f72\u7684 Flink \u4f5c\u4e1a\u7ba1\u7406\u4e4b\u95f4\u4ecd\u7136\u5b58\u5728\u7f3a\u9677\uff1a\u7f3a\u4e4f\u660e\u786e\u5f52\u5c5e\u3001\u7f3a\u5c11\u5206\u7ec4\u548c\u6709\u6548\u6743\u9650\u63a7\u5236\uff0c\u5bfc\u81f4\u4f5c\u4e1a\u7ba1\u7406\u6df7\u4e71\u4e14\u8d23\u4efb\u94fe\u8def\u96be\u4ee5\u8ffd\u6eaf\u3002\u4e3a\u786e\u4fdd\u4ee3\u7801\u548c\u4e0a\u7ebf\u4f5c\u4e1a\u7684\u4e00\u81f4\u548c\u53ef\u63a7\u6027\uff0c\u4e9f\u9700\u5efa\u7acb\u4e25\u683c\u4e14\u6e05\u6670\u7684\u4f5c\u4e1a\u7ba1\u7406\u4f53\u7cfb\uff0c\u5176\u4e2d\u5305\u62ec\u5b9e\u884c\u4e25\u683c\u7684\u4ee3\u7801\u7248\u672c\u63a7\u5236\u3001\u660e\u786e\u4f5c\u4e1a\u5f52\u5c5e\u548c\u8d1f\u8d23\u4eba\u3001\u4ee5\u53ca\u5efa\u7acb\u6709\u6548\u7684\u6743\u9650\u63a7\u5236\u3002\\n\\n### **03 \u4f5c\u4e1a\u7ef4\u62a4\u56f0\u96be**\\n\\n\u5728\u81ea\u5982\u6709\u591a\u4e2a\u4e0d\u540c\u7248\u672c\u7684 Flink \u4f5c\u4e1a\u5728\u8fd0\u884c\uff0c\u7531\u4e8e Apache Flink\xae \u7684 API \u5728\u5927\u7248\u672c\u5347\u7ea7\u4e2d\u7ecf\u5e38\u4f1a\u53d1\u751f\u53d8\u52a8\uff0c\u4e14\u4e0d\u4fdd\u8bc1\u5411\u4e0b\u517c\u5bb9\u6027\uff0c\u8fd9\u76f4\u63a5\u5bfc\u81f4\u6d41\u4f5c\u4e1a\u9879\u76ee\u4ee3\u7801\u7684\u5347\u7ea7\u6210\u672c\u53d8\u5f97\u5f88\u9ad8\u3002\u56e0\u6b64\u5982\u4f55\u7ba1\u7406\u8fd9\u4e9b\u4e0d\u540c\u7248\u672c\u7684\u4f5c\u4e1a\u6210\u4e86\u5934\u75db\u7684\u95ee\u9898\u3002\\n\\n\u7531\u4e8e\u6ca1\u6709\u7edf\u4e00\u7684\u4f5c\u4e1a\u5e73\u53f0\uff0c\u8fd9\u4e9b\u4f5c\u4e1a\u5728\u63d0\u4ea4\u65f6\uff0c\u53ea\u80fd\u901a\u8fc7\u6267\u884c\u811a\u672c\u7684\u5f62\u5f0f\u8fdb\u884c\u63d0\u4ea4\u3002\u4e0d\u540c\u7684\u4f5c\u4e1a\u6709\u4e0d\u540c\u91cd\u8981\u7a0b\u5ea6\u548c\u6570\u636e\u91cf\u7ea7\uff0c\u4f5c\u4e1a\u6240\u9700\u8d44\u6e90\u548c\u8fd0\u884c\u53c2\u6570\u4e5f\u90fd\u5404\u4e0d\u76f8\u540c\uff0c\u90fd\u9700\u8981\u76f8\u5e94\u7684\u4fee\u6539\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u63d0\u4ea4\u811a\u672c\u6216\u76f4\u63a5\u5728\u4ee3\u7801\u4e2d\u8bbe\u7f6e\u53c2\u6570\u6765\u8fdb\u884c\u4fee\u6539\uff0c\u4f46\u8fd9\u4f7f\u5f97\u914d\u7f6e\u4fe1\u606f\u7684\u83b7\u53d6\u53d8\u5f97\u56f0\u96be\uff0c\u5c24\u5176\u662f\u5f53\u4f5c\u4e1a\u51fa\u73b0\u91cd\u542f\u6216\u5931\u8d25\u65f6\uff0cFlinkUI \u65e0\u6cd5\u6253\u5f00\uff0c\u914d\u7f6e\u4fe1\u606f\u53d8\u6210\u4e00\u4e2a\u9ed1\u76d2\u3002\u56e0\u6b64\uff0c\u4e9f\u9700\u5efa\u7acb\u4e00\u4e2a\u66f4\u52a0\u9ad8\u6548\u3001\u652f\u6301\u914d\u7f6e\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u3002\\n\\n### **04 \u4f5c\u4e1a\u5f00\u53d1\u8c03\u8bd5\u56f0\u96be**\\n\\n\u5728\u4ee5\u5f80\u7684\u5f00\u53d1\u6d41\u7a0b\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u5728\u672c\u5730\u7684 IDEA \u73af\u5883\u4e2d\uff0c\u901a\u8fc7\u5c06 SQL \u4ee3\u7801\u5d4c\u5165\u7a0b\u5e8f\u4ee3\u7801\u7684\u65b9\u5f0f\u8fdb\u884c\u4f5c\u4e1a\u7684\u5f00\u53d1\u548c\u8c03\u8bd5\uff0c\u4ee5\u9a8c\u8bc1\u7a0b\u5e8f\u7684\u6b63\u786e\u6027\u3002\u7136\u800c\uff0c\u8fd9\u79cd\u65b9\u5f0f\u5b58\u5728\u5982\u4e0b\u5f0a\u7aef\uff1a\\n\\n1.\u591a\u6570\u636e\u6e90\u8c03\u8bd5\u56f0\u96be\u3002\u901a\u5e38\uff0c\u4e00\u4e2a\u9700\u6c42\u53ef\u80fd\u6d89\u53ca\u591a\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u6e90\u3002\u4e3a\u4e86\u5728\u672c\u5730\u73af\u5883\u8c03\u8bd5\uff0c\u5f00\u53d1\u4eba\u5458\u9700\u8981\u7533\u8bf7\u5f00\u901a\u6570\u636e\u8bbf\u95ee\u9700\u8981\u7684\u767d\u540d\u5355\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u65e2\u8017\u65f6\u53c8\u7e41\u7410\u3002\\n\\n2.SQL \u4ee3\u7801\u96be\u4ee5\u9605\u8bfb\u548c\u4fee\u6539\u3002\u7531\u4e8e SQL \u4ee3\u7801\u662f\u5d4c\u5165\u5728\u7a0b\u5e8f\u4ee3\u7801\u4e2d\u7684\uff0c\u8fd9\u4f7f\u5f97\u4ee3\u7801\u96be\u4ee5\u9605\u8bfb\uff0c\u4fee\u6539\u8d77\u6765\u4e5f\u76f8\u5f53\u4e0d\u4fbf\u3002\u66f4\u4e3a\u56f0\u96be\u7684\u662f\uff0c\u5f53\u9700\u8981\u901a\u8fc7 SQL \u7247\u6bb5\u7684\u65b9\u5f0f\u8fdb\u884c\u8c03\u8bd5\u65f6\uff0c\u7531\u4e8e\u7f3a\u5c11 SQL \u7248\u672c\u7ba1\u7406\u548c\u8bed\u6cd5\u6821\u9a8c\u7684\u652f\u6301\uff0c\u5f00\u53d1\u4eba\u5458\u5f88\u96be\u901a\u8fc7\u5ba2\u6237\u7aef\u65e5\u5fd7\u5b9a\u4f4d\u5230\u5177\u4f53\u7684 SQL \u884c\u53f7\uff0c\u4ece\u800c\u627e\u51fa\u6267\u884c\u5931\u8d25\u7684\u539f\u56e0\u3002\\n\\n\u56e0\u6b64\uff0c\u6025\u9700\u63d0\u9ad8\u5f00\u53d1\u3001\u8c03\u8bd5\u7684\u6548\u7387\\n\\n## **\u5bfb\u6c42\u89e3\u51b3\u65b9\u6848\u4e4b\u8def**\\n\\n\u5728\u5e73\u53f0\u6784\u5efa\u7684\u521d\u671f\u9636\u6bb5\uff0c2022 \u5e74\u521d\u5f00\u59cb\u6211\u4eec\u5c31\u5168\u9762\u8c03\u67e5\u4e86\u884c\u4e1a\u5185\u7684\u51e0\u4e4e\u6240\u6709\u76f8\u5173\u9879\u76ee\uff0c\u6db5\u76d6\u4e86\u5546\u4e1a\u4ed8\u8d39\u7248\u548c\u5f00\u6e90\u7248\u3002\u7ecf\u8fc7\u8c03\u67e5\u548c\u5bf9\u6bd4\u53d1\u73b0\uff0c\u8fd9\u4e9b\u9879\u76ee\u90fd\u6216\u591a\u6216\u5c11\u5730\u5b58\u5728\u4e00\u5b9a\u7684\u5c40\u9650\u6027\uff0c\u53ef\u7528\u6027\u548c\u7a33\u5b9a\u6027\u4e5f\u65e0\u6cd5\u6709\u6548\u5730\u4fdd\u969c\u3002\\n\\n\u7efc\u5408\u4e0b\u6765 StreamPark \u5728\u6211\u4eec\u7684\u8bc4\u4f30\u4e2d\u8868\u73b0\u6700\u4f18\uff0c\u662f\u552f\u4e00\u4e00\u4e2a\u6ca1\u6709\u786c\u4f24\u4e14\u6269\u5c55\u6027\u5f88\u5f3a\u7684\u9879\u76ee\uff1a\u540c\u65f6\u652f\u6301 SQL \u548c JAR \u4f5c\u4e1a\uff0c\u5728 Flink \u4f5c\u4e1a\u7684\u90e8\u7f72\u6a21\u5f0f\u4e0a\u4e5f\u662f\u6700\u4e3a\u5b8c\u5584\u548c\u7a33\u5b9a\u7684\uff0c\u7279\u6709\u7684\u67b6\u6784\u8bbe\u8ba1\u4f7f\u5f97\u4e0d\u4ec5\u4e0d\u4f1a\u9501\u5b9a Flink \u7248\u672c\uff0c\u8fd8\u652f\u6301\u4fbf\u6377\u7684\u7248\u672c\u5207\u6362\u548c\u5e76\u884c\u5904\u7406\uff0c\u6709\u6548\u89e3\u51b3\u4e86\u4f5c\u4e1a\u4f9d\u8d56\u9694\u79bb\u548c\u51b2\u7a81\u7684\u95ee\u9898\u3002\u6211\u4eec\u91cd\u70b9\u5173\u6ce8\u7684\u4f5c\u4e1a\u7ba1\u7406 & \u8fd0\u7ef4\u80fd\u529b\u4e5f\u975e\u5e38\u5b8c\u5584\uff0c\u5305\u62ec\u76d1\u63a7\u3001\u544a\u8b66\u3001SQL \u6821\u9a8c\u3001SQL \u7248\u672c\u5bf9\u6bd4\u3001CI \u7b49\u529f\u80fd\uff0cStreamPark \u5bf9 Flink on K8s \u7684\u652f\u6301\u4e5f\u662f\u6211\u4eec\u8c03\u7814\u7684\u6240\u6709\u5f00\u6e90\u9879\u76ee\u4e2d\u6700\u4e3a\u5b8c\u5584\u7684\u3002\u4f46 StreamPark \u7684 K8s \u6a21\u5f0f\u63d0\u4ea4\u9700\u5728\u672c\u5730\u6784\u5efa\u955c\u50cf\u5bfc\u81f4\u5b58\u50a8\u8d44\u6e90\u6d88\u8017\u3002\\n\\n\u76ee\u524d\u5728\u6700\u65b0\u7684 2.2 \u7248\u672c\u4e2d\u793e\u533a\u5df2\u7ecf\u91cd\u6784\u4e86\u8fd9\u90e8\u5206\u5b9e\u73b0\\n\\n\u5728\u6df1\u5165\u5206\u6790\u4e86\u4f17\u591a\u5f00\u6e90\u9879\u76ee\u7684\u4f18\u7f3a\u70b9\u540e\uff0c\u6211\u4eec\u8ba4\u4e3a\u53ef\u4ee5\u5148\u53bb\u53c2\u4e0e\u4e86\u89e3\u90a3\u4e9b\u62e5\u6709\u4f18\u79c0\u7684\u67b6\u6784\u3001\u5145\u6ee1\u53d1\u5c55\u6f5c\u529b\uff0c\u5e76\u4e14\u6838\u5fc3\u56e2\u961f\u79ef\u6781\u52aa\u529b\u7684\u9879\u76ee\uff0c\u6295\u8eab\u5176\u4e2d\u3002\u57fa\u4e8e\u8fd9\u6837\u7684\u8ba4\u8bc6\uff0c\u6211\u4eec\u505a\u51fa\u4e86\u5982\u4e0b\u51b3\u7b56\uff1a\\n\\n1.\u5728\u4f5c\u4e1a\u90e8\u7f72\u6a21\u5f0f\u4e0a\uff0c\u6211\u4eec\u51b3\u5b9a\u91c7\u7528 On Kubernetes \u7684\u6a21\u5f0f\u3002\u5b9e\u65f6\u4f5c\u4e1a\u7684\u8d44\u6e90\u6d88\u8017\u5177\u6709\u52a8\u6001\u6027\uff0c\u5bf9 Kubernetes \u63d0\u4f9b\u7684\u5f39\u6027\u6269\u7f29\u5bb9\u6709\u5f3a\u70c8\u7684\u9700\u6c42\uff0c\u8fd9\u6709\u52a9\u4e8e\u6211\u4eec\u66f4\u597d\u5730\u5e94\u5bf9\u6570\u636e\u4ea7\u51fa\u7684\u6ce2\u52a8\uff0c\u786e\u4fdd\u4f5c\u4e1a\u7684\u7a33\u5b9a\u8fd0\u884c\u3002\\n\\n2.\u5728\u5f00\u6e90\u7ec4\u4ef6\u7684\u9009\u62e9\u4e0a\uff0c\u6211\u4eec\u7ecf\u8fc7\u5404\u9879\u6307\u6807\u7efc\u5408\u5bf9\u6bd4\u8bc4\u4f30\uff0c\u6700\u7ec8\u9009\u62e9\u4e86\u5f53\u65f6\u7684 StreamX\u3002\u540e\u7eed\u548c\u793e\u533a\u4fdd\u6301\u5bc6\u5207\u7684\u6c9f\u901a\uff0c\u5728\u6b64\u8fc7\u7a0b\u4e2d\u6df1\u523b\u611f\u53d7\u5230\u521b\u59cb\u4eba\u8ba4\u771f\u8d1f\u8d23\u7684\u6001\u5ea6\u548c\u793e\u533a\u7684\u56e2\u7ed3\u53cb\u5584\u7684\u6c1b\u56f4\uff0c\u4e5f\u89c1\u8bc1\u4e86\u9879\u76ee 2022 \u5e74 09 \u6708\u52a0\u5165 Apache \u5b75\u5316\u5668\u7684\u8fc7\u7a0b\uff0c\u8fd9\u8ba9\u6211\u4eec\u5bf9\u8be5\u9879\u76ee\u7684\u672a\u6765\u5145\u6ee1\u5e0c\u671b\u3002\\n\\n3.\u5728 StreamPark \u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u8981\u63a8\u52a8\u4e0e\u516c\u53f8\u5df2\u6709\u751f\u6001\u7684\u6574\u5408\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u6ee1\u8db3\u6211\u4eec\u7684\u4e1a\u52a1\u9700\u6c42\u3002\\n\\n## **\u57fa\u4e8e Apache StreamPark\u2122 \u7684\u6df1\u5ea6\u5b9e\u8df5** \\n\\n\u57fa\u4e8e\u4e0a\u8ff0\u51b3\u7b56\uff0c\u6211\u4eec\u542f\u52a8\u4e86\u4ee5 \u201c\u75db\u70b9\u9700\u6c42\u201d \u4e3a\u5bfc\u5411\u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u6f14\u8fdb\u5de5\u4f5c\uff0c\u57fa\u4e8eStremaPark \u6253\u9020\u4e00\u4e2a\u7a33\u5b9a\u3001\u9ad8\u6548\u3001\u6613\u7ef4\u62a4\u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u3002\u4ece 2022 \u5e74\u521d\u5f00\u59cb\u6211\u4eec\u4fbf\u53c2\u4e0e\u793e\u533a\u7684\u5efa\u8bbe\uff0c\u540c\u65f6\u6211\u4eec\u5185\u90e8\u5e73\u53f0\u5efa\u8bbe\u4e5f\u6b63\u5f0f\u63d0\u4e0a\u65e5\u7a0b\u3002\\n\\n\u9996\u5148\u6211\u4eec\u5728 StreamPark \u7684\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u5b8c\u5584\u76f8\u5173\u7684\u529f\u80fd\uff1a\\n\\n![](/blog/ziru/platform_construction.png)\\n\\n### **01 LDAP \u767b\u5f55\u652f\u6301**\\n\\n\u5728 StreamPark \u7684\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u8fdb\u4e00\u6b65\u5b8c\u5584\u4e86\u76f8\u5173\u7684\u529f\u80fd\uff0c\u5176\u4e2d\u5305\u62ec\u5bf9 LDAP \u7684\u652f\u6301\uff0c\u4ee5\u4fbf\u6211\u4eec\u672a\u6765\u53ef\u4ee5\u5b8c\u5168\u5f00\u653e\u5b9e\u65f6\u80fd\u529b\uff0c\u8ba9\u516c\u53f8\u7684\u56db\u4e2a\u4e1a\u52a1\u7ebf\u6240\u5c5e\u7684\u5206\u6790\u5e08\u80fd\u591f\u4f7f\u7528\u8be5\u5e73\u53f0\uff0c\u9884\u8ba1\u5c4a\u65f6\u4eba\u6570\u5c06\u8fbe\u5230 170 \u4eba\u5de6\u53f3\u3002\u968f\u7740\u4eba\u6570\u7684\u589e\u52a0\uff0c\u8d26\u53f7\u7684\u7ba1\u7406\u53d8\u5f97\u8d8a\u53d1\u91cd\u8981\uff0c\u7279\u522b\u662f\u5728\u4eba\u5458\u53d8\u52a8\u65f6\uff0c\u8d26\u53f7\u7684\u6ce8\u9500\u548c\u7533\u8bf7\u5c06\u6210\u4e3a\u4e00\u9879\u9891\u7e41\u4e14\u8017\u65f6\u7684\u64cd\u4f5c\u3002\u6240\u4ee5\uff0c\u63a5\u5165 LDAP \u53d8\u5f97\u5c24\u4e3a\u91cd\u8981\u3002\u56e0\u6b64\u6211\u4eec\u53ca\u65f6\u548c\u793e\u533a\u6c9f\u901a\uff0c\u5e76\u4e14\u53d1\u8d77\u8ba8\u8bba\uff0c\u6700\u7ec8\u6211\u4eec\u8d21\u732e\u4e86\u8be5 Feature\u3002\u73b0\u5728\u5728 StreamPark \u5f00\u542f LDAP \u5df2\u7ecf\u53d8\u5f97\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u7b80\u5355\u4e24\u6b65\u5373\u53ef\uff1a\\n\\n#### step1: \u586b\u5199\u5bf9\u5e94\u7684 LDAP \u914d\u7f6e:\\n\\n\u7f16\u8f91 application.yml \u6587\u4ef6\uff0c\u8bbe\u7f6e LDAP \u57fa\u7840\u4fe1\u606f\uff0c\u5982\u4e0b\uff1a\\n\\n```yaml\\n\\nldap:\\n  # Is ldap enabled?\\n  enable: false\\n  ## AD server IP, default port 389\\n  urls: ldap://99.99.99.99:389\\n  ## Login Account\\n  base-dn: dc=streampark,dc=com\\n  username: cn=Manager,dc=streampark,dc=com\\n  password: streampark\\n  user:\\n    identity-attribute: uid\\n    email-attribute: mail\\n\\n```\\n\\n#### step2:  LDAP \u767b\u9646\\n\\n\u767b\u5f55\u754c\u9762\u70b9\u51fb LDAP \u65b9\u5f0f\u767b\u5f55\uff0c\u7136\u540e\u8f93\u5165\u5bf9\u5e94\u7684\u8d26\u53f7\u5bc6\u7801\uff0c\u70b9\u51fb\u767b\u5f55\u5373\u53ef\\n\\n![](/blog/ziru/ldap.png)\\n\\n### **02 \u63d0\u4ea4\u4f5c\u4e1a\u81ea\u52a8\u751f\u6210 Ingress**\\n\\n\u7531\u4e8e\u516c\u53f8\u7684\u7f51\u7edc\u5b89\u5168\u653f\u7b56\uff0c\u8fd0\u7ef4\u4eba\u5458\u5728 Kubernetes \u7684\u5bbf\u4e3b\u673a\u4e0a\u4ec5\u5f00\u653e\u4e86 80 \u7aef\u53e3\uff0c\u8fd9\u5bfc\u81f4\u6211\u4eec\u65e0\u6cd5\u76f4\u63a5\u901a\u8fc7 \u201c\u57df\u540d+\u968f\u673a\u7aef\u53e3\u201d \u7684\u65b9\u5f0f\u8bbf\u95ee\u5728 Kubernetes \u4e0a\u7684\u4f5c\u4e1a WebUI\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528Ingress\u5728\u8bbf\u95ee\u8def\u5f84\u4e0a\u589e\u52a0\u4e00\u5c42\u4ee3\u7406\uff0c\u4ece\u800c\u542f\u5230\u8bbf\u95ee\u8def\u7531\u7684\u6548\u679c\u3002\u5728 StreamPark 2.0 \u7248\u672c\u6211\u4eec\u8d21\u732e\u4e86 Ingress \u76f8\u5173\u7684\u529f\u80fd[3]\u3002\u91c7\u7528\u4e86\u7b56\u7565\u6a21\u5f0f\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u5728\u521d\u59cb\u6784\u5efa\u9636\u6bb5\uff0c\u83b7\u53d6 Kubernetes \u7684\u5143\u6570\u636e\u4fe1\u606f\u6765\u8bc6\u522b\u5176\u7248\u672c\uff0c\u9488\u5bf9\u4e0d\u540c\u7248\u672c\u6765\u8fdb\u884c\u76f8\u5e94\u7684\u5bf9\u8c61\u6784\u5efa\uff0c\u786e\u4fdd\u4e86\u5728\u5404\u79cd Kubernetes \u73af\u5883\u4e2d\u90fd\u80fd\u591f\u987a\u5229\u5730\u4f7f\u7528 Ingress \u529f\u80fd\u3002\\n\\n\u5177\u4f53\u7684\u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a\\n\\n#### step1: \u70b9\u51fb\u8fdb\u5165 Setting-> \u9009\u62e9 Ingress Setting\uff0c\u586b\u5199\u57df\u540d\\n\\n![](/blog/ziru/ingress_setting.png)\\n\\n#### step2: \u63d0\u4ea4\u4f5c\u4e1a\\n\\n![](/blog/ziru/k8s_job.png)\\n\\n\u70b9\u51fb\u8fdb\u5165 K8s \u7ba1\u7406\u5e73\u53f0\uff0c\u53ef\u4ee5\u89c2\u5bdf\u5230\u5728\u63d0\u4ea4 Flink \u4f5c\u4e1a\u7684\u540c\u65f6\u4f1a\u5bf9\u5e94\u63d0\u4ea4\u4e00\u4e2a\u540d\u79f0\u76f8\u540c\u7684 Ingress\\n\\n#### step3: \u70b9\u51fb\u8fdb\u5165 Flink \u7684 WebUI\\n\\n\u53ef\u4ee5\u89c2\u5bdf\u5230\u751f\u6210\u7684\u5730\u5740\u5c06\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u57df\u540d + \u4f5c\u4e1a\u63d0\u4ea4\u7684\u547d\u540d\u7a7a\u95f4 + \u4f5c\u4e1a\u540d\u79f0\\n\\n![](/blog/ziru/flink_webui.png)\\n\\n### **03 \u652f\u6301\u67e5\u770b\u4f5c\u4e1a\u90e8\u7f72\u65e5\u5fd7**\\n\\n\u5728\u6301\u7eed\u90e8\u7f72\u4f5c\u4e1a\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u9010\u6e10\u610f\u8bc6\u5230\uff0c\u6ca1\u6709\u65e5\u5fd7\u5c31\u65e0\u6cd5\u8fdb\u884c\u6709\u6548\u7684\u8fd0\u7ef4\u64cd\u4f5c\uff0c\u65e5\u5fd7\u7684\u7559\u5b58\u5f52\u6863\u548c\u67e5\u770b\u6210\u4e3a\u4e86\u6211\u4eec\u5728\u540e\u671f\u6392\u67e5\u95ee\u9898\u65f6\u975e\u5e38\u91cd\u8981\u7684\u4e00\u73af\u3002\u56e0\u6b64\u5728 StreamPark 2.0 \u7248\u672c\u6211\u4eec\u8d21\u732e\u4e86 On Kubernetes \u6a21\u5f0f\u4e0b\u542f\u52a8\u65e5\u5fd7\u5b58\u6863\u3001\u9875\u9762\u67e5\u770b\u7684\u80fd\u529b[4]\uff0c\u73b0\u5728\u70b9\u51fb\u4f5c\u4e1a\u5217\u8868\u91cc\u7684\u65e5\u5fd7\u67e5\u770b\u6309\u94ae\uff0c\u53ef\u4ee5\u5f88\u65b9\u4fbf\u7684\u67e5\u770b\u4f5c\u4e1a\u7684\u5b9e\u65f6\u65e5\u5fd7\u3002\\n\\n![](/blog/ziru/k8s_log.png)\\n\\n### **04 \u96c6\u6210 Grafana \u76d1\u63a7\u56fe\u8868\u94fe\u63a5**\\n\\n\u5728\u5b9e\u9645\u7684\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u53d1\u73b0\u968f\u7740\u4f5c\u4e1a\u6570\u91cf\u7684\u589e\u52a0\uff0c\u4f7f\u7528\u4eba\u6570\u7684\u4e0a\u5347\uff0c\u4ee5\u53ca\u6d89\u53ca\u7684\u90e8\u95e8\u7684\u589e\u591a\uff0c\u9762\u4e34\u6545\u969c\u81ea\u6392\u67e5\u56f0\u96be\u7684\u95ee\u9898\u3002\u6211\u4eec\u56e2\u961f\u7684\u8fd0\u7ef4\u80fd\u529b\u5b9e\u9645\u4e0a\u662f\u975e\u5e38\u6709\u9650\u7684\u3002\u7531\u4e8e\u4e13\u4e1a\u9886\u57df\u7684\u4e0d\u540c\uff0c\u5f53\u6211\u4eec\u544a\u8bc9\u7528\u6237\u53bb Grafana\u3001ELK \u4e0a\u67e5\u770b\u56fe\u8868\u548c\u65e5\u5fd7\u65f6\uff0c\u7528\u6237\u901a\u5e38\u4f1a\u611f\u5230\u65e0\u4ece\u4e0b\u624b\uff0c\u4e0d\u77e5\u9053\u5982\u4f55\u53bb\u627e\u5230\u4e0e\u81ea\u5df1\u4f5c\u4e1a\u76f8\u5173\u7684\u4fe1\u606f\u3002\\n\\n\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5728\u793e\u533a\u63d0\u51fa\u4e00\u4e2a\u9700\u6c42\uff1a\u5e0c\u671b\u6bcf\u4e2a\u4f5c\u4e1a\u90fd\u80fd\u591f\u901a\u8fc7\u8d85\u94fe\u63a5\u76f4\u63a5\u8df3\u8f6c\u5230\u5bf9\u5e94\u7684\u76d1\u63a7\u56fe\u8868\u548c\u65e5\u5fd7\u5f52\u6863\u9875\u9762\uff0c\u8fd9\u6837\u4f7f\u7528\u8005\u5c31\u53ef\u4ee5\u76f4\u63a5\u67e5\u770b\u4e0e\u81ea\u5df1\u4f5c\u4e1a\u76f8\u5173\u7684\u76d1\u63a7\u4fe1\u606f\u548c\u65e5\u5fd7\u3002\u65e0\u9700\u5728\u590d\u6742\u7684\u7cfb\u7edf\u754c\u9762\u4e2d\u8fdb\u884c\u7e41\u7410\u7684\u641c\u7d22\uff0c\u4ece\u800c\u63d0\u9ad8\u6545\u969c\u6392\u67e5\u7684\u6548\u7387\u3002\\n\\n\u6211\u4eec\u5728\u793e\u533a\u5c55\u5f00\u4e86\u8ba8\u8bba\u3001\u5e76\u5f88\u5feb\u5f97\u5230\u54cd\u5e94\u3001\u5927\u5bb6\u90fd\u8ba4\u4e3a\u8fd9\u662f\u4e00\u4e2a\u666e\u904d\u5b58\u5728\u7684\u9700\u6c42\u3001\u56e0\u6b64\u5f88\u5feb\u6709\u5f00\u53d1\u5c0f\u4f19\u4f34\u63d0\u4ea4\u4e86\u8bbe\u8ba1\u548c\u76f8\u5173PR\uff0c\u8be5\u95ee\u9898\u4e5f\u5f88\u5feb\u88ab\u89e3\u51b3\uff0c\u73b0\u5728\u5728 StreamPark \u4e2d\u8981\u5f00\u542f\u8be5\u529f\u80fd\u5df2\u7ecf\u53d8\u5f97\u975e\u5e38\u7b80\u5355:\\n\\n#### step1: \u521b\u5efa\u5fbd\u7ae0\u6807\u7b7e\\n\\n![](/blog/ziru/create_badge_label.png)\\n\\n#### step2: \u5c06\u5fbd\u7ae0\u6807\u7b7e\u548c\u8df3\u8f6c\u94fe\u63a5\u8fdb\u884c\u5173\u8054\\n\\n![](/blog/ziru/relevancy.png)\\n\\n#### step3: \u70b9\u51fb\u5fbd\u7ae0\u6807\u7b7e\u8fdb\u884c\u94fe\u63a5\u8df3\u8f6c\\n\\n![](/blog/ziru/link_jump.png)\\n\\n### **05 \u96c6\u6210 Flink sql security \u6743\u9650\u63a7\u5236**\\n\\n\u5728\u6211\u4eec\u7684\u7cfb\u7edf\u4e2d\uff0c\u8840\u7f18\u5173\u7cfb\u7ba1\u7406\u91c7\u7528 Apache Atlas\uff0c\u6743\u9650\u7ba1\u7406\u57fa\u4e8e\u5f00\u6e90\u9879\u76ee Flink-sql-security\uff0c\u8fd9\u662f\u4e00\u4e2aFlinkSQL\u6570\u636e\u8131\u654f\u548c\u884c\u7ea7\u6743\u9650\u89e3\u51b3\u65b9\u6848\u7684\u5f00\u6e90\u9879\u76ee\uff0c\u652f\u6301\u9762\u5411\u7528\u6237\u7ea7\u522b\u7684\u6570\u636e\u8131\u654f\u548c\u884c\u7ea7\u6570\u636e\u8bbf\u95ee\u63a7\u5236\uff0c\u5373\u7279\u5b9a\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u5230\u8131\u654f\u540e\u7684\u6570\u636e\u6216\u6388\u6743\u8fc7\u7684\u884c\u3002\\n\\n\u8fd9\u79cd\u8bbe\u8ba1\u662f\u4e3a\u4e86\u5904\u7406\u4e00\u4e9b\u590d\u6742\u7684\u7ee7\u627f\u903b\u8f91\u3002\u4f8b\u5982\uff0c\u5f53\u5c06\u52a0\u5bc6\u5b57\u6bb5 age \u7684A \u8868\u4e0e B \u8868\u8fdb\u884c join \u64cd\u4f5c\uff0c\u5f97\u5230 C \u8868\u65f6\uff0cC \u8868\u4e2d\u7684 age \u5b57\u6bb5\u5e94\u7ee7\u627f A \u8868\u7684\u52a0\u5bc6\u903b\u8f91\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u7684\u52a0\u5bc6\u72b6\u6001\u4e0d\u4f1a\u56e0\u6570\u636e\u5904\u7406\u8fc7\u7a0b\u4e2d\u7684\u8f6c\u6362\u800c\u5931\u6548\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u66f4\u597d\u5730\u4fdd\u62a4\u6570\u636e\u7684\u5b89\u5168\u6027\uff0c\u786e\u4fdd\u6570\u636e\u5728\u6574\u4e2a\u5904\u7406\u8fc7\u7a0b\u4e2d\u90fd\u7b26\u5408\u5b89\u5168\u6807\u51c6\u3002\\n\\n\u5728\u6743\u9650\u63a7\u5236\u65b9\u9762\uff0c\u6211\u4eec\u57fa\u4e8e Flink-sql-security \u505a\u4e86\u4e8c\u6b21\u5f00\u53d1\uff0c\u5b9e\u73b0\u4e86 flink-sql-security-streampark \u63d2\u4ef6\u3002\u57fa\u672c\u7684\u5b9e\u73b0\u601d\u8def\u5982\u4e0b\uff1a\\n\\n1.\u5728\u68c0\u67e5\u63d0\u4ea4\u65f6\u7cfb\u7edf\u4f1a\u89e3\u6790\u4f20\u5165\u7684 SQL\uff0c\u83b7\u53d6 InputTable \u548c OutputTable \u4e24\u4e2a\u6570\u636e\u96c6\u3002\\n\\n2.\u7cfb\u7edf\u901a\u8fc7\u5bf9\u8fdc\u7aef\u6743\u9650\u670d\u52a1\u7684\u67e5\u8be2\uff0c\u83b7\u53d6\u5230\u7528\u6237\u6240\u7ed1\u5b9a\u7684 RBAC\uff08\u57fa\u4e8e\u89d2\u8272\u7684\u8bbf\u95ee\u63a7\u5236\uff09\u6743\u9650\u3002\\n\\n3.\u6839\u636e\u83b7\u53d6\u5230\u7684 RBAC \u6743\u9650\uff0c\u7cfb\u7edf\u4f1a\u5f97\u5230\u5bf9\u5e94\u7684\u8868\u7684\u52a0\u5bc6\u89c4\u5219\u3002\\n\\n4.\u7cfb\u7edf\u5c06\u901a\u8fc7\u91cd\u5199 SQL\uff0c\u5c06\u539f\u672c SQL \u67e5\u8be2\u5b57\u6bb5\u5305\u4e0a\u4e00\u5c42\u9884\u8bbe\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u8fdb\u800c\u5b9e\u73b0\u903b\u8f91\u7684\u91cd\u7ec4\u3002\\n\\n5.\u6700\u540e\uff0c\u7cfb\u7edf\u4f1a\u6839\u636e\u91cd\u7ec4\u540e\u7684\u903b\u8f91\uff0c\u8fdb\u884c\u76f8\u5e94\u7684\u63d0\u4ea4\u3002\\n\\n\u901a\u8fc7\u8fd9\u6837\u7684\u6574\u5408\u548c\u63d2\u4ef6\u7684\u5f00\u53d1\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u5bf9\u7528\u6237\u67e5\u8be2\u8bf7\u6c42\u7684\u6743\u9650\u63a7\u5236\uff0c\u4ece\u800c\u786e\u4fdd\u4e86\u6570\u636e\u7684\u5b89\u5168\u6027\u3002\\n\\n**01\u884c\u7ea7\u6743\u9650\u6761\u4ef6**\\n\\n![](/blog/ziru/row_level_permissions.png)\\n\\n![](/blog/ziru/row_level_permissions_table.png)\\n\\n\u8f93\u5165 SQL\\n\\n```shell\\nSELECT * FROM orders;\u6267\u884cSQL\\n```\\n\u7528\u6237 A \u7684\u771f\u5b9e\u6267\u884c SQL:\\n```shell\\nSELECT * FROM orders WHERE region = 'beijing';\\n```\\n\u7528\u6237 B \u7684\u771f\u5b9e\u6267\u884c SQL:\\n```shell\\nSELECT * FROM orders WHERE region = 'hangzhou';\\n```\\n\\n**02\u5b57\u6bb5\u8131\u654f\u6761\u4ef6**\\n\\n![](/blog/ziru/field_desensitization.png)\\n\\n![](/blog/ziru/field_desensitization_table.png)\\n\\n\u8f93\u5165 SQL\\n```shell\\nSELECT name, age, price, phone FROM user;\\n```\\n\u6267\u884c SQL:\\n\\n\u7528\u6237 A \u7684\u771f\u5b9e\u6267\u884c SQL:\\n```shell\\nSELECT Encryption_function(name), age, price, Sensitive_field_functions(phone) FROM user;\\n```\\n\u7528\u6237 B \u7684\u771f\u5b9e\u6267\u884c SQL:\\n```shell\\nSELECT name, Encryption_function(age), price, Sensitive_field_functions(phone) FROM user;\\n```\\n\\n### **06 \u57fa\u4e8e Apache StreamPark\u2122 \u7684\u6570\u636e\u540c\u6b65\u5e73\u53f0**\\n\\n\u968f\u7740 StreamPark \u7684\u6280\u672f\u89e3\u51b3\u65b9\u6848\u5728\u516c\u53f8\u7684\u6210\u529f\u843d\u5730\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u5bf9 Flink \u4f5c\u4e1a\u7684\u6df1\u5ea6\u652f\u6301\uff0c\u4ece\u800c\u4e3a\u6570\u636e\u5904\u7406\u5e26\u6765\u8d28\u7684\u98de\u8dc3\u3002\u8fd9\u4fc3\u4f7f\u6211\u4eec\u5bf9\u8fc7\u5f80\u7684\u6570\u636e\u540c\u6b65\u903b\u8f91\u8fdb\u884c\u5f7b\u5e95\u7684\u9769\u65b0\uff0c\u76ee\u6807\u662f\u901a\u8fc7\u6280\u672f\u7684\u4f18\u5316\u548c\u6574\u5408\uff0c\u6700\u5927\u9650\u5ea6\u5730\u964d\u4f4e\u8fd0\u7ef4\u6210\u672c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9010\u6b65\u66ff\u6362\u4e86\u5386\u53f2\u4e0a\u7684 Sqoop \u4f5c\u4e1a\u3001Canal \u4f5c\u4e1a\u548c Hive JDBC Handler \u4f5c\u4e1a\uff0c\u8f6c\u800c\u91c7\u7528 Flink CDC \u4f5c\u4e1a\u3001Flink \u6d41\u548c\u6279\u4f5c\u4e1a\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e5f\u4e0d\u65ad\u4f18\u5316\u548c\u5f3a\u5316 StreamPark \u7684\u63a5\u53e3\u80fd\u529b\uff0c\u65b0\u589e\u4e86\u72b6\u6001\u56de\u8c03\u673a\u5236\uff0c\u540c\u65f6\u5b9e\u73b0\u4e86\u4e0e DolphinScheduler[7] \u8c03\u5ea6\u7cfb\u7edf\u7684\u5b8c\u7f8e\u96c6\u6210\uff0c\u8fdb\u4e00\u6b65\u63d0\u5347\u4e86\u6211\u4eec\u7684\u6570\u636e\u5904\u7406\u80fd\u529b\u3002\\n\\n\u5916\u90e8\u7cfb\u7edf\u96c6\u6210 StreamPark \u6b65\u9aa4\u5982\u4e0b\uff0c\u53ea\u9700\u8981\u7b80\u5355\u51e0\u4e2a\u6b65\u9aa4\u5373\u53ef\uff1a\\n\\n1.\u9996\u5148\u521b\u5efa API \u8bbf\u95ee\u7684 Token\uff1a\\n\\n![](/blog/ziru/token.png)\\n\\n2.\u67e5\u770b Application \u5916\u90e8\u8c03\u7528\u94fe\u63a5\uff1a\\n\\n![](/blog/ziru/call_link.png)\\n\\n```shell\\ncurl -X POST '/flink/app/start' \\\\\\n-H 'Authorization: $token' \\\\\\n-H 'Content-Type: application/x-www-form-urlencoded; charset=UTF-8' \\\\\\n--data-urlencode 'savePoint=' \\\\\\n--data-urlencode 'allowNonRestored=false' \\\\\\n--data-urlencode 'savePointed=false' \\\\\\n--data-urlencode 'id=100501'\\n```\\n\\n3.DolphinScheduler \u4e2d\u914d\u7f6e Http \u8c03\u5ea6\\n\\n![](/blog/ziru/http_scheduling.png)\\n\\n## **\u5b9e\u8df5\u7ecf\u9a8c\u603b\u7ed3**\\n\\n\u5728\u6df1\u5ea6\u4f7f\u7528 StreamPark \u5b9e\u8df5\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u603b\u7ed3\u4e86\u4e00\u4e9b\u5e38\u89c1\u95ee\u9898\u548c\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\u6240\u63a2\u7d22\u51fa\u89e3\u51b3\u65b9\u6848\uff0c\u6211\u4eec\u628a\u8fd9\u4e9b\u6c47\u603b\u6210\u793a\u4f8b\uff0c\u4ec5\u4f9b\u5927\u5bb6\u53c2\u8003\u3002\\n\\n### **01 \u6784\u5efa Base \u955c\u50cf**\\n\\n\u8981\u4f7f\u7528 StreamPark \u5728 Kubernetes \u4e0a\u90e8\u7f72\u4e00\u4e2a Flink \u4f5c\u4e1a\uff0c\u9996\u5148\u8981\u51c6\u5907\u4e00\u4e2a\u57fa\u4e8e Flink \u6784\u5efa\u7684 Base \u955c\u50cf\u3002\u7136\u540e\uff0c\u5728 Kubernetes \u5e73\u53f0\u4e0a\uff0c\u4f1a\u4f7f\u7528\u7528\u6237\u6240\u63d0\u4f9b\u7684\u955c\u50cf\u6765\u542f\u52a8 Flink \u4f5c\u4e1a\u3002\u5982\u679c\u662f\u6cbf\u7528\u5b98\u65b9\u6240\u63d0\u4f9b\u7684 \u201c\u88f8\u955c\u50cf\u201d\uff0c\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\u662f\u8fdc\u8fdc\u4e0d\u591f\u7684\uff0c\u7528\u6237\u5f00\u53d1\u7684\u4e1a\u52a1\u903b\u8f91\u5f80\u5f80\u4f1a\u6d89\u53ca\u5230\u4e0a\u4e0b\u6e38\u591a\u4e2a\u6570\u636e\u6e90\uff0c\u8fd9\u5c31\u9700\u8981\u76f8\u5173\u6570\u636e\u6e90\u7684 Connector\uff0c\u4ee5\u53ca Hadoop \u7b49\u5173\u8054\u4f9d\u8d56\u3002\u56e0\u6b64\u9700\u8981\u5c06\u8fd9\u90e8\u5206\u4f9d\u8d56\u9879\u6253\u5165\u955c\u50cf\u4e2d\uff0c\u4e0b\u9762\u6211\u5c06\u4ecb\u7ecd\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4\u3002\\n\\n#### step1: \u9996\u5148\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u5185\u90e8\u5305\u542b\u4e24\u4e2a\u6587\u4ef6\u5939\u548c\u4e00\u4e2a Dockerfile \u6587\u4ef6\\n\\n![](/blog/ziru/dockerfile.png)\\n\\nconf \u6587\u4ef6\u5939\uff1a\u5b58\u653e HDFS \u914d\u7f6e\u6587\u4ef6\uff0c\u4e3b\u8981\u7528\u4e8e\u914d\u7f6e Flink \u7684 Checkpoint \u5199\u5165\u548cFlinkSQL \u4e2d\u4f7f\u7528 Hive \u7684\u5143\u6570\u636e\\n\\n![](/blog/ziru/hdfs_conf.png)\\n\\nlib \u6587\u4ef6\u5939\uff1a\u5b58\u653e\u6d89\u53ca\u5230\u7684 Jar \u4f9d\u8d56\u5305\uff0c\u5982\u4e0b\uff1a\\n\\n![](/blog/ziru/lib.png)\\n\\nDockerfile \u6587\u4ef6\u7528\u4e8e\u5b9a\u4e49\u955c\u50cf\u7684\u6784\u5efa\\n\\n```dockerfile\\nFROM apache/flink:1.14.5-scala_2.11-java8\\nENV TIME_ZONE=Asia/Shanghai\\nCOPY ./conf /opt/hadoop/conf\\nCOPY lib $FLINK_HOME/lib/\\n```\\n\\n#### step2: \u955c\u50cf\u6784\u5efa\u547d\u4ee4\u4f7f\u7528\u591a\u67b6\u6784\u6784\u5efa\u6a21\u5f0f\uff0c\u5982\u4e0b\uff1a\\n\\n```dockerfile\\ndocker buildx build --push --platform linux/amd64 -t ${\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\u5730\u5740}\\n```\\n\\n### **02 Base \u955c\u50cf\u96c6\u6210 Arthas \u793a\u4f8b**\\n\\n\u968f\u7740\u516c\u53f8\u5185\u65b0\u53d1\u5e03\u4e0a\u7ebf\u7684\u8fd0\u884c\u4f5c\u4e1a\u8d8a\u6765\u8d8a\u591a\uff0c\u56e2\u961f\u5185\u5e38\u5e38\u4f1a\u9047\u5230\u4f5c\u4e1a\u5728\u957f\u65f6\u95f4\u8fd0\u884c\u540e\u6027\u80fd\u4e0b\u964d\u7684\u8fd9\u79cd\u95ee\u9898\uff0c\u5982 Kafka \u6d88\u8d39\u80fd\u529b\u51cf\u5f31\u3001\u5185\u5b58\u4f7f\u7528\u589e\u52a0\u548c GC \u65f6\u95f4\u5ef6\u957f\u7b49\uff0c\u6211\u4eec\u662f\u6bd4\u8f83\u63a8\u8350\u4f7f\u7528Arthas\uff0c\u4e00\u6b3e\u963f\u91cc\u5df4\u5df4\u5f00\u6e90\u7684 Java \u8bca\u65ad\u5de5\u5177\u3002\u53ef\u4ee5\u901a\u8fc7\u5168\u5c40\u89c6\u89d2\u5b9e\u65f6\u67e5\u770bjava\u5e94\u7528 load\u3001\u5185\u5b58\u3001gc\u3001\u7ebf\u7a0b\u7684\u72b6\u6001\u4fe1\u606f\uff0c\u5e76\u80fd\u5728\u4e0d\u4fee\u6539\u5e94\u7528\u4ee3\u7801\u7684\u60c5\u51b5\u4e0b\uff0c\u5b8c\u6210\u67e5\u770b\u65b9\u6cd5\u8c03\u7528\u7684\u51fa\u5165\u53c2\u3001\u5f02\u5e38\uff0c\u76d1\u6d4b\u65b9\u6cd5\u6267\u884c\u8017\u65f6\uff0c\u7c7b\u52a0\u8f7d\u4fe1\u606f\u7b49\uff0c\u53ef\u4ee5\u5927\u5927\u63d0\u5347\u6211\u4eec\u7ebf\u4e0a\u95ee\u9898\u6392\u67e5\u6548\u7387\u3002\\n\\n![](/blog/ziru/arthas.png)\\n\\n![](/blog/ziru/advanced.png)\\n\\n![](/blog/ziru/arthas_log.png)\\n\\n\u56e0\u6b64\u505a\u4e86 base \u955c\u50cf\u96c6\u6210 arthas\uff0c\u6765\u65b9\u4fbf\u8fd0\u884c\u65f6\u95ee\u9898\u7684\u6392\u67e5\u3002\\n\\n```dockerfile\\nFROM apache/flink:1.14.5-scala_2.11-java8\\nENV TIME_ZONE=Asia/Shanghai\\nCOPY ./conf /opt/hadoop/conf\\nCOPY lib $FLINK_HOME/lib/\\nRUN apt-get update --fix-missing && apt-get install -y fontconfig --fix-missing && \\\\\\n    apt-get install -y openjdk-8-jdk && \\\\\\n    apt-get install -y ant && \\\\\\n    apt-get clean;\\n\\nRUN apt-get install sudo -y\\n\\n# Fix certificate issues\\nRUN apt-get update && \\\\\\n    apt-get install ca-certificates-java && \\\\\\n    apt-get clean && \\\\\\n    update-ca-certificates -f;\\n\\n# Setup JAVA_HOME -- useful for docker commandline\\nENV JAVA_HOME /usr/lib/jvm/java-8-openjdk-amd64/\\nRUN export JAVA_HOME\\nRUN apt-get install -y unzip\\nRUN curl -Lo arthas-packaging-latest-bin.zip  'https://arthas.aliyun.com/download/latest_version?mirror=aliyun'\\nRUN unzip -d arthas-latest-bin arthas-packaging-latest-bin.zip\\n```\\n\\n### **03 \u955c\u50cf\u4e2d\u4f9d\u8d56\u51b2\u7a81\u7684\u89e3\u51b3\u65b9\u5f0f**\\n\\n\u5728\u4f7f\u7528 StreamPark \u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5e38\u9047\u5230\u57fa\u4e8e Base \u955c\u50cf\u8fd0\u884c\u7684 Flink \u4f5c\u4e1a\u4e2d\u51fa\u73b0 NoClassDefFoundError\u3001ClassNotFoundException \u548c NoSuchMethodError \u8fd9\u4e09\u79cd\u4f9d\u8d56\u51b2\u7a81\u5f02\u5e38\u3002\u6392\u67e5\u601d\u8def\u5c31\u662f\uff0c\u627e\u5230\u62a5\u9519\u4e2d\u6240\u793a\u7684\u51b2\u7a81\u7c7b\uff0c\u6240\u5728\u7684\u5305\u8def\u5f84\u3002\u4f8b\u5982\u8fd9\u4e2a\u62a5\u9519\u7684\u7c7b\u5728 org.apache.orc:orc-core\uff0c \u5c31\u5230\u76f8\u5e94\u6a21\u5757\u7684\u76ee\u5f55\u4e0b\u8dd1 mvn dependency::tree \u7136\u540e\u641c orc-core\uff0c\u770b\u4e00\u4e0b\u662f\u8c01\u5e26\u8fdb\u6765\u7684\u4f9d\u8d56\uff0c\u7528 exclusion \u53bb\u6389\u5c31\u53ef\u4ee5\u4e86\u3002\u4e0b\u9762\u6211\u901a\u8fc7\u4e00\u4e2a base \u955c\u50cf\u4e2d\u7684 flink-shaded-hadoop-3-uber JAR \u5305\u5f15\u8d77\u7684\u4f9d\u8d56\u51b2\u7a81\u793a\u4f8b\uff0c\u6765\u8be6\u7ec6\u4ecb\u7ecd\u901a\u8fc7\u81ea\u5b9a\u4e49\u6253\u5305\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u4f9d\u8d56\u51b2\u7a81\u3002\\n\\n#### step1: Clone flink-shaded \u9879\u76ee\u5230\u672c\u5730\ud83d\udc47\\n\\n```shell\\ngit clone https://github.com/apache/flink-shaded.git\\n```\\n\\n![](/blog/ziru/flink_shaded.png)\\n\\n#### step2: \u9879\u76ee\u52a0\u8f7d\u5230 IDEA \u4e2d\\n\\n![](/blog/ziru/idea.png)\\n\\n#### step3: \u9488\u5bf9\u51b2\u7a81\u7684\u90e8\u5206\u8fdb\u884c\u6392\u9664\u540e\u518d\u8fdb\u884c\u6253\u5305\u3002\\n\\n### **04 \u96c6\u4e2d\u4f5c\u4e1a\u914d\u7f6e\u793a\u4f8b**\\n\\n\u4f7f\u7528 StreamPark \u6709\u4e2a\u975e\u5e38\u5927\u7684\u4fbf\u5229\u5c31\u662f\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e\u7684\u96c6\u4e2d\u7ba1\u7406\uff0c\u53ef\u4ee5\u5c06\u6240\u6709\u7684\u914d\u7f6e\u9879\uff0c\u914d\u7f6e\u5230\u5e73\u53f0\u6240\u7ed1\u5b9a\u7684 Flink \u76ee\u5f55\u4e0b\u7684 conf \u6587\u4ef6\u4e2d\u3002\\n\\n```shell\\ncd /flink-1.14.5/conf\\nvim flink-conf.yaml\\n```\\n\\n![](/blog/ziru/conf.png)\\n\\n\u914d\u7f6e\u5b8c\u6210\u540e\u4fdd\u5b58\u3002\u7136\u540e\u8fdb\u5165\u5230\u5e73\u53f0\u7684 Setting \u4e0b\uff0c\u70b9\u51fb Flink Conf \u8fd9\u4e2a\u56fe\u6807\u3002\\n\\n![](/blog/ziru/flink_conf.png)\\n\\n\u70b9\u51fb Sync Conf \u5168\u5c40\u914d\u7f6e\u6587\u4ef6\u5c31\u4f1a\u8fdb\u884c\u76f8\u5e94\u7684\u540c\u6b65\uff0c\u65b0\u63d0\u4ea4\u7684\u4f5c\u4e1a\u5c31\u4f1a\u6309\u7167\u65b0\u7684\u914d\u7f6e\u8fdb\u884c\u63d0\u4ea4\u3002\\n\\n![](/blog/ziru/sync_conf.png)\\n\\n### **05 Apache StreamPark\u2122 \u914d\u7f6e DNS \u89e3\u6790**\\n\\n\u5728\u4f7f\u7528 StreamPark \u5e73\u53f0\u63d0\u4ea4 FlinkSQL \u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e00\u4e2a\u6b63\u786e\u5408\u7406\u7684 DNS \u89e3\u6790\u914d\u7f6e\u975e\u5e38\u91cd\u8981\u3002\u4e3b\u8981\u6d89\u53ca\u5230\u4ee5\u4e0b\u51e0\u70b9\uff1a\\n\\n1.Flink \u4f5c\u4e1a\u7684 Checkpoint \u5199\u5165 HDFS \u9700\u8981\u901a\u8fc7 ResourceManager \u83b7\u53d6\u7684\u4e00\u4e2a HDFS \u8282\u70b9\u8fdb\u884c\u5feb\u7167\u5199\u5165\uff0c\u5982\u679c\u4f01\u4e1a\u4e2d\u540c\u65f6\u6709\u53d1\u751fHadoop\u96c6\u7fa4\u7684\u6269\u5bb9\uff0c\u5e76\u4e14\u8fd9\u4e9b\u8fd9\u4e9b\u65b0\u6269\u5bb9\u51fa\u6765\u7684\u8282\u70b9\uff0c\u6ca1\u6709\u88abDNS\u89e3\u6790\u670d\u52a1\u6240\u8986\u76d6\uff0c\u5c31\u76f4\u63a5\u4f1a\u5bfc\u81f4Checkpoint\u5931\u8d25\uff0c\u4ece\u800c\u5f71\u54cd\u7ebf\u4e0a\u7a33\u5b9a\u3002\\n\\n2.Flink \u4f5c\u4e1a\u7684\u901a\u5e38\u9700\u8981\u914d\u7f6e\u516c\u53f8\u5185\u90e8\u4e0d\u540c\u6570\u636e\u6e90\u7684\u8fde\u63a5\u4e32\u3002\u5982\u679c\u914d\u7f6e\u6570\u636e\u5e93\u7684\u771f\u5b9e IP \u5730\u5740\uff0c\u5f80\u5f80\u8fd9\u4e2a\u5730\u5740\u4f1a\u968f\u7740\u8fc1\u5e93\u65f6\u5e38\u53d1\u751f\u53d8\u5316\uff0c\u800c\u5bfc\u81f4\u7ebf\u4e0a\u4f5c\u4e1a\u5f02\u5e38\u9000\u51fa\u3002\u56e0\u6b64\u5728\u5b9e\u9645\u751f\u4ea7\u4e2d\u8fde\u63a5\u4e32\u5f80\u5f80\u662f\u7531\u57df\u540d\u52a0\u5c5e\u6027\u53c2\u6570\u6784\u6210\uff0c\u8bf7\u6c42\u65f6\u7531DNS\u670d\u52a1\u5c06\u5176\u89e3\u6790\u4e3a\u771f\u5b9e IP \u5730\u5740\uff0c\u5728\u8fdb\u884c\u8bbf\u95ee\u3002\\n\\n\u8d77\u521d\uff0c\u6211\u4eec\u662f\u901a\u8fc7 Pod Template \u6765\u7ef4\u62a4 DNS \u914d\u7f6e\u7684\u3002\\n\\n```shell\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: pod-template\\nspec:\\n  hostAliases:\\n    - ip: 10.216.xxx.79\\n      hostnames:\\n        - handoop1\\n    - hostnames:\\n        - handoop2\\n      ip: 10.16.xx.48\\n    - hostnames:\\n        - handoop3\\n      ip: 10.16.xx.49\\n    - hostnames:\\n        - handoop4\\n      ip: 10.16.xx.50\\n   .......\\n```\\n\\n\u867d\u7136\u8be5\u65b9\u6cd5\u7406\u8bba\u4e0a\u53ef\u884c\uff0c\u4f46\u5728\u5b9e\u9645\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u906d\u9047\u5230\u4e86\u4e00\u7cfb\u5217\u95ee\u9898\u3002\u5f53\u8fdb\u884c HDFS \u6269\u5bb9\u65f6\uff0c\u6211\u4eec\u53d1\u73b0 Flink \u7684 Checkpoint \u529f\u80fd\u51fa\u73b0\u4e86\u5199\u5165\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u800c\u6570\u636e\u5e93\u8fc1\u79fb\u4e5f\u51fa\u73b0\u4e86\u94fe\u63a5\u5931\u8d25\u7684\u95ee\u9898\uff0c\u8fd9\u5bfc\u81f4\u6211\u4eec\u7684\u7ebf\u4e0a\u670d\u52a1\u7a81\u7136\u5b95\u673a\u3002\u7ecf\u8fc7\u6df1\u5165\u7684\u6392\u67e5\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e9b\u95ee\u9898\u7684\u6839\u6e90\u5728\u4e8e DNS \u89e3\u6790\u3002\\n\\n\u8fc7\u53bb\uff0c\u6211\u4eec\u66fe\u4f7f\u7528 hostAliases \u6765\u7ef4\u62a4\u57df\u540d\u548c IP \u5730\u5740\u4e4b\u95f4\u7684\u6620\u5c04\u5173\u7cfb\u3002\u4f46\u8fd9\u79cd\u65b9\u6cd5\u5728\u5b9e\u9645\u64cd\u4f5c\u4e2d\u4ee3\u4ef7\u8f83\u5927\uff0c\u56e0\u4e3a\u6bcf\u5f53\u66f4\u65b0 hostAliases \u65f6\uff0c\u6211\u4eec\u90fd\u9700\u8981\u505c\u6389\u6240\u6709\u7684 Flink \u4f5c\u4e1a\uff0c\u8fd9\u65e0\u7591\u589e\u52a0\u4e86\u6211\u4eec\u7684\u8fd0\u7ef4\u6210\u672c\u3002\u4e3a\u4e86\u5bfb\u6c42\u4e00\u79cd\u66f4\u4e3a\u7075\u6d3b\u548c\u53ef\u9760\u7684\u65b9\u6cd5\u6765\u7ba1\u7406 DNS \u89e3\u6790\u914d\u7f6e\uff0c\u4fdd\u969c Flink \u4f5c\u4e1a\u7684\u6b63\u5e38\u8fd0\u884c\uff0c\u6211\u4eec\u51b3\u5b9a\u642d\u5efa dnsmasq \u6765\u8fdb\u884c\u53cc\u5411\u7684 DNS \u89e3\u6790\u3002\\n\\n\u5728\u5b8c\u6210 dnsmasq \u7684\u914d\u7f6e\u548c\u5b89\u88c5\u540e\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u5bf9 Flink \u955c\u50cf\u4e2d /etc \u76ee\u5f55\u4e0b\u7684resolv.conf \u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u8986\u76d6\u3002\u7136\u800c\uff0c\u7531\u4e8e resolv.conf \u662f\u4e00\u4e2a\u53ea\u8bfb\u6587\u4ef6\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u8986\u76d6\u5b83\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u6302\u8f7d\u7684\u65b9\u5f0f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9996\u5148\u5c06 resolv.conf \u914d\u7f6e\u6210 ConfigMap\uff0c\u4ee5\u4fbf\u5728\u8986\u76d6\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u80fd\u591f\u66f4\u4e3a\u7075\u6d3b\u548c\u53ef\u9760\u5730\u7ba1\u7406DNS \u89e3\u6790\u914d\u7f6e\uff0c\u4ece\u800c\u786e\u4fdd Flink \u4f5c\u4e1a\u7684\u7a33\u5b9a\u8fd0\u884c\u3002\\n\\n```yaml\\napiVersion: v1\\ndata:\\n  resolv.conf: \\\"nameserver  10.216.138.226\\\" //DNS\u670d\u52a1\\nkind: ConfigMap\\nmetadata:\\n  creationTimestamp: \\\"2022-07-13T10:16:18Z\\\"\\n  managedFields:\\n  name: dns-configmap\\n  namespace: native-flink\\n```\\n\\n\u5728\u901a\u8fc7 Pod Template \u8fdb\u884c\u6302\u8f7d\u3002\\n\\n![](/blog/ziru/pod_template.png)\\n\\n\u8fd9\u6837\u5927\u6570\u636e\u5e73\u53f0\u76f8\u5173\u7684 DNS \u5c31\u53ef\u4ee5\u7ef4\u62a4\u5728 dnsmasq \u4e0a\uff0c\u800c Flink \u4f5c\u4e1a\u6240\u8fd0\u884c\u7684\u5bbf\u4e3b\u673a\u5c31\u53ef\u4ee5\u6309\u7167 DNS \u89e3\u6790\u6d41\u7a0b\u3002\\n\\n1.\u5148\u68c0\u67e5\u81ea\u5df1\u672c\u5730\u7684 hosts \u6587\u4ef6\uff0c\u662f\u5426\u5b58\u5728\u5bf9\u5e94\u5173\u7cfb\uff0c\u8bfb\u53d6\u5230\u8bb0\u5f55\u8fdb\u884c\u89e3\u6790\uff0c\u6ca1\u6709\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65\\n\\n2.\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u53bb\u67e5\u770b\u672c\u5730\u7684 DNS \u7f13\u5b58\uff0c\u6ca1\u6709\u5219\u8fdb\u884c\u4e0b\u4e00\u6b65\\n\\n3.\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u53bb\u6211\u4eec\u5728\u7f51\u7edc\u914d\u7f6e\u4e2d\u5b9a\u4e49\u7684 DNS \u670d\u52a1\u5668\u5730\u5740\u4e0a\u8fdb\u884c\u67e5\u627e\\n\\n\u4ee5\u6b64\u6765\u5b9e\u73b0\u52a8\u6001\u7684\u5b9e\u73b0 DNS \u7684\u53d8\u66f4\u8bc6\u522b\u3002\\n\\n### **06 \u591a\u5b9e\u4f8b\u90e8\u7f72\u5b9e\u8df5**\\n\\n\u5728\u5b9e\u9645\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u5e38\u5e38\u9700\u8981\u64cd\u4f5c\u591a\u4e2a\u96c6\u7fa4\uff0c\u5305\u62ec\u4e00\u5957\u7528\u4e8e\u6d4b\u8bd5\u7684\u96c6\u7fa4\u548c\u4e00\u5957\u7ebf\u4e0a\u6b63\u5f0f\u96c6\u7fa4\u3002\u4efb\u52a1\u9996\u5148\u5728\u6d4b\u8bd5\u96c6\u7fa4\u4e2d\u8fdb\u884c\u7ed3\u679c\u9a8c\u8bc1\u548c\u6027\u80fd\u538b\u6d4b\uff0c\u786e\u4fdd\u65e0\u8bef\u540e\u518d\u53d1\u5e03\u5230\u7ebf\u4e0a\u6b63\u5f0f\u96c6\u7fa4\u3002\\n\\n#### step1: \u4fee\u6539\u7aef\u53e3\u53f7\uff0c\u907f\u514d\u591a\u4e2a\u670d\u52a1\u7aef\u53e3\u51b2\u7a81\\n\\n![](/blog/ziru/port_number.png)\\n\\n#### step2: \u4fee\u6539 workspace\\n\\n\u591a\u4e2a\u4e0d\u540c\u7684\u5b9e\u4f8b\u670d\u52a1\u9700\u8981\u914d\u7f6e\u591a\u4e2a\u4e0d\u540c\u7684 workspace\uff0c\u8fd9\u6837\u907f\u514d\u8d44\u6e90\u5e72\u6270\u5bfc\u81f4\u51fa\u73b0\u4e00\u4e9b\u5947\u602a bug\u3002\\n\\n#### step3: \u542f\u52a8\u591a\u5b9e\u4f8b\u670d\u52a1\\n\\n\u4e3a\u4e86\u5b9e\u73b0\u751f\u4ea7\u73af\u5883\u4e0e\u6d4b\u8bd5\u73af\u5883\u7684\u9694\u79bb\uff0c\u6211\u4eec\u5728\u542f\u52a8\u6d41\u7a0b\u7684\u521d\u59cb\u9636\u6bb5\u5f15\u5165\u4e86\u4e00\u4e2a\u5173\u952e\u6b65\u9aa4\u3002\u6211\u4eec\u901a\u8fc7\u8f93\u5165\u547d\u4ee4(\u9488\u5bf9Hadoop B \u96c6\u7fa4):\\n\\n```shell\\nexport HADOOP_CONF_DIR=/home/streamx/conf\\n```\\n\\n\u6709\u6548\u5730\u5207\u65ad\u4e86 Flink on K8s \u52a0\u8f7d HDFS \u914d\u7f6e\u7684\u9ed8\u8ba4\u903b\u8f91\u3002\u8fd9\u6837\u7684\u64cd\u4f5c\u786e\u4fdd\u4e86 A StreamPark \u4ec5\u8fde\u63a5\u81f3 A Hadoop \u73af\u5883\uff0c\u800c B StreamPark \u5219\u5bf9\u5e94\u8fde\u63a5\u81f3 B Hadoop \u73af\u5883\uff0c\u4ece\u800c\u8fbe\u5230\u4e86\u5c06\u6d4b\u8bd5\u548c\u751f\u4ea7\u73af\u5883\u8fdb\u884c\u5b8c\u6574\u9694\u79bb\u7684\u76ee\u7684\u3002\\n\\n\u5177\u4f53\u6765\u8bf4\uff0c\u5728\u8fd9\u4e00\u64cd\u4f5c\u6307\u4ee4\u751f\u6548\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u786e\u4fdd\u5728 10002 \u7aef\u53e3\u63d0\u4ea4\u7684 Flink \u4f5c\u4e1a\u6240\u8fde\u63a5\u7684 Hadoop \u73af\u5883\u4e3a B Hadoop \u73af\u5883\u3002\u8fd9\u6837\u4e00\u6765\uff0cB Hadoop \u73af\u5883\u4e0e\u8fc7\u53bb\u5728 10000 \u7aef\u53e3\u63d0\u4ea4\u7684 Flink \u4f5c\u4e1a\u6240\u4f7f\u7528\u7684Hadoop\u73af\u5883\u5c31\u6210\u529f\u5b9e\u73b0\u4e86\u9694\u79bb\uff0c\u6709\u6548\u9632\u6b62\u4e86\u4e0d\u540c\u73af\u5883\u4e4b\u95f4\u7684\u76f8\u4e92\u5e72\u6270\uff0c\u786e\u4fdd\u4e86\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\u3002\\n\\n\u4e0b\u8ff0\u5185\u5bb9\u4e3a Flink \u52a0\u8f7d Hadoop \u73af\u5883\u903b\u8f91\u4ee3\u7801\u5206\u6790\uff1a\\n\\n```yaml\\n// \u5bfb\u627ehadoop\u914d\u7f6e\u6587\u4ef6\u7684\u6d41\u7a0b\\n//1\u3001\u5148\u53bb\u5bfb\u627e\u662f\u5426\u6dfb\u52a0\u4e86\u53c2\u6570:kubernetes.hadoop.conf.config-map.name\\n@Override\\npublic Optional<String> getExistingHadoopConfigurationConfigMap() {\\n    final String existingHadoopConfigMap =\\n            flinkConfig.getString(KubernetesConfigOptions.HADOOP_CONF_CONFIG_MAP);\\n    if (StringUtils.isBlank(existingHadoopConfigMap)) {\\n        return Optional.empty();\\n    } else {\\n        return Optional.of(existingHadoopConfigMap.trim());\\n    }\\n}\\n\\n@Override\\npublic Optional<String> getLocalHadoopConfigurationDirectory() {\\n    // 2\u3001\u5982\u679c\u6ca1\u6709 1 \u4e2d\u6307\u5b9a\u7684\u53c2\u6570\uff0c\u67e5\u627e\u63d0\u4ea4 native \u547d\u4ee4\u7684\u672c\u5730\u73af\u5883\u662f\u5426\u6709\u73af\u5883\u53d8\u91cf:HADOOP_CONF_DIR\\n    final String hadoopConfDirEnv = System.getenv(Constants.ENV_HADOOP_CONF_DIR);\\n    if (StringUtils.isNotBlank(hadoopConfDirEnv)) {\\n        return Optional.of(hadoopConfDirEnv);\\n    }\\n    // 3\u3001\u5982\u679c\u6ca1\u6709 2 \u4e2d\u73af\u5883\u53d8\u91cf\uff0c\u518d\u7ee7\u7eed\u770b\u5426\u6709\u73af\u5883\u53d8\u91cf:HADOOP_HOME\\n    final String hadoopHomeEnv = System.getenv(Constants.ENV_HADOOP_HOME);\\n    if (StringUtils.isNotBlank(hadoopHomeEnv)) {\\n        // Hadoop 2.2+\\n        final File hadoop2ConfDir = new File(hadoopHomeEnv, \\\"/etc/hadoop\\\");\\n        if (hadoop2ConfDir.exists()) {\\n            return Optional.of(hadoop2ConfDir.getAbsolutePath());\\n        }\\n\\n        // Hadoop 1.x\\n        final File hadoop1ConfDir = new File(hadoopHomeEnv, \\\"/conf\\\");\\n        if (hadoop1ConfDir.exists()) {\\n            return Optional.of(hadoop1ConfDir.getAbsolutePath());\\n        }\\n    }\\n\\n    return Optional.empty();\\n}\\n\\nfinal List<File> hadoopConfigurationFileItems = getHadoopConfigurationFileItems(localHadoopConfigurationDirectory.get());\\n// \u5982\u679c\u6ca1\u6709\u627e\u5230 1\u30012\u30013 \u8bf4\u660e\u6ca1\u6709 hadoop \u73af\u5883\\nif (hadoopConfigurationFileItems.isEmpty()) {\\n    LOG.warn(\\n            \\\"Found 0 files in directory {}, skip to mount the Hadoop Configuration ConfigMap.\\\",\\n            localHadoopConfigurationDirectory.get());\\n    return flinkPod;\\n}\\n// \u5982\u679c 2 \u6216\u8005 3 \u5b58\u5728\uff0c\u4f1a\u5728\u8def\u5f84\u4e0b\u67e5\u627e core-site.xml \u548c hdfs-site.xml \u6587\u4ef6\\nprivate List<File> getHadoopConfigurationFileItems(String localHadoopConfigurationDirectory) {\\n    final List<String> expectedFileNames = new ArrayList<>();\\n    expectedFileNames.add(\\\"core-site.xml\\\");\\n    expectedFileNames.add(\\\"hdfs-site.xml\\\");\\n\\n    final File directory = new File(localHadoopConfigurationDirectory);\\n    if (directory.exists() && directory.isDirectory()) {\\n        return Arrays.stream(directory.listFiles())\\n                .filter(\\n                        file ->\\n                                file.isFile()\\n                                        && expectedFileNames.stream()\\n                                                .anyMatch(name -> file.getName().equals(name)))\\n                .collect(Collectors.toList());\\n    } else {\\n        return Collections.emptyList();\\n    }\\n}\\n\\n//\u5982\u679c\u6709 hadoop \u7684\u73af\u5883\uff0c\u5c06\u4f1a\u628a\u4e0a\u8ff0\u4e24\u4e2a\u6587\u4ef6\u89e3\u6790\u4e3a kv \u5bf9\uff0c\u7136\u540e\u6784\u5efa\u6210\u4e00\u4e2a ConfigMap\uff0c\u540d\u5b57\u547d\u540d\u89c4\u5219\u5982\u4e0b\\npublic static String getHadoopConfConfigMapName(String clusterId) {\\n    return Constants.HADOOP_CONF_CONFIG_MAP_PREFIX + clusterId;\\n}\\n```\\n\\n\u7136\u540e\u8fdb\u884c\u8fdb\u7a0b\u7aef\u53e3\u5360\u7528\u67e5\u8be2\uff1a\\n\\n```shell\\nnetstat -tlnp | grep 10000\\nnetstat -tlnp | grep 10002\\n```\\n\\n## **\u5e26\u6765\u7684\u6536\u76ca**  \\n\\n\u6211\u4eec\u7684\u56e2\u961f\u4ece StreamX\uff08\u5373 StreamPark \u7684\u524d\u8eab\uff09\u5f00\u59cb\u4f7f\u7528\uff0c\u7ecf\u8fc7\u4e00\u5e74\u591a\u7684\u5b9e\u8df5\u548c\u78e8\u5408\uff0cStreamPark \u663e\u8457\u6539\u5584\u4e86\u6211\u4eec\u5728 Apache Flink\xae \u4f5c\u4e1a\u7684\u5f00\u53d1\u7ba1\u7406\u548c\u8fd0\u7ef4\u4e0a\u7684\u8bf8\u591a\u6311\u6218\u3002StreamPark \u4f5c\u4e3a\u4e00\u7ad9\u5f0f\u670d\u52a1\u5e73\u53f0\uff0c\u6781\u5927\u5730\u7b80\u5316\u4e86\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b\u3002\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728 StreamPark \u5e73\u53f0\u4e0a\u5b8c\u6210\u4f5c\u4e1a\u7684\u5f00\u53d1\u3001\u7f16\u8bd1\u548c\u53d1\u5e03\uff0c\u8fd9\u4e0d\u4ec5\u964d\u4f4e\u4e86 Flink \u7684\u7ba1\u7406\u548c\u90e8\u7f72\u95e8\u69db\uff0c\u8fd8\u663e\u8457\u63d0\u9ad8\u4e86\u5f00\u53d1\u6548\u7387\u3002\\n\\n\u81ea\u4ece\u90e8\u7f72 StreamPark \u4ee5\u6765\uff0c\u6211\u4eec\u5df2\u7ecf\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u5927\u89c4\u6a21\u4f7f\u7528\u8be5\u5e73\u53f0\u3002\u4ece\u6700\u521d\u7ba1\u7406\u7684 50 \u591a\u4e2a FlinkSQL \u4f5c\u4e1a\uff0c\u589e\u957f\u5230\u76ee\u524d\u8fd1 500 \u4e2a\u4f5c\u4e1a\uff0c\u5982\u56fe\u5728 StreamPark \u4e0a\u5212\u5206\u4e3a 7 \u4e2a team\uff0c\u6bcf\u4e2a team \u4e2d\u6709\u51e0\u5341\u4e2a\u4f5c\u4e1a\u3002\u8fd9\u4e00\u8f6c\u53d8\u4e0d\u4ec5\u5c55\u793a\u4e86 StreamPark \u7684\u53ef\u6269\u5c55\u6027\u548c\u9ad8\u6548\u6027\uff0c\u4e5f\u5145\u5206\u8bc1\u660e\u4e86\u5b83\u5728\u5b9e\u9645\u4e1a\u52a1\u4e2d\u7684\u5f3a\u5927\u5e94\u7528\u4ef7\u503c\u3002\\n\\n![](/blog/ziru/production_environment.png)\\n\\n## **\u672a \u6765 \u671f \u5f85**\\n\\n\u81ea\u5982\u4f5c\u4e3a StreamPark \u65e9\u671f\u7684\u7528\u6237\u4e4b\u4e00\uff0c\u6211\u4eec\u4e00\u76f4\u548c\u793e\u533a\u540c\u5b66\u4fdd\u6301\u5bc6\u5207\u4ea4\u6d41\uff0c\u53c2\u4e0e StreamPark \u7684\u7a33\u5b9a\u6027\u6253\u78e8\uff0c\u6211\u4eec\u5c06\u751f\u4ea7\u8fd0\u7ef4\u4e2d\u9047\u5230\u7684 Bug \u548c\u65b0\u7684 Feature \u63d0\u4ea4\u7ed9\u4e86\u793e\u533a\u3002\u5728\u672a\u6765\uff0c\u6211\u4eec\u5e0c\u671b\u53ef\u4ee5\u5728 StreamPark \u4e0a\u7ba1\u7406 Apache Paimon \u6e56\u8868\u7684\u5143\u6570\u636e\u4fe1\u606f\u548c Paimon \u7684 Action \u8f85\u52a9\u4f5c\u4e1a\u7684\u80fd\u529b\uff0c\u57fa\u4e8e Flink \u5f15\u64ce\u901a\u8fc7\u5bf9\u63a5\u6e56\u8868\u7684 Catalog \u548c Action \u4f5c\u4e1a\uff0c\u6765\u5b9e\u73b0\u6e56\u8868\u4f5c\u4e1a\u7684\u7ba1\u7406\u3001\u4f18\u5316\u4e8e\u4e00\u4f53\u7684\u80fd\u529b\u3002\u76ee\u524d StreamPark \u6b63\u5728\u5bf9\u63a5 Paimon \u6570\u636e\u96c6\u6210\u7684\u80fd\u529b\uff0c\u8fd9\u4e00\u5757\u5728\u672a\u6765\u5bf9\u4e8e\u5b9e\u65f6\u4e00\u952e\u5165\u6e56\u4f1a\u63d0\u4f9b\u5f88\u5927\u7684\u5e2e\u52a9\u3002\\n\\n\u5728\u6b64\u4e5f\u975e\u5e38\u611f\u8c22 StreamPark \u56e2\u961f\u4e00\u76f4\u4ee5\u6765\u5bf9\u6211\u4eec\u7684\u6280\u672f\u652f\u6301\uff0c\u795d Apache StreamPark \u8d8a\u6765\u8d8a\u597d\uff0c\u8d8a\u6765\u8d8a\u591a\u7528\u6237\u53bb\u4f7f\u7528\uff0c\u65e9\u65e5\u6bd5\u4e1a\u6210\u4e3a\u9876\u7ea7 Apache \u9879\u76ee\u3002\"},{\"id\":\"streampark-usercase-changan\",\"metadata\":{\"permalink\":\"/zh-CN/blog/streampark-usercase-changan\",\"editUrl\":\"https://github.com/apache/incubator-streampark-website/edit/dev/blog/9-streampark-usercase-changan.md\",\"source\":\"@site/i18n/zh-CN/docusaurus-plugin-content-blog/9-streampark-usercase-changan.md\",\"title\":\"\u957f\u5b89\u6c7d\u8f66\u4ece\u81ea\u7814\u5e73\u53f0\u5230Apache StreamPark\u2122 \u7684\u5347\u7ea7\u5b9e\u8df5\",\"description\":\"\u5bfc\u8bfb\uff1a\u957f\u5b89\u6c7d\u8f66\u662f\u4e2d\u56fd\u6c7d\u8f66\u56db\u5927\u96c6\u7fa4\u9635\u8425\u4f01\u4e1a\u4e4b\u4e00\uff0c\u968f\u7740\u4e1a\u52a1\u53d1\u5c55\u548c\u6570\u667a\u5316\u7684\u63a8\u8fdb\uff0c\u5bf9\u6570\u636e\u7684\u5b9e\u6548\u6027\u8981\u6c42\u8d8a\u6765\u8d8a\u9ad8\uff0cFlink \u4f5c\u4e1a\u8d8a\u6765\u8d8a\u591a\uff0c\u957f\u5b89\u6c7d\u8f66\u539f\u672c\u5f00\u53d1\u4e86\u4e00\u5957\u6d41\u5e94\u7528\u5e73\u53f0\uff0c\u7528\u6765\u6ee1\u8db3\u5f00\u53d1\u4eba\u5458\u5bf9\u4e8e Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u5de5\u4f5c\u7684\u57fa\u7840\u9700\u6c42\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u9762\u4e34\u8bf8\u591a\u6311\u6218\u548c\u56f0\u5883\uff0c\u6700\u7ec8\u4f7f\u7528 Apache StreamPark \u6765\u4f5c\u4e3a\u4e00\u7ad9\u5f0f\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\uff0c\u6709\u6548\u89e3\u51b3\u4e86\u4e4b\u524d\u9762\u4e34\u7684\u8bf8\u591a\u56f0\u5883\uff0cStreamPark \u63d0\u4f9b\u7684\u89e3\u51b3\u65b9\u6848\u7b80\u5316\u4e86\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b\uff0c\u5728 Flink \u4f5c\u4e1a\u5f00\u53d1\u90e8\u7f72\u4e0a\u8282\u7701\u4e86\u5f88\u591a\u65f6\u95f4\uff0c\u8d70\u51fa\u4e86\u4f5c\u4e1a\u8fd0\u7ef4\u7ba1\u7406\u7684\u6ce5\u6cbc\uff0c\u663e\u8457\u5730\u63d0\u5347\u4e86\u6548\u7387\u3002\",\"date\":\"2024-10-18T07:44:07.000Z\",\"tags\":[{\"label\":\"StreamPark\",\"permalink\":\"/zh-CN/blog/tags/stream-park\"},{\"label\":\"\u751f\u4ea7\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/tags/\u751f\u4ea7\u5b9e\u8df5\"}],\"readingTime\":14.23,\"hasTruncateMarker\":true,\"authors\":[],\"frontMatter\":{\"slug\":\"streampark-usercase-changan\",\"title\":\"\u957f\u5b89\u6c7d\u8f66\u4ece\u81ea\u7814\u5e73\u53f0\u5230Apache StreamPark\u2122 \u7684\u5347\u7ea7\u5b9e\u8df5\",\"tags\":[\"StreamPark\",\"\u751f\u4ea7\u5b9e\u8df5\"]},\"unlisted\":false,\"prevItem\":{\"title\":\"\u81ea\u5982\u57fa\u4e8eApache StreamPark\u2122 \u7684\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\u5b9e\u8df5\",\"permalink\":\"/zh-CN/blog/streampark-usercase-ziru\"}},\"content\":\"![](/blog/changan/cover.png)\\n\\n**\u5bfc\u8bfb**\uff1a\u957f\u5b89\u6c7d\u8f66\u662f\u4e2d\u56fd\u6c7d\u8f66\u56db\u5927\u96c6\u7fa4\u9635\u8425\u4f01\u4e1a\u4e4b\u4e00\uff0c\u968f\u7740\u4e1a\u52a1\u53d1\u5c55\u548c\u6570\u667a\u5316\u7684\u63a8\u8fdb\uff0c\u5bf9\u6570\u636e\u7684\u5b9e\u6548\u6027\u8981\u6c42\u8d8a\u6765\u8d8a\u9ad8\uff0cFlink \u4f5c\u4e1a\u8d8a\u6765\u8d8a\u591a\uff0c\u957f\u5b89\u6c7d\u8f66\u539f\u672c\u5f00\u53d1\u4e86\u4e00\u5957\u6d41\u5e94\u7528\u5e73\u53f0\uff0c\u7528\u6765\u6ee1\u8db3\u5f00\u53d1\u4eba\u5458\u5bf9\u4e8e Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u5de5\u4f5c\u7684\u57fa\u7840\u9700\u6c42\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u9762\u4e34\u8bf8\u591a\u6311\u6218\u548c\u56f0\u5883\uff0c\u6700\u7ec8\u4f7f\u7528 Apache StreamPark \u6765\u4f5c\u4e3a\u4e00\u7ad9\u5f0f\u5b9e\u65f6\u8ba1\u7b97\u5e73\u53f0\uff0c\u6709\u6548\u89e3\u51b3\u4e86\u4e4b\u524d\u9762\u4e34\u7684\u8bf8\u591a\u56f0\u5883\uff0cStreamPark \u63d0\u4f9b\u7684\u89e3\u51b3\u65b9\u6848\u7b80\u5316\u4e86\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b\uff0c\u5728 Flink \u4f5c\u4e1a\u5f00\u53d1\u90e8\u7f72\u4e0a\u8282\u7701\u4e86\u5f88\u591a\u65f6\u95f4\uff0c\u8d70\u51fa\u4e86\u4f5c\u4e1a\u8fd0\u7ef4\u7ba1\u7406\u7684\u6ce5\u6cbc\uff0c\u663e\u8457\u5730\u63d0\u5347\u4e86\u6548\u7387\u3002\\n\\n\u4f9b\u7a3f\u5355\u4f4d\uff5c\u957f\u5b89\u667a\u80fd\u5316\u7814\u7a76\u9662\u4e91\u5e73\u53f0\u5f00\u53d1\u6240\\n\\n\u7f16\u8f91\u6821\u5bf9\uff5c\u6f58\u6708\u9e4f\\n\\n\x3c!-- truncate --\x3e\\n\\n\u91cd\u5e86\u957f\u5b89\u6c7d\u8f66\u80a1\u4efd\u6709\u9650\u516c\u53f8\uff08\u7b80\u79f0\u201c\u957f\u5b89\u6c7d\u8f66\u201d\uff09\u6210\u7acb\u4e8e 1996 \u5e74 10 \u6708 31 \u65e5\uff0c\u662f\u4e2d\u56fd\u6c7d\u8f66\u56db\u5927\u96c6\u56e2\u9635\u8425\u4f01\u4e1a\uff0c\u62e5\u6709 161 \u5e74\u5386\u53f2\u5e95\u8574\uff0c\u73b0\u5728\u65d7\u4e0b\u5305\u62ec\u957f\u5b89\u542f\u6e90\u3001\u6df1\u84dd\u6c7d\u8f66\u3001\u963f\u7ef4\u5854\u3001\u957f\u5b89\u5f15\u529b\u3001\u957f\u5b89\u51ef\u7a0b\u7b49\u81ea\u4e3b\u54c1\u724c\u4ee5\u53ca\u957f\u5b89\u798f\u7279\u3001\u957f\u5b89\u9a6c\u81ea\u8fbe\u7b49\u5408\u8d44\u54c1\u724c\u3002\\n\\n\u8fd1\u4e9b\u5e74\u968f\u7740\u6c7d\u8f66\u9500\u91cf\u7684\u4e0d\u65ad\u589e\u52a0\u4e0e\u667a\u80fd\u5316\u7a0b\u5ea6\u7684\u4e0d\u65ad\u63d0\u5347\uff0c\u8f66\u8f86\u6bcf\u5929\u5c06\u4ea7\u751f\u5343\u4ebf\u7ea7\u522b\u7684 CAN \u6570\u636e\uff0c\u6e05\u6d17\u5904\u7406\u540e\u7684\u6570\u636e\u4e5f\u5728 50 \u4ebf\u7ea7\u522b\uff0c\u9762\u5bf9\u5982\u6b64\u5e9e\u5927\u4e14\u6301\u7eed\u81a8\u80c0\u7684\u6570\u636e\u89c4\u6a21\uff0c\u5982\u4f55\u4ece\u6d77\u91cf\u6570\u636e\u4e2d\u5feb\u901f\u63d0\u53d6\u6316\u6398\u6709\u4ef7\u503c\u7684\u4fe1\u606f\uff0c\u4e3a\u7814\u53d1\u3001\u751f\u4ea7\u3001\u9500\u552e\u7b49\u90e8\u95e8\u63d0\u4f9b\u6570\u636e\u652f\u6301\uff0c\u6210\u4e3a\u5f53\u524d\u4e9f\u9700\u89e3\u51b3\u7684\u95ee\u9898\u3002\\n\\n## **1.\u5b9e\u65f6\u8ba1\u7b97\u9762\u4e34\u7684\u6311\u6218**\\n\\n\u957f\u5b89\u6c7d\u8f66\u6570\u636e\u7684\u5b58\u50a8\u4e0e\u5206\u6790\u5904\u7406\u4e3b\u8981\u7531\u4e91\u4e0a\u548c\u4e91\u4e0b\u4e24\u90e8\u5206\u6784\u6210\uff0c\u4e91\u4e0a\u6307\u7684\u662f\u6211\u4eec\u90e8\u7f72\u5728\u817e\u8baf\u4e91\u670d\u52a1\u5668\u4e0a\u7684\u5927\u6570\u636e\u96c6\u7fa4\uff0cCDH \u642d\u5efa\uff0c\u7528\u4e8e\u5b58\u50a8\u70ed\u6570\u636e\uff1b\u4e91\u4e0b\u662f\u90e8\u7f72\u5728\u672c\u5730\u673a\u623f\u7684 CDP \u96c6\u7fa4\uff0c\u4ece\u4e91\u4e0a\u62c9\u53d6\u540c\u6b65\u6570\u636e\uff0c\u8fdb\u884c\u5b58\u50a8\u548c\u5206\u6790\u3002**Flink \u5728\u957f\u5b89\u6c7d\u8f66\u5b9e\u65f6\u8ba1\u7b97\u4e2d\u4e00\u76f4\u626e\u6f14\u7740\u91cd\u8981\u7684\u89d2\u8272\uff0c\u957f\u5b89\u6c7d\u8f66\u5f00\u53d1\u4e86\u4e00\u5957\u6d41\u5e94\u7528\u5e73\u53f0\uff0c\u6765\u6ee1\u8db3\u5f00\u53d1\u4eba\u5458\u5bf9\u4e8e Flink \u4f5c\u4e1a\u7ba1\u7406\u548c\u8fd0\u7ef4\u5de5\u4f5c\u7684\u57fa\u7840\u9700\u6c42**\u3002\u4f46\u662f\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\uff0c\u6d41\u5e94\u7528\u5e73\u53f0\u5b58\u5728\u4ee5\u4e0b\u56db\u5404\u65b9\u9762\u95ee\u9898\uff1a\\n\\n\u2460**\u529f\u80fd\u5355\u4e00**: \u53ea\u63d0\u4f9b\u90e8\u7f72\u529f\u80fd\uff0c\u65e0\u7528\u6237\u6743\u9650\u7ba1\u7406\u3001\u56e2\u961f\u7ba1\u7406\u3001\u89d2\u8272\u7ba1\u7406\u3001\u9879\u76ee\u7ba1\u7406\uff0c\u65e0\u6cd5\u6ee1\u8db3\u9879\u76ee\u3001\u56e2\u961f\u7ba1\u7406\u9700\u6c42\u3002\\n\\n\u2461**\u6613\u7528\u6027\u4e0d\u8db3**: SQL \u7f16\u5199\u65e0\u63d0\u793a\u3001\u65e5\u5fd7\u6d4f\u89c8\u4e0d\u4fbf\u3001\u4e0d\u652f\u6301\u8c03\u8bd5\u3001\u65e0\u9519\u8bef\u68c0\u6d4b\u3001\u65e0\u7248\u672c\u7ba1\u7406\u3001\u65e0\u914d\u7f6e\u4e2d\u5fc3\u7b49\u3002\\n\\n\u2462**\u53ef\u6269\u5c55\u6027\u8f83\u5dee**: \u4e0d\u652f\u6301\u5728\u7ebf\u6269\u5bb9 Flink \u96c6\u7fa4\u3001\u65b0\u589e\u6216\u66f4\u6362 Flink \u7248\u672c\uff0c\u65b0\u589e Flink Connectors\u3001CDC \u7b49\u3002\\n\\n\u2463**\u53ef\u7ef4\u62a4\u6027\u8f83\u5dee**: \u65e0\u65e5\u5fd7\u67e5\u770b\u3001\u65e0\u7248\u672c\u7ba1\u7406\u3001\u65e0\u914d\u7f6e\u4e2d\u5fc3\u7b49\u3002\\n\\n## **2.\u4e3a\u4ec0\u4e48\u7528 StreamPark**\\n\\n\u6211\u4eec\u9488\u5bf9Flink \u4f5c\u4e1a\u9762\u4e34\u7684\u56f0\u5883\uff0c\u51b3\u5b9a\u5148\u4ece\u5f00\u6e90\u9886\u57df\u5bfb\u6c42\u89e3\u51b3\u65b9\u6848\uff0c\u56e0\u6b64\u6211\u4eec\u5168\u9762\u8c03\u7814\u4e86Apache StreamPark\u3001Dxxky\u3001strxxing-xx-web\u7b49\u5f00\u6e90\u9879\u76ee\uff0c**\u4ece\u6838\u5fc3\u80fd\u529b\u3001\u7a33\u5b9a\u6027\u3001\u6613\u7528\u6027\u3001\u53ef\u6269\u5c55\u6027\u3001\u53ef\u7ef4\u62a4\u6027\u3001\u64cd\u4f5c\u4f53\u9a8c\u7b49\u591a\u4e2a\u7ef4\u5ea6\u8fdb\u884c\u4e86\u5168\u65b9\u4f4d\u7684\u8bc4\u4f30\u5bf9\u6bd4\uff0c\u5e76\u7ed3\u5408\u5f53\u524d\u6211\u4eec\u7684\u6d41\u4f5c\u4e1a\u5f00\u53d1\u9700\u6c42\u4ee5\u53ca\u6211\u53f8\u7684\u5927\u6570\u636e\u5e73\u53f0\u540e\u7eed\u89c4\u5212\uff0c\u53d1\u73b0 Apache StreamPark \u662f\u6700\u7b26\u5408\u6211\u4eec\u5f53\u524d\u9700\u6c42\u7684\u4ea7\u54c1\u3002\u56e0\u6b64\u91c7\u7528 StreamPark \u4f5c\u4e3a\u6211\u4eec\u7684\u6d41\u8ba1\u7b97\u5e73\u53f0**\uff0cStreamPark \u6709\u4ee5\u4e0b\u4f18\u52bf\uff1a\\n\\n### **\u5b8c\u5584\u7684\u57fa\u7840\u7ba1\u7406\u80fd\u529b**\\n\\nStreamPark \u89e3\u51b3\u4e86\u6211\u4eec\u5df2\u6709\u7684\u6d41\u5e94\u7528\u5e73\u53f0\u65e0\u7528\u6237\u6743\u9650\u7ba1\u7406\u3001\u56e2\u961f\u7ba1\u7406\u3001\u89d2\u8272\u7ba1\u7406\u3001\u9879\u76ee\u7ba1\u7406\u3001\u56e2\u961f\u7ba1\u7406\u7b49\u95ee\u9898\u3002\\n\\n\u2460 StreamPark \u5e73\u53f0\u63d0\u4f9b\u4e86\u7528\u6237\u6743\u9650\u7ba1\u7406\u529f\u80fd\u3002\u8fd9\u4e9b\u529f\u80fd\u53ef\u4ee5\u786e\u4fdd\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u5176\u6240\u9700\u7684\u6570\u636e\u548c\u8d44\u6e90\uff0c\u5e76\u9650\u5236\u5176\u5bf9\u7cfb\u7edf\u6216\u4f5c\u4e1a\u7684\u4fee\u6539\u6743\u9650\u3002\u5bf9\u4e8e\u4f01\u4e1a\u7ea7\u7528\u6237\u800c\u8a00\uff0c\u8fd9\u79cd\u7ba1\u7406\u529f\u80fd\u975e\u5e38\u5fc5\u8981\uff0c\u56e0\u4e3a\u5b83\u6709\u52a9\u4e8e\u4fdd\u62a4\u4f01\u4e1a\u7684\u6570\u636e\u5b89\u5168\u3001\u7ef4\u62a4\u7cfb\u7edf\u7a33\u5b9a\u6027\uff0c\u5e76\u786e\u4fdd\u4f5c\u4e1a\u7684\u987a\u5229\u8fd0\u884c\u3002\u901a\u8fc7\u5408\u7406\u5730\u8bbe\u7f6e\u548c\u7ba1\u7406\u7528\u6237\u6743\u9650\uff0c\u4f01\u4e1a\u53ef\u4ee5\u66f4\u597d\u5730\u63a7\u5236\u6570\u636e\u8bbf\u95ee\u548c\u64cd\u4f5c\uff0c\u4ece\u800c\u964d\u4f4e\u98ce\u9669\u5e76\u63d0\u9ad8\u5de5\u4f5c\u6548\u7387\u3002\\n\\n![](/blog/changan/capability.png)\\n\\n### **\u4e00\u7ad9\u5f0f\u6d41\u5904\u7406\u5e73\u53f0**\\n\\nStreamPark \u89e3\u51b3\u4e86\u6d41\u5e94\u7528\u5e73\u53f0\u6613\u7528\u6027\u4e0d\u8db3\uff0cSQL \u7f16\u5199\u65e0\u63d0\u793a\u3001\u65e5\u5fd7\u6d4f\u89c8\u4e0d\u65b9\u4fbf\u3001\u65e0\u9519\u8bef\u68c0\u6d4b\u3001\u65e0\u7248\u672c\u7ba1\u7406\u3001\u65e0\u914d\u7f6e\u4e2d\u5fc3\u7b49\u95ee\u9898\u3002\\n\\n\u2460 StreamPark \u5177\u5907\u5b8c\u5584\u7684 SQL \u6821\u9a8c\u529f\u80fd\uff0c\u5b9e\u73b0\u4e86\u81ea\u52a8 build/push \u955c\u50cf\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\uff0c**\u901a\u8fc7 Child-first \u52a0\u8f7d\u65b9\u5f0f\u89e3\u51b3\u4e86 YARN \u548c K8s \u4e24\u79cd\u8fd0\u884c\u6a21\u5f0f\u3001\u652f\u6301\u4e86\u81ea\u7531\u5207\u6362 Flink \u7248\u672c\u7b49\u7279\u6027\u3002**\\n\\n\u2461 StreamPark \u63d0\u4f9b\u4e86\u4f5c\u4e1a\u76d1\u63a7\u548c\u65e5\u5fd7\u7ba1\u7406\u7684\u529f\u80fd\uff0c**\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u5b9e\u65f6\u76d1\u63a7\u4f5c\u4e1a\u7684\u8fd0\u884c\u72b6\u6001\uff0c\u67e5\u770b\u4f5c\u4e1a\u7684\u65e5\u5fd7\u4fe1\u606f\uff0c\u4ee5\u53ca\u8fdb\u884c\u6545\u969c\u6392\u9664**\u3002\u4f7f\u5f97\u7528\u6237\u53ef\u4ee5\u5feb\u901f\u53d1\u73b0\u548c\u89e3\u51b3\u4f5c\u4e1a\u8fd0\u884c\u4e2d\u7684\u95ee\u9898\u3002\\n\\n### **\u53ef\u6269\u5c55\u6027\u5f3a**\\n\\nStreamPark \u89e3\u51b3\u4e86\u6d41\u5e94\u7528\u5e73\u53f0\u53ef\u6269\u5c55\u6027\u5dee\uff0c\u4e0d\u652f\u6301\u5728\u7ebf\u6269\u5bb9 Flink\u96c6\u7fa4\u3001\u65b0\u589e\u6216\u66f4\u6362 Flink \u7248\u672c\u3001Flink Connectors \u4e0d\u8db3\u7b49\u95ee\u9898\u3002\\n\\n\u2460 StreamPark \u8bbe\u8ba1\u5177\u6709\u826f\u597d\u7684\u53ef\u6269\u5c55\u6027\u548c\u7075\u6d3b\u6027\uff0c**\u53ef\u4ee5\u652f\u6301\u5927\u89c4\u6a21\u7684 Flink on Yarn \u4f5c\u4e1a\u8fd0\u884c\uff0c\u5b83\u80fd\u591f\u4e0e\u73b0\u6709\u7684 Yarn \u96c6\u7fa4\u65e0\u7f1d\u96c6\u6210**\uff0c\u5e76\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8fdb\u884c\u5b9a\u5236\u548c\u6269\u5c55\u3002\u6b64\u5916\uff0cStreamPark \u8fd8\u63d0\u4f9b\u4e86\u591a\u79cd\u914d\u7f6e\u9009\u9879\u548c\u529f\u80fd\u6269\u5c55\u70b9\uff0c\u4ee5\u6ee1\u8db3\u7528\u6237\u591a\u6837\u5316\u7684\u9700\u6c42\u3002\\n\\n\u2461 **StreamPark \u5177\u5907 Flink \u4f5c\u4e1a\u5f00\u53d1\u6240\u9700\u7684\u6574\u5957\u5de5\u5177**\u3002\u5728 StreamPark \u4e2d\uff0c\u5bf9\u4e8e\u7f16\u5199\u4ee3\u7801\u7684 Flink \u4f5c\u4e1a\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u4f18\u79c0\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u5c06\u7a0b\u5e8f\u914d\u7f6e\u8fdb\u884c\u4e86\u6807\u51c6\u5316\uff0c\u7b80\u5316\u4e86\u7f16\u7a0b\u6a21\u578b\uff0c\u540c\u65f6\u8fd8\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u8fde\u63a5\u5668\uff0c\u663e\u8457\u964d\u4f4e\u4e86 DataStream \u5f00\u53d1\u7684\u96be\u5ea6\u3002\\n\\n![](/blog/changan/connectors.png)\\n\\n\u9664\u4e86\u4e0a\u8ff0\u4f18\u70b9\u5916\uff0c**StreamPark \u8fd8\u80fd\u59a5\u5584\u7ba1\u7406\u4f5c\u4e1a\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\uff0c\u5305\u62ec\u4f5c\u4e1a\u7684\u5f00\u53d1\u3001\u90e8\u7f72\u3001\u8fd0\u8425\u4ee5\u53ca\u95ee\u9898\u8bca\u65ad\u7b49\u73af\u8282\uff0c\u4f7f\u5f00\u53d1\u4eba\u5458\u80fd\u591f\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u672c\u8eab\uff0c\u65e0\u9700\u8fc7\u591a\u5173\u6ce8 Flink \u4f5c\u4e1a\u7684\u7ba1\u7406\u548c\u8fd0\u7ef4\u95ee\u9898**\u3002StreamPark \u7684\u4f5c\u4e1a\u5f00\u53d1\u7ba1\u7406\u6a21\u5757\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a\u4f5c\u4e1a\u7ba1\u7406\u57fa\u7840\u529f\u80fd\u3001Jar \u4f5c\u4e1a\u7ba1\u7406\u548c FlinkSQL \u4f5c\u4e1a\u7ba1\u7406\u3002\\n\\n![](/blog/changan/job_management.png)\\n\\n## **3.StreamPark\u843d\u5730\u5b9e\u8df5**\\n\\n\u4e3a\u4e86\u4f7f StreamPark \u5728\u65e5\u5e38\u751f\u4ea7\u5b9e\u8df5\u4e2d\u4e0e\u6211\u4eec\u7684\u9700\u6c42\u66f4\u52a0\u5951\u5408\uff0c\u6211\u4eec\u5bf9\u5176\u8fdb\u884c\u4e86\u4e00\u5b9a\u7684\u9002\u5e94\u6027\u6539\u9020\uff1a\\n\\n### **\u9002\u5e94\u6027\u6539\u9020**\\n\\n#### **\u544a\u8b66\u4fe1\u606f\u6539\u9020**\\n\\n\u957f\u5b89\u6c7d\u8f66\u9488\u5bf9 StreamPark \u7684\u4e00\u4e9b\u7279\u6027\u8fdb\u884c\u4e86\u9002\u5e94\u6027\u6539\u9020\uff0c\u6bd4\u5982\u9488\u5bf9 StreamPark \u7684\u544a\u8b66\u4e0d\u4ec5\u652f\u6301\u90ae\u4ef6\u3001\u98de\u4e66\u3001\u9489\u9489\u548c\u4f01\u4e1a\u5fae\u4fe1\u63a8\u9001\uff0c\u8fd8\u652f\u6301\u5c06\u544a\u8b66\u4fe1\u606f\u6309\u7167\u91cd\u8981\u7a0b\u5ea6\u8fdb\u884c\u5206\u7c7b\uff0c\u63a8\u9001\u5230\u4e0d\u540c\u7684\u544a\u8b66\u7fa4\u4e0e\u76f8\u5173\u4e2a\u4eba\uff0c\u65b9\u4fbf\u76f8\u5173\u8fd0\u7ef4\u4eba\u5458\u53ca\u65f6\u6355\u6349\u91cd\u8981\u544a\u8b66\u4fe1\u606f\uff0c\u5feb\u901f\u54cd\u5e94\u3002\\n\\n![](/blog/changan/alarm_information.png)\\n\\n#### **Nocos \u914d\u7f6e\u7ba1\u7406\u652f\u6301**\\n\\n\u4e3a\u89e3\u51b3 Flink \u5e94\u7528\u7684\u914d\u7f6e\u4fe1\u606f\u5199\u6b7b\u5728 Jar \u5305\u4e2d\uff0c\u7ed9\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u8fd0\u7ef4\u5e26\u6765\u7684\u4e0d\u4fbf\uff0c\u6211\u4eec\u5c06 Nacos \u4e0e StreamPark \u5e73\u53f0\u8fdb\u884c\u96c6\u6210\uff0c\u5e26\u6765\u4e86\u5982\u4e0b\u4f18\u52bf\uff1a\\n\\n\u2460 \u914d\u7f6e\u96c6\u4e2d\u7ba1\u7406\uff0c\u901a\u8fc7 StreamPark\uff0c\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u96c6\u4e2d\u7ba1\u7406\u6240\u6709 Flink \u5e94\u7528\u914d\u7f6e\u4fe1\u606f\uff0c\u5b9e\u73b0\u914d\u7f6e\u7684\u96c6\u4e2d\u7ba1\u7406\u548c\u66f4\u65b0\uff0c\u907f\u514d\u4e86\u5728\u591a\u4e2a\u5e73\u53f0\u95f4\u8fdb\u884c\u5207\u6362\u548c\u91cd\u590d\u64cd\u4f5c\u3002\u540c\u65f6\u52a0\u5f3a\u4e86\u914d\u7f6e\u7ba1\u7406\u7684\u5b89\u5168\u6027\uff0c\u5bf9\u8bbf\u95ee\u548c\u4fee\u6539\u914d\u7f6e\u7684\u64cd\u4f5c\u8fdb\u884c\u6743\u9650\u63a7\u5236\uff0c\u9632\u6b62\u672a\u7ecf\u6388\u6743\u7684\u8bbf\u95ee\u548c\u4fee\u6539\u3002\\n\\n\u2461 \u914d\u7f6e\u52a8\u6001\u66f4\u65b0\uff0cStreamPark \u4e0e Nacos \u7684\u96c6\u6210\u4f7f\u5f97 Flink \u5e94\u7528\u80fd\u591f\u53ca\u65f6\u83b7\u53d6\u6700\u65b0\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u5b9e\u73b0\u914d\u7f6e\u7684\u52a8\u6001\u66f4\u65b0\uff0c\u907f\u514d\u4e86\u4fee\u6539 Flink \u914d\u7f6e\u4fe1\u606f\u540e\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u3001\u53d1\u5e03\u3001\u91cd\u542f\u7b49\u7e41\u7410\u6d41\u7a0b\uff0c\u63d0\u9ad8\u4e86\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\u548c\u54cd\u5e94\u901f\u5ea6\u3002\u540c\u65f6\uff0cStreamPark \u53ef\u4ee5\u5229\u7528 Nacos \u7684\u914d\u7f6e\u63a8\u9001\u529f\u80fd\uff0c\u5b9e\u73b0\u914d\u7f6e\u4fe1\u606f\u7684\u81ea\u52a8\u5316\u66f4\u65b0\u3002\\n\\n![](/blog/changan/nocos.png)\\n\\n\\n### **\u9047\u5230\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848**\\n\\n\u6211\u4eec\u5f53\u524d\u79c1\u6709\u4e91\u5206\u6790\u96c6\u7fa4\u4f7f\u7528\u7684\u662f Cloudera CDP\uff0cFlink \u7248\u672c\u4e3a Cloudera Version 1.14\uff0c\u6574\u4f53 Flink \u5b89\u88c5\u76ee\u5f55\u4ee5\u53ca\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784\u4e0e\u793e\u533a\u7248\u672c\u6709\u8f83\u5927\u51fa\u5165\u3002\u76f4\u63a5\u6839\u636e StreamPark \u5b98\u65b9\u6587\u6863\u8fdb\u884c\u90e8\u7f72\uff0c\u5c06\u65e0\u6cd5\u914d\u7f6e Flink Home\uff0c\u4ee5\u53ca\u540e\u7eed\u6574\u4f53 Flink \u4efb\u52a1\u63d0\u4ea4\u5230\u96c6\u7fa4\u4e2d\uff0c\u56e0\u6b64\u9700\u8981\u8fdb\u884c\u9488\u5bf9\u5316\u9002\u914d\u96c6\u6210\uff0c\u5728\u6ee1\u8db3\u4f7f\u7528\u9700\u6c42\u4e0a\uff0c\u5c3d\u91cf\u63d0\u4f9b\u5b8c\u6574\u7684 StreamPark \u4f7f\u7528\u4f53\u9a8c\u3002\\n\\n#### **1. Flink\u96c6\u7fa4\u65e0\u6cd5\u8bbf\u95ee**\\n\\n\u2460 \u95ee\u9898\u63cf\u8ff0\uff1aCloudera Flink \u7684\u5b89\u88c5\u8def\u5f84\u4e0e\u5b9e\u9645\u63d0\u4ea4\u8def\u5f84\u4e0d\u4e00\u81f4\uff0c\u5b9e\u9645\u63d0\u4ea4\u8def\u5f84\u4e0b\u7f3a\u5c11 conf \u76ee\u5f55\u3002\\n\\n\u2461 \u89e3\u51b3\u529e\u6cd5\uff1a\u5b9e\u9645\u7684 flink \u63d0\u4ea4\u8def\u5f84\u5728\\n```shell\\n/opt/cloudera/parcels/Flink-$ {version}/lib/flink/bin/flink\\n```\\n\\n\u56e0\u6b64\u8def\u5f84\\n\\n```shell\\n/opt/cloudera/parcels/Flink-$ {version}/1ib/flink\\n```\\n\\n\u53ef\u4ee5\u7406\u89e3\u4e3a\u771f\u6b63\u7684 Flink Home\uff0c\u5177\u4f53\u67e5\u770b\u8be5\u76ee\u5f55\u4e0b\u5185\u5bb9\u3002\\n\\n![](/blog/changan/flink_home.png)\\n\\n\u53d1\u73b0\u7f3a\u5c11 conf \u76ee\u5f55\uff0c\u5018\u82e5\u914d\u7f6e\u8be5\u76ee\u5f55\u5728 StreamPark \u4e3a Flink Home \u5c06\u65e0\u6cd5\u8bbf\u95ee\u5230\u96c6\u7fa4\uff0c\u56e0\u6b64\u53ef\u8f6f\u8fde\u63a5 Flink \u914d\u7f6e\u6216\u8005\u5728\u8be5\u8def\u5f84\u4e0b\u7f16\u8f91\u96c6\u7fa4\u4e2d\u7684 Flink \u914d\u7f6e\u6587\u4ef6\u3002\\n\\n![](/blog/changan/conf.png)\\n\\n\u7efc\u4e0a\uff0c\u524d\u7f6e\u914d\u7f6e\u548c\u6253\u5305\u597d\u4ee3\u7801\uff08\u4ee3\u7801\u4e2d\u53ef\u80fd\u4f1a\u6d89\u53ca\u5230\u81ea\u5df1\u4f7f\u7528\u4e0a\u7684\u4f18\u5316\u4fee\u6539\uff09\u4e4b\u540e\uff0c\u53ef\u4ee5\u8fdb\u884c\u90e8\u7f72\u3002\\n\\n\u6ce8\u610f 2.0 \u7684\u7248\u672c\u6253\u5305\u7684\u8bdd\u76f4\u63a5\u6267\u884c\u6e90\u7801\u4e2d\u7684 build.sh \u5373\u53ef\uff0c\u9009\u62e9\u6df7\u5408\u90e8\u7f72\uff0c\u751f\u6210\u7684\u5305\u5728 dist \u76ee\u5f55\u4e0b\u3002\\n\\n#### **2. Hadoop \u73af\u5883\u68c0\u67e5\u5931\u8d25**\\n\\n![](/blog/changan/hadoop.png)\\n\\n```shell\\nvi /etc/profile\\n```\\n\\n\u89e3\u51b3\u529e\u6cd5\uff1a\u5728\u90e8\u7f72 StreamPark \u7684\u8282\u70b9\u4e0a\u6dfb\u52a0\u4e00\u4e0b hadoop \u73af\u5883\u5373\u53ef\u6dfb\u52a0\\n\\n```shell\\nexport HADOOP_CONF_DIR=/etc/hadoop/conf\\n```\\n\\nsource \u4f7f\u5176\u751f\u6548\uff0c\u91cd\u542f StreamPark \u5373\u53ef\u3002\\n\\n#### **3. HDFS \u7684 Flink\u8def\u5f84\u4e0b\u7f3a\u5c11 lib \u76ee\u5f55**\\n\\n\u89e3\u51b3\u529e\u6cd5\uff1a\u5728\u4e8e\u90e8\u7f72\u540e\u7684 StreamPark \u5728 HDFS \u4e0a\u7684\u5de5\u4f5c\u76ee\u5f55\u4e0a lib \u76ee\u5f55\u6ca1\u6709\u6b63\u5e38\u4e0a\u4f20\uff0c\u627e\u5230 HDFS \u4e0a\u521d\u59cb\u5316\u7684 StremPark work \u8def\u5f84\uff0c\u89c2\u5bdf\u4e00\u4e0b hdfs:///streampark/flink/.../\u4e0b\u7684 lib \u76ee\u5f55\u662f\u5426\u5b8c\u6574\uff0c\u4e0d\u5b8c\u6574\u7684\u8bdd\u624b\u52a8\u5c06\u672c\u5730 Flink Home \u76ee\u5f55\u4e0b\u7684 lib put \u4e0a\u53bb\u5373\u53ef\u3002\\n\\n![](/blog/changan/lib.png)\\n\\n#### **4. \u4f5c\u4e1a\u5931\u8d25\u540e\u81ea\u52a8\u62c9\u8d77\u5bfc\u81f4\u4f5c\u4e1a\u91cd\u590d**\\n\\nStreamPark \u81ea\u8eab\u5177\u5907\u4f5c\u4e1a\u4f7f\u7528\u540e\u91cd\u542f\u62c9\u53d6\u7684\u80fd\u529b\uff0c\u5f53\u68c0\u6d4b\u5230\u4f5c\u4e1a\u5931\u8d25\u540e\u4f1a\u91cd\u65b0\u62c9\u8d77\uff0c\u4f46\u5728\u5b9e\u8df5\u4e2d\u53d1\u73b0\u4f1a\u51fa\u73b0\u540c\u4e00\u4e2a\u5931\u8d25\u7684\u4f5c\u4e1a\u5728 YARN\u4e0a\u542f\u52a8\u591a\u4e2a\u7684\u60c5\u51b5\uff0c\u7ecf\u8fc7\u548c\u793e\u533a\u6c9f\u901a\uff0c\u5df2\u786e\u5b9a\u662f\u4e2a Bug\uff0c\u6700\u7ec8\u5728 2.1.3 \u4e2d\u89e3\u51b3\u4e86\u8be5 Bug\u3002\\n\\n## **4.\u5e26\u6765\u7684\u6536\u76ca**\\n\\n\u76ee\u524d\u957f\u5b89\u6c7d\u8f66\u5df2\u7ecf\u5728\u4e91\u4e0a\u751f\u4ea7/\u9884\u751f\u4ea7\u73af\u5883\u3001\u4e91\u4e0b\u751f\u4ea7/\u9884\u751f\u4ea7\u73af\u5883\u4e2d\u90e8\u7f72\u4e86 StreamPark\uff0c\u622a\u81f3\u53d1\u7a3f\u524d StreamPark \u5171\u7ba1\u7406\u4e86 150+ \u7684 Flink \u4f5c\u4e1a\uff0c\u5305\u62ec JAR \u548c\u4e0e SQL \u4f5c\u4e1a\u3002\u6d89\u53ca\u5229\u7528 Flink\u3001FlinkCDC \u7b49\u6280\u672f\uff0c\u4ece MySQL \u6216 kafka \u540c\u6b65\u6570\u636e\u5230 MySQL\u3001Doris\u3001HBase\u3001Hive \u7b49\u6570\u636e\u5e93\u3002\u540e\u7eed\u6240\u6709\u73af\u5883\u603b\u8ba1 3000+ \u7684 Flink \u4f5c\u4e1a\u4e5f\u4f1a\u5206\u6279\u8fc1\u81f3 StreamPark \u6765\u96c6\u4e2d\u7ba1\u7406\u3002\\n\\n**Apache StreamPark \u5e26\u6765\u7684\u6536\u76ca\u6700\u660e\u663e\u7684\u5c31\u662f\u5176\u63d0\u4f9b\u4e86\u4e00\u7ad9\u5f0f\u670d\u52a1\uff0c\u4e1a\u52a1\u5f00\u53d1\u540c\u5b66\u53ef\u4ee5\u5728 StreamPark \u4e0a\u5b8c\u6210\u4f5c\u4e1a\u5f00\u53d1\u7f16\u8bd1\u53d1\u5e03\uff0c\u65e0\u9700\u518d\u4f7f\u7528\u591a\u4e2a\u5de5\u5177\u5b8c\u6210\u4e00\u4e2a FlinkSQL \u4f5c\u4e1a\u5f00\u53d1\uff0c\u7b80\u5316\u4e86\u6574\u4e2a\u5f00\u53d1\u6d41\u7a0b**\uff0cStreamPark \u7ed9\u6211\u4eec\u5728 Flink \u4f5c\u4e1a\u5f00\u53d1\u90e8\u7f72\u4e0a\u8282\u7701\u4e86\u5f88\u591a\u65f6\u95f4\uff0c\u663e\u8457\u5730\u63d0\u5347\u4e86 Flink \u5e94\u7528\u5f00\u53d1\u6548\u7387\u3002\\n\\n![](/blog/changan/job.png)\"}]}}")}}]);